---
title: "Localstack 을 활용한 AWS SES 통합테스트"
authors: jake
tags: [localstack testing aws]
---

`localstack` 은 AWS 인프라 시뮬레이터로 Lambda, S3, Dynamodb, Kinesis, SQS, SNS 같은 서비스를 로컬 환경에 올릴 수 있다.
이번 글은 이메일 발송 서비스인 `SES` 를 테스트 해보기 위한 설정과정을 기술하고자 한다.

<!--truncate-->

## 환경

`node.js` 환경에서 `jest` 를 활용해 테스트 하였으며 `testcontainers` 라이브러리를 활용하였다.

> 본 글을 작성하는 시점에서는 `SES API` 버전이 v2 가 나왔지만 `localstack` 이 지원하지 않아 v1 을 이용하였다.

`localstack` 의 경우 예전 버전은 각 서비스 별로 접속 endpoint 가 달랐지만 지금은 하나로 통합되었다.
유료버전이 따로 있으며 더 많은 기능을 지원한다고 한다. `SES` 서비스는 무료버전도 지원한다.

## testcontainers

`testcontainers` 는 도커 컨테이너를 활용해 테스트를 위한 환경을 만들어주는 라이브러리로 코드로 컨테이너를 실행 및 종료 할 수 있는거라 보면된다.
여러 프로그래밍 언어를 지원하며 가장 많은 star 를 보유한 언어는 자바이다.
그래서 localstack 용 모듈을 따로 지원해 편하게 쓸 수 있지만 node.js 용은 없기에 번거로운 과정을 거쳐야한다.

## 참고자료

- testcontainers: https://www.testcontainers.org
- localstack: https://github.com/localstack/localstack
