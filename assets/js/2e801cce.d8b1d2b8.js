"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9450],{6029:function(n){n.exports=JSON.parse('{"blogPosts":[{"id":"2023/05/01/nest-js\uc758-injector\ub294-\uc5b4\ub5bb\uac8c-\uc0dd\uc131\uc790\uc5d0-\uc9c0\uc815\ud55c-\uc758\uc874\uc131-\ub300\uc0c1\uc744-\uc54c\uc544\ub0bc\uae4c","metadata":{"permalink":"/2023/05/01/nest-js\uc758-injector\ub294-\uc5b4\ub5bb\uac8c-\uc0dd\uc131\uc790\uc5d0-\uc9c0\uc815\ud55c-\uc758\uc874\uc131-\ub300\uc0c1\uc744-\uc54c\uc544\ub0bc\uae4c","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2023-05-01-nest-js-injector/index.mdx","source":"@site/blog/2023-05-01-nest-js-injector/index.mdx","title":"Nest.js\uc758 injector\ub294 \uc5b4\ub5bb\uac8c \uc0dd\uc131\uc790\uc5d0 \uc9c0\uc815\ud55c \uc758\uc874\uc131 \ub300\uc0c1\uc744 \uc54c\uc544\ub0bc\uae4c?","description":"Nest.js\uc758 injector\uac00 \uc0dd\uc131\uc790\uc5d0 \uc9c0\uc815\ud55c \uc8fc\uc785\ub300\uc0c1\uc744 \ucc3e\ub294 \ubc29\ubc95\uc744 \uc18c\uac1c\ud569\ub2c8\ub2e4","date":"2023-05-01T00:00:00.000Z","formattedDate":"2023\ub144 5\uc6d4 1\uc77c","tags":[{"label":"nest.js","permalink":"/tags/nest-js"},{"label":"injector","permalink":"/tags/injector"},{"label":"circular dependency","permalink":"/tags/circular-dependency"}],"readingTime":22.285,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Nest.js\uc758 injector\ub294 \uc5b4\ub5bb\uac8c \uc0dd\uc131\uc790\uc5d0 \uc9c0\uc815\ud55c \uc758\uc874\uc131 \ub300\uc0c1\uc744 \uc54c\uc544\ub0bc\uae4c?","slug":"2023/05/01/nest-js\uc758-injector\ub294-\uc5b4\ub5bb\uac8c-\uc0dd\uc131\uc790\uc5d0-\uc9c0\uc815\ud55c-\uc758\uc874\uc131-\ub300\uc0c1\uc744-\uc54c\uc544\ub0bc\uae4c","description":"Nest.js\uc758 injector\uac00 \uc0dd\uc131\uc790\uc5d0 \uc9c0\uc815\ud55c \uc8fc\uc785\ub300\uc0c1\uc744 \ucc3e\ub294 \ubc29\ubc95\uc744 \uc18c\uac1c\ud569\ub2c8\ub2e4","authors":"jake","tags":["nest.js","injector","circular dependency"]},"nextItem":{"title":"Open Telemetry\uc640 Effect-TS\ub85c Nest.js \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30","permalink":"/2023/03/01/Open-Telemetry\uc640-Effect-TS\ub85c-Nest.js-\uc560\ud50c\ub9ac\ucf00\uc774\uc158-\ubaa8\ub2c8\ud130\ub9c1\ud558\uae30"}},"content":"\ucd5c\uadfc Nest.js\uc758 \uae30\ubcf8 \uae30\ub2a5\uc744 \uc9c1\uc811 \uad6c\ud604\ud574\ubcf4\ub294 \uc2a4\ud130\ub514\ub97c \uc9c4\ud589\ud558\uc600\ub2e4.  \\n\uc2a4\ud130\ub514 \ubaa9\ud45c\ub294 Nest.js\uc758 `@Controller`, `@Injectable`, `@Module` \ub4f1\uc758 \ub370\ucf54\ub808\uc774\ud130\ub97c \ub9cc\ub4e4\uace0, DI\ub97c \uad6c\ud604\ud574 \uac04\ub2e8\ud55c API \uc11c\ubc84\ub97c \uc62c\ub9ac\ub294 \uae30\ub2a5\uc744 \uad6c\ud604\ud558\ub294 \uac83\uc774\uc5c8\ub2e4.  \\n\ub610\ud55c \ucd5c\ub300\ud55c Nest.js\uc758 \ucf54\ub4dc\ub97c \ucc38\uace0\ud558\uc9c0 \uc54a\uace0 \uc9c1\uc811 \uad6c\ud604\ud574\ubcf4\ub824\uace0 \ub178\ub825\ud588\ub2e4.\\n\\n\uc774 \uacfc\uc815\uc5d0\uc11c \uc758\uc874\uc131 \uc8fc\uc785\uc744 \uc704\ud55c Injector\ub97c \uad6c\ud604\ud558\uae30 \uc704\ud574 \ud2b9\uc815 \ud074\ub798\uc2a4\uac00 \uac00\uc9c0\uace0 \uc788\ub294 \uc758\uc874\uc131\uc744 \ud30c\uc545\ud558\ub294 \ubc29\ubc95\uc744 \ucc3e\uc544\uc57c\ud588\ub2e4.  \\n\ub610\ud55c \uad6c\ud604 \uacfc\uc815\uc5d0\uc11c \uc21c\ud658\ucc38\uc870 \ubb38\uc81c\ub97c \ud574\uacb0\ud574\uc57c\ud588\uace0, \uc774\ub97c \uc704\ud574 Nest.js\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 `forwardRef`\uac00 \uc5b4\ub5a4 \uc6d0\ub9ac\ub3c4 \ub3d9\uc791\ud558\ub294\uc9c0 \uc54c\uc544\ubcf4\uc558\ub2e4.\\n\\n\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 \uadf8 \uc911\uc5d0\uc11c Injector\uc758 \uc758\uc874\uc131 \uc8fc\uc785 \ub300\uc0c1\uc744 \ucc3e\ub294 \ubc29\ubc95\uc744 \uc18c\uac1c\ud55c\ub2e4.\\n\\n> \uc2a4\ud130\ub514 \uc800\uc7a5\uc18c: https://github.com/joyfulprogrammers/nest-clone\\n\\n\x3c!--truncate--\x3e\\n\\n## Injector\\n\\nNest.js\uc5d0\uc11c \uc758\uc874\uc131 \uc8fc\uc785\uc744 \uc704\ud55c \uc5ec\ub7ec \ud074\ub798\uc2a4\uac00 \uc874\uc7ac\ud558\ub294\ub370 \uadf8 \uc911\uc758 \ud558\ub098\uac00 Injector\uc774\ub2e4.  \\nInjector\ub294 Nest.js\uc758 \ub0b4\uc7a5 \ud074\ub798\uc2a4, \ubaa8\ub4c8\uc5d0 \ub4f1\ub85d\ud55c \uc5ec\ub7ec controllers, providers\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud55c\ub2e4.  \\n\ub9cc\uc57d \ud2b9\uc815 \ud074\ub798\uc2a4\uac00 \ub2e4\ub978 \ud074\ub798\uc2a4\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \ud544\uc694\ub85c \ud55c\ub2e4\uba74, Injector\ub294 \uc774\ub97c \uc0dd\uc131\ud558\uc5ec \uc8fc\uc785\ud55c\ub2e4.\\n\\n\uc77c\ubc18\uc801\uc73c\ub85c \uc758\uc874\uc131 \uc8fc\uc785 \ub300\uc0c1\uc740 \uc0dd\uc131\uc790\uc758 \ud30c\ub77c\ubbf8\ud130\ub97c \ud1b5\ud574 \uc9c0\uc815\ud558\ub294\ub370, \ub2e4\uc74c\uacfc \uac19\uc740 \ucf54\ub4dc\ub97c \uc790\uc8fc \ubcf4\uc558\uc744 \uac83\uc774\ub2e4.\\n\\n```ts\\nimport { Injectable } from \\"@nestjs/common\\";\\n\\n@Injectable()\\nexport class UserRepository {}\\n\\n@Injectable()\\nexport class UserService {\\n  constructor(private readonly userRepository: UserRepository) {}\\n}\\n```\\n\\n\uc704 \ucf54\ub4dc\uc5d0\uc11c \ub2e4\uc74c\uacfc \uac19\uc740 \uc758\ubb38\uc774 \uc0dd\uae38 \uc218 \uc788\ub2e4.\\n\\n> Nest.js\ub294 \uc5b4\ub5bb\uac8c `UserService`\uc758 \uc0dd\uc131\uc790 \ud30c\ub77c\ubbf8\ud130\uac00 `UserRepository`\uc778\uc9c0 \uc54c \uc218 \uc788\uc744\uae4c?\\n\\n\uc18c\uc2a4\ucf54\ub4dc \ub808\ubca8\uc5d0\uc11c\ub294 \uc0dd\uc131\uc790 \ud30c\ub77c\ubbf8\ud130 \ud0c0\uc785\uc774 `UserRepository`\uc778 \uac83\uc744 \uc54c \uc218 \uc788\uc9c0\ub9cc, \ub7f0\ud0c0\uc784\uc5d0\uc11c\ub294 \ud574\ub2f9 \ud30c\uc77c\uc774 JavaScript\ub85c \ucef4\ud30c\uc77c\ub418\uc5b4 \uc2e4\ud589\ud558\ubbc0\ub85c \ud0c0\uc785\uc5d0 \ub300\ud55c \uc815\ubcf4\uac00 \uc0ac\ub77c\uc9c4\ub2e4.  \\n\uc2e4\uc81c\ub85c \uc704 \ucf54\ub4dc\uc5d0\uc11c `@Injectable()` \ub370\ucf54\ub808\uc774\ud130\ub97c \uc81c\uac70\ud558\uace0 \ucef4\ud30c\uc77c\ud55c \uacb0\uacfc\ub97c \ud655\uc778\ud574\ubcf4\uba74 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n```js\\n\\"use strict\\";\\nclass UserRepository {}\\nclass UserService {\\n  constructor(userRepository) {\\n    this.userRepository = userRepository;\\n  }\\n}\\n```\\n\\n\uc704\uc640 \uac19\uc740 \ucf54\ub4dc\uc5d0\uc11c\ub294 \ud30c\ub77c\ubbf8\ud130\uc758 \ubcc0\uc218\uba85\ub9cc \ub0a8\uc544\uc788\uace0 \uc5b4\ub5a4 \uc778\uc2a4\ud134\uc2a4\ub97c \uc8fc\uc785\ud574\uc57c\ud558\ub294\uc9c0 \uc54c \uc218 \uc788\ub294 \uc815\ubcf4\uac00 \uc5c6\ub2e4.\\n\\n## reflect-metadata\\n\\n`reflect-metadata`\ub294 \ud074\ub798\uc2a4, \uc18d\uc131, \ub9e4\uac1c\ubcc0\uc218 \ub4f1\uc5d0 \uba54\ud0c0\ub370\uc774\ud130\ub97c \ucd94\uac00\ud560 \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc8fc\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc774\ub2e4.  \\nES6\uc5d0 \ucd94\uac00\ub41c `Reflect` \uac1d\uccb4\ub97c \ud655\uc7a5\ud574 \uba54\ud0c0\ub370\uc774\ud130\ub97c \ub2e4\ub8f0 \uc218 \uc788\ub294 \uba54\uc18c\ub4dc\ub97c \uc81c\uacf5\ud55c\ub2e4.  \\n\uc5ec\uae30\uc11c \ub9d0\ud558\ub294 \uba54\ud0c0\ub370\uc774\ud130\uc758 \uc608\ub85c \ud074\ub798\uc2a4 \uba54\uc18c\ub4dc, \uc0dd\uc131\uc790\uc758 \ud30c\ub77c\ubbf8\ud130 \ud0c0\uc785, \ubc18\ud658 \ud0c0\uc785\uc774 \uc788\ub2e4.  \\n\uc774\ub7ec\ud55c \ub370\uc774\ud130\ub294 **\ub7f0\ud0c0\uc784\uc5d0\uc11c \ud074\ub798\uc2a4\uc758 \ud504\ub85c\ud37c\ud2f0\ub098 \uba54\uc18c\ub4dc\uc758 \ud0c0\uc785\uc815\ubcf4**\ub97c \uc54c \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc900\ub2e4.\\n\\n\uc774 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 `class-transformer`, `TypeORM`, `TSyringe` \ub4f1\uc758 \ub370\ucf54\ub808\uc774\ud130 \uae30\ubc18 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0\uc11c \uc8fc\ub85c \uc0ac\uc6a9\ud558\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.  \\n\uc704 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \uc124\uce58 \uac00\uc774\ub4dc \ubb38\uc11c\ub97c \ubcf4\uba74 \ubcf4\ud1b5 \ub2e4\uc74c\uacfc \uac19\uc740 \uc548\ub0b4\uc0ac\ud56d\uc774 \uc788\ub2e4.\\n\\n- \uc9c4\uc785\ubd80 \ud30c\uc77c \uc0c1\ub2e8\uc5d0 \ub2e4\uc74c \ucf54\ub4dc\ub97c \ucd94\uac00\ud55c\ub2e4.\\n\\n```ts\\nimport \\"reflect-metadata\\";\\n```\\n\\n- `tsconfig.json`\uc758 `compilerOptions`\uc5d0 `experimentalDecorators`\uc640 `emitDecoratorMetadata`\ub97c \ud65c\uc131\ud654\ud55c\ub2e4.\\n\\n```json\\n{\\n  \\"compilerOptions\\": {\\n    \\"experimentalDecorators\\": true,\\n    \\"emitDecoratorMetadata\\": true\\n  }\\n}\\n```\\n\\n`experimentalDecorators`\ub294 \uc774\ub984 \uadf8\ub300\ub85c \uc2e4\ud5d8\uc801\uc778 \uae30\ub2a5\uc778 \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \ud574\uc8fc\ub294 \uc635\uc158\uc774\ub77c\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4.  \\n\ud558\uc9c0\ub9cc `emitDecoratorMetadata`\uac00 \uc5b4\ub5a4 \uc5ed\ud560\uc744 \ud558\uace0 `reflect-metadata`\ub97c import \ud574\uc57c\ud558\ub294 \uc774\uc720\ub97c \ud30c\uc545\ud558\uae30\ub294 \uc5b4\ub835\ub2e4.  \\n\uc774\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc744 \uc18c\uac1c\ud558\uae30 \uc804\uc5d0 \uba3c\uc800 \ub370\ucf54\ub808\uc774\ud130\uc5d0 \ub300\ud574 \uc54c\uc544\ubcf4\uc790.\\n\\n## \ub370\ucf54\ub808\uc774\ud130\\n\\n\ub370\ucf54\ub808\uc774\ud130\ub294 \ud074\ub798\uc2a4, \uc18d\uc131, \uba54\uc18c\ub4dc, \ub9e4\uac1c\ubcc0\uc218 \ub4f1\uc5d0 \ucd94\uac00\uc801\uc778 \uc815\ubcf4\ub97c \ubd80\uc5ec\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ud558\ub294 \uae30\ub2a5\uc774\ub2e4.  \\n\ub370\ucf54\ub808\uc774\ud130\ub294 `@` \uae30\ud638\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc801\uc6a9\ud560 \uc218 \uc788\uc73c\uba70, **\ud30c\uc77c \ub85c\ub4dc \uc2dc \uc989\uc2dc \uc2e4\ud589\ub418\ub294 \ud568\uc218**\ub77c\uace0 \uc0dd\uac01\ud558\uba74 \ub41c\ub2e4.\\n\\n```ts\\nconst classDecorator: ClassDecorator = (target) => {\\n  console.log(\\"class decorator\\", target.prototype);\\n};\\n\\nconst methodDecorator: MethodDecorator = (target, propertyKey) => {\\n  console.log(\\"method decorator\\", target, propertyKey);\\n};\\n\\nconst propertyDecorator: PropertyDecorator = (target, propertyKey) => {\\n  console.log(\\"property decorator\\", target, propertyKey);\\n};\\n\\nconst parameterDecorator: ParameterDecorator = (\\n  target,\\n  propertyKey,\\n  parameterIndex\\n) => {\\n  console.log(\\"parameter decorator\\", target, propertyKey, parameterIndex);\\n};\\n\\n@classDecorator\\nclass TestClass {\\n  @propertyDecorator\\n  public testProperty: string;\\n\\n  @methodDecorator\\n  public testMethod(@parameterDecorator testParameter: string): string {\\n    return testParameter;\\n  }\\n}\\n```\\n\\n\ud574\ub2f9 \ucf54\ub4dc\ub97c [TypeScript Playground](https://www.typescriptlang.org/play)\uc5d0\uc11c \uc2e4\ud589\ud574\ubcf4\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \uacb0\uacfc\ub97c \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n```\\n[LOG]: \\"property decorator\\",  TestClass: {},  \\"testProperty\\"\\n[LOG]: \\"parameter decorator\\",  TestClass: {},  \\"testMethod\\",  0\\n[LOG]: \\"method decorator\\",  TestClass: {},  \\"testMethod\\"\\n[LOG]: \\"class decorator\\",  TestClass: {}\\n```\\n\\n\uc0c1\ub2e8\uc5d0 \uc120\uc5b8\ud55c \ub370\ucf54\ub808\uc774\ud130\ub4e4\uc740 \uc0ac\uc2e4\uc0c1 \ubaa8\ub450 \ud568\uc218\uc774\uba70 \ud074\ub798\uc2a4\uc758 \ud2b9\uc815 \uc704\uce58\uc5d0 `@` \uae30\ud638\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc801\uc6a9\ud558\uc600\ub2e4.  \\n\ud574\ub2f9 \ud568\uc218\ub97c \ud638\ucd9c\ud558\ub294 \ucf54\ub4dc\uac00 \uc5c6\uc74c\uc5d0\ub3c4 \ubd88\uad6c\ud558\uace0, \ud568\uc218\uac00 \uc2e4\ud589\ub418\uc5b4 \ucf58\uc194\uc5d0 \ub85c\uadf8\uac00 \ucd9c\ub825\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.  \\n\uac01 \ud568\uc218\ub9c8\ub2e4 \ubc1b\ub294 \ud30c\ub77c\ubbf8\ud130\ub294 \uc870\uae08\uc529 \ub2e4\ub974\uc9c0\ub9cc \ubcf4\ud1b5 \ub2e4\uc74c\uacfc \uac19\uc740 \uc815\ubcf4\ub97c \uc804\ub2ec\ubc1b\ub294\ub2e4.\\n\\n- `target`: \ub370\ucf54\ub808\uc774\ud130\uac00 \uc801\uc6a9\ub41c \ud074\ub798\uc2a4\uc758 prototype \ub610\ub294 \ud074\ub798\uc2a4 \uc790\uccb4\\n- `propertyKey`: \ub370\ucf54\ub808\uc774\ud130\uac00 \uc801\uc6a9\ub41c \uc18d\uc131\uc758 \uc774\ub984\\n- `parameterIndex`: \ub370\ucf54\ub808\uc774\ud130\uac00 \uc801\uc6a9\ub41c \ud568\uc218, \uba54\uc18c\ub4dc \ub9e4\uac1c\ubcc0\uc218\uc758 \uc704\uce58(0\ubd80\ud130 \uc2dc\uc791)\\n\\n\ub370\ucf54\ub808\uc774\ud130 \uae30\ubc18 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub4e4\uc740 \uc704\uc640 \uac19\uc740 \uc815\ubcf4\ub97c `reflect-metadata`\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 `Reflect.defineMetadata` \uba54\uc18c\ub4dc\ub97c \ud1b5\ud574 \uba54\ud0c0\ub370\uc774\ud130\ub85c \uc800\uc7a5\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ud55c\ub2e4.\\n\\n> Reflect.defineMetadata \ub300\uc2e0 \uc790\uccb4 \ub0b4\ubd80 \uc804\uc5ed\ubcc0\uc218\ub97c \uc0ac\uc6a9\ud558\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub3c4 \uc788\ub2e4.\\n\\n```ts\\nconst injectable: ClassDecorator = (target) => {\\n  Reflect.defineMetadata(\\n    \\"key\\", // \uc774\ud6c4 \uba54\ud0c0\ub370\uc774\ud130\ub97c \uac00\uc838\uc624\uae30 \uc704\ud574 \uc0ac\uc6a9\ud560 \ud0a4\\n    \\"injectable\\", // \uc800\uc7a5\ud560 \uba54\ud0c0\ub370\uc774\ud130\\n    target // \uba54\ud0c0\ub370\uc774\ud130\ub97c \uc800\uc7a5\ud560 \ub300\uc0c1\\n  );\\n};\\n```\\n\\n\uc704\uc640 \uac19\uc740 \ucf54\ub4dc\uc5d0\uc11c\ub294 `target`\uc5d0 \ud574\ub2f9\ud558\ub294 \ud074\ub798\uc2a4 \uc678\uc5d0 \uc5bb\uc744 \uc218 \uc788\ub294 \uc815\ubcf4\uac00 \uc5c6\uae30\uc5d0 \uc720\uc6a9\ud55c \uba54\ud0c0\ud14c\uc774\ud130\ub97c \uc800\uc7a5\ud558\uae30 \uc5b4\ub835\ub2e4.  \\n\uadf8\ub798\uc11c \ubcf4\ud1b5 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub4e4\uc740 **\ub370\ucf54\ub808\uc774\ud130\ub97c \ubc18\ud658\ud558\ub294 \ud568\uc218\ub97c \ub9cc\ub4e4\uc5b4 \ud574\ub2f9 \ud568\uc218\uc758 \ud30c\ub77c\ubbf8\ud130\ub97c \ud65c\uc6a9\ud574 \ucd94\uac00 \uc815\ubcf4\ub97c \uc0ac\uc6a9\uc790\uac00 \uc804\ub2ec**\ud560 \uc218 \uc788\ub3c4\ub85d \ud55c\ub2e4.  \\n\ub2e4\uc74c\uc740 Nest.js\uc758 `@Module` \ub370\ucf54\ub808\uc774\ud130\uc758 \uc608\uc2dc\uc774\ub2e4.\\n\\n```ts\\nfunction Module(moduleMetadata: ModuleMetadata): ClassDecorator {\\n  return (target) => {\\n    Reflect.defineMetadata(\\"module\\", moduleMetadata, target);\\n  };\\n}\\n\\n// \ub77c\uc774\ube0c\ub7ec\ub9ac \uc0ac\uc6a9\uc790\uac00 \uc9c1\uc811 \ucd94\uac00 \uc815\ubcf4\ub97c \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4.\\n@Module({\\n  imports: [],\\n  providers: [],\\n  controllers: [],\\n})\\nclass AppModule {}\\n```\\n\\n:::info\\n\ud754\ud788 Nest.js\uc758 `@Module`, `@Injectable`\uc744 \ub370\ucf54\ub808\uc774\ud130\ub77c\uace0 \ubd80\ub974\uc9c0\ub9cc, \uc5c4\ubc00\ud788 \ub9d0\ud558\uba74 **\ub370\ucf54\ub808\uc774\ud130 \ud329\ud1a0\ub9ac**\uc774\ub2e4.\\n:::\\n\\n\uc800\uc7a5\ud55c \uba54\ud0c0\ub370\uc774\ud130\ub294 \uc774\ud6c4 `Reflect.getMetadata` \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud574 \uac00\uc838\uc62c \uc218 \uc788\ub2e4.\\n\\n```ts\\nconst moduleMetadata = Reflect.getMetadata(\\"module\\", AppModule);\\nconsole.log(moduleMetadata); // { imports: [], providers: [], controllers: [] }\\n```\\n\\n## \uc758\uc874\uc131 \uc815\ubcf4 \uc800\uc7a5\ud558\uae30\\n\\n\uc774\uc81c \ud3ec\uc2a4\ud2b8 \ucd08\ubc18\uc5d0 \uc5b8\uae09\ud55c \uc0c1\ud669\uc744 \uc0dd\uac01\ud574\ubcf4\uc790.\\n\\n```ts\\n@Injectable()\\nexport class UserService {\\n  constructor(private readonly userRepository: UserRepository) {}\\n}\\n```\\n\\n**`UserService` \ud074\ub798\uc2a4\uc758 \uc0dd\uc131\uc790\uc758 \uccab \ubc88\uc9f8 \ud30c\ub77c\ubbf8\ud130\uc5d0 `UserRepository`\ub97c \uc8fc\uc785\ud574\uc57c \ud55c\ub2e4\ub294 \uc815\ubcf4**\ub97c \uc800\uc7a5\ud558\ub824\uba74 \uc5b4\ub5bb\uac8c \ud574\uc57c\ud560\uae4c?\\n\\n\ub2e4\uc74c\uacfc \uac19\uc740 `@Inject` \ub370\ucf54\ub808\uc774\ud130 \ud329\ud1a0\ub9ac\ub97c \uc0dd\uac01\ud574 \ubcfc \uc218 \uc788\ub2e4.\\n\\n```ts\\nfunction Inject(cls: any): ParameterDecorator {\\n  return (target, propertyKey, parameterIndex) => {\\n    Reflect.defineMetadata(\\"inject\\", { parameterIndex, cls }, target);\\n  };\\n}\\n\\nexport class UserService {\\n  constructor(\\n    // target(UserService)\uc5d0 \\"inject\\"\ub97c \ud0a4\ub85c\ud558\ub294 \uba54\ud0c0\ub370\uc774\ud130({ parameterIndex: 0, cls: UserRepository }) \ub97c \uc800\uc7a5\\n    @Inject(UserRepository) private readonly userRepository: UserRepository\\n  ) {}\\n}\\n```\\n\\n\uc774\uc81c `Reflect.getMetadata`\ub97c \uc0ac\uc6a9\ud574 \ud574\ub2f9 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc788\ub2e4.\\n\\n```ts\\nconst injectMetadata = Reflect.getMetadata(\\"inject\\", UserService);\\nconsole.log(injectMetadata);\\n// { parameterIndex: 0, cls: [class UsersRepository] }\\n```\\n\\n:::info\\nNest.js\uc5d0\uc11c\ub294 \uac19\uc740 \uc774\ub984\uc758 `@Inject`\ub370\ucf54\ub808\uc774\ud130 \ud329\ud1a0\ub9ac\ub97c \uc81c\uacf5\ud558\uba70 \uc704 \ucf54\ub4dc\uc5d0\uc11c `inject`\uc5d0 \ud574\ub2f9\ud558\ub294 \uba54\ud0c0\ub370\uc774\ud130 \ud0a4\ub97c `SELF_DECLARED_DEPS_METADATA`\uc640 \uac19\uc740 \uc0c1\uc218\ub85c \uc815\uc758\ud574 \uc0ac\uc6a9\ud55c\ub2e4.  \\n\ub2e4\ub9cc \uc18d\uc131 \uae30\ubc18 \uc8fc\uc785\uac19\uc740 \uae30\ub2a5\uc744 \uc704\ud55c \ub85c\uc9c1\uc774 \uc788\uc5b4\uc11c \uc704 \ucf54\ub4dc\ubcf4\ub2e4 \ub354 \ubcf5\uc7a1\ud558\ub2e4.\\n:::\\n\\n\ud558\uc9c0\ub9cc \uc5ec\uc804\ud788 `@Inject` \ub370\ucf54\ub808\uc774\ud130 \ud329\ud1a0\ub9ac\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0\ub3c4 \uc5b4\ub5bb\uac8c \uc758\uc874\uc131 \uc815\ubcf4\ub97c \uc54c\uc544\ub0bc \uc218 \uc788\ub294\uc9c0\ub294 \uc758\ubb38\uc73c\ub85c \ub0a8\ub294\ub2e4.\\n\\n## emitDecoratorMetadata\\n\\n\uc774\uc81c tsconfig.json\uc758 `emitDecoratorMetadata` \uc635\uc158\uc744 \uc0b4\ud3b4\ubcf4\uc790.  \\n[\uacf5\uc2dd \ubb38\uc11c](https://www.typescriptlang.org/tsconfig#emitDecoratorMetadata)\ub97c \ubcf4\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \uc124\uba85\uc774 \uc788\ub2e4.\\n\\n_Enables experimental support for emitting type metadata for decorators which works with the module reflect-metadata._\\n\\n\uc124\uba85\uc744 \ubcf4\uba74 `reflect-metadata` \ub77c\uc774\ube0c\ub7ec\ub9ac\uc640 \ud568\uaed8 \uc0ac\uc6a9\ud558\ub294 \uc635\uc158\uc774\uba70 \ub370\ucf54\ub808\uc774\ud130\ub97c \uc704\ud55c \ud0c0\uc785 \uba54\ud0c0\ub370\uc774\ud130\ub97c \uc0dd\uc131\ud55c\ub2e4\uace0 \ud55c\ub2e4.  \\n\uc5ec\uae30\uc11c `\ud0c0\uc785 \uba54\ud0c0\ub370\uc774\ud130`\uac00 \ubb34\uc5c7\uc778\uc9c0 \uc54c\uc544\ubcf4\uae30 \uc704\ud574 [TypeScript Playground](https://www.typescriptlang.org/play)\uc5d0\uc11c \ub2e4\uc74c\uacfc \uac19\uc740 \ucf54\ub4dc\ub97c \uc791\uc131\ud574 js\ub85c \ucef4\ud30c\uc77c\ud55c \uacb0\uacfc\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n```ts\\nconst methodDecorator: MethodDecorator = (target, propertyKey) => {};\\n\\nclass TestClass {\\n  @methodDecorator\\n  public testMethod(foo: number, bar: string): boolean {\\n    return true;\\n  }\\n}\\n```\\n\\n:::tip\\n`TS Config` \ud0ed\uc5d0\uc11c \uc544\ub798 \uc635\uc158\ub4e4\uc744 \uccb4\ud06c\ud574\uc57c \ud55c\ub2e4.\\n![tsconfig-option](./tsconfig-option.png)\\n:::\\n\\n```js\\n\\"use strict\\";\\nvar __decorate =\\n  (this && this.__decorate) ||\\n  function (decorators, target, key, desc) {\\n    // \uad6c\ud604\ubd80 \ucf54\ub4dc \uc0dd\ub7b5\\n  };\\n// highlight-start\\nvar __metadata =\\n  (this && this.__metadata) ||\\n  function (k, v) {\\n    if (typeof Reflect === \\"object\\" && typeof Reflect.metadata === \\"function\\")\\n      return Reflect.metadata(k, v);\\n  };\\n// highlight-end\\nconst methodDecorator = (target, propertyKey) => {};\\nclass TestClass {\\n  testMethod(foo, bar) {\\n    return true;\\n  }\\n}\\n__decorate(\\n  [\\n    methodDecorator,\\n    // highlight-start\\n    __metadata(\\"design:type\\", Function),\\n    __metadata(\\"design:paramtypes\\", [Number, String]),\\n    __metadata(\\"design:returntype\\", Boolean),\\n    // highlight-end\\n  ],\\n  TestClass.prototype,\\n  \\"testMethod\\",\\n  null\\n);\\n```\\n\\n> \uc704 \ucf54\ub4dc\uc5d0\uc11c \uc74c\uc601\uc73c\ub85c \ud45c\uc2dc\ub41c \ubd80\ubd84\uc774 `emitDecoratorMetadata` \uc635\uc158\uc744 \uccb4\ud06c\ud588\uc744 \ub54c \ucd94\uac00\ub418\ub294 \ucf54\ub4dc\uc774\ub2e4.\\n\\n`__decorate` \ud568\uc218\ub294 \ub7f0\ud0c0\uc784\uc5d0 \uc989\uc2dc \uc2e4\ud589\ub418\uba70 \uccab \ubc88\uc9f8 \ud30c\ub77c\ubbf8\ud130\ub85c \uc804\ub2ec\ub41c \ub370\ucf54\ub808\uc774\ud130\ub4e4\uc744 \ucc28\ub840\ub300\ub85c \uc2e4\ud589\ud55c\ub2e4.  \\n\ud568\uc218\uc758 \ub098\uba38\uc9c0 \ud30c\ub77c\ubbf8\ud130\ub85c \uc9c0\uc815\ud55c \uac12\ub4e4(`TestClass.prototype`, `\\"testMethod\\"`, `null`)\uc740 \uac01 \ub370\ucf54\ub808\uc774\ud130\ub97c \ud638\ucd9c\ud560 \ub54c \ud574\ub2f9 \ub370\ucf54\ub808\uc774\ud130\uac00 \uc694\uad6c\ud558\ub294 \ud30c\ub77c\ubbf8\ud130\uc758 \uac1c\uc218\uc5d0 \ub9de\ucdb0 \uc778\uc790\ub85c \uc804\ub2ec\ud55c\ub2e4.\\n\\n`__metadata` \ud568\uc218\ub294 `Reflect`\uac1d\uccb4\uc5d0 `metadata`\ub77c\ub294 \ud568\uc218\uac00 \uc874\uc7ac\ud558\ub294\uc9c0 \ud655\uc778\ud558\uace0, \uc874\uc7ac\ud55c\ub2e4\uba74 `metadata` \ud568\uc218\ub97c \ud638\ucd9c\ud55c\ub2e4.  \\n\uc5ec\uae30\uc11c `Reflect.metadata`\ub294 `reflect-metadata`\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ub370\ucf54\ub808\uc774\ud130 \ud329\ud1a0\ub9ac\uc774\ub2e4.  \\n\ud574\ub2f9 \ud329\ud1a0\ub9ac\uac00 \ubc18\ud658\ud55c \ub370\ucf54\ub808\uc774\ud130\ub294 `Reflect.defineMetadata`\ub97c \uc0ac\uc6a9\ud574 \ud329\ud1a0\ub9ac\uc758 \ud30c\ub77c\ubbf8\ud130\ub85c \ubc1b\uc740 \uba54\ud0c0\ub370\uc774\ud130\ub97c \uc800\uc7a5\ud55c\ub2e4.\\n\\n\uc5ec\uae30\uc11c \uc911\uc694\ud55c \uc810\uc740 **`__metadata` \ud568\uc218\ub294 `reflect-metadata`\uac00 \uc0ac\uc804\uc5d0 import \ub418\uc5b4\uc788\uc9c0 \uc54a\uc73c\uba74 \uc544\ubb34\ub7f0 \ub3d9\uc791\uc744 \ud558\uc9c0 \uc54a\ub294\ub2e4**\ub294 \uac83\uc774\ub2e4.\\n\uc774\uac83\uc774 \ubc14\ub85c \ub370\ucf54\ub808\uc774\ud130 \uae30\ubc18 \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 `reflect-metadata`\ub97c \uc0ac\uc804\uc5d0 import\ud558\ub3c4\ub85d \uc548\ub0b4\ud558\ub294 \uc774\uc720\uc774\ub2e4.\\n\\n\ub9cc\uc57d `reflect-metadata`\uac00 import \ub418\uc5b4\uc788\ub294\uac8c \ud655\uc2e4\ud55c \uacbd\uc6b0\ub77c\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \ucf54\ub4dc\ub97c \uc791\uc131\ud574\ub3c4 \uac19\uc740 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\ub2e4.\\n\\n```ts\\nimport \\"reflect-metadata\\";\\n\\nconst methodDecorator: MethodDecorator = (target, propertyKey) => {};\\n\\nclass TestClass {\\n  @methodDecorator\\n  @Reflect.metadata(\\"design:type\\", Function)\\n  @Reflect.metadata(\\"design:paramtypes\\", [Number, String])\\n  @Reflect.metadata(\\"design:returntype\\", Boolean)\\n  public testMethod(foo: number, bar: string): boolean {\\n    return true;\\n  }\\n}\\n```\\n\\n`Reflect.metadata`\uc640 \ud329\ud1a0\ub9ac\uc5d0 \uc804\ub2ec\ud558\ub294 \ud30c\ub77c\ubbf8\ud130\ub294 ts compiler\uac00 **\uc6d0\ubcf8 \ucf54\ub4dc\uc5d0\uc11c \ub370\ucf54\ub808\uc774\ud130\uac00 \ub2ec\ub9b0\ud56d\ubaa9**\uc5d0 \ub300\ud574\uc11c\ub9cc \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ud574\uc900\ub2e4.  \\n\uc704 \ucf54\ub4dc\uc5d0\uc11c\ub294 `testMethod`\uc5d0 `@methodDecorator`\uac00 \ub2ec\ub824\uc788\uc73c\ubbc0\ub85c \uc0dd\uc131\ud574\uc8fc\uc5c8\ub2e4.  \\n\uc5b4\ub5a4 \ub370\ucf54\ub808\uc774\ud130\ub0d0\uc5d0 \ub530\ub77c \ub2e4\ub974\uc9c0\ub9cc \ubcf4\ud1b5 \ub2e4\uc74c\uacfc \uac19\uc740 \ud56d\ubaa9\uc744 \uc0dd\uc131\ud55c\ub2e4.\\n\\n- `design:type`: \ub370\ucf54\ub808\uc774\ud130\uac00 \ub2ec\ub9b0 \ud56d\ubaa9\uc758 \ud0c0\uc785\\n- `design:paramtypes`: \uba54\uc18c\ub4dc\uc758 \ud30c\ub77c\ubbf8\ud130 \ud0c0\uc785\ub4e4\uc744 \ub2f4\ub294 \ubc30\uc5f4\\n- `design:returntype`: \uba54\uc18c\ub4dc\uc758 \ubc18\ud658 \ud0c0\uc785\\n\\n\uc774\ub97c \ud1b5\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \ucf54\ub4dc\ub97c \ud1b5\ud574 `testMethod`\uc758 \uc5ec\ub7ec \ud0c0\uc785\uc815\ubcf4\ub97c \uc54c \uc218 \uc788\ub2e4.\\n\\n```ts\\nReflect.getMetadata(\\"design:type\\", TestClass.prototype, \\"testMethod\\");\\n// Function\\nReflect.getMetadata(\\"design:paramtypes\\", TestClass.prototype, \\"testMethod\\");\\n// [Number, String]\\nReflect.getMetadata(\\"design:returntype\\", TestClass.prototype, \\"testMethod\\");\\n// Boolean\\n```\\n\\n\ub9cc\uc57d \uc0dd\uc131\uc790 \ud30c\ub77c\ubbf8\ud130\uc5d0 \ub300\ud55c \ud0c0\uc785 \uc815\ubcf4\ub97c \uc54c\uace0 \uc2f6\ub2e4\uba74 \ud574\ub2f9 \ud074\ub798\uc2a4\uc5d0 `\ud074\ub798\uc2a4 \ub370\ucf54\ub808\uc774\ud130` \ub610\ub294 \uc0dd\uc131\uc790\uc5d0 `\ud30c\ub77c\ubbf8\ud130 \ub370\ucf54\ub808\uc774\ud130`\ub97c \uc801\uc6a9\ud55c\ub2e4.  \\n\uc774\ub97c \ud1b5\ud574 `Nest.js`\uc758 provider\ub85c \ub4f1\ub85d\ud560 \ud074\ub798\uc2a4\uc5d0 `@Injectable`\ub97c \ubd99\uc5ec\uc57c \ud558\ub294 \uc774\uc720\ub294 **`@Inject`\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc740 \uc0dd\uc131\uc790\uc758 \ud30c\ub77c\ubbf8\ud130 \ud0c0\uc785 \uc815\ubcf4\ub97c \ucd9c\ub825\ud558\uae30 \uc704\ud574**\uc11c\ub77c\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4.\\n\\n```ts\\n@Injectable()\\nclass TestService {\\n  constructor(private readonly repository: TestRepository) {}\\n}\\n```\\n\\n```js\\nTestService = __decorate(\\n  [\\n    classDecorator,\\n    // highlight-next-line\\n    __metadata(\\"design:paramtypes\\", [TestRepository]),\\n  ],\\n  TestService\\n);\\n```\\n\\n## Injector \ucf54\ub4dc \uc0b4\ud3b4\ubcf4\uae30\\n\\n\uc774\uc81c `Nest.js`\uc758 `Injector` \ud074\ub798\uc2a4\uac00 \uc704 \uae30\ub2a5\uc744 \uc5b4\ub5bb\uac8c \ud65c\uc6a9\ud558\ub294\uc9c0 \uc0b4\ud3b4\ubcf4\uc790.  \\n\ud574\ub2f9 \ud074\ub798\uc2a4\uc5d0\ub294 `loadInstance`\ub77c\ub294 \uba54\uc18c\ub4dc\uac00 \uc788\ub294\ub370, \uccab \ubc88\uc9f8\ub85c \ud30c\ub77c\ubbf8\ud130\ub85c \ubc1b\uc740 `wrapper`\uc5d0 \ub300\ud55c \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud558\uace0 \uc758\uc874\uc131\uc774 \uc788\ub2e4\uba74 \uc8fc\uc785\uae4c\uc9c0 \ud574\uc900\ub2e4.\\n\\n:::info\\n\uae00 \uc791\uc131 \uc2dc\uc810 [\ucd5c\uc2e0\ucee4\ubc0b](https://github.com/nestjs/nest/blob/85966703ac57a5b263ab5807033f6ac78548c0ef/packages/core/injector/injector.ts) \uae30\uc900\uc774\uba70 \ucd94\ud6c4 \ubcc0\uacbd\ub420 \uc218 \uc788\ub2e4.  \\n\uc774\ud574\ub97c \ub3d5\uae30\uc704\ud574 \ud575\uc2ec\ub85c\uc9c1\uc744 \ud30c\uc545\ud558\uae30 \uc704\ud55c \ucf54\ub4dc\ub9cc \ub0a8\uae30\uace0 \ub098\uba38\uc9c0\ub294 \uc0dd\ub7b5\ud558\uac70\ub098 \uac04\ub7b5\ud654\ud588\ub2e4.\\n:::\\n\\n```ts\\n  public async loadInstance<T>(\\n    wrapper: InstanceWrapper<T>,\\n    collection: Map<InstanceToken, InstanceWrapper>,\\n    moduleRef: Module,\\n    contextId = STATIC_CONTEXT,\\n    inquirer?: InstanceWrapper,\\n  ) {\\n    // \uc77c\ubd80 \ucf54\ub4dc \uc0dd\ub7b5\\n    const callback = async (instances: unknown[]) => {\\n      // \ucf5c\ubc31\uc744 \ud1b5\ud574 \ubc1b\uc740 \uc758\uc874\uc131\ub4e4\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \ud65c\uc6a9\ud574 wrapper\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud55c\ub2e4.\\n      await this.instantiateClass(\\n        instances,\\n        wrapper,\\n        targetWrapper,\\n        contextId,\\n        inquirer,\\n      );\\n    };\\n    // wrapper\uc758 \uc0dd\uc131\uc790\uc5d0 \uc9c0\uc815\ud55c \uc758\uc874\uc131\ub4e4\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \uac00\uc838\uc628\ud6c4 callback\uc73c\ub85c \ub118\uaca8\uc900\ub2e4.\\n    await this.resolveConstructorParams<T>(\\n      wrapper,\\n      moduleRef,\\n      inject as InjectionToken[],\\n      callback,\\n      contextId,\\n      wrapper,\\n      inquirer,\\n    );\\n  }\\n```\\n\\n`loadInstance`\uc758 \ud575\uc2ec\uae30\ub2a5\uc740 `resolveConstructorParams`\uc744 \ud1b5\ud574 \uc0dd\uc131\uc790\uc5d0 \uc9c0\uc815\ud55c \uc758\uc874\uc131\ub4e4\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \uac00\uc838\uc624\uace0 `instantiateClass`\ub97c \ud1b5\ud574 wrapper\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud558\ub294 \uac83\uc774\ub2e4.\\n\\n\uc774\uc81c `resolveConstructorParams`\uc758 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n```ts\\n  public async resolveConstructorParams<T>(\\n    wrapper: InstanceWrapper<T>,\\n    moduleRef: Module,\\n    inject: InjectorDependency[],\\n    callback: (args: unknown[]) => void | Promise<void>,\\n    contextId = STATIC_CONTEXT,\\n    inquirer?: InstanceWrapper,\\n    parentInquirer?: InstanceWrapper,\\n  ) {\\n    // wrapper\uc758 \uc758\uc874\uc131\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \uac00\uc838\uc628\ub2e4.\\n    const [dependencies] = this.getClassDependencies(wrapper);\\n\\n    const resolveParam = async (param: unknown, index: number) => {\\n      // \uc8fc\uc5b4\uc9c4 parma\uc5d0 \ub300\ud55c \uc778\uc2a4\ud134\uc2a4\ub97c \ub9cc\ub4e0 \ud6c4 \ubc18\ud658\ud558\ub294 \ucf54\ub4dc\uac00 \uc788\ub2e4.\\n    };\\n\\n    // \uc758\uc874\uc131\ub4e4\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \uac00\uc838\uc628\ub2e4.\\n    const instances = await Promise.all(dependencies.map(resolveParam));\\n\\n    // \uc758\uc874\uc131 \uc778\uc2a4\ud134\uc2a4\ub4e4\uc744 callback\uc73c\ub85c \ub118\uaca8\uc900\ub2e4.\\n    await callback(instances);\\n  }\\n```\\n\\n`getClassDependencies`\uba54\uc18c\ub4dc\uac00 \uc758\uc874\uc131\uc5d0 \ub300\ud55c \ud0c0\uc785\uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \uac83\uc73c\ub85c \uc720\ucd94\ud560 \uc218 \uc788\uc73c\ub2c8, \ud574\ub2f9 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n```ts\\n  public getClassDependencies<T>(\\n    wrapper: InstanceWrapper<T>,\\n  ): [InjectorDependency[], number[]] {\\n    // ctorRef\uc5d0\ub294 wrapper \ud074\ub798\uc2a4\uc758 prototype\uc774 \uc544\ub2c8\ub77c \ud074\ub798\uc2a4 \uadf8 \uc790\uccb4\uac00 \ud560\ub2f9\ub41c\ub2e4.\\n    const ctorRef = wrapper.metatype as Type<any>;\\n    return [\\n      this.reflectConstructorParams(ctorRef),\\n      this.reflectOptionalParams(ctorRef),\\n    ];\\n  }\\n\\n  public reflectConstructorParams<T>(type: Type<T>): any[] {\\n    // highlight-start\\n    const paramtypes = [\\n      // PARAMTYPES_METADATA\ub294 \'design:paramtypes\'\ub97c \uc758\ubbf8\ud55c\ub2e4.\\n      ...(Reflect.getMetadata(PARAMTYPES_METADATA, type) || []),\\n    ];\\n    // highlight-end\\n    const selfParams = this.reflectSelfParams<T>(type);\\n\\n    selfParams.forEach(({ index, param }) => (paramtypes[index] = param));\\n    return paramtypes;\\n  }\\n```\\n\\n\ud574\ub2f9 \uba54\uc18c\ub4dc\ub294 `reflectConstructorParams`\ub97c \ud638\ucd9c\ud558\uba70 \ud574\ub2f9 \uba54\uc18c\ub4dc\ub97c \ubcf4\uba74 `Reflect.getMetadata`\ub97c \ud1b5\ud574 `design:paramtypes`\uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4.\\n\\n## \ub354 \uc77d\uc744\uac70\ub9ac\\n\\n### useFactory\\n\\nNest.js\ub294 \ucee4\uc2a4\ud140 \ud504\ub85c\ubc14\uc774\ub354\ub97c \uc704\ud55c \uc5ec\ub7ec \uc635\uc158\uc744 \uc81c\uacf5\ud558\ub294\ub370 \uadf8 \uc911 \ud558\ub098\uac00 `useFactory`\uc774\ub2e4.  \\n\uc758\uc874\uc131 \uc778\uc2a4\ud134\uc2a4\ub97c \ub9cc\ub4dc\ub294 \ud329\ud1a0\ub9ac \ud568\uc218\ub97c \uc9c1\uc811 \uc9c0\uc815\ud560 \ub54c \uc0ac\uc6a9\ud558\uba70 \ub2e4\uc74c\uacfc \uac19\uc740 \ud615\ud0dc\ub85c \uc0ac\uc6a9\ud55c\ub2e4.\\n\\n```ts\\n@Module(\\n  providers: [\\n    {\\n      provide: SlackService,\\n      inject: [ConfigService],\\n      useFactory: (configService: ConfigService) => {\\n        return new SlackService(configService.get(\'SLACK_TOKEN\'));\\n      }\\n    }\\n  ]\\n)\\nclass AppModule {}\\n```\\n\\n`useFactory`\uc5d0 \uc9c0\uc815\ud55c \ud568\uc218\ub294 \ud30c\ub77c\ubbf8\ud130\ub97c \ud1b5\ud574 \uc778\uc2a4\ud134\uc2a4\ub97c \ub9cc\ub4e4\uae30 \uc704\ud574 \ud544\uc694\ud55c \uc758\uc874\uc131\uc744 \uc8fc\uc785\ubc1b\uc744 \uc218 \uc788\ub2e4.  \\n\uc774 \uacbd\uc6b0 `inject`\uc635\uc158\uc744 \ucd94\uac00\ub85c \uc0ac\uc6a9\ud574 `[ConfigService]`\ub97c \ub123\uc5b4\uc8fc\uc5b4\uc57c \ud558\uba70 \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud55c\ub2e4.\\n\\n\ud074\ub798\uc2a4\uc758 \uc0dd\uc131\uc790\uc5d0\ub294 \ud2b9\ubcc4\ud55c \uacbd\uc6b0\uac00 \uc544\ub2c8\ub77c\uba74 `@Inject`\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc544\ub3c4 \ub418\uc9c0\ub9cc, `useFactory`\uc5d0\uc11c\ub294 `inject`\uc635\uc158\uc774 \ud544\uc218\uc778 \uc774\uc720\ub97c \uc9c0\uae08\uae4c\uc9c0 \uc0b4\ud3b4\ubcf8 \ub0b4\uc6a9\uc744 \ud1b5\ud574 \uc774\ud574\ud560 \uc218 \uc788\ub2e4.  \\n\ubc14\ub85c `useFactory`\uc5d0 \uc9c0\uc815\ud55c \ud329\ud1a0\ub9ac\ub294 **\ub370\ucf54\ub808\uc774\ud130\ub97c \ub2ec \uc218 \uc5c6\ub294 \uc77c\ubc18 \ud568\uc218\uc774\uace0 \ub530\ub77c\uc11c \ub7f0\ud0c0\uc784\uc5d0 \ud30c\ub77c\ubbf8\ud130\uc758 \ud0c0\uc785\uc815\ubcf4\ub97c \uc54c \uc218 \uc5c6\uae30 \ub54c\ubb38**\uc774\ub2e4.\\n\\n### emitDecoratorMetadata\uc758 \uc81c\uc57d\uc0ac\ud56d\\n\\n\uc9c0\uae08\uae4c\uc9c0 `emitDecoratorMetadata`\uc635\uc158\uc744 \ud1b5\ud574 \uc5ec\ub7ec \ud0c0\uc785\uc815\ubcf4\ub97c \ucd94\uac00\ud574\uc8fc\ub294 \uac83\uc744 \uc0b4\ud3b4\ubcf4\uc558\ub294\ub370 \uba87 \uac00\uc9c0 \ud55c\uacc4\uac00 \uc874\uc7ac\ud55c\ub2e4.\\n\\n- `union type`\uc744 \uc0ac\uc6a9\ud55c \uacbd\uc6b0 `Object` \ud0c0\uc785\uc73c\ub85c \ucd9c\ub825\ud55c\ub2e4.\\n- `utility type`, `generic type`\uc744 \uc0ac\uc6a9\ud55c \uacbd\uc6b0 `Object` \ud0c0\uc785\uc73c\ub85c \ucd9c\ub825\ud55c\ub2e4.\\n- Promise, Array\ud0c0\uc785\uc744 \uc0ac\uc6a9\ud55c \uacbd\uc6b0 \ub0b4\ubd80 \ud0c0\uc785\uc5d0 \ub300\ud55c \uc815\ubcf4\ub294 \ucd94\uac00\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n\\n\ub2e4\uc74c\uacfc \uac19\uc740 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n```ts\\nconst methodDecorator: MethodDecorator = () => {}\\n\\nclass A {}\\n\\nclass Test {\\n  @methodDecorator\\n  method(\\n    a: string | number,\\n    b: Promise<string>,\\n    c: Array<string>,\\n    d: number[],\\n    e: Partial<A>\\n  ) {}\\n}\\n```\\n\\n\ucef4\ud30c\uc77c\ud55c \uacb0\uacfc\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n```js\\n__decorate([\\n    methodDecorator,\\n    __metadata(\\"design:type\\", Function),\\n    // highlight-next-line\\n    __metadata(\\"design:paramtypes\\", [Object, Promise, Array, Array, Object]),\\n    __metadata(\\"design:returntype\\", void 0)\\n], Test.prototype, \\"method\\", null);\\n```\\n\\n`design:paramtypes` \ud56d\ubaa9\uc744 \ubcf4\uba74 \uc815\ud655\ud55c \ud0c0\uc785\uc815\ubcf4\ub97c \ucd9c\ub825\ud574\uc8fc\uc9c0 \uc54a\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4.  \\n\uc774\ub7ec\ud55c \ubb38\uc81c\ub85c \uc778\ud574 \ub370\ucf54\ub808\uc774\ud130 \uae30\ubc18 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \ud329\ud1a0\ub9ac \ud30c\ub77c\ubbf8\ud130\uc5d0 \ud0c0\uc785\uc815\ubcf4\ub97c \uc0ac\uc6a9\uc790\uac00 \uc9c0\uc815\ud558\ub3c4\ub85d \uc548\ub0b4\ud55c\ub2e4.\\n\\n- class-transformer: `@Type(() => User)`\\n- @nestjs/swagger: `@ApiProperty({ type: () => User })`\\n- TypeORM: `@Column({ type: \'timestamp\' })`\\n- MikroORM: `@Property({ type: \'date\' })`\\n\\n### TypeScript 5.0 Decorator\\n\\n\ucd5c\uadfc TypeScript 5.0 \uc774\uc0c1\uc5d0\uc11c\ub294 \uc0c8\ub85c\uc6b4 \ud615\ud0dc\uc758 \ub370\ucf54\ub808\uc774\ud130\ub97c \uc9c0\uc6d0\ud55c\ub2e4.  \\n\ud558\uc9c0\ub9cc \uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 \ud574\ub2f9 \ub0b4\uc6a9\uc744 \ub2e4\ub8e8\uc9c0\ub294 \uc54a\uc558\ub294\ub370 \ub2e4\uc74c\uacfc \uac19\uc740 \uc774\uc720 \ub54c\ubb38\uc774\ub2e4.\\n\\n- \uba54\uc18c\ub4dc \ud30c\ub77c\ubbf8\ud130 \ub370\ucf54\ub808\uc774\ud130 \ubbf8\uc9c0\uc6d0\\n- `emitDecoratorMetadata` \uc635\uc158 \ubbf8\uc9c0\uc6d0\\n\\n\uba54\uc18c\ub4dc \ud30c\ub77c\ubbf8\ud130 \ub370\ucf54\ub808\uc774\ud130\ub294 \ud604\uc7ac `ECMAScript proposals stage 0` \ub2e8\uacc4\uc5d0 \uc788\uae30\uc5d0 \ubbf8\ub798\uc5d0 \uc9c0\uc6d0\ub420 \uac00\ub2a5\uc131\uc774 \uc788\ub2e4.  \\n\ud558\uc9c0\ub9cc `emitDecoratorMetadata` \uc635\uc158\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uae30\uc5d0, \uc0ac\uc6a9\uc790\uac00 \uba85\uc2dc\uc801\uc73c\ub85c \ud0c0\uc785\uc744 \uc9c0\uc815\ud574\uc8fc\uc9c0 \uc54a\ub294 \uc774\uc0c1 \ub7f0\ud0c0\uc784\uc5d0 \ud0c0\uc785\uc815\ubcf4\ub97c \uc54c \uc218 \uc788\ub294 \ubc29\ubc95\uc774 \uc5c6\ub294 \uc0c1\ud0dc\uc774\ub2e4.  \\n\uc774\ub7ec\ud55c \uc774\uc720\ub85c Nest.js\uc5d0\uc11c\ub294 \uae30\uc874 \ud615\ud0dc\uc758 \ub370\ucf54\ub808\uc774\ud130\ub97c \uc5ec\uc804\ud788 \uc0ac\uc6a9\ud560 \uac83\uc73c\ub85c \uc608\uc0c1\ud55c\ub2e4."},{"id":"2023/03/01/Open-Telemetry\uc640-Effect-TS\ub85c-Nest.js-\uc560\ud50c\ub9ac\ucf00\uc774\uc158-\ubaa8\ub2c8\ud130\ub9c1\ud558\uae30","metadata":{"permalink":"/2023/03/01/Open-Telemetry\uc640-Effect-TS\ub85c-Nest.js-\uc560\ud50c\ub9ac\ucf00\uc774\uc158-\ubaa8\ub2c8\ud130\ub9c1\ud558\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2023-03-01-open-telemetry-with-effect-ts/index.mdx","source":"@site/blog/2023-03-01-open-telemetry-with-effect-ts/index.mdx","title":"Open Telemetry\uc640 Effect-TS\ub85c Nest.js \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30","description":"Open Telemetry\uc640 Effect-TS\ub97c \ud65c\uc6a9\ud574 Nest.js \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\ub294 \ubc29\ubc95\uc744 \uc124\uba85\ud569\ub2c8\ub2e4.","date":"2023-03-01T00:00:00.000Z","formattedDate":"2023\ub144 3\uc6d4 1\uc77c","tags":[{"label":"effect-ts","permalink":"/tags/effect-ts"},{"label":"open-telemetry","permalink":"/tags/open-telemetry"},{"label":"nest.js","permalink":"/tags/nest-js"}],"readingTime":15.615,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Open Telemetry\uc640 Effect-TS\ub85c Nest.js \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30","slug":"2023/03/01/Open-Telemetry\uc640-Effect-TS\ub85c-Nest.js-\uc560\ud50c\ub9ac\ucf00\uc774\uc158-\ubaa8\ub2c8\ud130\ub9c1\ud558\uae30","description":"Open Telemetry\uc640 Effect-TS\ub97c \ud65c\uc6a9\ud574 Nest.js \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\ub294 \ubc29\ubc95\uc744 \uc124\uba85\ud569\ub2c8\ub2e4.","authors":"jake","tags":["effect-ts","open-telemetry","nest.js"]},"prevItem":{"title":"Nest.js\uc758 injector\ub294 \uc5b4\ub5bb\uac8c \uc0dd\uc131\uc790\uc5d0 \uc9c0\uc815\ud55c \uc758\uc874\uc131 \ub300\uc0c1\uc744 \uc54c\uc544\ub0bc\uae4c?","permalink":"/2023/05/01/nest-js\uc758-injector\ub294-\uc5b4\ub5bb\uac8c-\uc0dd\uc131\uc790\uc5d0-\uc9c0\uc815\ud55c-\uc758\uc874\uc131-\ub300\uc0c1\uc744-\uc54c\uc544\ub0bc\uae4c"},"nextItem":{"title":"Effect-TS\ub85c \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud558\uace0 \ud6a8\uc728\uc801\uc778 \ucf54\ub4dc \uc791\uc131\ud558\uae30","permalink":"/2023/02/11/Effect-TS\ub85c-\ud14c\uc2a4\ud2b8-\uac00\ub2a5\ud558\uace0-\ud6a8\uc728\uc801\uc778-\ucf54\ub4dc-\uc791\uc131\ud558\uae30"}},"content":"\uc694\uc998\uc5d0\ub294 \uc6f9 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc704\ud574 Datadog\uacfc \uac19\uc740 \ub3c4\uad6c\ub97c \uc0ac\uc6a9\ud55c\ub2e4.\\n\ucd5c\uadfc\uc5d0 \uc791\uc5c5\uc911\uc778 \uc0ac\uc774\ub4dc \ud504\ub85c\uc81d\ud2b8\ub3c4 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc704\ud574 Datadog\uc744 \uc0ac\uc6a9\ud558\ub824\uace0 \ud588\ub2e4.\\n\ud558\uc9c0\ub9cc APM(Application Performance Monitoring)\uacfc \uac19\uc740 \uae30\ub2a5\uc740 \uc720\ub8cc\ub85c \uc81c\uacf5\ub418\uae30\uc5d0 \ubb34\ub8cc \uc194\ub8e8\uc158\uc744 \ucc3e\uc544\ubcf4\uc558\ub2e4.\\n\\n\uadf8 \uacfc\uc815\uc5d0\uc11c [Open Telemetry](https://opentelemetry.io)\uc774\ub77c\ub294 \ud504\ub85c\uc81d\ud2b8\ub97c \uc54c\uac8c \ub418\uc5c8\ub2e4.\\n\uc624\ud508\uc18c\uc2a4\uc774\uba70 \ub0b4\uac00 \uc6d0\ud558\ub294 \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\uace0 \uc788\uc5c8\uace0, \ub610\ud55c \uc774\uc804 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c \uc18c\uac1c\ud55c [Effect-TS](https://github.com/Effect-TS/effect)\ub294 Open Telemetry\uc5d0 \ub300\ud55c \uc9c0\uc6d0\uc774 \uc798 \ub418\uc5b4\uc788\uc5c8\ub2e4.\\n\uadf8\ub798\uc11c \uc774\ub97c \ud65c\uc6a9\ud574 Nest.js \ud658\uacbd\uc5d0\uc11c \uac01 \uacc4\uce35\uc5d0 \ub300\ud55c span\uc744 aop\ub97c \ud1b5\ud574 \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ud558\uace0, \uc774\ub97c jaeger\ub85c \uc218\uc9d1\ud558\ub294 \ubc29\ubc95\uc744 \uc124\uba85\ud558\uace0\uc790 \ud55c\ub2e4.\\n\\n:::info\\n\ud3ec\uc2a4\ud2b8\uc5d0 \uc18c\uac1c\ud55c \ub0b4\uc6a9\uc740 \ub2e4\uc74c \uc800\uc7a5\uc18c\uc5d0 \uc801\uc6a9\ub418\uc5b4 \uc788\ub2e4.\\n[https://github.com/bae-no/bae-no-server](https://github.com/bae-no/bae-no-server)\\n:::\\n\\n\x3c!--truncate--\x3e\\n\\n## Open Telemetry\\n\\nOpenTelemetry\ub294 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc704\ud55c \uc624\ud508\uc18c\uc2a4 \ud504\ub85c\uc81d\ud2b8\ub85c metrics, traces, logs \ub4f1\uc758 \ub370\uc774\ud130\ub97c \uc218\uc9d1, \ucc98\ub9ac, \uc804\uc1a1\ud558\ub294 API, \ub77c\uc774\ube0c\ub7ec\ub9ac, \uc5d0\uc774\uc804\ud2b8 \ub4f1\uc744 \uc81c\uacf5\ud55c\ub2e4.\\n\ud504\ub85c\uc81d\ud2b8 \uc800\uc7a5\uc18c\ub97c \uc0b4\ud3b4\ubcf4\uba74 \ub2e4\uc591\ud55c \ud504\ub85c\uadf8\ub798\ubc0d \uc5b8\uc5b4\uc640 \ud504\ub808\uc784\uc6cc\ud06c\uc5d0 \ub300\ud55c \uc9c0\uc6d0\uc744 \uc81c\uacf5\ud558\uace0 \uc788\ub294\uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\ubaa8\ub2c8\ud130\ub9c1\uc5d0 \ub300\ud55c \ud45c\uc900\uc744 \uc81c\uacf5\ud558\uace0 \uc788\uc73c\uba70, Datadog, New Relic\uacfc \uac19\uc740 \uc11c\ube44\uc2a4\ub4e4\ub3c4 OpenTelemetry \ud3ec\ub9f7\uc744 \uc9c0\uc6d0\ud558\uace0 \uc788\ub2e4.\\n\\n![open-telemetry](./open-telemetry.png)\\n\\n\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 OpenTelemetry\uc758 tracing\uae30\ub2a5\uc744 \uc911\uc2ec\uc73c\ub85c \uc124\uba85\ud558\uace0\uc790 \ud55c\ub2e4.\\ntracing\uc740 \uac01 \uacc4\uce35\uc758 span\uc744 \uc0dd\uc131\ud558\uc5ec \uc5b4\ub5a4 \uc11c\ube44\uc2a4\uc758 \uc5b4\ub5a4 \uc601\uc5ed\uc5d0\uc11c \uc5f0\uc0b0\uc774 \uc5bc\ub9c8\ub098 \uc624\ub798 \uac78\ub838\ub294\uc9c0, \ub610\ub294 \uc5b4\ub5a4 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\ub294\uc9c0 \ucd94\uc801\ud560 \uc218 \uc788\uac8c\ud574\uc900\ub2e4.\\n\uc774\ub97c \ud1b5\ud574 \uc11c\ube44\uc2a4\uc758 \ubcd1\ubaa9\uc9c0\uc810\uc744 \ucc3e\uc544\ub0b4\uace0, \ubb38\uc81c\ub97c \ud574\uacb0\ud560 \uc218 \uc788\ub294 \ub2e8\uc11c\ub97c \uc5bb\uc744 \uc218 \uc788\ub2e4.\\n\\n![span](./span.png)\\n\\nOpen Telemetry\ub294 \ud558\ub098\uc758 \uc694\uccad\uc774 \uc5ec\ub7ec \uc11c\ube44\uc2a4\ub97c \uac70\uce58\uba74\uc11c \ucc98\ub9ac\ub418\ub294 \uacbd\uc6b0\ub3c4 \uace0\ub824\ud55c \ubd84\uc0b0 \ucd94\uc801\uc744 \uc9c0\uc6d0\ud55c\ub2e4.\\n\uc774\ub97c \uc704\ud574 \ud558\ub098\uc758 \uc694\uccad\uc740 \uace0\uc720\ud55c trace id\ub97c \uac00\uc9c0\uba70, \ub2e4\ub978 \uc11c\ube44\uc2a4\ub85c \uc774\ub3d9\ud560 \ub54c\ub9c8\ub2e4 HTTP \ud5e4\ub354\uc5d0 trace id\ub97c \ud3ec\ud568\uc2dc\ucf1c \uc804\ub2ec\ud55c\ub2e4.\\n\uc774\ub294 `propagation`\uc774\ub77c\ub294 \uc6a9\uc5b4\ub85c \ubd88\ub9ac\uba70 \uc0ac\uc6a9\uc790\ub294 Open Telemetry\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 SDK\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc190\uc27d\uac8c \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\\nSDK\ub97c \ud1b5\ud574 \uc218\uc9d1\ud55c \ub370\uc774\ud130\ub97c \uc2dc\uac01\ud654 \ud558\uae30\uc704\ud574 \ubcf4\ud1b5 `jaeger`, `zipkin`\uacfc \uac19\uc740 \uc2dc\uc2a4\ud15c\uc744 \uc0ac\uc6a9\ud55c\ub2e4.\\n\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 jaeger\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc744 \uc124\uba85\ud558\uace0\uc790 \ud55c\ub2e4.\\n\\n## Node.js\uc6a9 Open Telemetry \ud328\ud0a4\uc9c0 \uc124\uce58\ud558\uae30\\n\\n\uc774\uc81c \ubcf8\uaca9\uc801\uc73c\ub85c tracing\uc744 \uc704\ud55c \ud658\uacbd\uc744 \uad6c\uc131\ud574\ubcf4\uc790.\\n\uba3c\uc800 Node.js\uc6a9 Open Telemetry \ud328\ud0a4\uc9c0\uac00 \uaf64 \ub9ce\uc740\ub370 \ub2e4\uc74c \ud328\ud0a4\uc9c0\ub97c \uc124\uce58\ud55c\ub2e4.\\n\\n```shell\\npnpm install \\"@opentelemetry/api\\" \\\\\\n    \\"@opentelemetry/auto-instrumentations-node\\" \\\\\\n    \\"@opentelemetry/core\\" \\\\\\n    \\"@opentelemetry/exporter-jaeger\\" \\\\\\n    \\"@opentelemetry/exporter-trace-otlp-http\\" \\\\\\n    \\"@opentelemetry/instrumentation\\" \\\\\\n    \\"@opentelemetry/resources\\" \\\\\\n    \\"@opentelemetry/sdk-node\\" \\\\\\n    \\"@opentelemetry/sdk-trace-base\\" \\\\\\n    \\"@opentelemetry/sdk-trace-node\\" \\\\\\n    \\"@opentelemetry/semantic-conventions\\"\\n```\\n\\n\uc774\uc81c \ub2e4\uc74c\uacfc \uac19\uc740 \ucf54\ub4dc\ub97c \uc791\uc131\ud55c\ub2e4.\\n\\n```typescript\\nimport { diag, DiagConsoleLogger, DiagLogLevel } from \\"@opentelemetry/api\\";\\nimport { getNodeAutoInstrumentations } from \\"@opentelemetry/auto-instrumentations-node\\";\\nimport { W3CTraceContextPropagator } from \\"@opentelemetry/core\\";\\nimport { OTLPTraceExporter } from \\"@opentelemetry/exporter-trace-otlp-http\\";\\nimport { registerInstrumentations } from \\"@opentelemetry/instrumentation\\";\\nimport { Resource } from \\"@opentelemetry/resources\\";\\nimport { BatchSpanProcessor } from \\"@opentelemetry/sdk-trace-base\\";\\nimport { NodeTracerProvider } from \\"@opentelemetry/sdk-trace-node\\";\\nimport { SemanticResourceAttributes } from \\"@opentelemetry/semantic-conventions\\";\\n\\nexport const initTelemetry = (config: {\\n  appName: string;\\n  telemetryUrl: string;\\n}): NodeTracerProvider => {\\n  // open telemetry\ub97c \uc0ac\uc6a9\ud558\uba74\uc11c \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c\ub97c \ucf58\uc194\uc5d0 \ucd9c\ub825\ud574\uc900\ub2e4.\\n  diag.setLogger(new DiagConsoleLogger(), DiagLogLevel.WARN);\\n\\n  // span\uc5d0 \ucd94\uac00\ud560 \uba54\ud0c0\uc815\ubcf4\ub97c \uc124\uc815\ud55c\ub2e4. \ubcf4\ud1b5 \uc11c\ube44\uc2a4 \uc774\ub984\uc740 \ud544\uc218\ub85c \uc124\uc815\ud55c\ub2e4.\\n  const resource = Resource.default().merge(\\n    new Resource({\\n      [SemanticResourceAttributes.SERVICE_NAME]: config.appName,\\n      application: config.appName,\\n    })\\n  );\\n\\n  // tracing\uc744 \uc704\ud55c provider\ub97c \uc0dd\uc131\ud55c\ub2e4.\\n  const provider = new NodeTracerProvider({ resource });\\n\\n  // tarcing\uc815\ubcf4\ub97c OTLP\ud504\ub85c\ud1a0\ucf5c\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc804\uc1a1\ud558\uae30 \uc704\ud55c exporter\ub97c \uc0dd\uc131\ud55c\ub2e4.\\n  const exporter = new OTLPTraceExporter({\\n    url: config.telemetryUrl,\\n    timeoutMillis: 15000,\\n    concurrencyLimit: 10,\\n  });\\n\\n  // span\uc744 \ubc30\uce58\ub2e8\uc704\ub85c \uc804\uc1a1\ud558\ub294 span processor\ub97c \uc124\uc815\ud55c\ub2e4.\\n  provider.addSpanProcessor(\\n    new BatchSpanProcessor(exporter, {\\n      maxQueueSize: 2048,\\n      maxExportBatchSize: 512,\\n      scheduledDelayMillis: 5000,\\n      exportTimeoutMillis: 30000,\\n    })\\n  );\\n\\n  // W3C \ud45c\uc900 propagation\uc744 \uc0ac\uc6a9\ud55c\ub2e4.\\n  provider.register({\\n    propagator: new W3CTraceContextPropagator(),\\n  });\\n\\n  // Node.js\uc6a9 \uc5ec\ub7ec instrumentations \ud50c\ub7ec\uadf8\uc778 \ub4f1\ub85d\\n  registerInstrumentations({\\n    instrumentations: getNodeAutoInstrumentations(),\\n  });\\n\\n  return provider;\\n};\\n```\\n\\n`initTelemetry` \ud568\uc218\ub294 tracing\uc744 \uc704\ud55c \uc124\uc815\uc774 \uc788\uc73c\uba70 \uc6f9 \uc11c\ubc84\ub97c \uc2e4\ud589\ud558\uae30 \uc804\uc5d0 \ud638\ucd9c\ud574\uc57c \ud55c\ub2e4.\\n\uadf8\ub798\uc57c instrumentations \ud50c\ub7ec\uadf8\uc778\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 span \uc0dd\uc131\uc744 \uc704\ud55c \ucd08\uae30\uc138\ud305\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4.\\n\\n`@opentelemetry/auto-instrumentations-node`\ud328\ud0a4\uc9c0\ub294 Node.js\uc6a9 \uc5ec\ub7ec instrumentation \ud50c\ub7ec\uadf8\uc778\uc744 \ud558\ub098\ub85c \ubb36\uc5b4\ub193\uc740 \ud328\ud0a4\uc9c0\uc774\ub2e4.\\n\ud328\ud0a4\uc9c0 \uc124\uba85\uc744 \ubcf4\uba74 \uc5b4\ub5a4 \ud50c\ub7ec\uadf8\uc778\ub4e4\uc774 \uc788\ub294\uc9c0 \ud655\uc778\ud560 \uc218 \uc788\uc73c\uba70 \ub0b4\uac00 \uc6d0\ud558\ub294 \ud50c\ub7ec\uadf8\uc778\ub9cc \uace8\ub77c\uc11c \uc124\uc815\ud560 \uc218\ub3c4 \uc788\ub2e4.\\n\\n\uc704 \ud328\ud0a4\uc9c0\ub9cc \uc124\uce58\ud558\uba74 \uae30\ubcf8\uc801\uc778 Node.js\ub098 express \ud504\ub808\uc784\uc6cc\ud06c \uc774\ubca4\ud2b8\uc5d0 \ub300\ud55c span\uc774 \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ub41c\ub2e4.\\n\ud558\uc9c0\ub9cc \ub0b4\uac00 \uc791\uc131\ud55c \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ucf54\ub4dc\uc5d0 \ub300\ud55c span\uc740 \uc9c1\uc811 \uc791\uc131\ud574\uc57c \ud55c\ub2e4.\\n\\n## Effect\uc640 \ucee4\uc2a4\ud140 span\\n\\n\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 \ucee4\uc2a4\ud140 span\uc744 \uc0dd\uc131\ud558\uae30 \uc704\ud574 Effect-TS\ub97c \uc0ac\uc6a9\ud558\uc600\ub2e4.\\n\uc774\uc720\ub294 \uc0ac\uc774\ub4dc \ud504\ub85c\uc81d\ud2b8 \uc800\uc7a5\uc18c\uc758 \ubaa8\ub4e0 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uba54\uc18c\ub4dc\uac00 Promise\uac00 \uc544\ub2cc Effect\ub97c \ubc18\ud658\ud558\uae30 \ub54c\ubb38\uc774\ub2e4.\\n\\nEffect\ub294 Promise\uc640 \uc720\uc0ac\ud55c \ud0c0\uc785\uc774\uc9c0\ub9cc \uc989\uc2dc \ud3c9\uac00\ub418\uc9c0 \uc54a\ub294 \ud2b9\uc9d5\uc774 \uc788\uc73c\uba70, \uc5b4\ub5a4 \uc758\uc874\uc131\uc774 \ud544\uc694\ud558\uba70 \uc5b4\ub5a4 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\ub294\uc9c0 \ud0c0\uc785 \uc2dc\uc2a4\ud15c\uc73c\ub85c \ud45c\ud604\ud560 \uc218 \uc788\ub2e4.\\n\ud558\ub098\uc758 \uc694\uccad\uc740 \uc11c\ube44\uc2a4\uc758 \uac01 \uacc4\uce35(\ucee8\ud2b8\ub864\ub7ec, \uc11c\ube44\uc2a4, \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac)\uc5d0\uc11c \uc0c8\ub85c\uc6b4 Effect\ub97c \uc0dd\uc131\ud558\uace0 \uc774\ub294 \ucd5c\uc885\uc801\uc73c\ub85c \uc778\ud130\uc149\ud130\uc5d0\uc11c Promise\ub85c \ud3c9\uac00\ub41c\ub2e4.\\n\\n![effect](./effect.jpg)\\n\\n`Effect-ts`\uc5d0\uc11c\ub294 Effect\ub97c \uc0ac\uc6a9\ud558\ub294 \ub85c\uc9c1\uc5d0 \ub300\ud55c span\uc744 \uc0dd\uc131\ud558\uae30 \uc704\ud55c \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4.\\n\ud574\ub2f9 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\uba74 \uc0c8\ub85c\uc6b4 Effect\uac00 \uc0dd\uc131\ub418\ub294\ub370 `Has<Tracer>`\uac00 \uc758\uc874\uc131\uc5d0 \ucd94\uac00\ub41c\ub2e4.\\n\ud574\ub2f9 \uc758\uc874\uc131\uc740 \ud3c9\uac00\ud558\uae30 \uc9c1\uc804\uc5d0 \uc8fc\uc785\ud574\uc57c \ud558\ubbc0\ub85c \uc778\ud130\uc149\ud130\uc5d0\uc11c \uadf8 \uc5ed\ud560\uc744 \uc218\ud589\ud55c\ub2e4.\\n\\n## Effect\ub97c \uc704\ud55c tracer \uc124\uc815\\n\\n\uba3c\uc800 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 Open Telemetry \uc9c0\uc6d0\uc744 \uc704\ud574 `@effect-ts/otel` \ud328\ud0a4\uc9c0\ub97c \uc124\uce58\ud55c\ub2e4.\\n\\n```shell\\npnpm install \\"@effect-ts/core\\" \\"@effect-ts/otel\\"\\n```\\n\\n`initTelemetry` \ud568\uc218\ub97c \uc815\uc758\ud55c \uacf3\uc5d0 \uc774\uc5b4\uc11c \uc544\ub798 \ucf54\ub4dc\ub97c \ucd94\uac00\ud55c\ub2e4.\\n\\n```typescript\\nexport const NodeProviderLayer = (provider: NodeTracerProvider) =>\\n  L.fromEffect(OT.TracerProvider)(\\n    T.succeed({\\n      [OT.TracerProviderSymbol]: OT.TracerProviderSymbol,\\n      tracerProvider: provider,\\n    })\\n  );\\n\\nconst dummyProps = {} as any;\\nexport const DummyTracing = OT.Tracer.has({\\n  [OT.TracerSymbol]: OT.TracerSymbol,\\n  tracer: {\\n    startSpan: () => ({\\n      setAttribute: () => null,\\n      setStatus: () => null,\\n      end: () => null,\\n    }),\\n    ...dummyProps,\\n  },\\n});\\n\\n// \ud658\uacbd\ubcc0\uc218 \uc5ec\ubd80\uc5d0 \ub530\ub77c \uc2e4\uc81c tracer\ub97c \uc0ac\uc6a9\ud560\uc9c0 dummy tracer\ub97c \uc0ac\uc6a9\ud560\uc9c0 \uacb0\uc815\ud55c\ub2e4.\\nexport const liveTracer = process.env.OTLP_TRACE\\n  ? pipe(\\n      initTelemetry({\\n        // \uc11c\ube44\uc2a4 \uc774\ub984\\n        appName: \\"bae-no-server\\",\\n        // span \uc804\uc1a1\uc744 \uc704\ud55c jaeger \uc11c\ubc84 \uc8fc\uc18c\\n        telemetryUrl: \\"http://localhost:4318/v1/traces\\",\\n      }),\\n      (provider) =>\\n        T.provideSomeLayer(OT.LiveTracer[\\"<<<\\"](NodeProviderLayer(provider)))\\n    )\\n  : T.provide(DummyTracing);\\n```\\n\\nEffect-TS\uc5d0 \uad00\ub828\ub41c \uc124\uba85\uc740 \uc81c\uc678\ud558\uace0 \uc911\uc694\ud55c \uc810\uc740 `liveTracer`\ub97c \ub9cc\ub4e4\uc5b4 Effect\ub97c \ud3c9\uac00\ud560 \ub54c \uc8fc\uc785\ud558\uac8c \ub41c\ub2e4\ub294 \uac83\uc774\ub2e4.\\n\\n```typescript title=\\"EffectInterceptor.ts\\"\\nimport { T, pipe } from \\"@app/custom/effect\\";\\nimport { liveTracer } from \\"@app/monitoring/init\\";\\nimport type {\\n  CallHandler,\\n  ExecutionContext,\\n  NestInterceptor,\\n} from \\"@nestjs/common\\";\\nimport { Injectable } from \\"@nestjs/common\\";\\nimport type { Observable } from \\"rxjs\\";\\nimport { mergeMap } from \\"rxjs\\";\\n\\n@Injectable()\\nexport class EffectInterceptor implements NestInterceptor {\\n  intercept(_: ExecutionContext, next: CallHandler): Observable<any> {\\n    return next.handle().pipe(\\n      mergeMap(async (value) => {\\n        // \ucee8\ud2b8\ub864\ub7ec\uac00 \ubc18\ud658\ud55c \uac12\uc774 Effect\uc778 \uacbd\uc6b0\uc5d0\ub9cc \uc2e4\ud589\ud55c\ub2e4\\n        if (value instanceof T.Base) {\\n          // liveTracer\ub97c \uc8fc\uc785\ud558\uc5ec Effect\ub97c Promise\ub85c \ud3c9\uac00\ud55c\ub2e4.\\n          return pipe(value, liveTracer, T.runPromise);\\n        }\\n\\n        return value;\\n      })\\n    );\\n  }\\n}\\n```\\n\\n## \uc9c1\uc811 \ucee4\uc2a4\ud140 span \uc0dd\uc131\\n\\nspan\uc744 \uc704\ud55c tracer\uc5d0 \ub300\ud55c \uc124\uc815\uc740 \ub05d\ub0ac\uc73c\ub2c8 \uc774\uc81c \ucee4\uc2a4\ud140 span\uc744 \uc0dd\uc131\ud574\ubcf4\uc790.\\n\ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 `withSpan` \ud568\uc218\ub97c \uc9c1\uc811 \uc0ac\uc6a9\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \uc791\uc131\ud558\uba74 \ub41c\ub2e4.\\n\\n```typescript\\nimport { OT, T } from \\"@app/custom/effect\\";\\n\\nconst spanName = \\"my-span\\";\\nconst effect = T.succeedWith(() => {\\n  // \uc0dd\ub7b5\ub41c \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \ub85c\uc9c1...\\n  return \\"result\\";\\n});\\n\\nconst newEffect = OT.withSpan(spanName)(effect);\\n```\\n\\n\uc774\uc81c `newEffect`\ub97c \ud3c9\uac00\ud558\uba74 \uc791\uc131\ud55c \ub85c\uc9c1\uc5d0 \ub300\ud55c `my-span`\uc774\ub77c\ub294 \uc774\ub984\uc758 span\uc774 \uc0dd\uc131\ub420 \uac83\uc774\ub2e4.\\n\\n\uc774\ucc98\ub7fc \uac04\ub2e8\ud558\uac8c \ucee4\uc2a4\ud140 span\uc744 \uc791\uc131\ud560 \uc218 \uc788\uc9c0\ub9cc \uc6b0\ub9ac\uac00 \uc791\uc131\ud55c \ubaa8\ub4e0 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158 \uba54\uc18c\ub4dc\ub9c8\ub2e4 `withSpan`\uc744 \ucd94\uac00\ud558\uae30\uc5d0\ub294 \ubc88\uac70\ub86d\ub2e4.\\n\ubcf4\ud1b5 \uc2a4\ud504\ub9c1\uc5d0\uc11c\ub294 \uc774\ub97c\uc704\ud574 AOP\ub97c \uc0ac\uc6a9\ud558\ub294\ub370 Nest.js\uc5d0\uc11c\ub294 \uc81c\ub300\ub85c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n\ud558\uc9c0\ub9cc `DiscoveryService`\uc640 \ucee4\uc2a4\ud140 \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud558\uba74 \uc2a4\ud504\ub9c1\uc758 AOP\uc640 \uc720\uc0ac\ud55c \uae30\ub2a5\uc744 \uad6c\ud604\ud560 \uc218 \uc788\ub2e4.\\n\\n:::info\\nNest.js \uacf5\uc2dd\ubb38\uc11c\uc5d0\ub294 \uc778\ud130\uc149\ud130\uac00 AOP\uc5d0 \uc601\uac10\uc744 \ubc1b\uc558\ub2e4\uace0 \ub098\uc640\uc788\ub2e4.\\n\ud558\uc9c0\ub9cc \uc2a4\ud504\ub9c1\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 AOP\uc640\ub294 \ub2e4\ub974\uac8c \uc624\uc9c1 \ucee8\ud2b8\ub864\ub7ec \uc601\uc5ed\uc5d0\uc11c\ub9cc \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n:::\\n\\n## \ucee4\uc2a4\ud140 \ub370\ucf54\ub808\uc774\ud130\\n\\n\uba3c\uc800 AOP\ub97c \uc801\uc6a9\ud558\uae30 \uc704\ud574 \uc5b4\ub5a4 \uba54\uc18c\ub4dc\uc5d0 \uad00\uc2ec\uc0ac\ub97c \uc801\uc6a9\ud560\uc9c0 \uad6c\ubd84\ud560 \uc218 \uc788\ub294 \uae30\ub2a5\uc774 \ud544\uc694\ud558\ub2e4.\\n\uc774\ub97c \uc704\ud574 \ucee4\uc2a4\ud140 \ub370\ucf54\ub808\uc774\ud130\ub97c \ub9cc\ub4e4\uc5b4 \ud574\ub2f9 \ub370\ucf54\ub808\uc774\ud130\uac00 \ubd99\uc740 \ud56d\ubaa9\uc5d0\uac8c \uba54\ud0c0\ub370\uc774\ud130\ub97c \ucd94\uac00\ud55c\ub2e4.\\n\\n```typescript title=\\"Service.ts\\"\\nimport { applyDecorators, Injectable, SetMetadata } from \\"@nestjs/common\\";\\n\\nexport const SERVICE_METADATA = Symbol(\\"Service\\");\\n\\nexport const Service = (): ClassDecorator =>\\n  applyDecorators(SetMetadata(SERVICE_METADATA, \\"Service\\"), Injectable);\\n```\\n\\n```typescript title=\\"Repository.ts\\"\\nimport { applyDecorators, Injectable, SetMetadata } from \\"@nestjs/common\\";\\n\\nexport const REPOSITORY_METADATA = Symbol(\\"Repository\\");\\n\\nexport const Repository = (): ClassDecorator =>\\n  applyDecorators(SetMetadata(REPOSITORY_METADATA, \\"Repository\\"), Injectable);\\n```\\n\\n\ubcf4\ud1b5 Nest.js\uc5d0\uc11c\ub294 \ucee8\ud2b8\ub864\ub7ec\ub97c \uc81c\uc678\ud55c \ub098\uba38\uc9c0 \uacc4\uce35\uc758 \ud074\ub798\uc2a4\uc5d0\ub294 \ubaa8\ub450 `@Injectable` \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud55c\ub2e4.\\n\ud558\uc9c0\ub9cc Nest\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \ub0b4\ubd80\uc801\uc778 \uc778\uc2a4\ud134\uc2a4\ub3c4 `@Injectable`\uc774 \ubd99\uc5b4\uc788\uae30 \ub54c\ubb38\uc5d0 \uc774\ub97c \uad6c\ubd84\ud558\uae30 \uc704\ud574 `@Service`\uc640 `@Repository` \ub370\ucf54\ub808\uc774\ud130\ub97c \ub9cc\ub4e4\uc5c8\ub2e4.\\n\ubb3c\ub860 \ud558\ub098\uc758 \ucee4\uc2a4\ud140 \ub370\ucf54\ub808\uc774\ud130\ub85c\ub3c4 \ucda9\ubd84\ud788 \uad6c\ud604\ud560 \uc218 \uc788\uc9c0\ub9cc \uc2a4\ud504\ub9c1\ucc98\ub7fc \uacc4\uce35\ubcc4\ub85c \uace0\uc720\ud55c \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \ub354 \uba85\ud655\ud558\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4.\\n\\n\uc774\uc81c \uc0dd\uc131\ud55c \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud558\uc5ec \uac01 \uacc4\uce35 \ud074\ub798\uc2a4\uc758 `@Injectable` \ub370\ucf54\ub808\uc774\ud130\ub97c \ub300\uccb4\ud55c\ub2e4.\\n\\n```typescript\\n// @Injectable() -> @Service()\\n@Service\\nexport class UserService {\\n  // \uc0dd\ub7b5\\n}\\n```\\n\\n## AOP \uad6c\ud604\\n\\n\uc774\uc81c `DiscoveryService`\ub97c \uc0ac\uc6a9\ud55c AOP\ub97c \uad6c\ud604\ud574\ubcf4\uc790.\\n\\n```typescript title=\\"OTELModule.ts\\"\\nimport { OT, T } from \\"@app/custom/effect\\";\\nimport { REPOSITORY_METADATA } from \\"@app/custom/nest/decorator/Repository\\";\\nimport { SERVICE_METADATA } from \\"@app/custom/nest/decorator/Service\\";\\nimport type { OnModuleInit } from \\"@nestjs/common\\";\\nimport { Module } from \\"@nestjs/common\\";\\nimport {\\n  DiscoveryModule,\\n  DiscoveryService,\\n  MetadataScanner,\\n} from \\"@nestjs/core\\";\\nimport type { InstanceWrapper } from \\"@nestjs/core/injector/instance-wrapper\\";\\nimport { RESOLVER_TYPE_METADATA } from \\"@nestjs/graphql\\";\\n\\n@Module({\\n  imports: [DiscoveryModule],\\n})\\nexport class OTELModule implements OnModuleInit {\\n  constructor(\\n    private readonly discoveryService: DiscoveryService,\\n    private readonly metadataScanner: MetadataScanner\\n  ) {}\\n\\n  onModuleInit() {\\n    this.getProviders().forEach((provider) => {\\n      const instance = provider.instance;\\n      const prototype = Object.getPrototypeOf(instance);\\n      const methods = this.metadataScanner.getAllMethodNames(prototype);\\n\\n      methods.forEach((method) => {\\n        const spanName = `${provider.name}.${method}`;\\n\\n        // span\uc744 \ubd99\uc774\ub294 \ub85c\uc9c1\uc744 \ucd94\uac00\ud574\uc11c \uba54\uc18c\ub4dc\ub97c \uc624\ubc84\ub77c\uc774\ub4dc\ud55c\ub2e4.\\n        prototype[method] = this.wrap(prototype[method], spanName);\\n      });\\n    });\\n  }\\n\\n  private getProviders(): InstanceWrapper[] {\\n    // \ubaa8\ub4e0 \ucee8\ud2b8\ub864\ub7ec, \uc11c\ube44\uc2a4, \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac \uc778\uc2a4\ud134\uc2a4\ub97c \uac00\uc838\uc628\ub2e4.\\n    return this.discoveryService\\n      .getProviders()\\n      .filter((provider) => this.isSpanTarget(provider));\\n  }\\n\\n  private isSpanTarget(wrapper: InstanceWrapper): boolean {\\n    // \uc6d0\ud558\ub294 \uba54\ud0c0\ub370\uc774\ud130\uac00 \uc874\uc7ac\ud558\ub294\uc9c0 \ud655\uc778\ud55c\ub2e4.\\n    // RESOLVER_TYPE_METADATA\uc740 GraphQL\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \ubaa8\ub4e0 \ub9ac\uc878\ubc84 \ud074\ub798\uc2a4\uc5d0 \uc0dd\uc131\ub41c\ub2e4.\\n    return (\\n      wrapper.metatype &&\\n      (Reflect.hasMetadata(REPOSITORY_METADATA, wrapper.metatype as any) ||\\n        Reflect.hasMetadata(RESOLVER_TYPE_METADATA, wrapper.metatype as any) ||\\n        Reflect.hasMetadata(SERVICE_METADATA, wrapper.metatype as any))\\n    );\\n  }\\n\\n  private wrap(prototype: Record<any, any>, spanName: string) {\\n    const method = {\\n      // To keep function.name property\\n      [prototype.name]: function (...args: any[]) {\\n        const value = prototype.apply(this, args);\\n\\n        // Effect\ub97c \ubc18\ud658\ud55c \uacbd\uc6b0\uc5d0\ub9cc span\uc744 \uc0dd\uc131\ud55c\ub2e4.\\n        if (value instanceof T.Base) {\\n          return OT.withSpan(spanName)(value);\\n        }\\n\\n        return value;\\n      },\\n    }[prototype.name];\\n\\n    // \uae30\uc874\uc5d0 \uc874\uc7ac\ud55c metadata \ubcf5\uc0ac\\n    const source = prototype;\\n    Reflect.getMetadataKeys(source).forEach((key) => {\\n      const meta = Reflect.getMetadata(key, source);\\n      Reflect.defineMetadata(key, meta, method as any);\\n    });\\n\\n    return method;\\n  }\\n}\\n```\\n\\n`DiscoveryService`\uc758 `getProviders()` \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uba74 \ubaa8\ub4e0 \ucee8\ud2b8\ub864\ub7ec, \uc11c\ube44\uc2a4, \ub9ac\ud3ec\uc9c0\ud1a0\ub9ac \uc778\uc2a4\ud134\uc2a4\ub97c \uac00\uc838\uc62c \uc218 \uc788\ub2e4.\\n\uc774\ud6c4 `isSpanTarget()` \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc6d0\ud558\ub294 \uba54\ud0c0\ub370\uc774\ud130\uac00 \uc874\uc7ac\ud558\ub294 \ud56d\ubaa9\ub9cc \ud544\ud130\ub9c1\ud55c\ub2e4.\\n\uadf8\ub9ac\uace0 \uac01 \uc778\uc2a4\ud134\uc2a4\uc758 \uba54\uc18c\ub4dc\ub97c \uc21c\ud68c\ud558\uba74\uc11c `wrap()` \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc5ec \uba54\uc18c\ub4dc\ub97c \uc624\ubc84\ub77c\uc774\ub4dc\ud55c\ub2e4.\\n\uc774\uc81c \uc704 \ubaa8\ub4c8\uc744 `AppModule`\uc5d0 \ucd94\uac00\ud558\uba74 \ubaa8\ub4e0 \uc791\uc5c5\uc774 \uc644\ub8cc\ub41c\ub2e4.\\n\\n## jaeger \uc2e4\ud589\\n\\n\uc11c\ubc84\ub97c \uc2e4\ud589\ud558\uae30 \uc804\uc5d0 span\uc744 \uc218\uc9d1, \uc2dc\uac01\ud654 \ud560 \uc218 \uc788\ub294 jaeger\ub97c \uc2e4\ud589\ud574\uc57c \ud55c\ub2e4.\\ndocker-compose\ub97c \uc0ac\uc6a9\ud558\uba74 \uac04\ub2e8\ud558\uac8c \uc2e4\ud589\ud560 \uc218 \uc788\ub2e4.\\n\\n```yaml title=\\"docker-compose.yml\\"\\nservices:\\n  jaeger:\\n    image: jaegertracing/all-in-one\\n    container_name: jaeger\\n    ports:\\n      - 16686:16686\\n      - 4318:4318\\n    environment:\\n      - COLLECTOR_OTLP_ENABLED=true\\n```\\n\\nOTLP \ud504\ub85c\ud1a0\ucf5c\uc744 \uc0ac\uc6a9\ud558\ubbc0\ub85c 4318 \ud3ec\ud2b8\ub97c \uc5f4\uc5b4\uc8fc\uc5c8\uace0 \uc6f9\ud398\uc774\uc9c0\uc5d0 \uc811\uadfc\ud558\uae30 \uc704\ud574 16686 \ud3ec\ud2b8\ub3c4 \uc5f4\uc5b4\uc8fc\uc5c8\ub2e4.\\n\uc774\uc81c \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 jaeger\ub97c \uc2e4\ud589\ud55c\ub2e4.\\n\\n```bash\\ndocker-compose up -d\\n```\\n\\n## \ud655\uc778\\n\\n\uc774\uc81c \uc11c\ubc84\ub97c \uc2e4\ud589\ud558\uace0 \uc784\uc758\uc758 api\ub97c \uc2e4\ud589\ud558\uba74 jaeger \uc6f9\ud398\uc774\uc9c0(http://localhost:16686)\uc5d0\uc11c \ucee4\uc2a4\ud140 span\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n![jaeger](./jaeger.png)"},{"id":"2023/02/11/Effect-TS\ub85c-\ud14c\uc2a4\ud2b8-\uac00\ub2a5\ud558\uace0-\ud6a8\uc728\uc801\uc778-\ucf54\ub4dc-\uc791\uc131\ud558\uae30","metadata":{"permalink":"/2023/02/11/Effect-TS\ub85c-\ud14c\uc2a4\ud2b8-\uac00\ub2a5\ud558\uace0-\ud6a8\uc728\uc801\uc778-\ucf54\ub4dc-\uc791\uc131\ud558\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2023-02-11-write-testable-efficient-code-with-effect-ts/index.mdx","source":"@site/blog/2023-02-11-write-testable-efficient-code-with-effect-ts/index.mdx","title":"Effect-TS\ub85c \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud558\uace0 \ud6a8\uc728\uc801\uc778 \ucf54\ub4dc \uc791\uc131\ud558\uae30","description":"\ubd80\uc791\uc6a9\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \ub2e4\ub8e8\uae30 \uc704\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac\uc778 Effect-TS\uc758 \uba54\uc778\ud14c\uc774\ub108\uc758 \ubc1c\ud45c\uc601\uc0c1 \ub0b4\uc6a9\uc744 \uc815\ub9ac\ud574\ubcf4\uc558\ub2e4.","date":"2023-02-11T00:00:00.000Z","formattedDate":"2023\ub144 2\uc6d4 11\uc77c","tags":[{"label":"effect-ts","permalink":"/tags/effect-ts"},{"label":"fp-ts","permalink":"/tags/fp-ts"}],"readingTime":17.61,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Effect-TS\ub85c \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud558\uace0 \ud6a8\uc728\uc801\uc778 \ucf54\ub4dc \uc791\uc131\ud558\uae30","slug":"2023/02/11/Effect-TS\ub85c-\ud14c\uc2a4\ud2b8-\uac00\ub2a5\ud558\uace0-\ud6a8\uc728\uc801\uc778-\ucf54\ub4dc-\uc791\uc131\ud558\uae30","description":"\ubd80\uc791\uc6a9\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \ub2e4\ub8e8\uae30 \uc704\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac\uc778 Effect-TS\uc758 \uba54\uc778\ud14c\uc774\ub108\uc758 \ubc1c\ud45c\uc601\uc0c1 \ub0b4\uc6a9\uc744 \uc815\ub9ac\ud574\ubcf4\uc558\ub2e4.","authors":"jake","tags":["effect-ts","fp-ts"]},"prevItem":{"title":"Open Telemetry\uc640 Effect-TS\ub85c Nest.js \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30","permalink":"/2023/03/01/Open-Telemetry\uc640-Effect-TS\ub85c-Nest.js-\uc560\ud50c\ub9ac\ucf00\uc774\uc158-\ubaa8\ub2c8\ud130\ub9c1\ud558\uae30"},"nextItem":{"title":"fly.io \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 redis \uc0ac\uc6a9\ud558\uae30","permalink":"/2023/01/21/fly.io-\uc5d0\uc11c-\uc81c\uacf5\ud558\ub294-redis-\uc0ac\uc6a9\ud558\uae30"}},"content":"\ub300\uc218\uc801 \uc790\ub8cc\ud615\uc744 \uc81c\uacf5\ud558\ub294 Typescript \ub77c\uc774\ube0c\ub7ec\ub9ac\uc778 fp-ts\uc758 \uba54\uc778\ud14c\uc774\ub108 [Giulio Canti](https://github.com/gcanti)\uc758 \ucd5c\uadfc \ud65c\ub3d9\uc744 \ubcf4\uba74 [fp-ts](https://github.com/fp-ts)\uadf8\ub8f9 \ub0b4\uc758 \uc800\uc7a5\uc18c\uc5d0 \uc791\uc5c5\uc744 \ud558\ub294\uac83\uc744 \ubcfc \uc218 \uc788\ub2e4.\\n\\n![gcanti-profile](./gcanti-profile.png)\\n\\n\uadf8 \uc911\uc5d0\uc11c [core](https://github.com/fp-ts/core) \uc800\uc7a5\uc18c\ub97c \ubcf4\uba74 \ud574\ub2f9 \ud504\ub85c\uc81d\ud2b8\uc758 \ubaa9\uc801\uc774 `@effect` \uc0dd\ud0dc\uacc4\uc640\uc758 \ud1b5\ud569\uc744 \uc704\ud55c \uac83\uc774\ub77c\uace0 \ud55c\ub2e4.  \\ncore \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \ub300\uc218\uc801 \uc790\ub8cc\ud615\uc744 \uc704\ud55c \uc778\ud130\ud398\uc774\uc2a4\uc640 `Option`, `Either`\uc640 \uac19\uc740 \uae30\ubcf8 \uc790\ub8cc\ud615\uc744 \uc81c\uacf5\ud558\uba70 \ud6a8\uacfc\ub97c \ub2e4\ub8e8\uae30 \uc704\ud574 \uae30\uc874\uc5d0 \uc0ac\uc6a9\ud55c `Task`, `TaskEither`\ub294 effect\ub97c \uc0ac\uc6a9\ud560 \uac83\uc744 \uad8c\uc7a5\ud558\uace0 \uc788\ub2e4.\\n\\n\ud574\ub2f9 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0 \uad00\uc2ec\uc774 \uc0dd\uaca8 \uad00\ub828 \ubb38\uc11c\ub97c \ucc3e\uc544\ubcf4\uc558\uc9c0\ub9cc \uc790\ub8cc\uac00 \ub9ce\uc9c0 \uc54a\uc558\uace0 \uacf5\uc2dd\ubb38\uc11c\uc870\ucc28 \ub9e4\uc6b0 \ubd80\uc2e4\ud55c \uc0c1\ud0dc\uc774\ub2e4.  \\n\ub2e4\ud589\ud788 \ud504\ub85c\uc81d\ud2b8\uc758 \uc8fc\uc694 \uba54\uc778\ud14c\uc774\ub108\uc778 [mikearnaldi](https://github.com/mikearnaldi)\uac00 \ubc1c\ud45c\ud55c \uc5ec\ub7ec \uc601\uc0c1\uc774 \uc788\uc5b4 \uc774\ub97c \ud65c\uc6a9\ud558\uc600\ub2e4.  \\n\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 \ubc1c\ud45c \uc601\uc0c1\uc911 \ud558\ub098\uc778 [Write Efficient & Testable code with effect-ts](https://www.youtube.com/watch?v=Oy7fr2_WBFI)\uc758 \ub0b4\uc6a9\uc744 \uc815\ub9ac\ud574\ubcf4\uc558\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud55c \ucf54\ub4dc\\n\\n\ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud55c \ucf54\ub4dc\ub294 \ubcf4\ud1b5 \ub2e4\uc74c\uacfc \uac19\uc740 \uc131\uc9c8\uc774 \uc788\ub2e4.\\n\\n- \ubaa8\ub4c8\uc131\\n- \ub2e8\uc77c \ubaa9\uc801\\n- \uba85\uc2dc\uc801\\n- \ub0ae\uc740 \uacb0\ud569\ub3c4\\n- \uc21c\uc218\uc640 \ube44\uc21c\uc218\uc758 \ubd84\ub9ac\\n- \uac04\uacb0\ud568\\n\\n\ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc740 \ubcf4\ud1b5 \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud55c \ucf54\ub4dc\ub97c \uc791\uc131\uc744 \uc27d\uac8c \ub9cc\ub4e4\uc5b4\uc8fc\uc9c0\ub9cc \ud56d\uc0c1 \uadf8\ub7f0\uac83\uc740 \uc544\ub2c8\ub2e4.  \\n\uc798\ubabb \uc124\uacc4\ub41c \ud568\uc218\ud615 \ucf54\ub4dc\ub294 \uc5ec\uc804\ud788 \ub2e4\ub978 \ud328\ub7ec\ub2e4\uc784\uc73c\ub85c \ub9cc\ub4e0 \ucf54\ub4dc\ub9cc\ud07c\uc774\ub098 \uc5b4\ub824\uc6b8 \uc218 \uc788\ub2e4.  \\n`Effect-TS`\ub294 \ucc98\uc74c\ubd80\ud130 \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud55c \ucf54\ub4dc\ub97c \uc791\uc131\ud558\uae30 \uc704\ud574 \uc124\uacc4\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac\uc774\uba70, \uc2a4\uce7c\ub77c \uc5b8\uc5b4\uc758 [ZIO](https://zio.dev/)\ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c TypeScript\ub85c \ud3ec\ud305\ud55c \uac83\uc774\ub2e4.\\n\\n## \uc21c\uc218\ud558\uc9c0 \uc54a\uc740 \ud568\uc218\\n\\n\uc8fc\uc5b4\uc9c4 \uc774\ub984\uc744 \ucd9c\ub825\ud558\ub294 \uac04\ub2e8\ud55c hello world \ud568\uc218\ub97c \uc0dd\uac01\ud574\ubcf4\uc790.\\n\\n```ts\\nfunction helloWorld(name: string) {\\n  console.log(`hello world: ${name}!`);\\n}\\n```\\n\\n\uc704\uc640 \uac19\uc740 \ud568\uc218\ub294 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0\uc11c \ub9d0\ud558\ub294 \uc21c\uc218\ud568\uc218\uac00 \uc544\ub2c8\uba70 \ub2e4\uc74c\uacfc \uac19\uc740 \ubb38\uc81c\uac00 \uc788\ub2e4.\\n\\n- \uc804\uc5ed \uc0c1\ud0dc\uc778 `console`\uc744 \ubcc0\uacbd\ud55c\ub2e4.\\n- \uc720\uc758\ubbf8\ud55c \uac12\uc744 \ubc18\ud658\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n- \uad6c\ud604\ubd80\ub97c \ubcf4\uc9c0 \uc54a\uace0\ub294 \ud568\uc218\uac00 \uc5d0\ub7ec\ub97c \ub358\uc9c8 \uac00\ub2a5\uc131\uc774 \uc788\ub294\uc9c0 \uc54c \uc218 \uc5c6\ub2e4.\\n- \ub0b4\ubd80\uc801\uc73c\ub85c `console`\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\ub2e4\ub294 \uc0ac\uc2e4\uc744 \ub0b4\ubd80 \uad6c\ud604\uc744 \ubcf4\uc9c0 \uc54a\uace0\ub294 \uc54c \uc218 \uc5c6\ub2e4.\\n\\n\uc704\uc640 \uac19\uc740 \uc131\uc9c8\ub85c \uc778\ud574 \uc774 \ud568\uc218\ub294 \ud14c\uc2a4\ud2b8 \ud558\uae30 \uc5b4\ub835\ub2e4.\\n\\n## \uac1c\uc120\ud558\uae30\\n\\n\uc774 \ud568\uc218\uc758 \ubb38\uc81c\uc810\ub4e4\uc744 \ud558\ub098\uc529 \uac1c\uc120\ud574\ubcf4\uc790.\\n\\n### \uc720\uc758\ubbf8\ud55c \uac12\uc744 \ubc18\ud658\ud558\uae30\\n\\n\uc6b0\uc120 \uc774 \ud568\uc218\ub97c \ub2e4\uc74c\uacfc \uac19\uc774 \uc218\uc815\ud558\uba74 \uc720\uc758\ubbf8\ud55c \ubc18\ud658\uac12\uc744 \uac00\uc9c0\ub3c4\ub85d \ud560 \uc218 \uc788\ub2e4.\\n\\n```ts\\nfunction helloWorld(name: string) {\\n  return () => {\\n    console.log(`Hello world: ${name}!`);\\n  };\\n}\\n```\\n\\n\uc774\uc81c helloWorld \ud568\uc218\ub294 **\ucf58\uc194\uc5d0 \ubb38\uc790\uc5f4\uc744 \ucd9c\ub825\ud558\ub294 \ud6a8\uacfc\ub97c \uac00\uc9c4 \ud568\uc218**\ub97c \ubc18\ud658\ud55c\ub2e4.  \\n\ucf58\uc194\uc5d0 \ubb38\uc790\uc5f4\uc744 \ucd9c\ub825\ud558\uae30 \uc704\ud574\uc11c\ub294 helloWorld\uac00 \ubc18\ud658\ud55c \ud568\uc218\ub97c \uc2e4\ud589\ud574\uc57c \ud55c\ub2e4.\\n\\n```ts\\nconst call = helloWorld(\\"Mike\\");\\n\\ncall(); // Hello world: Mike!\\n```\\n\\n\ud568\uc218\ub97c \uac12\uc73c\ub85c \uc0dd\uac01\ud55c\ub2e4\uba74 \uc774 \ud568\uc218\ub294 \ub3d9\uc77c\ud55c name\uc744 \uc8fc\uba74 \ud56d\uc0c1 \ub3d9\uc77c\ud55c \ud6a8\uacfc\ub97c \uac00\uc9c4 \ud568\uc218\ub97c \ubc18\ud658\ud558\ubbc0\ub85c \uc21c\uc218\ud568\uc218\ub77c\uace0 \ud560 \uc218 \uc788\ub2e4.\\n\\n### \uc5d0\ub7ec \ubc1c\uc0dd \uac00\ub2a5\uc131\uc744 \uba85\uc2dc\uc801\uc73c\ub85c \ud45c\ud604\ud558\uae30\\n\\nhelloWorld \ud568\uc218\ub294 \uc5d0\ub7ec\ub97c \ub358\uc9c8 \uac00\ub2a5\uc131\uc774 \uc5c6\uc73c\uba70 Either\ub97c \uc0ac\uc6a9\ud574 \uba85\uc2dc\uc801\uc73c\ub85c \ud45c\ud604\ud560 \uc218 \uc788\ub2e4.\\n\\n```ts\\n// effect-ts\uc758 Either \ubaa8\ub4c8\uc744 import\ud55c\ub2e4.\\nimport * as E from \\"@effect-ts/core/Either\\";\\n\\nfunction helloWorld(name: string) {\\n  return (): E.Either<never, void> => {\\n    console.log(`Hello world: ${name}!`);\\n    return E.right(undefined); // \ud56d\uc0c1 \uc131\uacf5\ud558\ubbc0\ub85c right\ub97c \ubc18\ud658\ud55c\ub2e4.\\n  };\\n}\\n```\\n\\nhelloWorld\uac00 \ubc18\ud658\ud558\ub294 \ud6a8\uacfc\uc758 \ud0c0\uc785\uc740 `Either<never, void>`\uc778\ub370 generic type\uc758 \uccab\ubc88\uc9f8 \uc778\uc790\ub294 \uc5d0\ub7ec \ud0c0\uc785\uc744 \uc758\ubbf8\ud558\uba70 \ub450\ubc88\uc9f8 \uc778\uc790\ub294 \uc131\uacf5 \ud0c0\uc785\uc744 \uc758\ubbf8\ud55c\ub2e4.  \\n\uc5d0\ub7ec\uc758 \ud0c0\uc785\uc774 never\uc774\uba74 \uc5d0\ub7ec\ub97c \ub358\uc9c0\uc9c0 \uc54a\ub294\uac83\uc744 \uc758\ubbf8\ud55c\ub2e4.\\n\\n### console \uc758\uc874\uc131 \uc81c\uac70\ud558\uae30\\n\\nconsole\uacfc \uac19\uc740 \uc678\ubd80 \uc758\uc874\uc131\uc744 \ud568\uc218 \ub0b4\ubd80\uc5d0\uc11c \uc9c1\uc811 \uc0ac\uc6a9\ud558\uae30 \ubcf4\ub2e4 \ud568\uc218\uc758 \uc778\uc790\ub85c \ubc1b\uc544\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\\n```ts\\nimport * as E from \\"@effect-ts/core/Either\\";\\n\\n// IO \ud6a8\uacfc\ub97c \ud45c\ud604\ud558\uae30 \uc704\ud55c \ud0c0\uc785\\ntype IO<A> = () => A;\\n\\n// console \uc758\uc874\uc131\uc5d0 \ub300\ud55c \uc778\ud130\ud398\uc774\uc2a4\\ninterface ConsoleService {\\n  Console: {\\n    log: (message: string) => IO<E.Either<never, void>>;\\n  };\\n}\\n\\nfunction helloWorld(name: string) {\\n  return ({ Console }: ConsoleService) => Console.log(`Hello world: ${name}!`);\\n}\\n\\nconst program = helloWorld(\\"Mike\\");\\n\\n// \uc758\uc874\uc131 \uc8fc\uc785\\nconst call = program({\\n  Console: {\\n    log: (message: string) => () => {\\n      console.log(message);\\n      return E.right(undefined);\\n    },\\n  },\\n});\\n\\n// \ud6a8\uacfc \uc2e4\ud589\\ncall(); // Hello world: Mike!\\n```\\n\\n\uc774\uc81c helloWorld \ud568\uc218\ub294 \uc678\ubd80 \uc758\uc874\uc131\uc744 \uc778\uc790\ub85c \ubc1b\uc544\uc11c \uc0ac\uc6a9\ud558\ubbc0\ub85c \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud55c \ucf54\ub4dc\uac00 \ub41c\ub2e4.\\n\\n```ts\\nit(\\"test hello world\\", () => {\\n  // given\\n  const program = helloWorld(\\"Mike\\");\\n  const messages = [];\\n  const call = program({\\n    Console: {\\n      log: (message: string) => () => {\\n        messages.push(message);\\n        return E.right(undefined);\\n      },\\n    },\\n  });\\n\\n  // when\\n  call();\\n\\n  // then\\n  expect(messages).toEqual([\\"Hello world: Mike!\\"]);\\n});\\n```\\n\\n\ud558\uc9c0\ub9cc \uc774 \ud568\uc218\ub294 \uc758\uc874\uc131 \uc8fc\uc785\uacfc \ud6a8\uacfc \uc2e4\ud589\uc744 \uc704\ud574 \ub450 \ubc88\uc758 \uc5f0\uc18d\uc801\uc778 \ud568\uc218 \ud638\ucd9c\uc774 \ud544\uc694\ud558\ub2e4\ub294 \ub2e8\uc810\uc774 \uc788\ub2e4.  \\n\ub610\ud55c \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0\uc11c \uc8fc\ub85c \ud65c\uc6a9\ud558\ub294 \ud568\uc218\uc758 \ud569\uc131\uc744 \ud65c\uc6a9\ud558\uae30 \uc5b4\ub824\uc6b4 \uad6c\uc870\ub97c \uac00\uc9c0\uace0 \uc788\ub2e4.\\n\\n## Effect-TS \ud65c\uc6a9\ud558\uae30\\n\\n\uc774\uc81c \ubcf8\uaca9\uc801\uc73c\ub85c `Effect-TS`\ub97c \ud65c\uc6a9\ud574 helloWorld \ud568\uc218\ub97c \ub354 \uac1c\uc120\ud574\ubcf4\uc790.\\n\\n### \uc758\uc874\uc131\uacfc \uc5d0\ub7ec \ud0c0\uc785\uc744 \ud558\ub098\uc758 \ubc18\ud658\uac12\uc73c\ub85c \ud569\uce58\uae30\\n\\n\uc6b0\uc120 helloWorld \ud568\uc218\uc758 \uc758\uc874\uc131\uacfc \uc5d0\ub7ec \ud0c0\uc785\uc744 \ud558\ub098\uc758 \ubc18\ud658\uac12\uc73c\ub85c \ud569\uce58\ub294 \ubc29\ubc95\uc744 \uc54c\uc544\ubcf4\uc790.  \\n`Effect-TS`\uc5d0\uc11c\ub294 `Effect<R, E, A>`\ub77c\ub294 \ud0c0\uc785\uc744 \uc81c\uacf5\ud558\uba70 \uac01 generic type\uc758 \uc758\ubbf8\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n- `R` : \uc758\uc874\uc131 \ud0c0\uc785\\n- `E` : \uc5d0\ub7ec \ud0c0\uc785\\n- `A` : \uc131\uacf5 \ud0c0\uc785\\n\\n\uc774\ub294 fp-ts\uc758 `ReaderTaskEither<R, E, A>`\ud0c0\uc785\uacfc \uc720\uc0ac\ud558\uc9c0\ub9cc \ub354 type-safe\ud558\uba70 \ub2e4\uc591\ud55c combinator\ub97c \uc81c\uacf5\ud55c\ub2e4.  \\n\uc774\uc81c \uae30\uc874\uc5d0 \uc815\uc758\ud55c `ConsoleService` \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc218\uc815\ud574\ubcf4\uc790.\\n\\n```ts\\nimport * as T from \\"@effect-ts/core/Effect\\";\\n\\ninterface ConsoleService {\\n  log: (message: string) => T.Effect<unknown, never, void>;\\n}\\n```\\n\\nlog\uc758 \ubc18\ud658\ud0c0\uc785\uc774 Effect\ub85c \ubcc0\uacbd\ub418\uc5c8\uace0 \uc758\uc874\uc131 \ud0c0\uc785\uc774 `unknown`\uc774\ub2e4.  \\n\uc774\ub294 \ud6a8\uacfc\ub97c \uc2e4\ud589\ud558\uae30 \uc704\ud574 \uc5b4\ub5a0\ud55c \uc758\uc874\uc131\ub3c4 \uc694\uad6c\ud558\uc9c0 \uc54a\ub294\ub2e4\ub294 \uc758\ubbf8\uc774\ub2e4.  \\nconsole\uc5d0 \uc758\uc874\ud558\ub294 Effect\ub97c \ub9cc\ub4e4\uae30 \uc704\ud574\uc11c\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ucd94\uac00\uc801\uc778 \ubaa8\ub4c8\uc744 \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4.\\n\\n```ts\\nimport * as T from \\"@effect-ts/core/Effect\\";\\nimport { tag } from \\"@effect-ts/core/Has\\";\\n\\ninterface ConsoleService {\\n  log: (message: string) => T.Effect<unknown, never, void>;\\n}\\n\\n// \uc11c\ube44\uc2a4 \ud0dc\uadf8 \ub9cc\ub4e4\uae30\\nconst ConsoleService = tag<ConsoleService>();\\n\\n// \uc11c\ube44\uc2a4 \ud0dc\uadf8\ub97c \ud1b5\ud574 Effect \uc0dd\uc131\ud558\ub294 \ud568\uc218 \uad6c\ud604\\nconst log = (message: string) =>\\n  T.accessServiceM(ConsoleService)((service) => service.log(message));\\n```\\n\\n`tag`\ud568\uc218\ub294 \ud504\ub85c\uadf8\ub7a8 \ud658\uacbd\uc5d0\uc11c \ud544\uc694\ud55c \uc5ec\ub7ec \uc758\uc874\uc131(\uc11c\ube44\uc2a4)\ub4e4\uc744 \uad6c\ubd84\ud558\uae30 \uc704\ud55c \ud0dc\uadf8\ub97c \ub9cc\ub4e4\uc5b4\uc900\ub2e4.  \\n`accessServiceM`\uc758 \uc6a9\ub3c4\uac00 \uc774\ud574\ud558\uae30 \uc5b4\ub824\uc6b8 \uc218 \uc788\ub294\ub370 \uac04\ub2e8\ud788 \ub9d0\ud558\uba74 \uc778\uc790\ub85c \ubc1b\ub294 \uc11c\ube44\uc2a4 \ud0dc\uadf8\ub97c \ud65c\uc6a9\ud574 \uc0c8\ub85c\uc6b4 Effect\ub97c \uc0dd\uc131\ud558\ub294 \ud568\uc218\uc774\ub2e4.\\n\\n> \uc55e\uc73c\ub85c `tag \uc0dd\uc131` -> `accessServiceM \ud638\ucd9c` \uacfc\uc815\uc774 \ubc18\ubcf5\ub418\uae30 \ub54c\ubb38\uc5d0 Effect\ub97c \ub9cc\ub4e4\uae30 \uc704\ud55c boilerplate \ucf54\ub4dc\ub77c\uace0 \uc0dd\uac01\ud574\ub3c4 \ub41c\ub2e4.\\n\\n`log` \ud568\uc218\uc758 \ud0c0\uc785\uc744 \uc0b4\ud3b4\ubcf4\uba74 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n```ts\\nconst log: (message: stirng) => Effect<Has<ConsoleService>, never, void>;\\n```\\n\\n\ud568\uc218\uc758 \ubc18\ud658\ud0c0\uc785\uc758 \uc758\uc874\uc131\uc774 `Has<ConsoleService>`\ub85c \ubcc0\uacbd\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.  \\n`Has`\ud0c0\uc785\uc740 \uc5ec\ub7ec \uc758\uc874\uc131\uc774 \ube44\uc2b7\ud55c \ud568\uc218\ub97c \uac00\uc9c8 \ub54c \ud0c0\uc785\uc774 \uc81c\ub300\ub85c \ucd94\ub860\ub418\uc9c0 \uc54a\ub294 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ub41c\ub2e4.\\n\\n### \ud6a8\uacfc \uc2e4\ud589\ud558\uae30\\n\\n`Effect-TS`\ub294 \uc0dd\uc131\ud55c \ud6a8\uacfc\ub97c \uc2e4\ud589\ud558\uae30 \uc704\ud55c \ud568\uc218\ub97c \uc81c\uacf5\ud55c\ub2e4.\\n\\n```ts\\nimport { pipe } from \\"@effect-ts/core\\";\\nimport * as T from \\"@effect-ts/core/Effect\\";\\n\\nconst ConsoleService = tag<ConsoleService>();\\n\\nfunction helloWorld(name: string) {\\n  return log(`Hello world: ${name}!`);\\n}\\n\\n// T.Effect<Has<ConsoleService>, never, void>\\nconst program = helloWorld(\\"Mike\\");\\n\\npipe(\\n  program,\\n  // \uc758\uc874\uc131 \uc81c\uacf5\ud558\uae30\\n  T.provideService(ConsoleService)({\\n    log: (message: string) => T.succeedWith(() => console.log(message)),\\n  }),\\n  // promise\ub85c \ubcc0\ud658\\n  T.runPromise\\n);\\n```\\n\\n`provideService`\ub294 \uc8fc\uc5b4\uc9c4 \ud6a8\uacfc\uc5d0 \uc758\uc874\uc131\uc744 \uc81c\uacf5\ud558\ub294 \ud568\uc218\uc774\uba70, `runPromise`\ub294 \uc8fc\uc5b4\uc9c4 \ud6a8\uacfc\ub97c \uc2e4\ud589\ud558\ub294 Promise\ub97c \uc0dd\uc131\ud55c\ub2e4.  \\n\ub9cc\uc57d \uc758\uc874\uc131\uc744 \uc81c\uacf5\ud558\uc9c0 \uc54a\uace0 \ubc14\ub85c `runPromise`\ub97c \uc0ac\uc6a9\ud560 \uc2dc \ud0c0\uc785\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uac8c \ub41c\ub2e4.\\n\\n![type-error](./type-error.png)\\n\\n### \ud6a8\uacfc \ud569\uc131\\n\\n\uc9c0\uae08\uae4c\uc9c0 \ub2e8\uc77c \ud6a8\uacfc\ub97c \uc0dd\uc131\ud558\uace0 \uc2e4\ud589\ud558\ub294 \ubc29\ubc95\uc744 \uc0b4\ud3b4\ubcf4\ub294\ub370 \uc77c\ubc18\uc801\uc778 \ud504\ub85c\uadf8\ub7a8\uc5d0\uc11c\ub294 \uc5ec\ub7ec \ud6a8\uacfc\uac00 \ud544\uc694\ud55c \uacbd\uc6b0\uac00 \ub9ce\ub2e4.  \\n\uc774\ub7f0 \uacbd\uc6b0\uc5d0\ub294 \uc5ec\ub7ec \ud6a8\uacfc\ub97c \ud569\uc131\ud558\uc5ec \ucd5c\uc885\uc801\uc73c\ub85c \ud558\ub098\uc758 \ud6a8\uacfc\ub97c \ub9cc\ub4e4\uc5b4 \uc2e4\ud589\ud558\uac8c \ub41c\ub2e4.\\n\\n\uc815\uc801 \ud0c0\uc785\uae30\ubc18 \ud568\uc218\ud615 \uc5b8\uc5b4\uc5d0\uc11c\ub294 \ubcf4\ud1b5 \ud6a8\uacfc\ub97c \ud3ec\ud568\ud558\ub294 \ud568\uc218\ub4e4 \uac04\uc758 \ud569\uc131\uc744 \uc704\ud574 `Monad`\ub97c \uc0ac\uc6a9\ud55c\ub2e4.  \\n`Effect`\ud0c0\uc785 \ub610\ud55c `Monad`\uad6c\ud604\uccb4\ub85c `chain`\ud568\uc218\ub97c \uc0ac\uc6a9\ud574 \ud569\uc131\ud560 \uc218 \uc788\ub2e4.\\n\\n```ts\\nimport { pipe } from \\"@effect-ts/core\\";\\nimport * as T from \\"@effect-ts/core/Effect\\";\\n\\n// Mike\uc640 John\uc744 \uc21c\ucc28\uc801\uc73c\ub85c \ucd9c\ub825\ud558\ub294 \ud6a8\uacfc\ub97c \ud569\uc131\\nconst program = pipe(\\n  helloWorld(\\"Mike\\"),\\n  T.chain(() => helloWorld(\\"John\\"))\\n);\\n\\npipe(\\n  program,\\n  T.provideService(ConsoleService)({\\n    log: (message: string) => T.succeedWith(() => console.log(message)),\\n  }),\\n  T.runPromise\\n);\\n// Hello world: Mike!\\n// Hello world: John!\\n```\\n\\n\ud568\uc218\ud615 \ud328\ub7ec\ub2e4\uc784\uc5d0 \uc775\uc219\ud558\uc9c0 \uc54a\ub294 \uc0ac\ub78c\uc5d0\uac8c\ub294 \uc704\uc640\uac19\uc740 \ud569\uc131\ud615\ud0dc\uac00 \uc774\ud574\ud558\uae30 \uc5b4\ub824\uc6b8 \uc218 \uc788\ub2e4.  \\n\uc774\ub97c \uc704\ud574 `Effect-TS`\uc5d0\uc11c\ub294 generator \ud568\uc218\ub97c \ud65c\uc6a9\ud574 \uba85\ub839\ud615 \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uc218 \uc788\ub3c4\ub85d \uc9c0\uc6d0\ud55c\ub2e4.  \\n\ub9c8\uce58 Promise\ub97c \uc0ac\uc6a9\ud560 \ub54c `async/await`\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uacfc \uac19\uc740 \ubc29\uc2dd\uc73c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\\n```ts\\nimport * as T from \\"@effect-ts/core/Effect\\";\\nimport { pipe } from \\"@effect-ts/core\\";\\n\\nconst program = T.gen(function* (_) {\\n  yield* _(helloWorld(\\"Mike\\"));\\n  yield* _(helloWorld(\\"John\\"));\\n  yield* _(helloWorld(\\"sam\\"));\\n});\\n\\n// Effect\ub97c Promise\ub85c \uc0dd\uac01\ud55c\ub2e4\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \ucf54\ub4dc\uac00 \ub41c\ub2e4.\\nasync function program() {\\n  await helloWorld(\\"Mike\\");\\n  await helloWorld(\\"John\\");\\n  await helloWorld(\\"sam\\");\\n}\\n\\npipe(\\n  program,\\n  T.provideService(ConsoleService)({\\n    log: (message: string) => T.succeedWith(() => console.log(message)),\\n  }),\\n  T.runPromise\\n);\\n```\\n\\n`async/await`\ubcf4\ub2e4\ub294 \uc0ac\uc6a9\ubc29\ubc95\uc774 \ub2e4\uc18c \ubcf5\uc7a1\ud574 \ubcf4\uc774\uc9c0\ub9cc `if, for, while` \ub4f1\uc758 \uc81c\uc5b4\ubb38\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.\\n\\n## \uc608\uc81c\\n\\n\uc9c0\uae08\uae4c\uc9c0 \uc18c\uac1c\ud55c \ub0b4\uc6a9\uc744 \ubc14\ud0d5\uc73c\ub85c \ub2e4\uc74c\uacfc \uac19\uc740 \ud504\ub85c\uadf8\ub7a8\uc744 \uc791\uc131\ud574\ubcf4\uc790.\\n\\n```\\n0\uc5d0\uc11c 1\uc0ac\uc774\uc758 \ub79c\ub364\ud55c \uc22b\uc790\ub97c \uac00\uc838\uc640 0.5\ubcf4\ub2e4 \ud06c\uba74 \uc5d0\ub7ec\ub97c \ubc18\ud658\ud558\uace0 \uc544\ub2c8\uba74 \uc22b\uc790\ub97c \ucd9c\ub825\ud55c\ub2e4.\\n```\\n\\n\uba3c\uc800 \ub79c\ub364\ud55c \uc22b\uc790\ub97c \ub9cc\ub4e4\uae30 \uc704\ud574 `Math.random`\uc744 \uc0ac\uc6a9\ud558\ub294 \uac83\uc744 \uc0dd\uac01\ud560 \uc218 \uc788\ub2e4.  \\n\ud558\uc9c0\ub9cc \uc774\ub7ec\ud55c \ubb34\uc791\uc704\uc131\uc740 \ud14c\uc2a4\ud2b8\ub97c \uc5b4\ub7fd\uac8c \ub9cc\ub4dc\ub294 \uc694\uc18c\uc774\ubbc0\ub85c \uc758\uc874\uc131\uc73c\ub85c \ubd84\ub9ac\ud574\uc57c \ud55c\ub2e4.\\n\\n```ts\\ninterface RandomService {\\n  rand: T.Effect<unknown, never, number>;\\n}\\n\\nconst RandomService = tag<RandomService>();\\n\\n// Effect<Has<RandomService>, never, number>\\nconst rand = T.accessServiceM(RandomService)((service) => service.rand);\\n```\\n\\n`rand`\ubcc0\uc218\ub294 `RandomService`\ub97c \uc758\uc874\uc131\uc73c\ub85c \uac00\uc9c0\uace0 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\uc73c\uba70 number\ub97c \ubc18\ud658\ud558\ub294 \ud6a8\uacfc\uc774\ub2e4.\\n\\n\uc774\uc81c \ub79c\ub364\ud55c \uac12\uc774 0.5\ubcf4\ub2e4 \ud070 \uacbd\uc6b0 \ubc1c\uc0dd\ud558\ub294 \uc5d0\ub7ec \ud074\ub798\uc2a4\ub97c \uc9c1\uc811 \uc815\uc758\ud574\ubcf4\uc790.\\n\\n```ts\\nimport { Tagged } from \\"@effect-ts/system/Case\\";\\n\\nexport class BadRandomValue extends Tagged(\\"BadRandomValue\\")<{\\n  readonly value: number;\\n}> {}\\n```\\n\\n`Tagged`\ud568\uc218\ub97c \uc0ac\uc6a9\ud574 \ucee4\uc2a4\ud140 \ud074\ub798\uc2a4\ub97c \ub9cc\ub4e4\uace0 \uc788\ub294\ub370 \uc774\ub294 \ud558\ub098\uc758 \ud6a8\uacfc\uac00 \uc5ec\ub7ec \uc720\ud615\uc758 \uc5d0\ub7ec\ub97c \uac00\uc9c8 \ub54c \uc774\ub97c type-safe\ud558\uac8c \ucc98\ub9ac\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ud55c\ub2e4.  \\nTypescript\uc758 tagged union\uacfc \uac19\uc740 \ube44\uc2b7\ud55c \uc5ed\ud560\uc744 \ud55c\ub2e4\uace0 \uc0dd\uac01\ud558\uba74 \ub41c\ub2e4.  \\n\uc5d0\ub7ec \ud074\ub798\uc2a4\ub97c \uc704\ud574 `Tagged`\ub97c \ubc18\ub4dc\uc2dc \uc0ac\uc6a9\ud560 \ud544\uc694\ub294 \uc5c6\uc73c\uba70 \uc21c\uc218 \ud074\ub798\uc2a4\ub97c \uc0ac\uc6a9\ud574\ub3c4 \ub41c\ub2e4.\\n\\n\uae30\uc874\uc5d0 \uc791\uc131\ud55c `log`\ud568\uc218\uc640 `T.gen`\uc744 \uc0ac\uc6a9\ud574 \ub2e4\uc74c\uacfc \uac19\uc774 \ud504\ub85c\uadf8\ub7a8\uc744 \uc791\uc131\ud560 \uc218 \uc788\ub2e4.\\n\\n```ts\\n// Effect<Has<ConsoleService> & Has<RandomService>, BadRandomValue, void>\\nconst program = T.gen(function* (_) {\\n  // \ub79c\ub364\ud55c \uc22b\uc790\ub97c \uac00\uc838\uc628\ub2e4.\\n  const value = yield* _(rand);\\n\\n  if (value > 0.5) {\\n    // \uc870\uac74\uc5d0 \ub9de\uc9c0 \uc54a\uc73c\uba74 BadRandomValue \uc5d0\ub7ec\ud6a8\uacfc\ub97c \ubc18\ud658\ud55c\ub2e4.\\n    return yield* _(T.fail(new BadRandomValue({ value })));\\n  }\\n\\n  // \uc870\uac74\uc5d0 \ub9de\uc73c\uba74 \uac12\uc744 \ucd9c\ub825\ud55c\ub2e4.\\n  yield* _(log(`got: ${value}`));\\n});\\n\\n// pipe\uc640 chain\uc744 \uc0ac\uc6a9\ud55c\ub2e4\uba74 \uc544\ub798\uc640 \uac19\uc774 \uc791\uc131\ud560 \uc218 \uc788\ub2e4.\\nconst program = pipe(\\n  rand,\\n  T.chain((value) =>\\n    value <= 0.5 ? log(`got: ${value}`) : T.fail(new BadRandomValue({ value }))\\n  )\\n);\\n```\\n\\n`program`\uc758 \ucd5c\uc885 \ud0c0\uc785\uc744 \ubcf4\uba74 \uc758\uc874\uc131\uc5d0 \uc790\ub3d9\uc73c\ub85c `ConsoleService`\uc640 `RandomService`\uac00 \ucd94\uac00\ub418\uc5c8\uc74c\uc744 \ud655\uc778 \ud560 \uc218 \uc788\ub2e4.  \\n\uc774\ub294 fp-ts\uc758 `ReaderTaskEither`\uc5d0\uc11c\ub294 \uc81c\uacf5\ud558\uc9c0 \uc54a\ub294 \uae30\ub2a5\uc73c\ub85c \ubcf4\ub2e4 \ub354 type-safe\ud55c \ud504\ub85c\uadf8\ub798\ubc0d\uc744 \ud560 \uc218 \uc788\uac8c \ud574\uc900\ub2e4.\\n\\n## \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\\n\\n\uc774\uc81c \uc704 \ud504\ub85c\uadf8\ub7a8\uc744 \ud14c\uc2a4\ud2b8\ud574\ubcf4\uc790.\\n\\n```ts\\nimport { Exit, pipe } from \\"@effect-ts/core\\";\\nimport * as T from \\"@effect-ts/core/Effect\\";\\n\\nit(\\"0.5 \ubcf4\ub2e4 \ud06c\uba74 \uc5d0\ub7ec\ub97c \ubc18\ud658\ud55c\ub2e4\\", async () => {\\n  // given\\n  const fakeRandom = T.provideService(RandomService)({\\n    rand: T.succeed(0.6), // 0.6\uc744 \ud56d\uc0c1 \ubc18\ud658\ud558\uac8c \uace0\uc815\\n  });\\n  const fakeConsole = T.provideService(ConsoleService)({\\n    log: (message: string) => T.succeedWith(() => console.log(message)),\\n  });\\n\\n  // when\\n  const result = await pipe(program, fakeRandom, fakeConsole, T.runPromiseExit);\\n\\n  // then\\n  expect(Exit.untraced(result)).toEqual(\\n    Exit.fail(new BadRandomValue({ value: 0.6 }))\\n  );\\n});\\n```\\n\\n\uc774 \ucf54\ub4dc\ub294 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0\uc5d0 \ub300\ud55c \ud14c\uc2a4\ud2b8\ub85c \uac01 \uc758\uc874\uc131\ub4e4\uc744 fake\ub85c \ub300\uccb4\ud55c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.  \\n\uc774\ub97c \ud1b5\ud574 \ud14c\uc2a4\ud2b8\ud558\uae30 \uc5b4\ub824\uc6e0\ub358 \uc601\uc5ed\uc744 \ub2e8\uc704 \ud14c\uc2a4\ud2b8 \ud560 \uc218 \uc788\uac8c \ub418\uc5c8\ub2e4.\\n\\n\uc131\uacf5\ud558\ub294 \ucf00\uc774\uc2a4\ub3c4 \uac19\uc740 \ubc29\uc2dd\uc73c\ub85c \ud14c\uc2a4\ud2b8\ud560 \uc218 \uc788\ub2e4.\\n\\n```ts\\nit(\\"0.5 \ubcf4\ub2e4 \uc791\uc73c\uba74 \ud654\uba74\uc5d0 \ucd9c\ub825\ud55c\ub2e4\\", async () => {\\n  // given\\n  const fakeRandom = T.provideService(RandomService)({\\n    rand: T.succeed(0.3),\\n  });\\n  const messages: string[] = [];\\n  const fakeConsole = T.provideService(ConsoleService)({\\n    log: (message: string) => T.succeedWith(() => messages.push(message)),\\n  });\\n\\n  // when\\n  const result = await pipe(program, fakeRandom, fakeConsole, T.runPromiseExit);\\n\\n  // then\\n  expect(result).toEqual(Exit.succeed(undefined));\\n  expect(messages).toEqual([\\"got: 0.3\\"]);\\n});\\n```\\n\\nfakeConsole\uc740 \uc8fc\uc5b4\uc9c4 \uba54\uc2dc\uc9c0\ub97c \uc2e4\uc81c \ucf58\uc194\uc5d0 \ucd9c\ub825\ud558\ub294 \ub300\uc2e0 \ubc30\uc5f4\uc5d0 \uc800\uc7a5\ud558\ub3c4\ub85d \ud558\uc5ec \ucd9c\ub825 \uba54\uc2dc\uc9c0\ub97c \uac80\uc99d\ud560 \uc218 \uc788\uac8c \ub9cc\ub4e4\uc5b4\uc900\ub2e4.\\n\\n## \ub9c8\ubb34\ub9ac\\n\\n\uc9c0\uae08\uae4c\uc9c0 Effect-TS\uc758 \uc18c\uac1c\uc640 \uc774\ub97c \ud65c\uc6a9\ud55c \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc558\ub2e4.  \\n`fp-ts`\uc758 `TaskEither`\ub97c \uc0ac\uc6a9\ud558\ub358 \uac83\uacfc \ube44\uad50\ud574\ubcf4\uba74 `Effect`\ub97c \uc0ac\uc6a9\ud558\uba74 \ub354\uc6b1 type-safe\ud558\uace0 \ud14c\uc2a4\ud2b8\ud558\uae30 \uc26c\uc6b4 \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uc218 \uc788\ub2e4\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc5c8\ub2e4.  \\n\ub610\ud55c \uc774\ubc88 \uae00\uc5d0\uc11c\ub294 \uc18c\uac1c\ud558\uc9c0 \uc54a\uc558\uc9c0\ub9cc \uc5d0\ub7ec\uc758 \uc2a4\ud0dd\ud2b8\ub808\uc774\uc2a4\uac00 \uc790\uc138\ud558\uac8c \ucd9c\ub825\ub418\ub294 \uc810\uacfc `opentelemetry`\uc640\uc758 \uc5f0\ub3d9\uc744 \ud1b5\ud574 \ubaa8\ub2c8\ud130\ub9c1\uc5d0 \ub300\ud55c \uc9c0\uc6d0\ub3c4 \uc81c\uacf5\ud55c\ub2e4\ub294 \uc810\ub3c4 \uc7a5\uc810\uc73c\ub85c \uaf3d\uc744 \uc218 \uc788\ub2e4.  \\n\ubb38\uc11c\ud654\uac00 \ubd80\uc871\ud55c \uc810\uc740 \uc544\uc27d\uc9c0\ub9cc, ZIO\ub97c \uc0ac\uc6a9\ud574\ubcf8 \uacbd\ud5d8\uc774 \uc788\ub294 \uc0ac\ub78c\uc774\ub77c\uba74 \uc27d\uac8c \uc801\uc751\ud560 \uc218 \uc788\uc744 \uac83 \uac19\ub2e4."},{"id":"2023/01/21/fly.io-\uc5d0\uc11c-\uc81c\uacf5\ud558\ub294-redis-\uc0ac\uc6a9\ud558\uae30","metadata":{"permalink":"/2023/01/21/fly.io-\uc5d0\uc11c-\uc81c\uacf5\ud558\ub294-redis-\uc0ac\uc6a9\ud558\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2023-01-21-fly-io-redis/index.mdx","source":"@site/blog/2023-01-21-fly-io-redis/index.mdx","title":"fly.io \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 redis \uc0ac\uc6a9\ud558\uae30","description":"fly.io\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 redis \ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud55c \uc18c\uac1c\uc640 ioredis\ub85c \uc811\uadfc\ud558\ub294 \uacbd\uc6b0 \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c\uc0c1\ud669 \ud574\uacb0\ubc29\uc548 \uacf5\uc720","date":"2023-01-21T00:00:00.000Z","formattedDate":"2023\ub144 1\uc6d4 21\uc77c","tags":[{"label":"redis","permalink":"/tags/redis"},{"label":"ioredis","permalink":"/tags/ioredis"},{"label":"fly.io","permalink":"/tags/fly-io"}],"readingTime":4.375,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"fly.io \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 redis \uc0ac\uc6a9\ud558\uae30","slug":"2023/01/21/fly.io-\uc5d0\uc11c-\uc81c\uacf5\ud558\ub294-redis-\uc0ac\uc6a9\ud558\uae30","description":"fly.io\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 redis \ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud55c \uc18c\uac1c\uc640 ioredis\ub85c \uc811\uadfc\ud558\ub294 \uacbd\uc6b0 \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c\uc0c1\ud669 \ud574\uacb0\ubc29\uc548 \uacf5\uc720","authors":"jake","tags":["redis","ioredis","fly.io"]},"prevItem":{"title":"Effect-TS\ub85c \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud558\uace0 \ud6a8\uc728\uc801\uc778 \ucf54\ub4dc \uc791\uc131\ud558\uae30","permalink":"/2023/02/11/Effect-TS\ub85c-\ud14c\uc2a4\ud2b8-\uac00\ub2a5\ud558\uace0-\ud6a8\uc728\uc801\uc778-\ucf54\ub4dc-\uc791\uc131\ud558\uae30"},"nextItem":{"title":"Typescript\ub85c \ud655\ub960 Monad \uad6c\ud604\ud558\uae30 - 2","permalink":"/2022/12/29/Typescript\ub85c-\ud655\ub960-Monad-\uad6c\ud604\ud558\uae30-2"}},"content":"[fly.io](https://fly.io) \uc5d0\uc11c\ub294 \uc6f9 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \uc790\uc8fc \uc0ac\uc6a9\ud558\ub294 redis \uc778\uc2a4\ud134\uc2a4\ub97c \uc81c\uacf5\ud55c\ub2e4.  \\n\ubb34\ub8cc\ud50c\ub79c\ub3c4 \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 \ud544\uc694\ud55c \uc0c1\ud669\uc5d0\uc11c \uc720\uc6a9\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.  \\n\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 redis \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131 \ubc29\ubc95\uacfc `ioredis` \ub97c \uc0ac\uc6a9\ud560 \uacbd\uc6b0 \ubc1c\uc0dd\ud558\ub294 \uc811\uc18d\ubb38\uc81c \ud574\uacb0\ubc29\uc548\uc744 \uacf5\uc720\ud558\uace0\uc790 \ud55c\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131\\n\\nfly.io\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 redis\ub294 \uc0ac\uc2e4 [upstash](https://docs.upstash.com/redis)\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud55c\ub2e4.  \\n\ud558\uc9c0\ub9cc \uc778\uc2a4\ud134\uc2a4\ub97c \ub9cc\ub4e4\uae30 \uc704\ud574 \ub530\ub85c \ud574\ub2f9 \uc0ac\uc774\ud2b8\uc5d0 \uac00\uc785\ud560 \ud544\uc694\uc5c6\uc73c\uba70 flycli\ub97c \uc0ac\uc6a9\ud574 \uc27d\uac8c \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4.\\n\\n\uc0dd\uc131\ud55c redis\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \uac19\uc740 Organization\uc5d0 \uc18d\ud55c \uc11c\ubc84\ub4e4\uc5d0\uc11c\ub9cc \uc811\uc18d\ud560 \uc218 \uc788\ub2e4.\\nfly.io\ub97c \uc0ac\uc6a9\ud558\ub294 \ud504\ub85c\uc81d\ud2b8(fly.toml \ud30c\uc77c\uc774 \uc788\ub294 \uacf3)\ub85c \uc774\ub3d9\ud55c \ud6c4 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud558\uc5ec redis\ub97c \uc0dd\uc131\ud55c\ub2e4.\\n\\n```bash\\nflyctl redis create\\n```\\n\\n\ubcf8\uc778\uc758 \uacc4\uc815\uc5d0 Organization\uc774 \uc5ec\ub7ec\uac1c \uc874\uc7ac\ud55c\ub2e4\uba74 \uc5b4\ub5a4 \ud56d\ubaa9\uc5d0 \uc0dd\uc131\ud560 \uac83\uc778\uc9c0 \ubb3c\uc5b4\ubcf4\uba70 \uc6d0\ud558\ub294 \uac83\uc744 \uc120\ud0dd\ud55c\ub2e4.  \\n\uc774\ud6c4 \uc778\uc2a4\ud134\uc2a4 \uc774\ub984\uc744 \ubb3c\uc5b4\ubcf4\ub294\ub370 \uc801\uc808\ud55c \uac12\uc744 \ub123\uc5b4\uc900\ub2e4.  \\n\ub2e4\uc74c\uc73c\ub85c redis \uc778\uc2a4\ud134\uc2a4\uc758 \uc9c0\uc5ed\uc744 \uc120\ud0dd\ud558\uac8c \ub418\ub294\ub370 \uc811\uc18d\ud558\ub824\ub294 \uc11c\ubc84\uc640 \uac19\uc740 \uc9c0\uc5ed\uc744 \uc120\ud0dd\ud558\ub3c4\ub85d \ud55c\ub2e4.  \\n\ucd94\uac00\ub85c replica \uc9c0\uc5ed\uc740 \uc120\ud0dd\uc0ac\ud56d\uc73c\ub85c \uc6d0\ud558\ub294 \ud56d\ubaa9\uc744 \uc120\ud0dd\ud55c\ub2e4.  \\n\ub9c8\uc9c0\ub9c9\uc73c\ub85c plan\uc744 \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4.\\n\\n```bash\\n? Choose a Redis database name (leave blank to generate one): bae-no\\n? Choose a primary region (can\'t be changed later) Tokyo, Japan (nrt)\\n\\nUpstash Redis can evict objects when memory is full. This is useful when caching in Redis. This setting can be changed later.\\nLearn more at https://fly.io/docs/reference/redis/#memory-limits-and-object-eviction-policies\\n? Would you like to enable eviction? Yes\\n? Optionally, choose one or more replica regions (can be changed later): Paris, France (cdg)\\n? Select an Upstash Redis plan  [Use arrows to move, type to filter]\\n> Free: 100 MB Max Data Size\\n  200M: 200 MB Max Data Size\\n  3G: 3 GB Max Data Size\\n```\\n\\n## \uc811\uc18d\uc815\ubcf4 \ud655\uc778\\n\\n\uc811\uc18d\uc815\ubcf4\ub294 \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.  \\n\ucd9c\ub825\ub418\ub294 \uc815\ubcf4 \uc911 `Private URL`\uc740 \uc811\uc18d\uc815\ubcf4\ub85c \ud65c\uc6a9\ub418\ub2c8 \ubcf5\uc0ac\ud574\ub450\ub85d \ud55c\ub2e4.\\n\\n```bash\\nflyctl redis status bae-no\\n\\nRedis\\n  ID             = 9Xaqy10XJanPjuYlgV1\\n  Name           = bae-no\\n  Plan           = Free\\n  Primary Region = nrt\\n  Read Regions   =\\n  Private URL    = redis://default:xxxxxxxx@fly-bae-no.upstash.io\\n```\\n\\n## redis-cli\ub85c \uc811\uc18d\ud558\uae30\\n\\n\ub9cc\uc57d \uc678\ubd80\uc5d0\uc11c redis\uc5d0 \uc9c1\uc811 \uc811\uc18d\ud574\uc11c \uba85\ub839\uc5b4\ub97c \uc785\ub825\ud558\uace0 \uc2f6\ub2e4\uba74 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \ud65c\uc6a9\ud55c\ub2e4.  \\nredis-cli\ub97c \uc0ac\uc6a9\ud558\ubbc0\ub85c \uba3c\uc800 \ub85c\uceec\uc5d0 \ud574\ub2f9 \ud504\ub85c\uadf8\ub7a8\uc744 \uc124\uce58\ud574\uc57c \ud55c\ub2e4.\\n\\n```bash\\nflyctl redis connect\\n? Select a database to connect to bae-no (nrt) personal\\nProxying local port 16379 to remote [fdaa:0:8b80:0:1::4]:6379\\n127.0.0.1:16379> ping\\nPONG\\n```\\n\\n## ioredis\ub85c \uc811\uc18d\ud558\uae30\\n\\nNode.js\ud658\uacbd\uc5d0\uc11c redis\ub97c \uc704\ud574 \uc0ac\uc6a9\ud558\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub85c `ioredis`\uac00 \uc788\ub2e4.  \\nfly.io\uc11c\ubc84\uc5d0\uc11c \uc774 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub9ac\ub97c \ud65c\uc6a9\ud574 redis\ub97c \uc811\uc18d\ud558\ub824\ub294 \uacbd\uc6b0 \uc544\ub798\uc640 \uac19\uc740 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0\uac00 \uc788\ub2e4.\\n\\n```\\n2023-01-21T13:18:12.613 app[6c7fb858] nrt [info] Error: getaddrinfo ENOTFOUND fly-bae-no.upstash.io\\n2023-01-21T13:18:12.613 app[6c7fb858] nrt [info] at GetAddrInfoReqWrap.onlookup [as oncomplete] (node:dns:107:26) {\\n2023-01-21T13:18:12.613 app[6c7fb858] nrt [info] errno: -3007,\\n2023-01-21T13:18:12.613 app[6c7fb858] nrt [info] code: \'ENOTFOUND\',\\n2023-01-21T13:18:12.613 app[6c7fb858] nrt [info] syscall: \'getaddrinfo\',\\n2023-01-21T13:18:12.613 app[6c7fb858] nrt [info] hostname: \'fly-bae-no.upstash.io\'\\n2023-01-21T13:18:12.613 app[6c7fb858] nrt [info] }\\n```\\n\\n\uc774\ub7f4 \ub54c\uc5d0\ub294 \uc811\uc18d\uc815\ubcf4\uc5d0 `Private URL`\uc744 \uc81c\uacf5\ud558\uace0 \ub05d\uc5d0 `?family=6`\uac12\uc744 \ucd94\uac00\ud558\uba74 \ud574\uacb0\ub41c\ub2e4.\\n\\n```typescript\\nconst Redis = require(\\"ioredis\\");\\n\\nconst client = new Redis(\\n  \\"redis://default:********@fly-bae-no.upstash.io:6379?family=6\\"\\n);\\n```\\n\\n\ub9cc\uc57d `graphql-redis-subscriptions`\ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\uc5d0\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \ub123\uc5b4\uc8fc\ub3c4\ub85d \ud55c\ub2e4.\\n\\n```typescript\\nimport { RedisPubSub } from \\"graphql-redis-subscriptions\\";\\n\\nconst pubsub = new RedisPubSub({\\n  connection: \\"redis://default:********@fly-bae-no.upstash.io:6379?family=6\\",\\n});\\n```"},{"id":"2022/12/29/Typescript\ub85c-\ud655\ub960-Monad-\uad6c\ud604\ud558\uae30-2","metadata":{"permalink":"/2022/12/29/Typescript\ub85c-\ud655\ub960-Monad-\uad6c\ud604\ud558\uae30-2","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-12-29-probability-monad-2/index.mdx","source":"@site/blog/2022-12-29-probability-monad-2/index.mdx","title":"Typescript\ub85c \ud655\ub960 Monad \uad6c\ud604\ud558\uae30 - 2","description":"Typescript\ub85c \ud655\ub960\ubd84\ud3ec\ub97c \uc704\ud55c Monad\ub97c \uad6c\ud604\ud558\ub294 \uacfc\uc815\uc744 \uc18c\uac1c\ud55c\ub2e4.","date":"2022-12-29T00:00:00.000Z","formattedDate":"2022\ub144 12\uc6d4 29\uc77c","tags":[{"label":"probability","permalink":"/tags/probability"},{"label":"monad","permalink":"/tags/monad"},{"label":"typescript","permalink":"/tags/typescript"}],"readingTime":11.07,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Typescript\ub85c \ud655\ub960 Monad \uad6c\ud604\ud558\uae30 - 2","slug":"2022/12/29/Typescript\ub85c-\ud655\ub960-Monad-\uad6c\ud604\ud558\uae30-2","description":"Typescript\ub85c \ud655\ub960\ubd84\ud3ec\ub97c \uc704\ud55c Monad\ub97c \uad6c\ud604\ud558\ub294 \uacfc\uc815\uc744 \uc18c\uac1c\ud55c\ub2e4.","authors":"jake","tags":["probability","monad","typescript"]},"prevItem":{"title":"fly.io \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 redis \uc0ac\uc6a9\ud558\uae30","permalink":"/2023/01/21/fly.io-\uc5d0\uc11c-\uc81c\uacf5\ud558\ub294-redis-\uc0ac\uc6a9\ud558\uae30"},"nextItem":{"title":"Typescript\ub85c \ud655\ub960 Monad \uad6c\ud604\ud558\uae30 - 1","permalink":"/2022/12/28/Typescript\ub85c-\ud655\ub960-Monad-\uad6c\ud604\ud558\uae30-1"}},"content":"> [\uc774\uc804 \ud3ec\uc2a4\ud2b8](../2022-12-28-probability-monad-1/index.mdx)\uc5d0\uc11c \uc774\uc5b4\uc9c0\ub294 \ub0b4\uc6a9\uc785\ub2c8\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \uc774\ud56d\ud655\ub960\ubd84\ud3ec\\n\\nApplicative Functor\ub97c \ud65c\uc6a9\ud558\uba74 [\uc774\ud56d\ud655\ub960\ubd84\ud3ec](https://ko.wikipedia.org/wiki/%EC%9D%B4%ED%95%AD_%EB%B6%84%ED%8F%AC)\ub97c \uacc4\uc0b0\ud560 \uc218 \uc788\ub2e4.  \\n\uc774\ud56d\ud655\ub960\ubd84\ud3ec\ub780 \ub3d9\uc804 \ub358\uc9c0\uae30\uc640 \uac19\uc774 \ub3c5\ub9bd\uc801\uc778 \uc2dc\ud589\uc758 \uacb0\uacfc\uac00 \uc131\uacf5 \ub610\ub294 \uc2e4\ud328 \ub450 \uac00\uc9c0\ub85c\ub9cc \uc774\ub8e8\uc5b4\uc9c4 \uacbd\uc6b0\uc758 \ud655\ub960\ubd84\ud3ec\ub97c \ub9d0\ud55c\ub2e4.\\n\\n\uc55e\uba74\uc774 \ub098\uc62c \ud655\ub960\uc774 0.3\uc778 \ub3d9\uc804\uc744 10\ubc88 \ub358\uc84c\uc744 \ub54c \uc55e\uba74\uc774 \ub098\uc624\ub294 \ud69f\uc218\uc758 \ud655\ub960\ubd84\ud3ec\ub97c \uacc4\uc0b0\ud574\ubcf4\uc790.  \\n\uba3c\uc800 \ud558\ub098\uc758 \uc2dc\ud589\uc5d0 \ub300\ud55c \ud655\ub960\ubd84\ud3ec\ub97c \ub9cc\ub4dc\ub294\ub370 \ud655\ub960\ubcc0\uc218\ub294 0(\ub4b7\uba74), 1(\uc55e\uba74)\uc73c\ub85c \uc124\uc815\ud55c\ub2e4.\\n\\n```typescript\\nconst dist = Distributions.of([\\n  [0, 0.7],\\n  [1, 0.3],\\n]);\\n```\\n\\n\uac01 \uc2dc\ud589\uc740 \ub3c5\ub9bd\uc801\uc774\ubbc0\ub85c \uc704 \ud655\ub960\ubd84\ud3ec\ub97c 10\uac1c \uc0dd\uc131\ud55c \ud6c4 \uacb0\ud569\ud558\uba74 \uc6d0\ud558\ub294 \uc774\ud56d\ud655\ub960\ubd84\ud3ec\ub97c \uc5bb\uc744 \uc218 \uc788\ub2e4.\\n\\n```typescript\\nconst dists = Array.from({ length: 10 }, () =>\\n  Distributions.of([\\n    [0, 0.7],\\n    [1, 0.3],\\n  ])\\n);\\n```\\n\\n\uc6b0\uc120 \ud655\ub960\ubcc0\uc218 \uac04\uc758 \uacb0\ud569\ub85c\uc9c1\uc744 \uc0dd\uac01\ud574\ubcf4\uc790.  \\n\uc6b0\ub9ac\uac00 \uc6d0\ud558\ub294 \ud655\ub960\ubcc0\uc218\ub294 \uc55e\uba74\uc774 \ub098\uc624\ub294 \ud69f\uc218\uc774\uace0 \uc55e\uba74\uc774 \ub098\uc624\ub294 \uacbd\uc6b0\ub97c 1\ub85c \uc124\uc815\ud588\uae30 \ub54c\ubb38\uc5d0 \ubaa8\ub4e0 \ud655\ub960\ubcc0\uc218\ub97c \ub354\ud558\uba74 \ub41c\ub2e4.  \\n\ub530\ub77c\uc11c number \ud0c0\uc785\uc758 \uc778\uc790 10\uac1c\ub97c \ubc1b\uc544 \ubaa8\ub450 \ub354\ud55c \uac12\uc744 \ubc18\ud658\ud558\ub294 \ud568\uc218\ub97c \ub9cc\ub4e4\uba74 \ub41c\ub2e4.\\n\\n\uc704\uc640 \uac19\uc740 \ud568\uc218\ub97c `join`\uc73c\ub85c \ubc14\uafb8\uc5b4\uc8fc\ub294 `liftA10`\uacfc \uac19\uc740 \ud568\uc218\ub97c \ub9cc\ub4dc\ub294 \ub300\uc2e0, \uc774\uc804\uc5d0 \ub9cc\ub4e4\uc5b4 \ub454 `liftA2`\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.  \\n\uc55e\uc11c \uc815\uc758\ud55c `dists`\ub294 \ubc30\uc5f4\uc774\uae30 \ub54c\ubb38\uc5d0 reduce\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uace0 \uc774\ub97c \ud65c\uc6a9\ud558\uba74 \ub450 \uac1c\uc758 \ud655\ub960\ubd84\ud3ec\ub97c \ud558\ub098\ub85c \ub9cc\ub4e4\uc5b4 \ub098\uac00\ub294 \uacfc\uc815\uc744 \uad6c\ud604\ud560 \uc218 \uc788\ub2e4.\\n\\n```typescript\\nconst sum = (a: number, b: number) => a + b;\\nconst result = dists.reduce(liftA2(sum));\\n\\nconsole.log(result.value.map(([a, b]) => [a, +b.toFixed(5)]));\\n/*\\n  [0, 0.02825],\\n  [1, 0.12106],\\n  [2, 0.23347],\\n  [3, 0.26683],\\n  [4, 0.20012],\\n  [5, 0.10292],\\n  [6, 0.03676],\\n  [7, 0.009],\\n  [8, 0.00145],\\n  [9, 0.00014],\\n  [10, 0.00001],\\n */\\n```\\n\\n\uc0ac\uc2e4 \uc774\ud56d\ud655\ub960\ubd84\ud3ec\ub97c \uacc4\uc0b0\ud558\uae30 \uc704\ud574 \uc704\uc640 \uac19\uc740 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud558\uae30 \ubcf4\ub2e4 \uacf5\uc2dd\uc744 \ud65c\uc6a9\ud558\ub294\uac8c \ub354 \ud6a8\uc728\uc801\uc774\ub2e4.  \\n\ud558\uc9c0\ub9cc \uc774\uc640 \uac19\uc740 \ubc29\uc2dd\uc740 \ub2e8\uc21c\ud788 \uacf5\uc2dd\uc744 \uc801\uc6a9\ud558\ub294 \uac70 \ubcf4\ub2e4 \ub354 \uc9c1\uad00\uc801\uc774\uba70 \uc774\ud574\ud558\uae30 \uc27d\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.\\n\\n## \ud655\ub960\ubd84\ud3ec Monad\\n\\n`Distributions`\uac00 Functor, Applicative Functor\ub97c \ub9cc\uc871\ud558\uac8c \ub9cc\ub4e4\uc5c8\uc73c\ub2c8 \uc774\uc81c Monad\ub97c \ub9cc\uc871\ud558\uac8c \ub9cc\ub4e4\uc5b4\ubcf4\uc790.  \\nMonad\ub97c \ub9cc\uc871\ud558\ub824\uba74 `\ud655\ub960\ubcc0\uc218 A\ub97c \uc778\uc790\ub85c \ubc1b\uace0 \ud655\ub960\ubd84\ud3ec B\ub97c \ubc18\ud658\ud558\ub294 \ud568\uc218`\ub97c `\ud655\ub960\ubd84\ud3ec\uac04\uc758 \ubcc0\ud658\ud568\uc218`\ub85c \ub9cc\ub4dc\ub294 `chain` \ud568\uc218\ub97c \uad6c\ud604\ud574\uc57c \ud55c\ub2e4.\\n\\n> `chain`\uc774\ub77c\ub294 \uc774\ub984\uc740 \ub2e4\ub978 \ud568\uc218\ud615 \uc5b8\uc5b4\uc5d0\uc11c\ub294 `bind`, `flatMap` \ub4f1\uc73c\ub85c \ubd88\ub9ac\ub294\ub370, `fp-ts`\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \uc774\ub984\uc744 \uc120\ud0dd\ud588\ub2e4.\\n\\n```typescript\\ndeclare function chain<A, B>(\\n  f: (a: A) => Distribution<B>\\n): (dist: Distribution<A>) => Distribution<B>;\\n```\\n\\n\uad6c\ud604\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n```typescript\\nexport const chain =\\n  <A, B>(f: (a: A) => Distributions<B>) =>\\n  (fa: Distributions<A>): Distributions<B> =>\\n    Distributions.of(\\n      fa.value.flatMap(\\n        ([variable, prob1]) =>\\n          f(variable).value.map(([b, prob2]) => [b, prob1 * prob2]) as [\\n            B,\\n            Probability\\n          ][]\\n      )\\n    );\\n```\\n\\n\uad6c\ud604\ub85c\uc9c1\uc740 \uc774\uc804\uc5d0 \uad6c\ud604\ud55c `ap`\uc640 \ube44\uc2b7\ud558\ub2e4.  \\n\uc8fc\uc5b4\uc9c4 `fa`\ub0b4\ubd80\ub97c \uc21c\ud68c\ud558\uba74\uc11c \uac01 \ud655\ub960\ubcc0\uc218\ub97c `f`\uc5d0 \uc801\uc6a9\ud558\uba70, \uadf8 \ubc18\ud658\uac12\uc758 \ub0b4\ubd80\ub97c \ub2e4\uc2dc \uc21c\ud68c\ud558\uba74\uc11c `fa`\uc758 \ud655\ub960\uacfc \uacf1\ud574\uc900\ub2e4.\\n\\n\uc704 \ud568\uc218\ub97c \uc0ac\uc6a9\ud558\uba74 \uc55e\uc11c \uc815\uc758\ud55c `map`, `ap`\uc5d0\uc11c\ub294 \uc801\uc6a9\ud560 \uc218 \uc5c6\uc5c8\ub358 **\ub3c5\ub9bd\uc801\uc774\uc9c0 \uc54a\uc740 \uc2dc\ud589\uc5d0 \ub300\ud55c \ud655\ub960\ubd84\ud3ec**\ub97c \uacc4\uc0b0\ud560 \uc218 \uc788\ub2e4.  \\n\uc608\ub97c \ub4e4\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \uc0c1\ud669\uc744 \uc0dd\uac01\ud574\ubcf4\uc790.\\n\\n- \uba3c\uc800 \uacf5\ud3c9\ud55c \uc8fc\uc0ac\uc704\ub97c \ub358\uc9c4\ub2e4.\\n- \ub9cc\uc57d 6\uc774 \ub098\uc628\uacbd\uc6b0 \uacf5\ud3c9\ud55c \ub3d9\uc804\uc744 \ub358\uc9c0\uba70, 6\uc774 \uc544\ub2cc \uacbd\uc6b0 \uc55e\uba74\uc774 \ub098\uc62c \ud655\ub960\uc774 0.1\uc778 \ub3d9\uc804\uc744 \ub358\uc9c4\ub2e4.\\n- \ub3d9\uc804\uc758 \uba74(face)\uc5d0 \ub300\ud55c \ud655\ub960\ubd84\ud3ec\ub97c \uad6c\ud558\ub77c.\\n\\n\uc704\uc640 \uac19\uc740 \uc0c1\ud669\uc5d0\uc11c\ub294 \ub3d9\uc804\uc744 \ub358\uc9c0\ub294 \uc2dc\ud589\uc774 \uc774\uc804 \uc2dc\ud589\uc758 \uacb0\uacfc\uc5d0 \uc758\uc874\uc801\uc774\ub77c\uace0 \ud560 \uc218 \uc788\ub2e4.  \\n\uc774\uc81c `chain`\uc744 \uc0ac\uc6a9\ud558\uc5ec \ud655\ub960\ubd84\ud3ec\ub97c \uacc4\uc0b0\ud574\ubcf4\uc790.\\n\\n```typescript\\nconst dice = Distributions.uniform([\\n  Dice.One,\\n  Dice.Two,\\n  Dice.Three,\\n  Dice.Four,\\n  Dice.Five,\\n  Dice.Six,\\n]);\\nconst fairCoin = Distributions.uniform([Coin.Head, Coin.Tail]);\\nconst unfairCoin = Distributions.of([\\n  [Coin.Head, 0.1],\\n  [Coin.Tail, 0.9],\\n]);\\n\\nconst result = pipe(\\n  dice,\\n  // \uc8fc\uc0ac\uc704\uc758 \uacb0\uacfc\uac00 6\uc778 \uacbd\uc6b0 \uacf5\ud3c9\ud55c \ub3d9\uc804\uc744 \ub358\uc9c0\uace0, \uc544\ub2cc \uacbd\uc6b0 \ubd88\uacf5\ud3c9\ud55c \ub3d9\uc804\uc744 \ub358\uc9c4\ub2e4.\\n  chain((n) => (n === Dice.Six ? coin : unfairCoin))\\n);\\n\\nconsole.log(result.value); // [[\'Head\', 1 / 6], [\'Tail\', 5 / 6]]\\n```\\n\\n\uc704 \uacb0\uacfc\uac00 \uc815\ud655\ud55c\uc9c0 \uac80\uc99d\ud558\uae30 \uc704\ud574 \ud655\ub960\uacf5\uc2dd\uc744 \ud1b5\ud574 \uacc4\uc0b0\ud574\ubcf4\uc790.\\n\\n```\\n(\uc55e\uba74\uc774 \ub098\uc62c \ud655\ub960)\\n= (\uc8fc\uc0ac\uc704\uac00 6\uc774 \ub098\uc62c \ud655\ub960) x (\uacf5\ud3c9\ud55c \ub3d9\uc804\uc744 \ub358\uc84c\uc744 \ub54c \uc55e\uba74\uc774 \ub098\uc62c \ud655\ub960)\\n  + (\uc8fc\uc0ac\uc704\uac00 6\uc774 \uc544\ub2d0 \ud655\ub960) x (\ubd88\uacf5\ud3c9\ud55c \ub3d9\uc804\uc744 \ub358\uc84c\uc744 \ub54c \uc55e\uba74\uc774 \ub098\uc62c \ud655\ub960)\\n= 1/6 x 1/2 + 5/6 x 1/10\\n= 1/12 + 1/12\\n= 1/6\\n```\\n\\n\ucf54\ub4dc\ub97c \ubcf4\uba74 \uc5b4\ub514\uc5d0\ub3c4 \ud655\ub960\uc744 \uacc4\uc0b0\ud558\ub294 \ub85c\uc9c1\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uace0 \uc8fc\uc0ac\uc704\ub97c \ub358\uc9c0\uace0 \uadf8 \uacb0\uacfc\uc5d0 \ub530\ub77c \ub3d9\uc804\uc744 \ub358\uc9c0\ub294 \ub85c\uc9c1\ub9cc \uc120\uc5b8\uc801\uc73c\ub85c \uc791\uc131\ud588\ub2e4\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4.  \\n\uc774\ucc98\ub7fc Monad\ub97c \ud65c\uc6a9\ud558\uba74 **\ubcf5\uc7a1\ud558\uac70\ub098 \ubc88\uac70\ub85c\uc6b4 \ub85c\uc9c1\uc740 \uc2e0\uacbd\uc4f0\uc9c0 \uc54a\uace0 \uc624\ub85c\uc9c0 \ud575\uc2ec\ub85c\uc9c1\ub9cc \uc9d1\uc911\ud560 \uc218 \uc788\ub2e4\ub294 \uc7a5\uc810**\uc774 \uc788\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4.\\n\\n## \uc870\uac74\ubd80\ud655\ub960\\n\\n\uc774\uc81c \ud655\ub960\ubd84\ud3ec Monad \uad6c\ud604\uc744 \uc644\ub8cc\ud588\uc73c\ub2c8 \ub2e4\ub978 \ud655\ub960\uac1c\ub150\uc744 \uad6c\ud604\ud574\ubcf4\uc790.  \\n\uae30\ucd08 \ud1b5\uacc4\ud559\uc744 \ubc30\uc6b0\uac8c \ub418\uba74 \uc790\uc8fc \ub4f1\uc7a5\ud558\ub294 \uac1c\ub150\uc774 [\uc870\uac74\ubd80\ud655\ub960](https://ko.wikipedia.org/wiki/%EC%A1%B0%EA%B1%B4%EB%B6%80_%ED%99%95%EB%A5%A0)\uc774\ub2e4.  \\n`Distributions` \ud074\ub798\uc2a4\ub3c4 \uc870\uac74\ubd80\ud655\ub960\uc744 \uace0\ub824\ud55c \uc0c8\ub85c\uc6b4 \ud655\ub960\ubd84\ud3ec\ub97c \ub9cc\ub4dc\ub294 `conditional` \uba54\uc11c\ub4dc\ub97c \uad6c\ud604\ud560 \uc218 \uc788\ub2e4.\\n\\n```typescript\\nconditional(event: Event<RANDOM_VARIABLE>): Distributions<RANDOM_VARIABLE> {\\n  return Distributions.of(\\n    this.#value.filter(([variable, _]) => event(variable))\\n  );\\n}\\n```\\n\\n\uad6c\ud604 \uc790\uccb4\ub294 \uac04\ub2e8\ud558\uba70 \uc778\uc790\ub85c \uc8fc\uc5b4\uc9c4 \uc0ac\uac74\uc744 \uae30\uc900\uc73c\ub85c \ud655\ub960\ubcc0\uc218\ub97c \ud544\ud130\ub9c1 \ud55c \ud6c4 \ub2e4\uc2dc \uc815\uaddc\ud654(of \uba54\uc18c\ub4dc\uc5d0\uc11c \uc218\ud589)\ub97c \ud574\uc8fc\uba74 \ub41c\ub2e4.  \\n\uc774\uc81c \ub2e4\uc74c\uacfc \uac19\uc740 \ubb38\uc81c\ub97c \ud480\uc5b4\ubcf4\uc790.\\n\\n```\\n\uc8fc\uc0ac\uc704\ub97c \uc5f0\uc18d\uc73c\ub85c \ub450 \ubc88 \ub358\uc9c0\ub294 \uc0c1\ud669\uc744 \uac00\uc815\ud574\ubcf4\uc790.\\n\ub9cc\uc57d \ub450 \uc8fc\uc0ac\uc704\uc758 \uacb0\uacfc\uc758 \ud569\uc774 5 \uc774\ud558\uc600\ub2e4\uba74 \uccab \ubc88\uc9f8 \uc8fc\uc0ac\uc704\uc758 \uacb0\uacfc\uac00 2\uc77c \ud655\ub960\uc740?\\n```\\n\\n\uc704 \ubb38\uc81c\ub294 \ub450 \uc8fc\uc0ac\uc704\uc758 \uacb0\uacfc\uac00 5 \uc774\ud558\ub77c\ub294 \uc870\uac74\ud558\uc5d0 \uccab \ubc88\uc9f8 \uc8fc\uc0ac\uc704\uc758 \uacb0\uacfc\uc5d0 \ub300\ud55c \ud655\ub960\uc744 \uad6c\ud558\ub294 \uac83\uc73c\ub85c \ucf54\ub4dc\ub85c \ud45c\ud604\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n```typescript\\nconst join = liftA2((a: Dice, b: Dice) => [a, b] as const);\\nconst twoDice = join(dice, dice);\\n\\nconst result = twoDice\\n  .conditional(([first, second]) => first + second <= 5)\\n  .evaluate(([first]) => first === Dice.Two);\\n\\nconsole.log(result.toFixed(1)); // \\"0.3\\"\\n```\\n\\n\uba3c\uc800 \uc8fc\uc0ac\uc704\uc5d0 \ub300\ud55c \ud655\ub960\ubd84\ud3ec `dice` \ub450 \uac1c\ub97c \uacb0\ud569\ud558\ub294\ub370, \uac01 \uc2dc\ud589\uc744 \uad6c\ubd84\ud558\uae30 \uc704\ud574 \ud655\ub960\ubcc0\uc218\ub97c tuple\ub85c \ubb36\uc5b4\uc8fc\uc5c8\ub2e4.  \\n\uc774\ud6c4 `conditional`\uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 \ub450 \uc8fc\uc0ac\uc704\uc758 \ud569\uc774 5 \uc774\ud558\uc778 \uacbd\uc6b0\ub9cc \ud544\ud130\ub9c1\ud558\uace0, `evaluate`\uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 \uccab \ubc88\uc9f8 \uc8fc\uc0ac\uc704\uc758 \uacb0\uacfc\uac00 2\uc778 \uacbd\uc6b0\uc758 \ud655\ub960\uc744 \uacc4\uc0b0\ud588\ub2e4.  \\n\uc774\ubc88\uc5d0\ub3c4 \ud655\ub960\uc5d0 \ub300\ud55c \uacc4\uc0b0\ub85c\uc9c1\uc740 \uc791\uc131\ud558\uc9c0 \uc54a\uace0 \uc8fc\uc5b4\uc9c4 \uc870\uac74\uc5d0 \ub300\ud55c \ud45c\ud604\ub9cc \uc874\uc7ac\ud558\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4.\\n\\n## \ubca0\uc774\uc988 \uc815\ub9ac\\n\\n\uc870\uac74\ubd80\ud655\ub960\uacfc \ud568\uaed8 \ub4f1\uc7a5\ud558\ub294 \uac1c\ub150\uc73c\ub85c [\ubca0\uc774\uc988 \uc815\ub9ac](https://ko.wikipedia.org/wiki/%EB%B2%A0%EC%9D%B4%EC%A6%88_%EC%A0%95%EB%A6%AC)\uac00 \uc788\ub2e4.  \\n\uc704 \uc815\ub9ac\ub97c \ud65c\uc6a9\ud574 \ubcf4\ud1b5 \ub2e4\uc74c\uacfc \ube44\uc2b7\ud55c \ubb38\uc81c\ub97c \ud480\uc5c8\ub358 \uacbd\ud5d8\uc774 \uc788\uc744 \uac83\uc774\ub2e4.\\n\\n```\\nA\ub77c\ub294 \uc9c8\ubcd1\uc5d0 \uac78\ub838\uc744 \ub54c, \uadf8\uac83\uc744 \uc9c4\ub2e8\ud558\ub294 \uac80\uc0ac\uc758 \uc815\ud655\ub3c4\uac00 95%\ub77c\uace0 \ud55c\ub2e4.\\n\uc804 \uc138\uacc4\uc5d0\uc11c A\ub77c\ub294 \uc9c8\ubcd1\uc5d0 \uac78\ub9b0 \uc0ac\ub78c\uc740 1%\ub77c\uace0 \ud55c\ub2e4.\\n\uc774 \uac80\uc0ac\ub97c \ud1b5\ud574 A\ub77c\ub294 \uc9c8\ubcd1\uc5d0 \uac78\ub838\ub2e4\ub294 \uacb0\uacfc\uac00 \ub098\uc654\ub2e4.\\n\uc774\ub54c, \uc2e4\uc81c\ub85c A\ub77c\ub294 \uc9c8\ubcd1\uc5d0 \uac78\ub838\uc744 \ud655\ub960\uc740 \uc5bc\ub9c8\uc77c\uae4c?\\n```\\n\\n\uc9c0\uae08\uae4c\uc9c0 \uad6c\ud604\ud55c \uac83\ub4e4\uc744 \ud65c\uc6a9\ud558\uba74 \uacf5\uc2dd\uc5c6\uc774 \ud480 \uc218 \uc788\ub2e4.\\n\\n```typescript\\n// \uc9c8\ubcd1\uc5d0 \ub300\ud55c \ud655\ub960\ubd84\ud3ec\\nconst diseaseDist = Distributions.of([\\n  [true, 0.01],\\n  [false, 0.99],\\n]);\\n// \uc9c8\ubcd1\uc774 \uac78\ub9b0 \uc0ac\ub78c\uc5d0 \ub300\ud55c \uac80\uc0ac\uacb0\uacfc\uc758 \ud655\ub960\ubd84\ud3ec\\nconst positiveTest = Distributions.of([\\n  [true, 0.95],\\n  [false, 0.05],\\n]);\\n// \uc9c8\ubcd1\uc774 \uac78\ub9ac\uc9c0 \uc54a\uc740 \uc0ac\ub78c\uc5d0 \ub300\ud55c \uac80\uc0ac\uacb0\uacfc\uc758 \ud655\ub960\ubd84\ud3ec\\nconst negativeTest = Distributions.of([\\n  [true, 0.05],\\n  [false, 0.95],\\n]);\\n\\nconst result = pipe(\\n  diseaseDist,\\n  chain((disease) =>\\n    pipe(\\n      // \uc9c8\ubcd1\uc5ec\ubd80\uc5d0 \ub530\ub77c \ub2e4\ub978 \ud655\ub960\ubd84\ud3ec\ub97c \uc801\uc6a9\\n      disease ? positiveTest : negativeTest,\\n      // \uc9c8\ubcd1\uc5ec\ubd80\uc640 \uac80\uc0ac\uacb0\uacfc\ub97c tuple\ub85c \ubb36\uc5b4\uc90c\\n      map((test) => [disease, test] as const)\\n    )\\n  ),\\n  // \uac80\uc0ac\uacb0\uacfc\uac00 \uc591\uc131\uc778 \uacbd\uc6b0\ub97c \uac00\uc815\\n  (dist) => dist.conditional(([_, test]) => test),\\n  // \uc2e4\uc81c\ub85c \ubc1c\ubcd1\ud55c \uacbd\uc6b0\uc758 \ud655\ub960\uc744 \uacc4\uc0b0\\n  (dist) => dist.evaluate(([disease]) => disease)\\n);\\n\\nconsole(result.toFixed(2)); // \\"0.16\\"\\n```\\n\\n\uba3c\uc800 \uc9c8\ubcd1\uacfc \uac80\uc0ac\uacb0\uacfc\uc5d0 \ub300\ud55c \ud655\ub960\ubd84\ud3ec\ub97c \uc815\uc758\ud558\uace0, `chain`\uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 \uc9c8\ubcd1\uc5ec\ubd80\uc5d0 \ub530\ub77c \ub2e4\ub978 \ud655\ub960\ubd84\ud3ec\ub97c \uc801\uc6a9\ud55c\ub2e4.  \\n\uc774\ud6c4 \ub450 \ud655\ub960\ubcc0\uc218\ub97c `map`\uc744 \ud65c\uc6a9\ud574 tuple\ub85c \ubb36\uc5b4\uc8fc\uace0 \uc870\uac74\ubd80\ud655\ub960\uacfc \uc6d0\ud558\ub294 \ud655\ub960\uc744 \uacc4\uc0b0\ud55c\ub2e4."},{"id":"2022/12/28/Typescript\ub85c-\ud655\ub960-Monad-\uad6c\ud604\ud558\uae30-1","metadata":{"permalink":"/2022/12/28/Typescript\ub85c-\ud655\ub960-Monad-\uad6c\ud604\ud558\uae30-1","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-12-28-probability-monad-1/index.mdx","source":"@site/blog/2022-12-28-probability-monad-1/index.mdx","title":"Typescript\ub85c \ud655\ub960 Monad \uad6c\ud604\ud558\uae30 - 1","description":"Typescript\ub85c \ud655\ub960\ubd84\ud3ec\ub97c \uc704\ud55c Monad\ub97c \uad6c\ud604\ud558\ub294 \uacfc\uc815\uc744 \uc18c\uac1c\ud55c\ub2e4.","date":"2022-12-28T00:00:00.000Z","formattedDate":"2022\ub144 12\uc6d4 28\uc77c","tags":[{"label":"probability","permalink":"/tags/probability"},{"label":"monad","permalink":"/tags/monad"},{"label":"typescript","permalink":"/tags/typescript"}],"readingTime":13.25,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Typescript\ub85c \ud655\ub960 Monad \uad6c\ud604\ud558\uae30 - 1","slug":"2022/12/28/Typescript\ub85c-\ud655\ub960-Monad-\uad6c\ud604\ud558\uae30-1","description":"Typescript\ub85c \ud655\ub960\ubd84\ud3ec\ub97c \uc704\ud55c Monad\ub97c \uad6c\ud604\ud558\ub294 \uacfc\uc815\uc744 \uc18c\uac1c\ud55c\ub2e4.","authors":"jake","tags":["probability","monad","typescript"]},"prevItem":{"title":"Typescript\ub85c \ud655\ub960 Monad \uad6c\ud604\ud558\uae30 - 2","permalink":"/2022/12/29/Typescript\ub85c-\ud655\ub960-Monad-\uad6c\ud604\ud558\uae30-2"},"nextItem":{"title":"\ubc30\ub2ec\ube44 \ub178\ub178 \ud504\ub85c\uc81d\ud2b8\uc744 \uc9c4\ud589\ud558\uba70","permalink":"/2022/11/07/\ubc30\ub2ec\ube44-\ub178\ub178-\ud504\ub85c\uc81d\ud2b8\uc744-\uc9c4\ud589\ud558\uba70"}},"content":"\ucd5c\uadfc\uc5d0 [Probability Monads from scratch in 100 lines of Haskell](https://dennybritz.com/posts/probability-monads-from-scratch/) \uae00\uc744 \uc77d\uc5b4\ubcf4\uc558\ub294\ub370 \ub0b4\uc6a9\uc774 \uaf64 \uc7ac\ubc0c\uc5b4\uc11c Typescript\ub85c \uad6c\ud604\ud55c \uacfc\uc815\uc744 \uc18c\uac1c\ud558\uace0\uc790 \ud55c\ub2e4.\\n\\n\ud574\ub2f9 \uae00\uc740 haskell\uc744 \uc0ac\uc6a9\ud574 \ud655\ub960\ubd84\ud3ec\ub97c \ud45c\ud604\ud558\ub294 Monad\ub97c \ub9cc\ub4e4\uc5b4\uc11c \uac04\ub2e8\ud55c \ud655\ub960\uc744 \uad6c\ud558\ub294 \uacfc\uc815\uc744 \ub2f4\uace0\uc788\ub2e4.  \\n\ubcf4\ud1b5 \uc21c\uc218 \ud568\uc218\ud615 \uc5b8\uc5b4\uc5d0\uc11c \uc8fc\ub85c \uc0ac\uc6a9\ud558\ub294 `Either`, `State`\uac19\uc740 Monad \ub300\uc2e0 \uc5b8\ub73b \ubcf4\uae30\uc5d0\ub294 \uad00\ub828\uc774 \uc5c6\uc5b4\ubcf4\uc774\ub294 \ud655\ub960\ubd84\ud3ec \uacc4\uc0b0\uc5d0 Monad\ub97c \ud65c\uc6a9\ud558\ub294 \uac83\uc774 \uc2e0\uae30\ud588\ub2e4.  \\n\uadf8\ub798\uc11c \ub098\uc5d0\uac8c \uc870\uae08 \ub354 \uc775\uc219\ud55c \uc5b8\uc5b4\uc778 Typescript\ub85c \uad6c\ud604\ud574\ubcf4\uc558\ub2e4.\\n\\n> \ubaa8\ub4e0 \uad6c\ud604 \ucf54\ub4dc\ub294 [Github](https://github.com/jbl428/study-note/blob/master/functional-programming/probability-monad/Distributions.ts)\uc5d0 \uc62c\ub824\ub450\uc5c8\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## Distributions(\ud655\ub960\ubd84\ud3ec) \uc815\uc758\\n\\n\uba3c\uc800 [\ud655\ub960\ubd84\ud3ec](https://ko.wikipedia.org/wiki/%ED%99%95%EB%A5%A0_%EB%B6%84%ED%8F%AC)\ub97c \uc758\ubbf8\ud558\ub294 `Distributions` \ud0c0\uc785\uc744 \uc815\uc758\ud55c\ub2e4.  \\n\ud655\ub960\ubd84\ud3ec\ub294 \ud06c\uac8c \uc774\uc0b0\ud655\ub960\ubd84\ud3ec\uc640 \uc5f0\uc18d\ud655\ub960\ubd84\ud3ec\uac00 \uc788\ub294\ub370 \uc774\ubc88 \uae00\uc5d0\uc11c\ub294 \uc774\uc0b0\ud655\ub960\ubd84\ud3ec\ub9cc \ub2e4\ub8e8\uae30\ub85c \ud55c\ub2e4.\\n\\n\uc774\uc0b0\ud655\ub960\ubd84\ud3ec\uc758 \ud55c \uac00\uc9c0 \uc608\ub85c \uc8fc\uc0ac\uc704\ub97c \ub358\uc838\uc11c \ub098\uc624\ub294 \uac01 \uc22b\uc790\uc758 \ud655\ub960\uc744 \uad6c\ud558\ub294 \uac83\uc774 \uc788\ub2e4.  \\n\ub098\uc62c \uc218 \uc788\ub294 \uc22b\uc790\ub294 1\ubd80\ud130 6\uae4c\uc9c0 \ucd1d 6\uac00\uc9c0\uac00 \uc788\uace0 \uac01 \uc22b\uc790\uac00 \ub098\uc62c \ud655\ub960\uc740 1/6\uc774\ub2e4.  \\n\uc774\ub97c Typescript\ub85c \ud45c\ud604\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n```typescript\\nenum Dice {\\n  One = 1,\\n  Two,\\n  Three,\\n  Four,\\n  Five,\\n  Six,\\n}\\n\\ntype Probability = number;\\n\\ntype Distributions<RANDOM_VARIABLE> = [RANDOM_VARIABLE, Probability][];\\n\\nconst distributions: Distributions<Dice> = [\\n  [Dice.One, 1 / 6],\\n  [Dice.Two, 1 / 6],\\n  [Dice.Three, 1 / 6],\\n  [Dice.Four, 1 / 6],\\n  [Dice.Five, 1 / 6],\\n  [Dice.Six, 1 / 6],\\n];\\n```\\n\\n`Distributions` \ud0c0\uc785\uc740 \ud655\ub960\ubcc0\uc218(random variable)\ub97c \ub73b\ud558\ub294 \uc784\uc758\uc758 \ud0c0\uc785 `RANDOM_VARIABLE`\uc640 \uadf8 \ud655\ub960\uc744 \ub73b\ud558\ub294 `Probability`\ub85c \uc774\ub8e8\uc5b4\uc9c4 \ud29c\ud50c\uc758 \ubc30\uc5f4\uc774\ub2e4.  \\n\uc774\ucc98\ub7fc \ucee4\uc2a4\ud140 \ud0c0\uc785\uc744 \uc815\uc758\ud574\uc11c \ud655\ub960\ubd84\ud3ec\ub97c \ud45c\ud604\ud560 \uc218 \uc788\uc9c0\ub9cc generic \ud074\ub798\uc2a4\ub97c \uc0ac\uc6a9\ud574\uc11c \ud504\ub85c\ud37c\ud2f0, \ud329\ud1a0\ub9ac \uba54\uc11c\ub4dc\ub97c \ud65c\uc6a9\ud558\uace0\uc790 \ud55c\ub2e4.\\n\\n```typescript\\ntype Probability = number;\\n\\nexport class Distributions<RANDOM_VARIABLE> {\\n  readonly #value: [RANDOM_VARIABLE, Probability][];\\n\\n  private constructor(value: [RANDOM_VARIABLE, Probability][]) {\\n    this.#value = value;\\n  }\\n\\n  static of<RANDOM_VARIABLE>(\\n    value: [RANDOM_VARIABLE, Probability][]\\n  ): Distributions<RANDOM_VARIABLE> {\\n    return new Distributions(value);\\n  }\\n\\n  get value(): [RANDOM_VARIABLE, Probability][] {\\n    return this.#value;\\n  }\\n}\\n```\\n\\n\uc0ac\uc2e4 \ud329\ud1a0\ub9ac \uba54\uc11c\ub4dc\uc5d0\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ucd94\uac00 \uc791\uc5c5\uc744 \uc218\ud589\ud574\uc57c \uc62c\ubc14\ub978 \ud655\ub960\ubd84\ud3ec\ub97c \ub9cc\ub4e4 \uc218 \uc788\ub2e4.\\n\\n- \uc911\ubcf5\ub41c \ud655\ub960\ubcc0\uc218\uac00 \uc788\ub2e4\uba74 \uac01 \ud655\ub960\uc744 \ub354\ud574 \ud558\ub098\ub85c \ud1b5\ud569\\n- \uac01 \ud655\ub960\uc758 \ud569\uc774 1\uc774 \ub418\ub3c4\ub85d \uc815\uaddc\ud654(normalize)\\n\\n\uc704 \uacfc\uc815\uc744 \uad6c\ud604\ud55c \ucd5c\uc885 \ud329\ud1a0\ub9ac \uba54\uc11c\ub4dc \ucf54\ub4dc\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n```typescript\\n  static of<RANDOM_VARIABLE>(\\n    value: [RANDOM_VARIABLE, Probability][]\\n  ): Distributions<RANDOM_VARIABLE> {\\n    const grouped = value.reduce((acc, [variable, prob]) => {\\n      acc.set(variable, (acc.get(variable) ?? 0) + prob);\\n\\n      return acc;\\n    }, new Map<RANDOM_VARIABLE, Probability>());\\n\\n    const sum = Array.from(grouped.values()).reduce((acc, prob) => acc + prob);\\n    const normalized = Array.from(grouped.entries()).map(\\n      ([variable, prob]) =>\\n        [variable, prob / sum] as [RANDOM_VARIABLE, Probability]\\n    );\\n\\n    return new Distributions(normalized);\\n  }\\n```\\n\\n> Javascript\uc758 \ubd80\ub3d9\uc18c\uc218\uc810 \ud45c\ud604\ubc29\uc2dd\uc73c\ub85c \uc778\ud574 \uc815\uaddc\ud654 \uc774\ud6c4 \ud655\ub960\uc758 \ud569\uc774 1\uc774 \ub418\uc9c0 \uc54a\ub294 \uacbd\uc6b0\uac00 \uc788\ub2e4.  \\n> \ub610\ud55c \uc55e\uc73c\ub85c \uc18c\uac1c\ud560 \ud655\ub960 \uacc4\uc0b0\uc5d0\ub3c4 \uc2e4\uc81c \uac12\uacfc \uc57d\uac04\uc758 \uc624\ucc28\uac00 \uc0dd\uae38 \uc218 \uc788\ub2e4.  \\n> \uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc758 \ubaa9\uc801\uc740 \uc815\ud655\ud55c \uacc4\uc0b0\ubcf4\ub2e4 \uad6c\ud604\uc5d0 \ucd08\uc810\uc744 \ub9de\ucd94\uae30 \uc704\ud568\uc774\ubbc0\ub85c \uc774 \uc810\uc744 \ucc38\uace0\ud574\uc8fc\uae38 \ubc14\ub780\ub2e4.\\n\\n\ud3b8\uc758\ub97c \uc704\ud574 \uac01 \ud655\ub960\ubcc0\uc218\uc758 \ud655\ub960\uc774 \ub3d9\uc77c\ud55c \uacbd\uc6b0\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 `uniform` \uba54\uc11c\ub4dc\ub97c \ucd94\uac00\ud55c\ub2e4.\\n\\n```typescript\\n  static uniform<RANDOM_VARIABLE>(\\n    variables: RANDOM_VARIABLE[]\\n  ): Distributions<RANDOM_VARIABLE> {\\n    const prob = 1 / variables.length;\\n\\n    return new Distributions(variables.map((variable) => [variable, prob]));\\n  }\\n```\\n\\n\uc774\ub7ec\uba74 \uacf5\ud3c9\ud55c \ub3d9\uc804\ub358\uc9c0\uae30\ub97c \ud45c\ud604\ud558\ub294 \ud655\ub960\ubd84\ud3ec\ub97c \ub2e4\uc74c\uacfc \uac19\uc774 \ub9cc\ub4e4 \uc218 \uc788\ub2e4.\\n\\n```typescript\\nenum Coin {\\n  Head,\\n  Tail,\\n}\\nconst coin = Distributions.uniform([Coin.Head, Coin.Tail]);\\n\\nconsole.log(coin.value); // [[\'HEAD\', 0.5], [\'TAIL\', 0.5]]\\n```\\n\\n## Event(\uc0ac\uac74) \uacc4\uc0b0\\n\\n\ud655\ub960\ubd84\ud3ec\ub97c \ub9cc\ub4e4\uc5c8\uc73c\ub2c8 \uc774\uc81c \ud2b9\uc815 \uc0ac\uac74\uc5d0 \ub300\ud55c \ud655\ub960\uc744 \uacc4\uc0b0\ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\ud604\ud574\ubcf4\uc790.  \\n\uc0ac\uac74\uc5d0 \ub300\ud55c \uc815\uc758\ub294 \ud655\ub960\ubcc0\uc218\ub97c \uc778\uc790\ub85c \ubc1b\uace0 boolean\uc744 \ubc18\ud658\ud558\ub294 \ud568\uc218\ub85c \ub9cc\ub4e4\uc5c8\uace0 \uc774\ub97c `Event` \ud0c0\uc785\uc73c\ub85c \uc815\uc758\ud588\ub2e4.\\n\\n```typescript\\ntype Event<RANDOM_VARIABLE> = (variable: RANDOM_VARIABLE) => boolean;\\n```\\n\\n\uc774\uc81c `Distributions` \ud074\ub798\uc2a4\uc5d0 `evaluate` \uba54\uc11c\ub4dc\ub97c \ucd94\uac00\ud574\ubcf4\uc790.  \\n\uc774 \uba54\uc11c\ub4dc\ub294 \uc0ac\uac74\uc744 \ubc1b\uc544\uc11c \ud574\ub2f9 \uc0ac\uac74\uc5d0 \ud574\ub2f9\ud558\ub294 \ud655\ub960\ub9cc \ud544\ud130\ub9c1\ud55c \ucd1d\ud569\uc744 \ubc18\ud658\ud55c\ub2e4.\\n\\n```typescript\\n  evaluate(event: Event<RANDOM_VARIABLE>): Probability {\\n    return this.#value.reduce(\\n      (acc, [variable, prob]) => (event(variable) ? acc + prob : acc),\\n      0\\n    );\\n  }\\n```\\n\\n`evaluate` \uba54\uc18c\ub4dc\ub97c \ud65c\uc6a9\ud558\uba74 \uc8fc\uc0ac\uc704\ub97c \ub358\uc84c\uc744 \ub54c \uc9dd\uc218\uac00 \ub098\uc624\ub294 \ud655\ub960\uc744 \uacc4\uc0b0\ud560 \uc218 \uc788\ub2e4.\\n\\n```typescript\\nconst dice = Distributions.uniform([\\n  Dice.One,\\n  Dice.Two,\\n  Dice.Three,\\n  Dice.Four,\\n  Dice.Five,\\n  Dice.Six,\\n]);\\nconst evenEvent = (dice: Dice) => dice % 2 === 0;\\n\\nconsole.log(dice.evaluate(evenEvent)); // 0.5\\n```\\n\\n## Functor\uc640 \uc8fc\ubcc0\ud655\ub960\ubd84\ud3ec\\n\\n\uae30\ubcf8\uc801\uc778 \ud655\ub960\ubd84\ud3ec \uc815\uc758\uac00 \ub05d\ub0ac\uc73c\ub2c8 \uc774\uc81c `Distributions`\ub97c Monad\ub85c \ub9cc\ub4e4\uae30 \uc704\ud55c \uc791\uc5c5\uc744 \ud574\ubcf4\uc790.  \\n`Distribution`\uac00 Monad\ub97c \ub9cc\uc871\ud558\ub824\uba74 \uc6b0\uc120 Functor, Applicative\ub97c \ub9cc\uc871\ud574\uc57c \ud55c\ub2e4.\\n\\n\uba3c\uc800 Functor\ub97c \ub9cc\uc871\ud558\ub824\uba74 `map` \ud568\uc218\ub97c \uad6c\ud604\ud574\uc57c \ud55c\ub2e4.  \\n`map` \ud568\uc218\ub294 `\uc784\uc758\uc758 \ud655\ub960\ubcc0\uc218 A\ub97c \ubc1b\uc544\uc11c \ud655\ub960\ubcc0\uc218 B\ub85c \ubcc0\ud658\ud558\ub294 \ud568\uc218`\ub97c \uc778\uc790\ub85c \ubc1b\uc544 `\ud655\ub960\ubd84\ud3ec\ub97c \ubcc0\ud658\ud558\ub294 \ud568\uc218`\ub97c \ubc18\ud658\ud55c\ub2e4.\\n\\n```typescript\\ndeclare function map<A, B>(\\n  f: (a: A) => B\\n): (fa: Distributions<A>) => Distributions<B>;\\n```\\n\\n\uad6c\ud604\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n> `map` \ud568\uc218\ub97c `Distribution` \ud074\ub798\uc2a4\uc758 \uba54\uc11c\ub4dc\ub85c \ub9cc\ub4e4 \uc218 \uc788\uc9c0\ub9cc \uc774\ubc88\uc5d0\ub294 \ucd94\ud6c4\uc5d0 \uc18c\uac1c\ud560 pipeline\uc744 \ud45c\ud604\ud558\uae30 \uc704\ud574 \uc77c\ubc18\ud568\uc218\ub85c \uad6c\ud604\ud588\ub2e4.\\n\\n```typescript\\nexport const map =\\n  <A, B>(f: (a: A) => B) =>\\n  (fa: Distributions<A>): Distributions<B> =>\\n    Distributions.of(fa.value.map(([variable, prob]) => [f(variable), prob]));\\n```\\n\\n\uc704 \ub85c\uc9c1\uc740 \uc8fc\uc5b4\uc9c4 \ud655\ub960\ubd84\ud3ec fa\uc758 \ub0b4\ubd80\ub97c \uc21c\ud68c\ud558\uba74\uc11c \ud655\ub960\ubcc0\uc218\ub9cc \uc8fc\uc5b4\uc9c4 \ud568\uc218\ub97c \ud1b5\ud574 \ubcc0\ud658\ud55c \ud6c4 \uc0c8\ub85c\uc6b4 \ud655\ub960\ubd84\ud3ec\ub97c \ub9cc\ub4e0\ub2e4.  \\n\uad6c\ud604\ubd80\ub9cc \ubcf8\ub2e4\uba74 \uc774 \ud568\uc218\uac00 \ud06c\uac8c \uc720\uc6a9\ud574 \ubcf4\uc774\uc9c0 \uc54a\uc9c0\ub9cc [\uacb0\ud569\ud655\ub960\ubd84\ud3ec](https://ko.wikipedia.org/wiki/%EA%B2%B0%ED%95%A9%EB%B6%84%ED%8F%AC)\uc758 [\uc8fc\ubcc0\ud655\ub960\ubd84\ud3ec](https://ko.wikipedia.org/wiki/%EC%A3%BC%EB%B3%80_%EB%B6%84%ED%8F%AC)\uc744 \uc27d\uac8c \uacc4\uc0b0\ud560 \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc900\ub2e4.\\n\\n\uacb0\ud569\ud655\ub960\ubd84\ud3ec\uc758 \uc608\uc81c\ub85c \ub2e4\uc74c\uacfc \uac19\uc740 \ub450 \ud655\ub960\ubcc0\uc218\uc5d0 \ub300\ud55c \ud45c\ub97c \uc0dd\uac01\ud560 \uc218 \uc788\ub2e4.  \\nX, Y \ubaa8\ub450 0\uacfc 1\uc758 \uac12\uc744 \uac00\uc9c0\uba70 \uac01 \uac12\uc774 \ub098\uc62c \uc218 \uc788\ub294 \uacbd\uc6b0\ub97c \ud45c\ud604\ud558\uc600\ub2e4.\\n\\n| Y\\\\X | 0   | 1   |\\n| --- | --- | --- |\\n| 0   | 0.2 | 0.1 |\\n| 1   | 0.4 | 0.3 |\\n\\n\uc704 \ub0b4\uc6a9\uc744 \ucf54\ub4dc\ub85c \ud45c\ud604\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n```typescript\\ntype JoinVariable = [X: number, Y: number];\\n\\nconst dist = Distributions.of<JoinVariable>([\\n  [[0, 0], 0.2],\\n  [[0, 1], 0.4],\\n  [[1, 0], 0.1],\\n  [[1, 1], 0.3],\\n]);\\n```\\n\\n`map`\ud568\uc218\ub97c \ud65c\uc6a9\ud558\uba74 X \ub610\ub294 Y\uc5d0 \ub300\ud55c \uc8fc\ubcc0\ud655\ub960\ubd84\ud3ec\ub97c \uc27d\uac8c \uacc4\uc0b0\ud560 \uc218 \uc788\ub2e4.\\n\\n> `map`\uc758 \uc778\uc790\ub85c \uc81c\uacf5\ud558\ub294 \ud568\uc218\uc758 \ud0c0\uc785\ucd94\ub860\uc744 \uc704\ud574 `fp-ts`\uc758 `pipe` \ud568\uc218\ub97c \uc0ac\uc6a9\ud588\ub2e4.\\n\\n```typescript\\nimport { pipe } from \\"fp-ts/function\\";\\n\\nconst marginalX = pipe(\\n  dist,\\n  map(([x, _]) => x)\\n);\\nconst marginalY = pipe(\\n  dist,\\n  map(([_, y]) => y)\\n);\\n\\nconsole.log(marginalX(dist).value); // [[0, 0.6], [1, 0.4]]\\nconsole.log(marginalY(dist).value); // [[0, 0.3], [1, 0.7]]\\n```\\n\\n## Applicative Functor\uc640 \uacb0\ud569\ud655\ub960\ubd84\ud3ec\\n\\n\uc774\uc804 \uc7a5\uc5d0\uc11c \uc18c\uac1c\ud55c \uacb0\ud569\ud655\ub960\ubd84\ud3ec\ub97c \uad6c\ud558\uae30 \uc704\ud574 \uc5ec\ub7ec\uac1c\uc758 \ud655\ub960\ubd84\ud3ec\ub97c \uacb0\ud569\ud558\ub294 \uacfc\uc815\uc774 \ud544\uc694\ud558\ub2e4.  \\n\ub450 \uac1c\uc758 \uc0ac\uac74 x, y\uac00 \uc788\uc744 \ub54c, x\uc640 y\uac00 \uc11c\ub85c \ub3c5\ub9bd\uc774\ub77c\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \uacf5\uc2dd\uc744 \uc0ac\uc6a9\ud574 \uacb0\ud569\ud655\ub960\ubd84\ud3ec\ub97c \uad6c\ud560 \uc218 \uc788\ub2e4.\\n\\n```\\nP(x,y) = P(x)P(y)\\n```\\n\\n\uc774\ub97c \uad6c\ud604\ud558\uae30 \uc704\ud55c \ud568\uc218 `join`\uc758 \uc2dc\uadf8\ub2c8\uccd0\ub97c \uc0dd\uac01\ud574\ubcf4\uc790.  \\n\uc778\uc790\ub85c \ub450 \uac1c\uc758 `Distributions`\ub97c \ubc1b\uc73c\uba70 \ub450 \ubd84\ud3ec\ub97c \uacb0\ud569\ud55c \uc0c8\ub85c\uc6b4 `Distributions`\ub97c \ubc18\ud658\ud558\ub294 \ud615\ud0dc\uc77c \uac83\uc774\ub2e4.\\n\\n```typescript\\ndeclare function join<A, B, C>(\\n  fa: Distributions<A>,\\n  fb: Distributions<B>\\n): Distributions<C>;\\n```\\n\\n\uc704 \ud568\uc218\ub97c \uc9c1\uc811 \uad6c\ud604\ud560 \uc218 \uc788\uaca0\uc9c0\ub9cc \uc774\ubc88\uc5d0\ub294 `\uad6c\ud604\ud558\uae30 \ub354 \uc26c\uc6b4 \ud615\ud0dc\uc758 \ud568\uc218`\ub97c `join`\uc73c\ub85c \ubcc0\ud658\ud574\uc8fc\ub294 \ud568\uc218\ub97c \uad6c\ud604\ud574\ubcf4\uc790.  \\n\uc5ec\uae30\uc11c \ub9d0\ud558\ub294 `\uad6c\ud604\ud558\uae30 \uc26c\uc6b4 \ud615\ud0dc\uc758 \ud568\uc218`\ub780 \ud655\ub960\ubcc0\uc218\uac04\uc758 \ubcc0\ud658\ub9cc \ub2e4\ub8e8\ub294 \ud568\uc218\ub97c \uc758\ubbf8\ud55c\ub2e4.\\n\\n```typescript\\ndeclare function joinVariables<A, B, C>(a: A, b: B): C;\\n```\\n\\n\uc704\uc640 \uac19\uc740 \ud568\uc218\ub294 \uc21c\uc218 \ud568\uc218\ud615 \uc5b8\uc5b4\uc5d0\uc11c\ub294 \ubcf4\ud1b5 Application Functor\ub97c \uc0ac\uc6a9\ud574 \uad6c\ud604\ud55c\ub2e4.  \\n`Distributions`\uac00 Application Functor\ub97c \ub9cc\uc871\ud558\uae30 \uc704\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \ud568\uc218\ub97c \uad6c\ud604\ud574\uc57c \ud55c\ub2e4.\\n\\n> \ud568\uc218\uc758 \uc774\ub984 `ap`\ub294 `fp-ts`\uc758 \uc774\ub984 \ucee8\ubca4\uc158\uc744 \ub530\uc654\ub2e4.\\n\\n```typescript\\ndeclare function ap<A, B>(\\n  fa: Distributions<A>\\n): (fab: Distributions<(a: A) => B>) => Distributions<B>;\\n```\\n\\n\uc2e4\uc81c \uad6c\ud604\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n```typescript\\nexport const ap =\\n  <A, B>(fa: Distributions<A>) =>\\n  (fab: Distributions<(a: A) => B>): Distributions<B> =>\\n    Distributions.of(\\n      fab.value.flatMap(\\n        ([f, prob1]) =>\\n          fa.value.map(([a, prob2]) => [f(a), prob1 * prob2]) as [\\n            B,\\n            Probability\\n          ][]\\n      )\\n    );\\n```\\n\\n\uad6c\ud604\ub85c\uc9c1\uc744 \ubcf4\uba74 fab\ubcc0\uc218\ub294 `\ud568\uc218\uc758 \ud655\ub960\ubd84\ud3ec`\ub77c\ub294 \uc810\uc774 \ud2b9\uc774\ud558\uba70 \uc77c\ubc18\uc801\uc778 \ud655\ub960\ubd84\ud3ec fa\uc640 \uacb0\ud569\ud558\uac8c \ub41c\ub2e4.  \\n\ub450 \ud655\ub960\ubd84\ud3ec\ub97c \uc21c\ud68c\ud558\uba74\uc11c `f(a)`\ub97c \ud1b5\ud574 \uc0c8\ub85c\uc6b4 \ud655\ub960\ubcc0\uc218\ub97c \uc0dd\uc131\ud558\uace0 `prob1 * prob2`\ub97c \ud1b5\ud574 \uac01 \ud655\ub960\uc744 \uacf1\ud55c\ub2e4.\\n\\n\ud568\uc218\uc758 \uad6c\ud604\uc740 \uc870\uae08 \ubcf5\uc7a1\ud55c \ud3b8\uc774\uc9c0\ub9cc \uc0ac\uc6a9\ubc95\uc740 \uac04\ub2e8\ud558\ub2e4.\\n\\n```typescript\\n// \ub450 \ud655\ub960\ubcc0\uc218\ub97c \uacb0\ud569\ud558\ub294 \ud568\uc218\ub97c \ucee4\ub9c1\\nconst joinVariables = (a: number) => (b: number) => `(${a}, ${b})`;\\n\\n// \uc784\uc758\uc758 \ud655\ub960\ubd84\ud3ec \uc815\uc758\\nconst dist1 = Distributions.uniform([1, 2]);\\nconst dist2 = Distributions.uniform([1, 2, 3, 4]);\\n\\n// map\uacfc ap\ub97c \uc0ac\uc6a9\ud574 \uacb0\ud569\ud655\ub960\ubd84\ud3ec \uacc4\uc0b0\\nconst joinDist = pipe(dist1, map(joinVariables), ap(dist2));\\n\\nconsole.log(joinDist.value);\\n/*\\n  [\\n    [\\"(1, 1)\\", 0.125],\\n    [\\"(1, 2)\\", 0.125],\\n    [\\"(1, 3)\\", 0.125],\\n    [\\"(1, 4)\\", 0.125],\\n    [\\"(2, 1)\\", 0.125],\\n    [\\"(2, 2)\\", 0.125],\\n    [\\"(2, 3)\\", 0.125],\\n    [\\"(2, 4)\\", 0.125],\\n  ]\\n */\\n```\\n\\n\uc704 \uc608\uc81c\uc5d0\uc11c\ub294 \ub450 \uac1c\uc758 \ud655\ub960\ubcc0\uc218\ub9cc \ub2e4\ub8e8\uc5c8\uc9c0\ub9cc \ub354 \ub9ce\uc740 \ud655\ub960\ubcc0\uc218\uc5d0\ub3c4 \uac19\uc740 \ubc29\uc2dd\uc73c\ub85c \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4.  \\njoinVariables \uc5d0 \uc6b0\uc120 map\uc744 \uc801\uc6a9\ud55c \ud6c4 \uc774\ud6c4\uc5d0\ub294 \uc778\uc790\uc758 \uac1c\uc218\uc5d0 \ub9de\uac8c ap\ub97c \uc801\uc6a9\ud558\uba74 \ub41c\ub2e4.\\n\\n```typescript\\npipe(dist1, map(joinVariables), ap(dist2), ap(dist3), ap(dist4) ...)\\n```\\n\\n:::info\\nhaskell\uc5d0\uc11c\ub294 \uc704 \ub85c\uc9c1\uc744 \ub354 \uac04\uacb0\ud558\uac8c \ud45c\ud604\ud560 \uc218 \uc788\ub2e4.  \\n`<$>`\ub97c map, `<*>`\ub97c ap\ub85c \uc0dd\uac01\ud558\uba74 \ub41c\ub2e4.\\n\\n```haskell\\njoinVariables <$> dist1 <*> dist2 <*> dist3 <*> dist4 ...\\n```\\n\\n:::\\n\\n\uc704 \uc608\uc81c\uc5d0\uc11c\ub294 joinVariables\uac00 \ud56d\uc0c1 \ucee4\ub9c1\ud568\uc218\uc5ec\uc57c \ud558\ub294 \ub2e8\uc810\uc774 \uc874\uc7ac\ud55c\ub2e4.\\n\\n> haskell\uc5d0\uc11c\ub294 \ubaa8\ub4e0 \ud568\uc218\uac00 \uc790\ub3d9\uc73c\ub85c \ucee4\ub9c1\ub418\uae30 \ub54c\ubb38\uc5d0 \uc774\ub7f0 \ubb38\uc81c\ub294 \uc5c6\ub2e4.\\n\\n\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 `liftA2` \ud568\uc218\ub97c \ub9cc\ub4e4\uc5b4 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\\n```typescript\\nexport const liftA2 =\\n  <A, B, C>(f: (a: A, b: B) => C) =>\\n  (fa: Distributions<A>, fb: Distributions<B>): Distributions<C> =>\\n    pipe(\\n      fa,\\n      map((a) => (b: B) => f(a, b)),\\n      ap(fb)\\n    );\\n```\\n\\n`liftA2`\ub294 \uc55e\uc11c \uc774\uc57c\uae30\ud55c `\uad6c\ud604\ud558\uae30 \ub354 \uc26c\uc6b4 \ud615\ud0dc\uc758 \ud568\uc218`\ub97c `join`\uc73c\ub85c \ubcc0\ud658\ud574\uc8fc\ub294 \ud568\uc218\uc758 \ud55c \uc608\ub85c \ubcfc \uc218 \uc788\ub2e4.\\n\\n```typescript\\nconst joinVariables = (a: number, b: number) => `(${a}, ${b})`;\\nconst join = liftA2(joinVariables);\\n\\nconst dist1 = Distributions.uniform([1, 2]);\\nconst dist2 = Distributions.uniform([1, 2, 3, 4]);\\n\\nconst joinDist = join(dist1, dist2);\\n```\\n\\n\ub9cc\uc57d `join`\uacfc \uac19\uc740 \ud568\uc218\ub97c \uc9c1\uc811 \uad6c\ud604\ud588\ub2e4\uba74 \ud655\ub960\ubcc0\uc218\uc640 \ud655\ub960\uc744 \ubaa8\ub450 \uace0\ub824\ud558\ub294 \ub85c\uc9c1\uc744 \uc9c1\uc811 \uad6c\ud604\ud574\uc57c \ud588\uc744 \uac83\uc774\ub2e4.  \\n\ud558\uc9c0\ub9cc `liftA2`\ub97c \uc0ac\uc6a9\ud558\uba74 \uc624\uc9c1 **\ud655\ub960\ubcc0\uc218\uc758 \uacb0\ud569\ub85c\uc9c1**\ub9cc \uace0\ub824\ud558\uba74 \ub418\uae30\uc5d0 \ub354 \ud3b8\ub9ac\ud558\ub2e4."},{"id":"2022/11/07/\ubc30\ub2ec\ube44-\ub178\ub178-\ud504\ub85c\uc81d\ud2b8\uc744-\uc9c4\ud589\ud558\uba70","metadata":{"permalink":"/2022/11/07/\ubc30\ub2ec\ube44-\ub178\ub178-\ud504\ub85c\uc81d\ud2b8\uc744-\uc9c4\ud589\ud558\uba70","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-11-07-bae-no-architecture/index.mdx","source":"@site/blog/2022-11-07-bae-no-architecture/index.mdx","title":"\ubc30\ub2ec\ube44 \ub178\ub178 \ud504\ub85c\uc81d\ud2b8\uc744 \uc9c4\ud589\ud558\uba70","description":"\uc0ac\uc774\ub4dc \ud504\ub85c\uc81d\ud2b8\ub85c \uc9c4\ud589\ud558\uace0 \uc788\ub294 \ubc30\ub2ec\ube44 \ub178\ub178 \ubc31\uc5d4\ub4dc \uc11c\ubc84\uc5d0 \ub300\ud55c \uc18c\uac1c\uc640 \uae30\uc220\uc801\uc778 \uace0\ubbfc\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc744 \ub2f4\uc558\ub2e4.","date":"2022-11-07T00:00:00.000Z","formattedDate":"2022\ub144 11\uc6d4 7\uc77c","tags":[{"label":"hexagonal","permalink":"/tags/hexagonal"},{"label":"fp-ts","permalink":"/tags/fp-ts"},{"label":"prisma","permalink":"/tags/prisma"}],"readingTime":21.29,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"\ubc30\ub2ec\ube44 \ub178\ub178 \ud504\ub85c\uc81d\ud2b8\uc744 \uc9c4\ud589\ud558\uba70","slug":"2022/11/07/\ubc30\ub2ec\ube44-\ub178\ub178-\ud504\ub85c\uc81d\ud2b8\uc744-\uc9c4\ud589\ud558\uba70","authors":"jake","tags":["hexagonal","fp-ts","prisma"]},"prevItem":{"title":"Typescript\ub85c \ud655\ub960 Monad \uad6c\ud604\ud558\uae30 - 1","permalink":"/2022/12/28/Typescript\ub85c-\ud655\ub960-Monad-\uad6c\ud604\ud558\uae30-1"},"nextItem":{"title":"MongoDB Atlas Search\ub85c \uceec\ub7fc\uae30\ubc18 \uc815\ub82c\ud558\uae30","permalink":"/2022/09/12/MongoDB-Atlas-Search\ub85c-\uceec\ub7fc\uae30\ubc18-\uc815\ub82c\ud558\uae30"}},"content":"\uc0ac\uc774\ub4dc \ud504\ub85c\uc81d\ud2b8\ub85c \uc9c4\ud589\ud558\uace0 \uc788\ub294 [\ubc30\ub2ec\ube44 \ub178\ub178 \ubc31\uc5d4\ub4dc \uc11c\ubc84](https://github.com/bae-no/bae-no-server)\uc5d0 \ub300\ud55c \uc18c\uac1c\uc640 \uae30\uc220\uc801\uc778 \uace0\ubbfc\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc744 \ub2f4\uc558\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \ud504\ub85c\uc81d\ud2b8 \uc18c\uac1c\\n\\n\ubc30\ub2ec\ube44 \ub178\ub178 \ud504\ub85c\uc81d\ud2b8\ub294 \uc774\ub984 \uadf8\ub300\ub85c \uc8fc\ubb38 \uc74c\uc2dd\uc758 \ubc30\ub2ec\ube44\ub97c \uc904\uc77c \uc218 \uc788\ub294 \uae30\ud68c\ub97c \uc81c\uacf5\ud574\uc900\ub2e4.  \\n\uadfc\ucc98\uc5d0 \uc788\ub294 \uc0ac\ub78c\ub4e4\ub07c\ub9ac \ubaa8\uc5ec \uac19\uc774 \uc8fc\ubb38\ud55c \ud6c4 \ubc30\ub2ec\ube44\ub97c \ub098\ub220\uc11c \uc9c0\ubd88\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4.\\n\\n\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ud615\ud0dc\ub85c \uc81c\uacf5\ud558\uba70 \uc0ac\uc6a9\uc790\ub294 \ubcf8\uc778 \uc8fc\ubcc0\uc5d0 \uc788\ub294 \uacf5\uc720\ub51c\uc744 \ucc3e\uc544 \ucc38\uc5ec\ud55c \ud6c4 \ucc44\ud305\uc744 \ud1b5\ud574 \uc11c\ub85c \uc18c\ud1b5\ud558\uc5ec \uc8fc\ubb38 \ubc0f \uc815\uc0b0\uc744 \uc9c4\ud589\ud55c\ub2e4.  \\n\uac04\ub2e8\ud788 \ub9d0\ud574, \uc9e7\uc740 \uc8fc\uae30\ub97c \uac00\uc9c0\ub294 \ucc44\ud305\ubc29 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc774\ub77c\uace0 \ubcfc \uc218 \uc788\ub2e4.\\n\\n![share-deal](share-deal.jpg)\\n![chat-room](chat-room.jpg)\\n\\n## \uac1c\ubc1c \uc2a4\ud0dd\\n\\n\ubc31\uc5d4\ub4dc \uc11c\ubc84\uc758 \uac1c\ubc1c \uc2a4\ud0dd\uc740 \ub2e4\uc74c\uacfc \uac19\uc774 \uc774\ub8e8\uc5b4\uc838 \uc788\ub2e4.\\n\\n- Nest.JS\\n- GraphQL\\n- MongoDB\\n- Prisma\\n\\nNest.js\uc5d0\uc11c \uc8fc\ub85c REST\ub85c\ub9cc \uac1c\ubc1c\uc744 \uc9c4\ud589\ud574\ubd10\uc11c \uc774\ubc88\uc5d0 GraphQL\uc744 \uc0ac\uc6a9\ud574\ubcf4\uace0 \uc2f6\uc5c8\ub2e4.  \\nMongoDB\ub294 \ud68c\uc0ac\uc5d0\uc11c \uac80\uc0c9\uc5d4\uc9c4\uc73c\ub85c \uc0ac\uc6a9\ud558\uba74\uc11c \ucc98\uc74c \uc0ac\uc6a9\ud574\ubcf4\uc558\ub294\ub370 \uadf8 \uacbd\ud5d8\uc774 \uc88b\uc558\uace0 \ucc44\ud305\ubc29 \uc774\ub825\uc744 \uc800\uc7a5\ud558\uae30 \uc88b\uc740 \uad6c\uc870\ub77c\uace0 \uc0dd\uac01\ud574 \uc120\ud0dd\ud558\uc600\ub2e4.  \\nPrisma\ub3c4 \uc774\ubc88\uc5d0 \ucc98\uc74c \uc0ac\uc6a9\ud574\ubcf4\uc558\uace0 \uc608\uc804\ubd80\ud130 \uc0ac\uc6a9\ud574\uc628 TypeORM, MikroORM\uacfc \ube44\uad50\ud574 \uc5b4\ub5a4\uc810\uc774 \uc88b\uc744\uc9c0 \uacbd\ud5d8\ud558\uace0\uc790 \uc120\ud0dd\ud558\uc600\ub2e4.\\n\\n## \ud504\ub85c\uc81d\ud2b8 \uad6c\uc870\\n\\n\uc5c5\ubb34\uc5d0\uc11c \uacc4\uc18d \uc0ac\uc6a9\ud574\uc628 \uacc4\uce35\ud615 \uc544\ud0a4\ud14d\uccd0\ub300\uc2e0 \ud5e5\uc0ac\uace0\ub0a0 \uc544\ud0a4\ud14d\uccd0\ub77c\uace0 \ubd88\ub9ac\ub294 \ud3ec\ud2b8\uc640 \uc5b4\ub311\ud130 \ud328\ud134\uc744 \uc0ac\uc6a9\ud588\ub2e4.  \\n\uc804\uccb4\uc801\uc778 \ub514\ub809\ud1a0\ub9ac \uad6c\uc870\ub294 [\ub9cc\ub4e4\uba74\uc11c \ubc30\uc6b0\ub294 \ud074\ub9b0 \uc544\ud0a4\ud14d\ucc98](http://www.yes24.com/Product/Goods/105138479)\ub97c \ucc38\uace0\ud574\uc11c \ub9cc\ub4e4\uc5c8\ub2e4.  \\n\ud30c\uc77c\uba85\ub3c4 \uc77c\ubc18\uc801\uc778 Nest.js\ucee8\ubca4\uc158 \ub300\uc2e0 JVM\uc5d0\uc11c \ub9ce\uc774 \uc0ac\uc6a9\ud558\ub294 \ud328\ud134\uc744 \uc0ac\uc6a9\ud588\ub2e4.\\n\\n```\\nsample\\n\u251c\u2500\u2500 SampleModule.ts\\n\u251c\u2500\u2500 adapter\\n\u2502\xa0\xa0 \u251c\u2500\u2500 in\\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 gql\\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u251c\u2500\u2500 SampleMutationResolver.ts\\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u251c\u2500\u2500 SampleQueryResolver.ts\\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u251c\u2500\u2500 SampleSubscriptionResolver.ts\\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u251c\u2500\u2500 input\\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u2502\xa0\xa0 \u2514\u2500\u2500 CreateSampleInput.ts\\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u2514\u2500\u2500 response\\n\u2502\xa0\xa0 \u2502\xa0\xa0         \u2514\u2500\u2500 SampleResponse.ts\\n\u2502\xa0\xa0 \u2514\u2500\u2500 out\\n\u2502\xa0\xa0     \u2514\u2500\u2500 persistence\\n\u2502\xa0\xa0         \u251c\u2500\u2500 SampleOrmMapper.ts\\n\u2502\xa0\xa0         \u251c\u2500\u2500 SampleQueryRepositoryAdapter.ts\\n\u2502\xa0\xa0         \u2514\u2500\u2500 SampleRepositoryAdapter.ts\\n\u251c\u2500\u2500 application\\n\u2502\xa0\xa0 \u251c\u2500\u2500 port\\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 in\\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 SampleCommandUseCase.ts\\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2502\xa0\xa0 \u251c\u2500\u2500 SampleQueryUseCase.ts\\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 dto\\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2502\xa0\xa0     \u2514\u2500\u2500 CreateSampleCommand.ts\\n\u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 out\\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u251c\u2500\u2500 SampleQueryRepositoryPort.ts\\n\u2502\xa0\xa0 \u2502\xa0\xa0     \u2514\u2500\u2500 SampleRepositoryPort.ts\\n\u2502\xa0\xa0 \u2514\u2500\u2500 service\\n\u2502\xa0\xa0     \u251c\u2500\u2500 SampleCommandService.ts\\n\u2502\xa0\xa0     \u2514\u2500\u2500 SampleQueryService.ts\\n\u2514\u2500\u2500 domain\\n    \u2514\u2500\u2500 Sample.ts\\n```\\n\\nsrc \ub514\ub809\ud1a0\ub9ac \uc544\ub798\uc5d0 \ubaa8\ub4c8\ubcc4\ub85c \ub514\ub809\ud1a0\ub9ac\ub97c \ub9cc\ub4e4\uace0 \uadf8 \uc548\uc5d0 \uc704\uc640 \uac19\uc740 \uad6c\uc870\ub85c \ud30c\uc77c\uc744 \ub9cc\ub4e4\uc5c8\ub2e4.  \\n\ubaa8\ub4c8 \uc548\uc5d0\ub294 \ud06c\uac8c domain, application, adapter\ub85c \ub098\ub204\uc5c8\uace0 \uac01\uac01 \ub2e4\uc74c\uacfc \uad00\ub828\ub41c \ub85c\uc9c1\uc774 \ub4e4\uc5b4\uc788\ub2e4.\\n\\n- domain: \ub3c4\uba54\uc778 \ubaa8\ub378\uacfc \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\\n- application: \ub3c4\uba54\uc778 \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\ub294 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\\n- adapter: GraphQL, Notification, DB\ub4f1 \uc778\ud504\ub77c\uc640 \uad00\ub828\ub41c \ub85c\uc9c1\\n\\n\uc2dc\uac04\uc774 \uc9c0\ub098\uba74 \uc5b8\uc81c\ub4e0\uc9c0 \ubcc0\uacbd\ub420 \uc218 \uc788\ub294 \uc694\uc18c\ub294 adapter\uc5d0 \ubaa8\uc544\ub450\uace0, \ub3c4\uba54\uc778\uacfc \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc740 application\uacfc domain\uc5d0 \uc704\uce58\ud55c\ub2e4.  \\napplication\uc5d0\ub294 \uc678\ubd80\uc5d0\uc11c \uc0ac\uc6a9\ud560 `inbound port`\uc778\ud130\ud398\uc774\uc2a4\uc640 Service\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 `outbound port`\uc778\ud130\ud398\uc774\uc2a4\uac00 \uc788\ub2e4.  \\nadatper\ub294 `outbound port`\ub97c \uad6c\ud604\ud558\uace0 `inbound port`\ub97c \uc0ac\uc6a9\ud574 GraphQL\uacfc \uac19\uc740 api\uc694\uccad\uacfc \uc751\ub2f5\ub85c\uc9c1\uc744 \uad6c\ud604\ud55c\ub2e4.  \\ndomain\uc740 \ubaa8\ub450 \uc21c\uc218\ud55c \ud074\ub798\uc2a4\ub9cc \uac00\uc9c0\uace0 \uc788\uc73c\uba70 \ud575\uc2ec\uc801\uc778 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\ub9cc\uc744 \uac00\uc9c0\uace0 \uc788\ub2e4.\\n\\n![dir-structure](dir-structure.jpg)\\n\\n## fp-ts\\n\\n[fp-ts](https://gcanti.github.io/fp-ts/)\ub294 \ub300\uc218\uc801 \uc790\ub8cc\ud615\uc744 \uc81c\uacf5\ud558\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub85c `Option`, `Task`, `Either` \ub4f1\uc758 \uc720\uc6a9\ud55c \ud0c0\uc785\uc744 \uc81c\uacf5\ud55c\ub2e4.  \\n\uc608\uc804\ubd80\ud130 \uc5ec\ub7ec \ud504\ub85c\uadf8\ub798\ubc0d \ud328\ub7ec\ub2e4\uc784\uc744 \uac19\uc774 \uc0ac\uc6a9\ud574\ubcf4\uace0 \uc2f6\uc5c8\uace0 \uc5b4\ub5a4 \uc7a5\ub2e8\uc810\uc774 \uc788\uc744\uc9c0 \uad81\uae08\ud588\ub2e4.\\n\\n\uc774\uc804 `santa-close`\ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c `spring + kotlin arrow`\ub97c \uc0ac\uc6a9\ud588\uc9c0\ub9cc \uc81c\ub300\ub85c \ud65c\uc6a9\ud558\uc9c0 \ubabb\ud588\ub2e4.  \\n\uc774\ubc88\uc5d0\ub294 \ub300\ubd80\ubd84\uc758 \uba54\uc18c\ub4dc \ub0b4\ubd80\uad6c\ud604\uc740 `fp-ts`\ub97c \ud65c\uc6a9\ud574 \uc21c\uc218 \uba54\uc18c\ub4dc\ub85c \ub9cc\ub4e4\uace0, \uc2e4\uc81c \uc751\ub2f5\uac12\uc744 \ubc18\ud658\ud574\uc57c \ud558\ub294 resolver\uc5d0\uc11c\ub9cc \uc0ac\uc774\ub4dc \uc774\ud399\ud2b8\uac00 \ubc1c\uc0dd\ud558\ub3c4\ub85d \ub9cc\ub4e4\uc5c8\ub2e4.  \\n\ub300\ubd80\ubd84\uc758 \uba54\uc18c\ub4dc\uac00 \ube44\ub3d9\uae30 \ub85c\uc9c1\uc744 \ub2f4\uace0\uc788\uace0 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\uae30\uc5d0 `TaskEither`\ub97c \uc8fc\ub85c \uc0ac\uc6a9\ud588\ub2e4.\\n\\n\uac01 \ud328\ub7ec\ub2e4\uc784\uc744 \ud65c\uc6a9\ud558\ub294 \ubd80\ubd84\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n- OOP: \uc758\uc874\uc131 \uc8fc\uc785, \uc0c1\ud0dc\uc640 \ud589\uc704\uc758 \uacb0\ud569\\n- FP: \uc5d0\ub7ec\ucc98\ub9ac, \ubcd1\ub82c\ucc98\ub9ac, \ubd80\uc791\uc6a9 \uc81c\uac70\\n\\n## \ub290\ub080\uc810 \ubc0f \uace0\ubbfc\\n\\n\ud504\ub85c\uc81d\ud2b8\ub97c \uc9c4\ud589\ud558\uba74\uc11c \ub290\ub080\uc810\uacfc \uace0\ubbfc\uc744 \uc815\ub9ac\ud574\ubcf4\uc558\ub2e4.\\n\\n### fp-ts \uc758\uc874\uc131\\n\\n`fp-ts`\ub294 \uc678\ubd80 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc774\uae30\uc5d0 \uc5b4\ub290 \uc601\uc5ed\uae4c\uc9c0 \uc0ac\uc6a9\uc744 \ud5c8\uc6a9\ud560\uc9c0 \uace0\ubbfc\uc774 \ub9ce\uc558\ub2e4.  \\n\uc608\ub97c\ub4e4\uc5b4 \ub3c4\uba54\uc778 \ud074\ub798\uc2a4\uc758 \uc720\ud6a8\uc131 \uac80\uc99d \uba54\uc18c\ub4dc\ub97c \uc0dd\uac01\ud574\ubcf4\uc790.  \\n\uac80\uc99d\uc5d0 \uc2e4\ud328\ud558\uba74 \uc77c\ubc18\uc801\uc778 \uacbd\uc6b0\uc5d0\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ub3c4\uba54\uc778 \uc5d0\ub7ec\ub97c \ub358\uc9c0\ub294 \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uac83\uc774\ub2e4.\\n\\n```typescript\\nclass PhoneVerification {\\n  // ...\uc0dd\ub7b5\\n  verify(code: string, now = new Date()): void {\\n    if (this.code !== code) {\\n      throw new MismatchedCodeException();\\n    }\\n\\n    if (this.isExpired(now)) {\\n      throw new ExpiredCodeException();\\n    }\\n  }\\n}\\n```\\n\\n\uc704 \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud558\ub294 \uacf3\uc740 \uc11c\ube44\uc2a4 \uc601\uc5ed\uc778\ub370 \uc21c\uc218\uba54\uc18c\ub4dc \ud615\ud0dc\ub97c \uc720\uc9c0\ud558\uae30 \uc704\ud574 `tryCatch`\ub97c \uc0ac\uc6a9\ud574 `Either`\ub85c \ub9cc\ub4e4\uc5b4\uc57c \ud558\ub294 \ubd88\ud3b8\ud568\uc774 \uc874\uc7ac\ud55c\ub2e4.  \\n\ub610\ud55c \uba54\uc18c\ub4dc\uc758 \uad6c\ud604\ubd80\ub97c \uc77d\uc5b4\uc57c\ub9cc \ud574\ub2f9 \uba54\uc18c\ub4dc\uac00 \uc5b4\ub5a4 \uc5d0\ub7ec\ub97c \ub358\uc9c0\ub294\uc9c0 \ud30c\uc545\ud560 \uc218 \uc788\ub2e4\ub294 \ub2e8\uc810\uc774 \uc788\ub2e4.  \\n\uc774\ub294 **\uba54\uc18c\ub4dc\uc758 \uc2dc\uadf8\ub2c8\uccd0\ub9cc \uc77d\uc5b4\ub3c4 \uc5b4\ub5a4 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\ub294\uc9c0 \ud30c\uc545**\ud560 \uc218 \uc788\ub294 `Either`\uc758 \uc7a5\uc810\uc744 \ud3ec\uae30\ud574\uc57c \ud558\ub294 \uc0c1\ud669\uc774\uc5c8\ub2e4.\\n\\n\ud558\uc9c0\ub9cc \ub3c4\uba54\uc778 \ud074\ub798\uc2a4 \ub0b4\ubd80\uc5d0\uc11c `Either`\ub97c \ubc18\ud658\ud558\uac8c \ub9cc\ub4e4\uba74 `fp-ts`\ub77c\ub294 \uc678\ubd80 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0 \ub300\ud55c \uc758\uc874\uc131\uc774 \uc0dd\uae30\ubbc0\ub85c \uac00\uc7a5 \uc21c\uc218\ud574\uc57c \ud560 \uc601\uc5ed\uc774 \uc624\uc5fc\ub41c\ub2e4.  \\n\ubb3c\ub860 `Either`\uc640 \uac19\uc740 \ub300\uc218\uc801 \uc790\ub8cc\ud615\uc740 \uc9c1\uc811 \ud074\ub798\uc2a4 \ud615\ud0dc\ub85c \uad6c\ud604\ud560 \uc218 \uc788\uc9c0\ub9cc \ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uc5ec\ub7ec \uc720\ud2f8\ub9ac\ud2f0 \ud568\uc218\uc640 \ubcf5\uc7a1\ud55c \ud0c0\uc785\ucd94\ub860\uae4c\uc9c0 \uc9c1\uc811 \uad6c\ud604\ud574\uc57c \ud55c\ub2e4.\\n\\n```typescript\\n// \uc678\ubd80 \uc758\uc874\uc131\\nimport { Either, left, right } from \\"fp-ts/Either\\";\\n\\nclass PhoneVerification {\\n  // ...\uc0dd\ub7b5\\n  verify(\\n    code: string,\\n    now = new Date()\\n  ): Either<ExpiredCodeException | MismatchedCodeException, void> {\\n    if (this.code !== code) {\\n      return left(new MismatchedCodeException());\\n    }\\n\\n    if (this.isExpired(now)) {\\n      return left(new ExpiredCodeException());\\n    }\\n\\n    return right(undefined);\\n  }\\n}\\n```\\n\\n\uc5ec\ub7ec \uace0\ubbfc\ub05d\uc5d0 \ub2e4\uc74c\uacfc \uac19\uc740 \uacb0\ub860\uc744 \ub0b4\ub838\ub2e4.\\n\\n`Haskell`\uacfc \uac19\uc740 \uc21c\uc218 \ud568\uc218\ud615 \uc5b8\uc5b4\uc5d0\uc11c\ub294 `Either`\uc640 \uac19\uc740 \ub300\uc218\uc801 \uc790\ub8cc\ud615\uc744 \uae30\ubcf8\uc81c\uacf5\ud558\uae30\uc5d0 \ub3c4\uba54\uc778 \ub0b4\ubd80\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294\ub370 \ubb38\uc81c\uac00 \uc5c6\ub2e4.  \\n\uadf8\ub798\uc11c `fp-ts`\uc758 \uc790\ub8cc\ud615\ub4e4\uc744 **node.js\uc758 \ud655\uc7a5\ub41c \ub0b4\uc7a5\ud0c0\uc785**\uc73c\ub85c \uc0dd\uac01\ud558\uace0 \uc0ac\uc6a9\ud558\uae30\ub85c \ud588\ub2e4.  \\n\ubb3c\ub860 \uc678\ubd80 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc774\uae30\uc5d0 \ubbf8\ub798\uc5d0 \uc5b8\uc81c\ub4e0\uc9c0 \uad50\uccb4\ub420 \uc218 \uc788\ub294 \uac00\ub2a5\uc131\uc774 \uc788\uc9c0\ub9cc, Node\uc758 **String, Number, Boolean\uacfc \uac19\uc740 \uad50\uccb4\ub418\uae30 \ud798\ub4e0 \ud0c0\uc785\uacfc \uac19\uc740 \uc601\uc5ed**\uc744 \ub2e4\ub8e8\uae30\uc5d0 \uc0ac\uc6a9\ud574\ub3c4 \uad1c\ucc2e\ub2e4\ub294 \uc0dd\uac01\uc774 \ub4e4\uc5c8\ub2e4.\\n\\n### \ubaa8\ub2c8\ud130\ub9c1\uacfc \ub85c\uae45\\n\\n`fp-ts`\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \ubaa8\ub2c8\ud130\ub9c1\uacfc \ub85c\uae45\uc5d0 \uc2e0\uacbd\uc368\uc57c \ud558\ub294 \ubd80\ubd84\uc774 \uc788\ub2e4.  \\n\ubcf4\ud1b5 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc870\ud68c\uc640 \uac19\uc740 \ube44\ub3d9\uae30 \ub85c\uc9c1\uc740 \uc0ac\uc774\ub4dc \uc774\ud329\ud2b8\ub97c \ubc1c\uc0dd\ud558\ubbc0\ub85c `TaskEither`\ub97c \uc0ac\uc6a9\ud558\uac8c\ub41c\ub2e4.  \\n`TaskEither`\ub294 promise\ub97c \uc0ac\uc6a9\ud558\ub294 \ub85c\uc9c1\uc5d0 \ub300\ud55c \ucd94\uc0c1\ud654\ub85c \uc544\uc9c1 \uc5b4\ub5a0\ud55c \uac12\uc744 \uac00\uc9c0\uace0 \uc788\uc9c0 \uc54a\ub294\ub2e4.\\n\\n\ubcf4\ud1b5 `TaskEither`\ub97c \ubc18\ud658\ud558\ub294 \ud568\uc218\ub4e4\uc744 \ud569\uc131\ud574 \ucd5c\uc885\uc801\uc73c\ub85c \ud558\ub098\uc758 \ud568\uc218\ub97c \ub9cc\ub4e4\uba70 \uc774 \ud568\uc218\ub97c \uc2e4\ud589\ud560 \ub54c \ube44\ub3d9\uae30 \ub85c\uc9c1\uc774 \uc2e4\ud589\ub41c\ub2e4.  \\n\ub530\ub77c\uc11c `TaskEither`\ub97c \ubc18\ud658\ud558\ub294 \uba54\uc18c\ub4dc\uc758 \uc2e4\ud589\uc2dc\uac04\uc744 \uce21\uc815\ud558\uba74 **\ud568\uc218\uc758 \ud569\uc131\uc5d0 \uac78\ub9ac\ub294 \uc2dc\uac04\ub9cc \ud3ec\ud568\ud558\uc9c0 \uc2e4\uc81c \ube44\ub3d9\uae30 \ub85c\uc9c1\uc5d0 \ub300\ud55c \uc2dc\uac04\uc740 \ud3ec\ud568\ud558\uc9c0 \uc54a\ub294\ub2e4**.\\n\\n\uc608\ub97c\ub4e4\uc5b4 datadog\uc744 \ubaa8\ub2c8\ud130\ub9c1\uc5d0 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \uc544\ub798 \ucf54\ub4dc\ucc98\ub7fc span\uc744 \uc0dd\uc131\ud574 \uc2e4\ud589\uc2dc\uac04\uc744 \uce21\uc815\ud574\ubcf4\uba74 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc0c1\ud0dc\uc640 \uad00\uacc4\uc5c6\uc774 \ub9e4\uc6b0 \uc9e7\uc740 \uc77c\uc815\ud55c \uc2dc\uac04\uc744 \uac00\uc9c4\ub2e4.\\n\\n```typescript\\nimport tracer from \\"dd-trace\\";\\n\\nclass ChatQueryRepositoryAdapter {\\n  override unreadCount(\\n    shareDealId: string,\\n    userId: string\\n  ): TaskEither<DBError, number> {\\n    return tracer.trace(\\"ChatQueryRepositoryAdapter.unreadCount\\", () =>\\n      pipe(\\n        tryCatchDB(() =>\\n          this.prisma.chat.count({\\n            where: {\\n              shareDealId,\\n              userId,\\n              message: { is: { unread: true } },\\n            },\\n          })\\n        )\\n      )\\n    );\\n  }\\n}\\n```\\n\\n\ub610\ud55c \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud560 \ub54c \ud574\ub2f9 \uc5d0\ub7ec\uac1d\uccb4\uc5d0 \ub300\ud55c \ub85c\uadf8\ub97c \ucd9c\ub825\ud560 \ub54c \uc2a4\ud0dd\ud2b8\ub808\uc774\uc2a4\uac00 \uc81c\ub300\ub85c \ub098\uc624\uc9c0 \uc54a\ub294 \ubb38\uc81c\uac00 \uc788\ub2e4.  \\n\uc5d0\ub7ec \uc778\uc2a4\ud134\uc2a4\uac00 \uc0dd\uc131\ub41c \uc2dc\uc810\uc758 \uc2a4\ud0dd\uc740 \ub098\uc624\uc9c0\ub9cc \uc0dd\uc131 \uc804\uae4c\uc9c0 \ud638\ucd9c\ud55c \ud568\uc218\uc758 \uc2a4\ud0dd\uc740 \ub098\uc624\uc9c0 \uc54a\ub294\ub2e4.  \\n\uc774\ub294 `Error.captureStackTrace`\uc744 \uc0ac\uc6a9\ud558\ub294 \uac83\uc73c\ub85c \ud574\uacb0\ud560 \uc218 \uc788\ub2e4.\\n\\n```typescript\\nexport abstract class BaseException extends Error {\\n  protected constructor(message: string) {\\n    super(message);\\n    Error.captureStackTrace(this, this.constructor);\\n  }\\n}\\n```\\n\\n\uc704 \ud074\ub798\uc2a4\ub97c \uc0c1\uc18d\ubc1b\uc544 \ub3c4\uba54\uc778 \uc5d0\ub7ec\ud074\ub798\uc2a4\ub97c \ub9cc\ub4e4\uc5b4 \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4.\\n\\n### \uc758\uc874\uc131 \uc8fc\uc785\\n\\nNest.js\ub97c \uc0ac\uc6a9\ud558\uba74\uc11c \uc5bb\uc744 \uc218 \uc788\ub294 \uac00\uc7a5 \ud070 \ud61c\ud0dd\uc740 \uc758\uc874\uc131 \uc8fc\uc785\uc774\ub77c\uace0 \uc0dd\uac01\ud55c\ub2e4.  \\n`@Injectable` \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud574 \uc6d0\ud558\ub294 \ud074\ub798\uc2a4\ub97c \uc8fc\uc785\uac00\ub2a5\ud55c \ud074\ub798\uc2a4\ub85c \ub9cc\ub4e4 \uc218 \uc788\uc73c\uba70 \ub3d9\uc2dc\uc5d0 \uc0dd\uc131\uc790\uc5d0 \uc120\uc5b8\ud55c \ud56d\ubaa9\uc744 \ub7f0\ud0c0\uc784\uc5d0 \uc8fc\uc785\ubc1b\uc744 \uc218 \uc788\ub2e4.  \\n\ud3ec\ud2b8\uc640 \uc5b4\ub311\ud130 \ud328\ud134\uc744 \uc801\uc6a9\ud55c \ud658\uacbd\uc774\ub77c\uba74 \ubcf4\ud1b5 \uc5b4\ub311\ud130\ub294 \ud3ec\ud2b8 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud558\uba70 \ub610 \ub2e4\ub978 \ud3ec\ud2b8 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc8fc\uc785\ubc1b\uc544 \uc0ac\uc6a9\ud55c\ub2e4.\\n\\n```typescript\\nimport { Injectable } from \\"@nestjs/common\\";\\n\\n@Injectable()\\nexport class ShareDealCommandService implements ShareDealCommandUseCase {\\n  // \ud3ec\ud2b8 \uc778\ud130\ud398\uc774\uc2a4 \uad6c\ud604\\n  constructor(\\n    private readonly shareDealRepositoryPort: ShareDealRepositoryPort // \ud3ec\ud2b8 \uc778\ud130\ud398\uc774\uc2a4 \uc8fc\uc785\\n  ) {}\\n}\\n```\\n\\nJVM\uc774\ub77c\uba74 \ud3ec\ud2b8\ub97c interface\ub85c \uc815\uc758\ud558\uace0 \uc5b4\ub311\ud130\uac00 \ud574\ub2f9 interface\ub97c \uad6c\ud604\ud558\ub294 \uac83\uc774 \uc77c\ubc18\uc801\uc774\ub2e4.  \\nTypeScript\uc5d0\uc11c\ub294 \ub3d9\uc77c\ud558\uac8c interface\ub97c \uc9c0\uc6d0\ud558\uc9c0\ub9cc Nest.js\uc758 provider\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \ubb38\uc81c\uac00 \uc788\ub2e4.  \\nTypeScript\uc758 interface\ub294 \ucef4\ud30c\uc77c \ud0c0\uc784\uc5d0\ub9cc \uc0ac\uc6a9\ub418\uace0 \ud2b8\ub79c\uc2a4\ud30c\uc77c \ub2e8\uacc4\uc5d0\uc11c \ubb34\uc2dc\ub418\uae30 \ub54c\ubb38\uc5d0 Nest.js\uac00 \ud574\ub2f9 interface\ub97c \uc778\uc2dd\ud558\uc9c0 \ubabb\ud55c\ub2e4.\\n\\n\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 `@Inject` \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud558\uac70\ub098 interface\ub300\uc2e0 abstract class\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\uc548\uc774 \uc788\ub2e4.  \\n\uac1c\uc778\uc801\uc73c\ub85c `@Inject` \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc744 \uc120\ud638\ud558\uc9c0 \uc54a\ub294\ub370 \ub2e4\uc74c\uacfc \uac19\uc740 \uc774\uc720 \ub54c\ubb38\uc774\ub2e4.\\n\\n- `@Inject` \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \ud074\ub798\uc2a4\ub294 Nest.js\uc5d0 \uc758\uc874\uc131\uc774 \uc0dd\uae34\ub2e4.\\n- \ub370\ucf54\ub808\uc774\ud130\uc5d0 \uc9c0\uc815\ud558\ub294 token\uacfc \ub9e4\uce6d\ub418\ub294 interface\ub97c \uc798\ubabb \uc9c0\uc815\ud574\ub3c4 \ucef4\ud30c\uc77c \ud0c0\uc784\uc5d0\ub294 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n- \ub9e4\ubc88 \uc0dd\uc131\uc790 \ud30c\ub77c\ubbf8\ud130\uc5d0 \ub370\ucf54\ub808\uc774\ud130 + \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc120\uc5b8\ud574\uc57c \ud558\ub294 \ubc88\uac70\ub85c\uc6c0\uc774 \uc788\ub2e4.\\n\\n\ud2b9\ud788 \ub450 \ubc88\uc9f8 \uc774\uc720\ub294 **\ucf54\ub4dc\ub97c \uc798\ubabb \uc791\uc131\ud558\uace0 \uc788\ub2e4\ub294 \ud53c\ub4dc\ubc31\uc744 \ub7f0\ud0c0\uc784\uae4c\uc9c0 \uac00\uc57c \ubc1b\uc744 \uc218 \uc788\ub294 \uc810**\uc740 \uce58\uba85\uc801\uc774\ub77c\uace0 \uc0dd\uac01\ud558\uae30\uc5d0 abstract class\ub97c \uc0ac\uc6a9\ud558\uc600\ub2e4.\\n\\n```typescript\\nimport { Injectable } from \\"@nestjs/common\\";\\n\\n@Injectable()\\nexport class ShareDealCommandService {\\n  constructor(\\n    // token\uacfc \ub9e4\uce6d\ub418\ub294 interface\ub97c \uc798\ubabb \uc9c0\uc815\ud574\ub3c4 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n    @Inject(CHAT_REPOSITORY_PORT_TOKEN)\\n    private readonly shareDealRepositoryPort: ShareDealRepositoryPort\\n  ) {}\\n}\\n```\\n\\n### Nest.js \uc758\uc874\uc131\\n\\n\ud504\ub85c\uc81d\ud2b8\ub97c \uc9c4\ud589\ud558\uba74\uc11c \uac01 \ud074\ub798\uc2a4\uac00 Nest.js\uc640\uc758 \uc758\uc874\uc131\ub3c4 \ucd5c\ub300\ud55c \uc904\uc774\ub824\uace0 \ub178\ub825\ud558\uc600\ub2e4.  \\n\uc989 \ube44\uc2a4\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \ud3ec\ud568\ud558\ub294 \ud074\ub798\uc2a4\ub294 \ucd5c\ub300\ud55c \uc21c\uc218\ud558\uac8c \uac00\uc838\uac08 \uc218 \uc788\ub3c4\ub85d \ud558\uc600\ub2e4.  \\n\uc608\ub97c\ub4e4\uba74 \ud658\uacbd\ubcc0\uc218\ub97c \uc0ac\uc6a9\ud558\ub294 \ud074\ub798\uc2a4\uac00 \uc788\ub2e4\uba74 \ubcf4\ud1b5\uc740 Nest.js\uc758 `ConfigService`\ub97c \uc8fc\uc785\ubc1b\uc544 \uc0ac\uc6a9\ud55c\ub2e4.\\n\\n```typescript\\nimport { Injectable } from \\"@nestjs/common\\";\\nimport { ConfigService } from \\"@nestjs/config\\";\\n\\n@Injectable()\\nexport class ShareDealCommandService {\\n  constructor(private readonly configService: ConfigService) {}\\n}\\n```\\n\\n\uc774\ub294 \uc704 \ud074\ub798\uc2a4\uc758 \uc720\ub2db \ud14c\uc2a4\ud2b8\uc5d0\uc11c\ub3c4 `ConfigService`\ub97c \uc9c1\uc811 \ub9cc\ub4e4\uc5b4 \uc8fc\uc785\ud574\uc57c \ud568\uc744 \uc758\ubbf8\ud55c\ub2e4.  \\n\ub9cc\uc57d \ubbf8\ub798\uc5d0 Nest.js \ub300\uc2e0 \ub2e4\ub978 \ud504\ub808\uc784\uc6cc\ud06c\ub97c \uc801\uc6a9\ud558\ub824\uace0 \ud560 \ub54c \uc218\uc815\ud574\uc57c \ud558\ub294 \ud56d\ubaa9\uc774 \ub9ce\uc544\uc9c0\uac8c \ub41c\ub2e4.\\n\\n\uc774\ub97c \uc704\ud574 `ConfigService`\ub97c \ucd94\uc0c1\ud654\ud55c `ConfigServicePort`\ub97c \ub9cc\ub4dc\ub294 \ubc29\ubc95\uc774 \uc788\uc9c0\ub9cc \uc774\ubc88\uc5d0\ub294 \uc6d0\ud558\ub294 \ud658\uacbd\ubcc0\uc218 \uac12\uc744 \uc9c1\uc811 \uc8fc\uc785\ud558\ub294 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud558\uc600\ub2e4.  \\nNest.js\uc5d0\uc11c\ub294 \uc758\uc874\uc131 \uc8fc\uc785\uc5d0 \uc0ac\uc6a9\ud558\ub294 provider\ub97c \ub9cc\ub4e4\uae30 \uc704\ud55c \uc5ec\ub7ec\uac00\uc9c0 \ubc29\ubc95\uc744 \uc81c\uacf5\ud558\ub294\ub370 \uadf8 \uc911 `useFactory`\ub97c \uc0ac\uc6a9\ud558\uc600\ub2e4.\\n\\n```typescript\\nexport class JwtStrategy {\\n  // \uc6d0\ud558\ub294 \ud658\uacbd\ubcc0\uc218\ub97c \uc9c1\uc811 \uc120\uc5b8\ud55c\ub2e4.\\n  constructor(private readonly jwtSecret: string) {}\\n}\\n\\n@Module({\\n  providers: [\\n    {\\n      provide: JwtStrategy,\\n      inject: [ConfigService],\\n      useFactory: (configService: ConfigService) =>\\n        // \ubaa8\ub4c8 \uc120\uc5b8\ubd80\uc5d0\uc11c \uc9c1\uc811 configService\ub97c \ud65c\uc6a9\ud574 \uc6d0\ud558\ub294 \ud658\uacbd\ubcc0\uc218\ub97c \uc8fc\uc785\ud55c\ub2e4.\\n        new JwtStrategy(configService.getOrThrow(\\"JWT_SECRET\\")),\\n    },\\n  ],\\n  exports: [PushMessagePort],\\n})\\nexport class PushMessageModule {}\\n```\\n\\n\ubaa8\ub4c8 \uc120\uc5b8 \ud30c\uc77c\uc5d0\uc11c\ub294 Nest.js\uc758 \uc758\uc874\uc131\uc744 \uac00\uc9c0\ub294\uac8c \uc804\ud600 \ubb38\uc81c\uac00 \ub418\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uc774\uacf3\uc5d0\uc11c configService\ub97c \uc0ac\uc6a9\ud558\uc600\ub2e4.\\n\\n\ucd94\uac00\ub85c \uc720\ub2db \ud14c\uc2a4\ud2b8\uc5d0\uc11c\ub3c4 \uac00\ub2a5\ud558\uba74 `@nestjs/testing` \ud328\ud0a4\uc9c0\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 \uc9c1\uc811 \uc758\uc874\uc131\uc744 \uc8fc\uc785\ud558\uc600\ub2e4.\\n\\n```typescript\\ndescribe(\\"ChatQueryService\\", () => {\\n  // stub\uacfc mock\uc744 \ud65c\uc6a9\ud574 \uc758\uc874\uc131 \uc0dd\uc131\\n  const shareDealQueryRepositoryPort = mock<ShareDealQueryRepositoryPort>();\\n  const chatQueryRepositoryPort = mock<ChatQueryRepositoryPort>();\\n  const userQueryRepositoryPort = mock<UserQueryRepositoryPort>();\\n  const eventEmitter = new StubEventEmitter();\\n  // \uc9c1\uc811 \uc758\uc874\uc131 \uc8fc\uc785\\n  const shareDealCommandService = new ChatQueryService(\\n    shareDealQueryRepositoryPort,\\n    chatQueryRepositoryPort,\\n    userQueryRepositoryPort,\\n    eventEmitter\\n  );\\n});\\n```\\n\\n\ub354 \uadf9\ub2e8\uc801\uc73c\ub85c \uc758\uc874\uc131\uc744 \uc81c\uac70\ud558\ub824\uba74 `@Injectable` \ub370\ucf54\ub808\uc774\ud130\uc870\ucc28 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 \ubaa8\ub4c8 \uc120\uc5b8\ubd80\uc5d0\uc11c \uc8fc\uc785\ud574\uc8fc\ub294 \ubc29\ubc95\ub3c4 \uc788\ub2e4.  \\n\ud558\uc9c0\ub9cc \uc774\ub294 \uc758\uc874\uc131\uc774 \ud558\ub098 \ucd94\uac00 \ub420 \ub54c\ub9c8\ub2e4 \ubaa8\ub4c8 \uc120\uc5b8\ubd80\ub3c4 \uac19\uc774 \uc218\uc815\ud574\uc57c \ud558\ub294 \ubc88\uac70\ub85c\uc6c0\uc774 \uc788\uc73c\uba70 \uc55e\uc11c \uc774\uc57c\uae30\ud55c Nest.js\uc758 \uc7a5\uc810\uc744 \uc81c\ub300\ub85c \ud65c\uc6a9\ud558\uc9c0 \ubabb\ud55c\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4.  \\n\uadf8\ub798\uc11c \ud574\ub2f9 \ub370\ucf54\ub808\uc774\ud130\uc758 \uc0ac\uc6a9\ub9cc \ud5c8\uc6a9\ud558\uc600\uc73c\uba70 \ucd94\ud6c4\uc5d0 \ub2e4\ub978 \ud504\ub808\uc784\uc6cc\ud06c\ub97c \uc4f4\ub2e4\uace0 \ud574\ub3c4 \ub370\ucf54\ub808\uc774\ud130\uba85\uc774\ub098 import\uacbd\ub85c\ub9cc \uc218\uc815\ud558\uba74 \ub418\uae30\uc5d0 \ubcc0\uacbd\uc758 \uc5b4\ub824\uc6c0\uc740 \uc5c6\uc744\uac70\ub77c\uace0 \uc0dd\uac01\ud55c\ub2e4.\\n\\n### Prisma\\n\\nPrisma\ub97c \uc0ac\uc6a9\ud558\uba74\uc11c \uc88b\uc558\ub358 \uc810\uc740 ORM\uc744 \uc704\ud55c \uc5d4\ud2f0\ud2f0 \ud074\ub798\uc2a4\ub97c \ub530\ub85c \ub9cc\ub4e4\uc9c0 \uc54a\uc544\ub3c4 \ub41c\ub2e4\ub294 \uac83\uc774\uc5c8\ub2e4.  \\nTypeORM\uacfc \uac19\uc740 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud588\ub2e4\uba74 \ub3c4\uba54\uc778 \ud074\ub798\uc2a4\uc640 \ub354\ubd88\uc5b4 \uc5d4\ud2f0\ud2f0 \ud074\ub798\uc2a4\ub3c4 \ub9cc\ub4e4\uc5b4\uc57c \ud558\uc9c0\ub9cc Prisma\ub294 \uc2a4\ud0a4\ub9c8 \ud30c\uc77c\ub9cc \uc791\uc131\ud574\uc8fc\uba74 \ub41c\ub2e4.\\n\\n\ub610\ud55c mongoDB\uc640 \ud568\uaed8 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \uc2a4\ud0a4\ub9c8 \ud30c\uc77c\uc5d0\uc11c DDD\uc5d0\uc11c \uc774\uc57c\uae30\ud558\ub294 Aggregate\uc640 Value Object\ub97c \uc77c\ubd80 \ucd94\ub860\ud560 \uc218 \uc788\ub294\uc810\ub3c4 \uc7a5\uc810\uc774\ub77c\uace0 \uc0dd\uac01\ud55c\ub2e4.  \\nRDB\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 \ub3c4\uba54\uc778 \ud074\ub798\uc2a4\uc758 \uad6c\uc870\uc640 RDBMS\uc5d0 \uc800\uc7a5\ub418\ub294 \uad6c\uc870\uac00 \ub2e4\ub974\uc9c0\ub9cc NoSQL\uc744 \uc0ac\uc6a9\ud55c\ub2e4\uba74 \ub458 \uac04\uc758 \ucc28\uc774\ub97c \uc904\uc77c \uc218 \uc788\ub2e4.\\n\\n```prisma\\nmodel ShareDeal { // Aggregate\\n  id           String          @id @default(auto()) @map(\\"_id\\") @db.ObjectId\\n  createdAt    DateTime        @unique @default(now())\\n  updatedAt    DateTime        @updatedAt\\n  title        String\\n  zone         ShareZone       // value object\\n  participants ParticipantInfo // value object\\n}\\n\\ntype ParticipantInfo {\\n  ids       String[] @db.ObjectId\\n  max       Int\\n  current   Int\\n  remaining Int\\n}\\n```\\n\\nPrisma\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 GraphQL\uacfc\uc758 \uc5f0\ub3d9\uc774 \ud3b8\ub9ac\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\uc9c0\ub9cc \uc774\ubc88 \ud504\ub85c\uc81d\ud2b8\uc5d0\ub294 \ud65c\uc6a9\ud558\uc9c0 \ubabb\ud588\ub2e4.  \\n\ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac\uac04\uc758 \uc5f0\ub3d9\uc740 \ud45c\ud604 \uc601\uc5ed\uacfc \uc778\ud504\ub77c \uc601\uc5ed\uac04\uc758 \uac15\ud55c \uacb0\ud569\uc744 \uc758\ubbf8\ud558\uba70 \ub2e4\ub978 \uc758\uc874\uc131\uc73c\ub85c \uad50\uccb4\ud558\ub294 \uac83\uc744 \uc5b4\ub835\uac8c \ub9cc\ub4e4\uae30 \ub54c\ubb38\uc774\ub2e4.\\n\\n\ub610\ud55c Primsa\uc5d0\ub294 \uc544\uc9c1 geometry\uad00\ub828 \uae30\ub2a5\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc544\uc26c\uc6c0\uc774 \uc788\ub2e4.  \\n\uc774\ubc88 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \uc0ac\uc6a9\uc790 \uc704\uce58 \uae30\uc900\uc73c\ub85c \uac00\uae4c\uc6b4 \uacf5\uc720\ub51c\uc744 \uc815\ub82c\ud558\ub294 \uc694\uad6c\uc0ac\ud56d\uc774 \uc788\ub294\ub370 \uc774\ub97c \uc704\ud574 raw query\ub97c \uc0ac\uc6a9\ud574\uc57c \ud588\ub2e4.\\n\\n### \ub3c4\uba54\uc778 \uc774\ubca4\ud2b8\\n\\n\ubc29\uc7a5\uc774 \uacf5\uc720\ub51c\uc744 \uc2dc\uc791\ud558\ub294 \uacbd\uc6b0 \ub2e4\uc74c\uacfc \uac19\uc740 \ub85c\uc9c1\uc774 \uc218\ud589\ub418\uc57c \ud55c\ub2e4.\\n\\n- \uacf5\uc720\ub51c\uc758 \uc0c1\ud0dc\ub97c `START`\ub85c \ubcc0\uacbd\ud55c\ub2e4.\\n- \ucc44\ud305\ubc29\uc5d0 \uc2dc\uc791 \uba54\uc2dc\uc9c0\ub97c \ucd94\uac00\ud55c\ub2e4.\\n- \ucc44\ud305\ubc29\uc744 \uad6c\ub3c5(Graphql Subscription)\ud558\ub294 \uc0ac\uc6a9\uc790\ub4e4\uc5d0\uac8c \uba54\uc2dc\uc9c0\ub97c \uc804\uc1a1\ud55c\ub2e4.\\n- \ucc38\uc5ec\uc790\ub4e4\uc5d0\uac8c \uc54c\ub9bc(FCM)\uc744 \ubcf4\ub0b8\ub2e4.\\n\\n\uc704 \ub85c\uc9c1\uc744 \ud558\ub098\uc758 \uc11c\ube44\uc2a4 \uba54\uc18c\ub4dc\uc5d0\uc11c \ucc98\ub9ac\ud560 \uc218 \uc788\uc9c0\ub9cc \uacf5\uc720\ub51c\uc758 \uc0c1\ud0dc\ub97c \ubcc0\uacbd\ud558\ub294 \ud575\uc2ec\ub85c\uc9c1\uacfc \uc54c\ub9bc\uac19\uc740 \ubd80\uac00\ub85c\uc9c1\uc774 \uc11e\uc774\uac8c \ub41c\ub2e4.  \\n\ub610\ud55c \uacf5\uc720\ub51c\uacfc \ucc44\ud305\ubc29\uc740 \uc11c\ub85c \ub2e4\ub978 Aggregate\ub85c \uc124\uacc4\ud558\uc5ec \ud558\ub098\uc758 \ud2b8\ub79c\uc7ad\uc158\uc73c\ub85c \ucc98\ub9ac\ud560 \uc218 \uc5c6\uc5c8\ub2e4.\\n\\n\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \ub0b4\ubd80\uc774\ubca4\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc600\ub2e4.  \\n\ub610\ud55c \ucc44\ud305\ubc29\uc5d0 \uc2dc\uc791 \uba54\uc2dc\uc9c0\ub97c \ucd94\uac00\ud558\ub294 \uc791\uc5c5\uacfc \uc54c\ub9bc\uc791\uc5c5 \ub610\ud55c \uc774\ubca4\ud2b8\ub97c \uc0ac\uc6a9\ud574 \ubd84\ub9ac\ud558\uc600\ub2e4.\\n\\n![domain-event](domain-event.png)\\n\\n\uc704\uc640 \uac19\uc740 \uc791\uc5c5\uc744 \ud1b5\ud574 \uac01 \uc601\uc5ed\uac04\uc758 \uacb0\ud569\ub3c4\ub97c \ub0ae\ucd9c \uc218 \uc788\uc5c8\uc9c0\ub9cc \uacf5\uc720\ub51c\uc774 \uc2dc\uc791\ud560 \ub54c \uc5b4\ub5a4\uc77c\uc774 \ubc1c\uc0dd\ud558\ub294\uc9c0 \ud30c\uc545\ud558\uae30 \uc5b4\ub824\uc6cc\uc9c4\ub2e4\ub294 \ub2e8\uc810\uc774 \uc874\uc7ac\ud55c\ub2e4.  \\n\ucd94\uac00\ub85c \uacf5\uc720\ub51c\uc758 \uc0c1\ud0dc\ub9cc \ubcc0\uacbd\ub418\uace0 \ucc44\ud305\ubc29\uc5d0 \uba54\uc2dc\uc9c0\uac00 \ucd94\uac00\ub418\uc9c0 \uc54a\ub294 \uc0c1\ud669\uc5d0 \ub300\ud55c \ucc98\ub9ac\uac00 \ud544\uc694\ud558\ub2e4.  \\n\uc774\ubc88 \ud504\ub85c\uc81d\ud2b8\uc5d0\ub294 \uc774\uc640 \uac19\uc740 \uc0c1\ud669\uc5d0 \ub300\ud55c \ucc98\ub9ac\ub97c \ud558\uc9c0 \uc54a\uc558\uc9c0\ub9cc \uc2e4\ubb34\uc600\ub2e4\uba74 \ubc18\ub4dc\uc2dc \uace0\ub824\ud574\uc57c \ud55c\ub2e4."},{"id":"2022/09/12/MongoDB-Atlas-Search\ub85c-\uceec\ub7fc\uae30\ubc18-\uc815\ub82c\ud558\uae30","metadata":{"permalink":"/2022/09/12/MongoDB-Atlas-Search\ub85c-\uceec\ub7fc\uae30\ubc18-\uc815\ub82c\ud558\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-09-12-mongodb-atlas-sort/index.mdx","source":"@site/blog/2022-09-12-mongodb-atlas-sort/index.mdx","title":"MongoDB Atlas Search\ub85c \uceec\ub7fc\uae30\ubc18 \uc815\ub82c\ud558\uae30","description":"\uc774\ubc88 \ud3ec\uc2a4\ud2b8\ub294 MongoDB Atlas \ub97c \ud65c\uc6a9\ud574 \ud398\uc774\uc9c0\ub124\uc774\uc158\uc744 \uad6c\ud604\ud560 \ub54c \uc815\ub82c\uc744 relevance \uae30\ubc18\uc774 \uc544\ub2cc \uceec\ub7fc\uc744 \uae30\uc900\uc73c\ub85c \ud560 \ub54c\uc758 \ubb38\uc81c\uc640 \uac1c\uc120\uc810\uc744 \ub2e4\ub8ec\ub2e4.","date":"2022-09-12T00:00:00.000Z","formattedDate":"2022\ub144 9\uc6d4 12\uc77c","tags":[{"label":"mongodb","permalink":"/tags/mongodb"},{"label":"atlas","permalink":"/tags/atlas"},{"label":"sort","permalink":"/tags/sort"}],"readingTime":14.765,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"MongoDB Atlas Search\ub85c \uceec\ub7fc\uae30\ubc18 \uc815\ub82c\ud558\uae30","slug":"2022/09/12/MongoDB-Atlas-Search\ub85c-\uceec\ub7fc\uae30\ubc18-\uc815\ub82c\ud558\uae30","authors":"jake","tags":["mongodb","atlas","sort"]},"prevItem":{"title":"\ubc30\ub2ec\ube44 \ub178\ub178 \ud504\ub85c\uc81d\ud2b8\uc744 \uc9c4\ud589\ud558\uba70","permalink":"/2022/11/07/\ubc30\ub2ec\ube44-\ub178\ub178-\ud504\ub85c\uc81d\ud2b8\uc744-\uc9c4\ud589\ud558\uba70"},"nextItem":{"title":"Mogenius\ub97c \ud65c\uc6a9\ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec","permalink":"/2022/09/09/Mogenius\ub97c-\ud65c\uc6a9\ud55c-\ub3c4\ucee4-\ucee8\ud14c\uc774\ub108-\ubc30\ud3ec"}},"content":"\uc774\ubc88 \ud3ec\uc2a4\ud2b8\ub294 MongoDB Atlas \ub97c \ud65c\uc6a9\ud574 \ud398\uc774\uc9c0\ub124\uc774\uc158\uc744 \uad6c\ud604\ud560 \ub54c \uc815\ub82c\uc744 relevance \uae30\ubc18\uc774 \uc544\ub2cc \uceec\ub7fc\uc744 \uae30\uc900\uc73c\ub85c \ud560 \ub54c\uc758 \ubb38\uc81c\uc640 \uac1c\uc120\uc810\uc744 \ub2e4\ub8ec\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \uc608\uc81c \ub370\uc774\ud130\\n\\n\uba3c\uc800 \uc608\uc81c\ub85c \ud65c\uc6a9\ud560 \ub370\uc774\ud130\ub97c \ub9cc\ub4e4\uc5b4\ubcf4\uc790.  \\nAtlas \uc5d0\uc11c\ub294 \uc0d8\ud50c \ub370\uc774\ud130\ub97c \uc81c\uacf5\ud558\uace0 \uc27d\uac8c \uc0dd\uc131\ud560 \uc218 \uc788\uc73c\ubbc0\ub85c \uc774\ub97c \ud65c\uc6a9\ud574\ubcf4\uc790.  \\n`Database Deployments` \ud398\uc774\uc9c0\uc5d0\uc11c `...` \uc744 \uc120\ud0dd\ud558\uace0 `Load Sample Dataset` \ubc84\ud2bc\uc744 \ub204\ub974\uba74 \uc0d8\ud50c \ub370\uc774\ud130\uac00 \uc0dd\uc131\ub41c\ub2e4.  \\n\uc5ec\ub7ec \ub370\uc774\ud130\ubca0\uc774\uc2a4\uac00 \uc0dd\uc131\ub418\ub294\ub370 \uadf8 \uc911 `sample_mflix` \uc758 `movies` \uceec\ub809\uc158\uc744 \uc0ac\uc6a9\ud558\uc600\ub2e4.\\n\\n:::info\\nMongoDB Atlas \uc5d0\uc11c\ub294 \ud68c\uc6d0\uac00\uc785\ub9cc \ud574\ub3c4 \ubb34\ub8cc \ud074\ub7ec\uc2a4\ud130\ub97c \uc81c\uacf5\ud558\ubbc0\ub85c \ube44\uc6a9\uac71\uc815\uc5c6\uc774 \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc744 \uad6c\ucd95\ud560 \uc218 \uc788\ub2e4.\\n:::\\n\\n![load-sample](load-sample.png)\\n\\n\ud574\ub2f9 \uceec\ub809\uc158\uc740 \uc601\ud654\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \ub2f4\uace0\uc788\uc73c\uba70 \ub300\ub7b5 23000 \uac1c\uc758 \ubb38\uc11c\uac00 \uc874\uc7ac\ud55c\ub2e4.\\n\\n![movies](movies.png)\\n\\n## Search Index \uc0dd\uc131\\n\\nAtlas Search \ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \uba3c\uc800 \uac80\uc0c9\uc6a9 \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud574\uc57c\ud55c\ub2e4.  \\n\uba3c\uc800 `Search` \ud398\uc774\uc9c0\uc5d0\uc11c `Create Search Index` \ubc84\ud2bc\uc744 \uc120\ud0dd\ud55c\ub2e4.\\n\\n![create-index](create-index.png)\\n\\n\uc778\ub371\uc2a4 \uc124\uc815\ubc29\ubc95\uc73c\ub85c `Visual Editor` \uc640 `JSON Editor` \uac00 \uc788\ub294\ub370 `JSON Editor` \ub97c \uc120\ud0dd\ud55c\ub2e4.  \\n`Database and Collection` \uc5d0\uc11c\ub294 `sample_mflix.movies` \ub97c \uc120\ud0dd\ud558\uace0 `Index Name` \uc744 `default` \ub85c \uc124\uc815\ud55c\ub2e4.\\n\\n![search-index](search-index.png)\\n\\n\uc5d0\ub514\ud130 \ud56d\ubaa9\uc5d0\ub294 \uc544\ub798\uc640 \uac19\uc740 \ub0b4\uc6a9\uc744 \ub123\uc5b4\uc900\ub2e4.  \\n\ucd1d 4\uac1c\uc758 \ud544\ub4dc\uc5d0 \ub300\ud55c \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud558\uac8c \ub41c\ub2e4.\\n\\n```json\\n{\\n  \\"mappings\\": {\\n    \\"dynamic\\": false,\\n    \\"fields\\": {\\n      \\"fullplot\\": {\\n        \\"type\\": \\"string\\"\\n      },\\n      \\"released\\": {\\n        \\"type\\": \\"date\\"\\n      },\\n      \\"runtime\\": {\\n        \\"representation\\": \\"int64\\",\\n        \\"type\\": \\"number\\"\\n      },\\n      \\"title\\": {\\n        \\"type\\": \\"string\\"\\n      }\\n    }\\n  }\\n}\\n```\\n\\n## Relevance \uae30\ubc18 \uc815\ub82c\\n\\n\uac80\uc0c9\uc5d4\uc9c4\uc744 \uc0ac\uc6a9\ud560 \ub54c\uc5d0\ub294 \uc815\ub82c\uc744 \uac80\uc0c9\uc5b4\uc640 \uad00\ub828\uc131\uc774 \ub192\uc740 \uc21c\uc11c\ub85c \uc815\ub82c\ud558\ub294 \uac83\uc774 \uc77c\ubc18\uc801\uc774\ub2e4.  \\nAtlas Search \uc5d0\uc11c\ub294 \uc774\ub97c `relevance` \ub77c\uace0 \ubd80\ub974\uba70 \uc790\ub3d9\uc73c\ub85c \uc774\ub97c \uae30\uc900\uc73c\ub85c score \ub97c \uacc4\uc0b0\ud574 \ub0b4\ub9bc\ucc28\uc21c \uc815\ub82c\ud55c\ub2e4.  \\n\uc608\ub97c\ub4e4\uc5b4 `title` \uceec\ub7fc\uc5d0 \ub300\ud574 `star wars` \uac80\uc0c9\uc5b4\uc5d0 \ub9e4\uce6d\ub418\ub294 \ubb38\uc11c \uc0c1\uc704 10\uac1c\ub97c \uac00\uc838\uc628\ub2e4\uace0 \ud574\ubcf4\uc790.\\n\\n```js\\ndb.movies.aggregate([\\n  {\\n    $search: {\\n      text: {\\n        path: \\"title\\",\\n        query: \\"star wars\\",\\n      },\\n    },\\n  },\\n  { $skip: 0 },\\n  { $limit: 10 },\\n  {\\n    $project: {\\n      title: 1,\\n      score: { $meta: \\"searchScore\\" }, // score \ub97c \uacb0\uacfc\uc5d0 \ud3ec\ud568\\n    },\\n  },\\n]);\\n```\\n\\n![star-wars-search](star-wars-search.png)\\n\\n\uacb0\uacfc\uc758 score \ub97c \ubcf4\uba74 \ub0b4\ub9bc\ucc28\uc21c\uc73c\ub85c \uc815\ub82c\ub418\uc5b4 \uc788\ub294\uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.  \\n\uac80\uc0c9\uc5b4\uc5d0 \ub9e4\uce6d\ub418\ub294 \uac1c\uc218\uac00 \ub9ce\uc740 \uacbd\uc6b0 \ud398\uc774\uc9c0 \ubc88\ud638\ub97c \ud06c\uac8c \ud55c \uacbd\uc6b0\ub97c \uac00\uc815\ud574\ubcf4\uc790.  \\n\ub2e4\uc74c\uc740 \uac80\uc0c9\uc5b4\ub97c `the` \ub85c \uc124\uc815\ud55c \uacbd\uc6b0 \ub9e4\uce6d\ub418\ub294 \ubb38\uc11c\ub294 5500 \uac1c \uc815\ub3c4\uc778\ub370 5000 \ubc88\uc9f8 \uc774\ud6c4 \ub370\uc774\ud130 10\uac1c\ub97c \uc694\uccad\ud558\ub294 \uc0c1\ud669\uc774\ub2e4.\\n\\n```js\\ndb.movies.aggregate([\\n  {\\n    $search: {\\n      text: {\\n        path: \\"title\\",\\n        query: \\"the\\",\\n      },\\n    },\\n  },\\n  { $skip: 5000 },\\n  { $limit: 10 },\\n  {\\n    $project: {\\n      _id: 0,\\n      title: 1,\\n      score: { $meta: \\"searchScore\\" },\\n    },\\n  },\\n]);\\n```\\n\\n\ub300\ub7b5 400ms \uc815\ub3c4 \uac78\ub9ac\ub294\ub370 \ud658\uacbd\uc5d0 \ub530\ub77c \ub2e4\ub974\uaca0\uc9c0\ub9cc \ubcf4\ud1b5\uc740 \ud06c\uac8c \ubb38\uc81c\uac00 \ub418\uc9c0 \uc54a\ub294 \uc2dc\uac04\uc774\ub2e4.  \\n\uc774\ucc98\ub7fc \uc77c\ubc18\uc801\uc778 `relevance` \uae30\ubc18 \uc815\ub82c\uc5d0\uc11c\ub294 \ud070 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n\\n## \uceec\ub7fc\uae30\ubc18 \uc815\ub82c\\n\\n\uc774\uc81c \ud2b9\uc815 \uceec\ub7fc\uc744 \uae30\uc900\uc73c\ub85c \uc815\ub82c\ud558\ub294 \uc0c1\ud669\uc744 \uac00\uc815\ud574\ubcf4\uc790.  \\n`fullplot` \uc774 `the` \uac80\uc0c9\uc5b4\uc5d0 \ub9e4\uce6d\ub418\uace0 `runtime` \uceec\ub7fc\uc744 \uae30\uc900\uc73c\ub85c \ub0b4\ub9bc\ucc28\uc21c \uc815\ub82c\ud558\ub294 \uc0c1\ud669\uc774\ub2e4.\\n\\n```js\\ndb.movies.aggregate([\\n  { $search: { text: { path: \\"fullplot\\", query: \\"the\\" } } },\\n  { $sort: { runtime: -1 } }, // runtime \ub0b4\ub9bc\ucc28\uc21c \uc815\ub82c\\n  { $skip: 0 },\\n  { $limit: 10 },\\n  { $project: { _id: 0, title: 1, runtime: 1 } },\\n]);\\n```\\n\\n![runtime-sort](runtime-sort.png)\\n\\n\uccab \ud398\uc774\uc9c0\ub97c \uc694\uccad\ud558\ub294 \uacbd\uc6b0\uc774\uc9c0\ub9cc 1.4\ucd08 \uc815\ub3c4\uc758 \uc2dc\uac04\uc774 \uac78\ub9b0\ub2e4.  \\n\ud558\ub098 \ub208\uc5ec\uaca8 \ubcfc \uc810\uc740 **skip \uc758 \uac12\uc5d0 \uad00\uacc4\uc5c6\uc774 \uc77c\uc815\ud55c \uc2dc\uac04\uc774 \uac78\ub9b0\ub2e4\ub294 \uac83**\uc774\ub2e4.  \\n\uc774\ub294 skip \uc5d0 \uad00\uacc4\uc5c6\uc774 **\ud56d\uc0c1 \uac80\uc0c9\uc5b4\uc5d0 \ub9e4\uce6d\ub418\ub294 \ubaa8\ub4e0 \ubb38\uc11c\ub97c \uac00\uc838\uc640 \uc815\ub82c**\uc744 \ud55c\ub2e4\ub294 \uac83\uc744 \uc758\ubbf8\ud55c\ub2e4.\\n\\n| skip  | time  |\\n| ----- | ----- |\\n| 0     | 1.457 |\\n| 100   | 1.403 |\\n| 1000  | 1.322 |\\n| 10000 | 1.435 |\\n\\n## Atlas Search\\n\\n\uc55e\uc11c \uc815\uc758\ud55c Search Index \uc5d0 `runtime` \uceec\ub7fc\uc744 \ucd94\uac00\ud588\uc74c\uc5d0\ub3c4 \uc815\ub82c\uc18d\ub3c4\uac00 \ub290\ub9ac\ub2e4\ub294 \uc810\uc774 \uc774\uc0c1\ud558\uac8c \ub290\uaef4\uc9c8 \uc218 \uc788\ub2e4.  \\n\uc774\ub294 Search Index \uc758 \ud2b9\uc131\uacfc Atlas Search \uc758 \ub0b4\ubd80\uad6c\uc870\ub85c \uc778\ud574 \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c\uc774\ub2e4.  \\nAtlas Search \ud074\ub7ec\uc2a4\ud130\uc758 \uac01 \ub178\ub4dc\uc5d0\ub294 `mongot` \uc640 `mogond` \ub77c \ubd88\ub9ac\ub294 \ub450 \uac1c\uc758 \ud504\ub85c\uc138\uc2a4\uac00 \uc874\uc7ac\ud55c\ub2e4.\\n\\n- `mongot`: Apache Lucene \uae30\ubc18\uc758 \uac80\uc0c9\uc5d4\uc9c4\\n- `mongond`: NoSQL \ub370\uc774\ud130\ubca0\uc774\uc2a4\\n\\n![atlas-architecture](atlas-architecture.png)\\n\\n\ub450 \ud504\ub85c\uc138\uc2a4\uac00 \ub2e4\ub8e8\ub294 \ub370\uc774\ud130\ub294 \uc11c\ub85c \ub2e4\ub974\uace0 \uc800\uc7a5\ud558\ub294 \ud615\ud0dc\ub3c4 \ub2e4\ub974\ub2e4.\\n\\n- `mongot`: Search Index\\n- `mongond`: Document, B-Tree Index\\n\\n`mongot` \ub294 \uac80\uc0c9\uc744 \uc704\ud55c \uc5ed\uc778\ub371\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 Search Index \ub97c \ub2e4\ub8e8\uba70 `mongond` \ub294 \uceec\ub809\uc158 \ub370\uc774\ud130\uc640 B-Tree \uc778\ub371\uc2a4\ub97c \ub2e4\ub8ec\ub2e4.  \\n\uc55e\uc11c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\ub294 aggregation \uc744 \uc218\ud589\ud560 \ub54c `$search` \ub294 `mongot` \uc5d0\uac8c \ucc98\ub9ac\ud558\uace0 `$sort` \uc774\ud6c4\ub294 `mongond` \uc5d0\uac8c \ucc98\ub9ac\ud55c\ub2e4.\\n\\n```js\\ndb.movies.aggregate([\\n  // mongot \uc5d0\uc11c \uc218\ud589\\n  /* highlight-next-line */\\n  { $search: { text: { path: \\"fullplot\\", query: \\"the\\" } } },\\n  // mongond \uc5d0\uc11c \uc218\ud589\\n  /* highlight-start */\\n  { $sort: { runtime: -1 } },\\n  { $skip: 0 },\\n  { $limit: 10 },\\n  { $project: { _id: 0, title: 1, runtime: 1 } },\\n  /* highlight-end */\\n]);\\n```\\n\\n`$search` stage \uc5d0\uc11c\ub294 \uc5ed\uc778\ub371\uc2a4\ub97c \ucc38\uc870\ud574\uc11c \uac80\uc0c9\uc744 \uc218\ud589\ud558\uae30\uc5d0 **\uacb0\uacfc\ub85c \ubb38\uc11c\uc804\uccb4\uac00 \uc544\ub2cc \uc624\uc9c1 `object id` \uc640 `score` \uac19\uc740 \uba54\ud0c0\uc815\ubcf4**\ub97c \ubc18\ud658\ud55c\ub2e4.  \\n\uc774\ub97c `mongod` \uac00 \ubc1b\uc544\uc11c \uceec\ub809\uc158\uc744 \uc870\ud68c\ud55c \ud6c4 \uc774\ud6c4 stage \ub97c \uc218\ud589\ud55c\ub2e4.  \\n\uc774\ub85c\uc778\ud574 `fullplot` \uc774 `the` \uc5d0 \ub9e4\uce6d\ub418\ub294 id \uac00 20000 \uac1c\ub77c\uace0 \uac00\uc815\ud558\uba74 \ud574\ub2f9\ud558\ub294 \ubaa8\ub4e0 \ubb38\uc11c\ub97c \uc870\ud68c\ud55c\ud6c4 \uc815\ub82c\uc744 \uc218\ud589\ud55c\ub2e4.\\n\\n\uacb0\ub860\uc801\uc73c\ub85c **\ub370\uc774\ud130\uc758 \ud544\ud130\ub9c1\uacfc \uc815\ub82c\uc744 \uc218\ud589\ud558\ub294 \ud504\ub85c\uc138\uc2a4\uac00 \ub2e4\ub974\uae30 \ub54c\ubb38\uc5d0 \ubb38\uc81c\uac00 \ubc1c\uc0dd**\ud55c\ub2e4.  \\n\uc608\ub97c\ub4e4\uc5b4 \ub2e4\uc74c\ucffc\ub9ac\ub294 \uc624\uc9c1 `mongod` \ub9cc \uc0ac\uc6a9\ud558\ub294\ub370 \uc774 \uacbd\uc6b0 \uc131\ub2a5\ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n\\n```js\\ndb.movies.createIndex({ runtime: 1 }); // B-Tree Index\\ndb.movies.find({ fullplot: /the/ }).sort({ runtime: -1 }).skip(20000).limit(10); // 100~200ms\\n```\\n\\n## Score \ub97c \ud65c\uc6a9\ud558\ub294 \ud544\ub4dc\uae30\ubc18 \uc815\ub82c\\n\\n\ub450 \ud504\ub85c\uc138\uc2a4\uac00 \ubaa8\ub450 \uc0ac\uc6a9\ud558\ub294 \ucffc\ub9ac\uc758 \uc18d\ub3c4\ub97c \uac1c\uc120\ud558\ub824\uba74 \uc815\ub82c\uc744 `mongot` \uc5d0\uc11c \uc218\ud589\ud574\uc57c\ud55c\ub2e4.  \\n`mongot` \ub294 \uc624\uc9c1 `score` \ub97c \uae30\ubc18\uc73c\ub85c \uc815\ub82c\uc744 \uc218\ud589\ud558\uae30\uc5d0 \uc815\ub82c\ud558\uace0\uc790 \ud558\ub294 \ud544\ub4dc\uc758 \uac12\uc774 `score` \uc5d0 \ubc18\uc601\ub418\ub3c4\ub85d \ud574\uc57c\ud55c\ub2e4.  \\n\uc774\ub97c \uc704\ud574 `path score function` \ub610\ub294 `near operator` \ub97c \uc0ac\uc6a9\ud574 \ud574\uacb0\ud560 \uc218 \uc788\ub2e4.\\n\\n### path score function\\n\\nAtlas search \uc5d0\uc11c\ub294 `relevance` \uae30\ubc18\uc73c\ub85c \uacc4\uc0b0\ub41c score \ub97c \uc870\uc791\ud560 \uc218 \uc788\ub294 \ubc29\ubc95\ub4e4\uc744 \uc81c\uacf5\ud55c\ub2e4.  \\n\uadf8 \uc911 \ud558\ub098\uac00 `path score function` \uc73c\ub85c score \ub97c \ubb38\uc11c\uc758 \ud2b9\uc815\ud544\ub4dc\uc758 \uac12\uc73c\ub85c \ubc14\uafd4\uc900\ub2e4.  \\nscore \ub294 \uc22b\uc790\ud0c0\uc785\uc774\ubbc0\ub85c path \uc5d0 \uc0ac\uc6a9\ud560 \ud544\ub4dc\ub3c4 \uc22b\uc790\ud0c0\uc785\uc774\uc5b4\uc57c\ud55c\ub2e4.\\n\\n```js\\ndb.movies.aggregate([\\n  {\\n    $search: {\\n      text: {\\n        path: \\"fullplot\\",\\n        query: \\"the\\",\\n        /* highlight-start */\\n        score: {\\n          function: {\\n            path: {\\n              value: \\"runtime\\", // runtime \uc744 score \ub85c \uc0ac\uc6a9\\n              undefined: 0, // runtime \uc774 null \uc774\uac70\ub098 \uac12\uc774\uc5c6\uc73c\uba74 0\uc73c\ub85c \uc124\uc815\\n            },\\n          },\\n        },\\n        /* highlight-end */\\n      },\\n    },\\n  },\\n  { $skip: 0 },\\n  { $limit: 10 },\\n  {\\n    $project: {\\n      _id: 0,\\n      title: 1,\\n      runtime: 1,\\n      score: { $meta: \\"searchScore\\" }, // score \ub97c \uacb0\uacfc\uc5d0 \ud3ec\ud568\\n    },\\n  },\\n]);\\n```\\n\\n![path-score](path-score.png)\\n\\n\uacb0\uacfc\ub97c \ubcf4\uba74 `score` \uac00 `runtime` \uacfc \ub3d9\uc77c\ud558\ub2e4\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.  \\n\uc774\ucc98\ub7fc `path score function` \uc740 **\uc22b\uc790\ud0c0\uc785\uc758 \ud544\ub4dc\ub97c \ub0b4\ub9bc\ucc28\uc21c \uc815\ub82c**\ud560 \ub54c \uc720\uc6a9\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc9c0\ub9cc \uadf8 \uc678\uc758 \uc870\uac74\uc5d0\ub294 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub2e4\ub294 \ub2e8\uc810\uc774\uc788\ub2e4.\\n\\n### near operator\\n\\nnear operator \ub294 \uc22b\uc790, \ub0a0\uc9dc, \uc88c\ud45c\ub370\uc774\ud130\ub97c \ud65c\uc6a9\ud574 score \ub97c \uacc4\uc0b0\ud558\ub294 operator \ub85c \uacc4\uc0b0\uc2dd\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n![near-score](near-score.png)\\n\\n\uc5ec\uae30\uc11c \uac01 \ud56d\ubaa9\uc758 \uc758\ubbf8\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n- `pivot` : \uc784\uc758\uc758 \uc22b\uc790\\n- `distance` : \ud2b9\uc815 \ud544\ub4dc\uc640 `origin` \uc0ac\uc774\uc758 \uac70\ub9ac\\n- `origin` : \uae30\uc900\uac12\\n\\n\uacc4\uc0b0\uc2dd\uc744 \uc798\ubcf4\uba74 \ubd84\uc790\uc640 \ubd84\ubaa8\uc5d0 \ubaa8\ub450 `pivot` \uc774 \uc874\uc7ac\ud558\uace0 `distance` \ub294 0 \uc774\uc0c1\uc758 \uc218\uc774\uae30 \ub54c\ubb38\uc5d0 score \ub294 0 \ubcf4\ub2e4\ud06c\uace0 1 \ubcf4\ub2e4 \uac19\uac70\ub098 \uc791\uc740 \uac12\uc744 \uac00\uc9c4\ub2e4.  \\n`pivot` \uc740 \uc0ac\uc2e4 \uc815\ub82c\uc5d0 \uc601\ud5a5\uc744 \uc8fc\uc9c0 \uc54a\ub294 \ud56d\ubaa9\uc774\uba70 `origin` \uc744 \uc5b4\ub5bb\uac8c \uc124\uc815\ud558\ub290\ub0d0\uc5d0 \ub530\ub77c \uc815\ub82c\uc21c\uc11c\uac00 \uacb0\uc815\ub41c\ub2e4.  \\n\ub9cc\uc57d `runtime` \uc744 \uc624\ub984\ucc28\uc21c\uc73c\ub85c \uc815\ub82c\ud558\uace0 \uc2f6\ub2e4\uba74 `origin` \uc744 0 \uc73c\ub85c \uc124\uc815\ud558\uba74 \ub41c\ub2e4.\\n\\n```js\\ndb.movies.aggregate([\\n  {\\n    $search: {\\n      compound: {\\n        /* highlight-start */\\n        // near operator \ub85c \uacc4\uc0b0\ud55c score \ub294 \ucd5c\uc885 score \uc5d0 \ubc18\uc601\\n        must: [\\n          {\\n            near: {\\n              origin: 0, // runtime \uc774 0 \uc5d0 \uac00\uae4c\uc6b8 \uc218\ub85d \ub192\uc740 score \ub97c \uac00\uc9c4\ub2e4\\n              pivot: 1,\\n              path: \\"runtime\\",\\n            },\\n          },\\n        ],\\n        // text operator \ub85c \uacc4\uc0b0\ub41c score \ub97c \ubb34\uc2dc\ud558\uae30 \uc704\ud574 filter \ub97c \uc0ac\uc6a9\\n        filter: [{ text: { path: \\"fullplot\\", query: \\"the\\" } }],\\n        /* highlight-end */\\n      },\\n    },\\n  },\\n  { $skip: 0 },\\n  { $limit: 10 },\\n  {\\n    $project: {\\n      _id: 0,\\n      title: 1,\\n      runtime: 1,\\n      score: { $meta: \\"searchScore\\" }, // score \ub97c \uacb0\uacfc\uc5d0 \ud3ec\ud568\\n    },\\n  },\\n]);\\n```\\n\\n![near-runtime-asc](near-runtime-asc.png)\\n\\nnear \ub85c \ub0a0\uc9dc\ud0c0\uc785\uc73c\ub85c \uc815\ub82c\ud560 \uc218\ub3c4 \uc788\uace0 \ub2e4\uc74c\uc740 `released` \ub97c \ucd5c\uc2e0\uc21c\uc73c\ub85c \uc815\ub82c\ud558\ub294 \ucffc\ub9ac\uc774\ub2e4.\\n\\n```js\\ndb.movies.aggregate([\\n  {\\n    $search: {\\n      compound: {\\n        must: [\\n          {\\n            near: {\\n              /* highlight-start */\\n              origin: ISODate(\\"2030-01-01T00:00:00.000+00:00\\"),\\n              pivot: 10000000,\\n              path: \\"released\\",\\n              /* highlight-end */\\n            },\\n          },\\n        ],\\n        filter: [{ text: { path: \\"fullplot\\", query: \\"the\\" } }],\\n      },\\n    },\\n  },\\n  { $skip: 0 },\\n  { $limit: 10 },\\n  {\\n    $project: {\\n      _id: 0,\\n      title: 1,\\n      released: 1,\\n      score: { $meta: \\"searchScore\\" }, // score \ub97c \uacb0\uacfc\uc5d0 \ud3ec\ud568\\n    },\\n  },\\n]);\\n```\\n\\n![near-date-result](near-date-result.png)\\n\\n:::info\\n\ub0b4\ub9bc\ucc28\uc21c \uc815\ub82c\uc5d0\uc11c\ub294 origin \uac12\uc744 \uc815\ub82c\ud544\ub4dc\uac00 \ub3c4\ub2ec\ud560 \uc218 \uc5c6\ub294 \ud070 \uac12\uc73c\ub85c \uc124\uc815\ud574\uc57c\ud55c\ub2e4.  \\n`movices` \uceec\ub809\uc158\uc740 `released` \uac12\uc774 \'2016-03-23\' \uc774\ud6c4 \ub370\uc774\ud130\ub294 \uc5c6\uae30\uc5d0 `origin` \uc744 \uc801\ub2f9\ud788 \ud070 2030 \ub144\uc73c\ub85c \uc124\uc815\ud588\ub2e4.  \\n\ucd94\ud6c4\uc5d0 2030 \ub144 \uc774\ud6c4 \ub370\uc774\ud130\uac00 \ucd94\uac00\ub418\ub294 \uc0c1\ud669\uc744 \uac00\uc815\ud55c\ub2e4\uba74 `origin` \uc744 \ub354 \ud070 \uac12\uc73c\ub85c \uc124\uc815\ud574\uc57c \ud560\uac83\uc774\ub2e4.\\n\\n\ub2e4\ub9cc `origin` \uc744 \ub108\ubb34 \ud070 \uac12\uc73c\ub85c \uc124\uc815\ud558\ub294 \uacbd\uc6b0 score \uac00 double \ud615\uc5d0 \ub2f4\uc744 \uc218 \uc5c6\uc744\uc815\ub3c4\ub85c \uc791\uc544\uc838\uc11c \uc81c\ub300\ub85c \uacc4\uc0b0\uc774 \ub418\uc9c0\uc54a\ub294 \uc0c1\ud669\uc774 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4.  \\n\uc774\ub7f0 \uacbd\uc6b0 `pivot` \uac12 \ub610\ud55c \ud070 \uac12\uc73c\ub85c \ub123\uc5b4\uc8fc\uc5b4\uc11c score \uac00 \ucee4\uc9c8 \uc218 \uc788\ub3c4\ub85d \ud574\uc57c\ud55c\ub2e4.\\n:::\\n\\n## 2\ucc28 \uc815\ub82c\\n\\n\ud2b9\uc815 \ud544\ub4dc\ub97c \uae30\uc900\uc73c\ub85c \uc815\ub82c \uc2dc \uac19\uc740 \uac12\uc744 \uac00\uc9c0\ub294 \ubb38\uc11c\ub07c\ub9ac\ub294 \uc0c8\ub85c\uc6b4 \ud544\ub4dc\ub85c \uc815\ub82c\uc774 \ud544\uc694\ud55c \uc0c1\ud669\uc774 \uc0dd\uae38 \uc218 \uc788\ub2e4.  \\n\uc608\ub97c\ub4e4\uba74 `movies` \uceec\ub809\uc158\uc744 `runtime` \uc73c\ub85c \uc815\ub82c\ud558\uace0 \uac19\uc740 `runtime` \uc744 \uac00\uc9c0\ub294 \ubb38\uc11c\ub4e4\uc740 `released` \ub97c \uae30\uc900\uc73c\ub85c \uc815\ub82c\ud558\ub294 \uacbd\uc6b0\uc774\ub2e4.  \\n\uc774\ub97c `mongot` \uc5d0\uc11c \uc218\ud589\ud558\uae30 \uc704\ud574\uc11c\ub294 \uac01 \ud544\ub4dc\ubcc4\ub85c score \uc758 \uac00\uc911\uce58\ub97c \ub2e4\ub974\uac8c \uc8fc\ub294 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4.  \\n`path score function` \uacfc `near operator` \ub97c \ubaa8\ub450 \uc0ac\uc6a9\ud558\uc5ec \uad6c\ud604\ud558\ub294\ub370 \ub2e8 1\ucc28 \uc815\ub82c\ud544\ub4dc\uac00 \uc790\uc5f0\uc218\uc5b4\uc57c \ud55c\ub2e4.\\n\\n> \uc790\uc5f0\uc218\uac00 \uc544\ub2c8\uc9c0\ub9cc \ud2b9\uc815 \uc18c\uc218\uc810 \uc790\ub9ac \ubc11\uc73c\ub85c\ub294 \ud56d\uc0c1 0 \uc774\ub77c\ub294 \uac83\uc774 \ubcf4\uc7a5\ub41c\ub2e4\uba74 `multiply score function` \uc744 \uc801\uc6a9\ud574\uc11c \uc790\uc5f0\uc218\ub85c \ub9cc\ub4e4\uc5b4 \uc801\uc6a9\ud558\uba74 \ub41c\ub2e4.\\n\\n`path score function` \uc73c\ub85c 1\ucc28 \uc815\ub82c \ud544\ub4dc\ub97c \uc9c0\uc815\ud574 \uc790\uc5f0\uc218 score \ub97c \uc5bb\uace0 `near operator` \ub85c 2\ucc28 \uc815\ub82c \ud544\ub4dc\ub97c \uc9c0\uc815\ud574 \ud569\uc0b0\ud558\uba74 \ub41c\ub2e4.  \\n`near operator` \ub85c \uacc4\uc0b0\ub41c score \ub294 1\ubcf4\ub2e4 \ud074 \uc218 \uc5c6\uae30\uc5d0 `path score function` \uc73c\ub85c \uacc4\uc0b0\ub41c score \uac00 5\uc778 \ubb38\uc11c\ub294 \uc544\ubb34\ub9ac near \uac12\uc774 \ub192\uc544\ub3c4 6\uc778 \ubb38\uc11c\ubcf4\ub2e4 score \uac00 \ud074 \uc218 \uc5c6\uac8c\ub41c\ub2e4.\\n\\n```js\\ndb.movies.aggregate([\\n  {\\n    $search: {\\n      compound: {\\n        must: [\\n          {\\n            near: {\\n              /* highlight-start */\\n              // 2\ucc28 \uc815\ub82c \ud544\ub4dc\uc5d0 near operator \ub97c \uc0ac\uc6a9\\n              origin: ISODate(\\"2020-01-01T00:00:00.000+00:00\\"),\\n              pivot: 1000000000,\\n              path: \\"released\\",\\n              score: {\\n                function: {\\n                  // \ub450 \uac1c\uc758 score \ub97c \ud569\uc0b0\\n                  add: [\\n                    // runtime \uac12\uc744 score \ub85c \uc0ac\uc6a9\\n                    { path: { value: \\"runtime\\", undefined: 0 } },\\n                    // near \ub85c \uacc4\uc0b0\ud55c score \ub97c \uc758\ubbf8\\n                    { score: \\"relevance\\" },\\n                  ],\\n                },\\n              },\\n              /* highlight-end */\\n            },\\n          },\\n        ],\\n        filter: [{ text: { path: \\"fullplot\\", query: \\"the\\" } }],\\n      },\\n    },\\n  },\\n  { $skip: 1025 },\\n  { $limit: 10 },\\n  {\\n    $project: {\\n      _id: 0,\\n      title: 1,\\n      runtime: 1,\\n      released: 1,\\n      score: { $meta: \\"searchScore\\" }, // score \ub97c \uacb0\uacfc\uc5d0 \ud3ec\ud568\\n    },\\n  },\\n]);\\n```\\n\\n![path-and-near](path-and-near.png)\\n\\n\uacb0\uacfc\ub97c \ubcf4\uba74 `runtime` \uc774 \ud070 \ud56d\ubaa9\uc774 \uba3c\uc800 \ub098\uc624\uba70 `runtime` \uc774 \uac19\uc740 \ubb38\uc11c\ub4e4\uc740 released \uae30\uc900\uc73c\ub85c \ucd5c\uc2e0\uc21c\uc73c\ub85c \uc815\ub82c\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n## \ucc38\uace0\uc790\ub8cc\\n\\n- [Atlas Search Architecture](https://www.mongodb.com/docs/atlas/atlas-search/atlas-search-overview/#fts-architecture)\\n- [Atlas Search Scoring](https://www.mongodb.com/docs/atlas/atlas-search/scoring)"},{"id":"2022/09/09/Mogenius\ub97c-\ud65c\uc6a9\ud55c-\ub3c4\ucee4-\ucee8\ud14c\uc774\ub108-\ubc30\ud3ec","metadata":{"permalink":"/2022/09/09/Mogenius\ub97c-\ud65c\uc6a9\ud55c-\ub3c4\ucee4-\ucee8\ud14c\uc774\ub108-\ubc30\ud3ec","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-09-09-mogenius/index.mdx","source":"@site/blog/2022-09-09-mogenius/index.mdx","title":"Mogenius\ub97c \ud65c\uc6a9\ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec","description":"\uc774\uc804 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c \uc801\uc740 fly.io \uc640 \ube44\uc2b7\ud55c \uc11c\ube44\uc2a4\ub97c \uc81c\uacf5\ud558\ub294 Mogenius \ub97c \ud65c\uc6a9\ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc744 \ub2e4\ub8ec\ub2e4.","date":"2022-09-09T00:00:00.000Z","formattedDate":"2022\ub144 9\uc6d4 9\uc77c","tags":[{"label":"mogenius","permalink":"/tags/mogenius"},{"label":"ci/cd","permalink":"/tags/ci-cd"},{"label":"docker","permalink":"/tags/docker"},{"label":"mysql","permalink":"/tags/mysql"},{"label":"spring","permalink":"/tags/spring"}],"readingTime":13.24,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Mogenius\ub97c \ud65c\uc6a9\ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec","slug":"2022/09/09/Mogenius\ub97c-\ud65c\uc6a9\ud55c-\ub3c4\ucee4-\ucee8\ud14c\uc774\ub108-\ubc30\ud3ec","authors":"jake","tags":["mogenius","ci/cd","docker","mysql","spring"]},"prevItem":{"title":"MongoDB Atlas Search\ub85c \uceec\ub7fc\uae30\ubc18 \uc815\ub82c\ud558\uae30","permalink":"/2022/09/12/MongoDB-Atlas-Search\ub85c-\uceec\ub7fc\uae30\ubc18-\uc815\ub82c\ud558\uae30"},"nextItem":{"title":"Fly.io\ub97c \ud65c\uc6a9\ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec","permalink":"/2022/08/27/Fly.io\ub97c-\ud65c\uc6a9\ud55c-\ub3c4\ucee4-\ucee8\ud14c\uc774\ub108-\ubc30\ud3ec"}},"content":"\uc774\uc804 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c \uc801\uc740 fly.io \uc640 \ube44\uc2b7\ud55c \uc11c\ube44\uc2a4\ub97c \uc81c\uacf5\ud558\ub294 Mogenius \ub97c \ud65c\uc6a9\ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc744 \ub2e4\ub8ec\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## Fly.io \ub2e8\uc810\\n\\nFly.io \ub294 \ubb34\ub8cc\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc11c\ube44\uc2a4\uc774\uc9c0\ub9cc, \ubb34\ub8cc \ud50c\ub79c\uc5d0\uc11c 256MB \uc758 \uba54\ubaa8\ub9ac\ub9cc \uc9c0\uc6d0\ud558\ub294 \ub2e8\uc810\uc774 \uc788\ub2e4.\\n\uadf8\ub798\uc11c Spring Boot + JPA \ub97c \uc0ac\uc6a9\ud558\ub294 \ud504\ub85c\uc81d\ud2b8\ub97c \ubc30\ud3ec\ud560 \ub54c OOM \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc5ec \ub2e4\ub978 \uc11c\ube44\uc2a4\ub97c \ucc3e\uc544\ubcf4\uac8c \ub418\uc5c8\ub2e4.\\n\\n## Mogenius\\n\\n[Mogenius](https://mogenius.io/) \ub3c4 \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec\ub97c \uc9c0\uc6d0\ud558\ub294 \uc11c\ube44\uc2a4\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uae30\ubc18\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4.\\n\uc800\uc7a5\uc18c\uc5d0 \uc788\ub294 Dockerfile \uc744 \uc77d\uc5b4\uc11c \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud558\uace0 \ubc30\ud3ec\ud55c\ub2e4.\\nGitHub \uacfc \uc5f0\ub3d9\ud558\uc5ec \ud2b9\uc815 \ube0c\ub79c\uce58\uc5d0 \ucee4\ubc0b\uc774 \ud478\uc2dc\ub418\uba74 \uc790\ub3d9\uc73c\ub85c \ubc30\ud3ec\uac00 \ub3d9\uc791\ud55c\ub2e4.\\nCD \uc124\uc815\uc744 \uc9c1\uc811 \ud574\uc57c\ud558\ub294 fly.io \uc640 \ub2ec\ub9ac \uc790\ub3d9\uc73c\ub85c \uc124\uc815\ud574\uc8fc\uae30 \ub54c\ubb38\uc5d0 \ud3b8\ub9ac\ud558\ub2e4.\\n\\n\uae00 \uc791\uc131 \uc2dc\uc810\uc73c\ub85c \ubb34\ub8cc \ud50c\ub79c\uc5d0\uc11c\ub294 \ub2e4\uc74c \ud598\ub2f9\ub7c9\uc744 \ubc1b\uc744 \uc218 \uc788\ub2e4.\\n\\n- 0.5 CPU Core\\n- 1GB RAM\\n- 5GB traffic\\n- 2GB storage\\n\\n:::info\\n\ucd94\ud6c4\uc5d0 \ub2ec\ub77c\uc9c8 \uc218 \uc788\ub294 \ub0b4\uc6a9\uc774\ub77c \uacf5\uc2dd \uc0ac\uc774\ud2b8\uc5d0\uc11c \uc9c1\uc811 \ud655\uc778\ud558\ub294 \uac83\uc744 \uad8c\uc7a5\ud55c\ub2e4.\\n:::\\n\\n\uba54\ubaa8\ub9ac\ub97c 1GB \uc9c0\uc6d0\ud558\uae30\uc5d0 MySQL \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b0\uae30 \uc6a9\uc774\ud558\ub2e4.\\nfly.io \uc5d0\uc11c\ub294 \uacb0\uc81c\uc815\ubcf4\ub97c \uc785\ub825\ud574\uc57c \ucd94\uac00 \uc0ac\uc6a9\ub7c9\uc744 \ubc1b\uc744 \uc218 \uc788\uc9c0\ub9cc Mogenius \ud68c\uc6d0\uac00\uc785\ub9cc \ud574\ub3c4 \uc704\uc758 \uc0ac\uc6a9\ub7c9\uc744 \ubc1b\uc744 \uc218 \uc788\ub2e4.\\n\ud2b9\ud788 fly.io \uc5d0\uc11c \uc798\ubabb \uc0ac\uc6a9\ud558\ub2e4\uac00 \ubb34\ub8cc \uc0ac\uc6a9\ub7c9\uc774 \ucd08\uacfc\ud574 \uc6d0\uce58\uc54a\ub294 \ube44\uc6a9\uc774 \uccad\uad6c\ub420 \uc218 \uc788\uc9c0\ub9cc Mogenius \uc5d0\ub294 \uadf8\ub7f0 \uac71\uc815\uc774 \uc5c6\ub2e4.\\n\\n\ub2e4\ub9cc Mogenius \ub294 fly.io \uc640 \ub2ec\ub9ac \uc791\uc131\uc77c \uae30\uc900\uc73c\ub85c \ub3c5\uc77c \ub9ac\uc804\ub9cc \uc9c0\uc6d0\ud55c\ub2e4.\\n\ud558\uc9c0\ub9cc \uac1c\ubc1c\uc6a9\ub3c4\ub85c \uc0ac\uc6a9\ud560 \ubaa9\uc801\uc774\ub77c\uba74 \ud070 \ubb38\uc81c\ub294 \uc544\ub2c8\ub2e4.\\n\\n## MySQL \ucee8\ud14c\uc774\ub108\\n\\n\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 Spring Boot \uc6f9\uc11c\ubc84\uc640 MySQL \ucee8\ud14c\uc774\ub108\ub97c \ubc30\ud3ec\ud558\ub294 \ubc29\ubc95\uc744 \ub2e4\ub8ec\ub2e4.\\n\\n### \ud68c\uc6d0\uac00\uc785\\n\\n\uba3c\uc800 [Sign Up](https://studio.mogenius.com/user/registration) \uc5d0 \uc811\uc18d\ud558\uc5ec \ud68c\uc6d0\uac00\uc785\uc744 \ud55c\ub2e4.\\n\uc544\uc9c1 \uc18c\uc15c \ub85c\uadf8\uc778 \uae30\ub2a5\uc740 \uc5c6\uc5b4\uc11c \uc9c1\uc811 \uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574\uc57c \ud55c\ub2e4.\\nSign Up \ubc84\ud2bc\uc744 \ub204\ub974\uba74 \uc785\ub825\ud55c \uc774\uba54\uc77c\ub85c \uc778\uc99d \uba54\uc77c\uc774 \uc624\ub294\ub370, \uc778\uc99d\uc744 \uc644\ub8cc\ud558\uba74 \ub85c\uadf8\uc778\uc774 \uac00\ub2a5\ud558\ub2e4.\\n\\n![regester](regester.png)\\n\\n### Cloudspace \uc0dd\uc131\\n\\n\ub85c\uadf8\uc778\uc744 \uc644\ub8cc\ud558\uba74 Cloudspace \ub97c \uc0dd\uc131\uc744 \uc704\ud55c \ud398\uc774\uc9c0\uc5d0 \uc811\uc18d\ud558\uac8c \ub41c\ub2e4.\\n`Create Cloudspace` \ubc84\ud2bc\uc744 \ub20c\ub7ec\uc11c \ub2e4\uc74c\uc73c\ub85c \uc9c4\ud589\ud55c\ub2e4.\\n\\n![cloudspace](cloudspace.png)\\n\\n\uc6d0\ud558\ub294 cloudspace \uc774\ub984\uc744 \uc785\ub825\ud558\uace0, `Free Plan` \uc774 \uc120\ud0dd\ub41c \uac83\uc744 \ud655\uc778\ud558\uace0 `Create now` \ubc84\ud2bc\uc744 \ub204\ub978\ub2e4.\\n\\n![space-name](space-name.png)\\n\\n### Service \uc0dd\uc131\\n\\n\uc774\ud6c4 cloudspace \ub300\uc2dc\ubcf4\ub4dc \ud398\uc774\uc9c0\uc5d0 \uc811\uc18d\ud558\uac8c \ub418\ub294\ub370 \ub9ac\ub85c\uc2a4 \ud560\ub2f9\ub7c9, \uc0ac\uc6a9\uc911\uc778 \uc11c\ube44\uc2a4 \ub4f1\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\uc911\uac04\uc5d0 `Stages` \ud56d\ubaa9\uc744 \ubcfc \uc218 \uc788\ub294\ub370 \uc774\ub294 \uac1c\ubc1c/\uc6b4\uc601 \uac19\uc740 \ubc30\ud3ec\ud658\uacbd\uc744 \uc758\ubbf8\ud55c\ub2e4\ub77c\uace0 \uc0dd\uac01\ud558\uba74 \ub41c\ub2e4.\\n\ubb34\ub8cc \ud50c\ub79c\uc5d0\uc11c\ub294 Production Stage \ub9cc \uc0ac\uc6a9\ud560 \uc218 \uc788\uae30\uc5d0 \ud06c\uac8c \uc2e0\uacbd \uc4f8 \ub0b4\uc6a9\uc740 \uc5c6\ub2e4.\\n\ud604\uc7ac\ub294 Production Stage \uc5d0 \uc544\ubb34\ub7f0 \uc11c\ube44\uc2a4\uac00 \uc5c6\uc73c\uba70 `Add` \ub97c \ub204\ub978\ub2e4.\\n\\n\uc11c\ube44\uc2a4\ub294 \ud558\ub098\uc758 \ucee8\ud14c\uc774\ub108\ub77c\uace0 \uc0dd\uac01\ud558\uba74 \ub418\uba70 \ud604\uc7ac 3\uac00\uc9c0 \ubc29\ubc95\uc73c\ub85c \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4.\\n\\n- `Bring your own code`: GitHub \uc800\uc7a5\uc18c\ub97c \ud65c\uc6a9\ud574 \ubc30\ud3ec\\n- `Use a template`: Mogenius \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ud15c\ud50c\ub9bf\uc744 \ud65c\uc6a9\ud574 \uc0d8\ud50c \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec\\n- `Container Imgae`: DockerHub \uac19\uc740 \ucee8\ud14c\uc774\ub108 \uc800\uc7a5\uc18c\uc758 \uc774\ubbf8\uc9c0\ub97c \ud65c\uc6a9\ud574 \ubc30\ud3ec\\n\\n\uccab \ubc88\uc9f8 \ubc29\ubc95\uc740 \uc800\uc7a5\uc18c\uc5d0 \uc788\ub294 Dockerfile \uc744 \ud65c\uc6a9\ud558\uba70 \ub450 \ubc88\uc9f8\ub294 Mogenius \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uc0d8\ud50c\uc6a9 \uc800\uc7a5\uc18c\ub97c \ud65c\uc6a9\ud55c\ub2e4.\\nDockerfile \uc744 \ud65c\uc6a9\ud574 \ucee4\uc2a4\ud140\ud55c \uc124\uc815\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\uac00 \uc544\ub2c8\ub77c\uba74 \uc138 \ubc88\uc9f8 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\uacf5\uc2dd mysql \uc774\ubbf8\uc9c0\ub97c \uadf8\ub300\ub85c \uc0ac\uc6a9\ud560 \uac83\uc774\uae30\uc5d0 `Container Image` \ub97c \uc120\ud0dd\ud55c\ub2e4.\\n\\n![add-stage](add-stage.png)\\n\\n### \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0 \uc124\uc815\\n\\n\uc774\uc81c \ucee8\ud14c\uc774\ub108 \uc124\uc815\uc744 \ud558\uac8c\ub418\ub294\ub370 \uc0ac\uc2e4 docker \uc5d0 \uc775\uc219\ud55c \uc0ac\ub78c\uc774\ub77c\uba74 \ubb38\uc11c\uc5c6\uc774\ub3c4 \uc124\uc815\ud560 \uc218 \uc788\uc744 \uc815\ub3c4\ub85c \uac04\ub2e8\ud558\ub2e4.\\n`Service Name` \uc5d0 \uc6d0\ud558\ub294 \uc11c\ube44\uc2a4 \uc774\ub984\uc744 \ub123\uc5b4\uc8fc\uace0 `Container Image` \uc5d0\ub294 \uc0ac\uc6a9\ud560 \uc774\ubbf8\uc9c0\ub97c \uc785\ub825\ud55c\ub2e4.\\n[mysql](https://hub.docker.com/_/mysql) \uacf5\uc2dd \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\ud560 \uac83\uc774\uae30\uc5d0 `mysql` \uc744 \uc785\ub825\ud55c\ub2e4.\\n\uc6d0\ud558\ub294 \uacbd\uc6b0 \ud0dc\uadf8\uae4c\uc9c0 \ub123\uc5b4\uc11c \ud2b9\uc815 \ubc84\uc804\uc73c\ub85c \uace0\uc815\ud560 \uc218\ub3c4 \uc788\ub2e4.\\n\\n![image-name](image-name.png)\\n\\n#### Resource limits\\n\\nSettings \uc758 Resource limits \uc5d0 \ucee8\ud14c\uc774\ub108\uc5d0 \ud560\ub2f9\ud560 \uc790\uc6d0\ub7c9\uc744 \ubc30\uc815\ud560 \uc218 \uc788\ub2e4.\\nMogenius \ub294 \uc720\ud6a8\ud55c \uc774\uba54\uc77c \uacc4\uc815\ub9cc \uc788\uc73c\uba74 \uc81c\ud55c\uc5c6\uc774 \uacc4\uc815\uc744 \ub9cc\ub4e4 \uc218 \uc788\uc73c\ubbc0\ub85c \uc5ec\ub7ec \ucee8\ud14c\uc774\ub108\ub97c \uac01\uac01 \ub2e4\ub978 \uacc4\uc815\uc744 \ud65c\uc6a9\ud574 \ub744\uc6b8 \uc218 \uc788\ub2e4.\\n\uadf8\ub798\uc11c \ubaa8\ub4e0 \ud560\ub2f9\ub7c9\uc744 \ub2e4 \ubc30\uc815\ud574\ub3c4 \ubb34\ubc29\ud558\ub2e4.\\n\\n![resource](resource.png)\\n\\n#### Environment Variables\\n\\nEnvironment Variables \uc5d0\ub294 \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc5d0\uc11c \uc0ac\uc6a9\ud560 \ud658\uacbd\ubcc0\uc218\uc640 volume mount \uc124\uc815\uc744 \ud560 \uc218 \uc788\ub2e4.\\n`Add Variable` \uc744 \ub20c\ub7ec \uac01 \ud56d\ubaa9\uc744 \ucd94\uac00\ud558\uba70 Type \uc744 \uc120\ud0dd\ud574 \ud658\uacbd\ubcc0\uc218\ub098 volume mount \ub97c \ucd94\uac00\ud560 \uc218 \uc788\ub2e4.\\n\\nPlaintext \uc744 \uc120\ud0dd\ud574 \ud3c9\ubb38\uc73c\ub85c \ud658\uacbd\ubcc0\uc218\ub97c \ub123\uc5b4\uc904 \uc218 \uc788\uc73c\uba70 `Volumn Mount` \ub97c \uc120\ud0dd\ud574 mysql data \ub97c \uc800\uc7a5\ud560 \ub514\ub809\ud1a0\ub9ac\ub97c \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4.\\n\ub2e4\uc74c\uacfc \uac19\uc740 \uc124\uc815\uc744 \ucd94\uac00\ud55c\ub2e4.\\n\\n> \uc88c\uce21 \uba54\ub274\uc758 `File Browser` \ub97c \ud1b5\ud574 \uc190\uc27d\uac8c \ubcfc\ub968 \ub370\uc774\ud130\ub97c \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n- Plaintext\\n\\n| Name                       | Value     | \uc124\uba85                                 |\\n| -------------------------- | --------- | ------------------------------------ |\\n| MYSQL_RANDOM_ROOT_PASSWORD | true      | \ub79c\ub364\ud558\uac8c root \ube44\ubc00\ubc88\ud638\ub97c \uc0dd\uc131\ud55c\ub2e4.   |\\n| MYSQL_DATABASE             | \uc6d0\ud558\ub294 \uac12 | \uc0dd\uc131\ud560 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc774\ub984\uc744 \uc9c0\uc815\ud55c\ub2e4. |\\n| MYSQL_USER                 | \uc6d0\ud558\ub294 \uac12 | \uc0dd\uc131\ud560 \uc0ac\uc6a9\uc790 \uc774\ub984\uc744 \uc9c0\uc815\ud55c\ub2e4.       |\\n| MYSQL_PASSWORD             | \uc6d0\ud558\ub294 \uac12 | \uc0dd\uc131\ud560 \uc0ac\uc6a9\uc790 \ube44\ubc00\ubc88\ud638\ub97c \uc9c0\uc815\ud55c\ub2e4.   |\\n\\n- Volumn Mount\\n\\n| Name       | Source     | Destination    |\\n| ---------- | ---------- | -------------- |\\n| mysql-data | mysql-data | /var/lib/mysql |\\n\\n![env](env.png)\\n\\n#### Ports\\n\\nPort \uc124\uc815\uc740 \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\ud3ec\ud2b8\ub97c \uc678\ubd80\ub85c \ub178\ucd9c\ud558\uae30 \uc704\ud55c \uc6a9\ub3c4\ub85c \uc4f0\uc778\ub2e4.\\n\uc0ac\uc2e4 \ud558\ub098\uc758 cloudspace \uc5d0\uc11c \uc6f9\uacfc \ub514\ube44 \uc11c\ube44\uc2a4\ub97c \ucd94\uac00\ud574 \uc0ac\uc6a9\ud55c\ub2e4\uba74 \ucee8\ud14c\uc774\ub108 \ub07c\ub9ac\ub9cc \ud1b5\uc2e0\ud558\uac8c \uc124\uc815\ud560 \uc218 \uc788\ub2e4.\\n\ubcf4\uc548\uc744 \uac15\ud654\ud558\ub824\uba74 \ub514\ube44\ub294 \uc678\ubd80\ub85c \ub178\ucd9c\ud558\uc9c0 \uc54a\ub294\uac83\uc774 \uc88b\uc9c0\ub9cc \uc6f9\uc744 \ub2e4\ub978 cloudspace \uc5d0\uc11c \ub744\uc6b0\ub294 \uacbd\uc6b0\ub77c \uc124\uc815\ud558\uc600\ub2e4.\\nType \uc740 `TCP` \ub97c \uc120\ud0dd\ud558\uace0 \uc678\ubd80 \ud3ec\ud2b8\ub294 `3306` \uc744 \uc785\ub825\ud558\uace0 `Expose` \uc5d0 \uccb4\ud06c\ub41c \uac83\uc744 \ud655\uc778\ud55c\ub2e4.\\n\\n![port](port.png)\\n\\n### \uc678\ubd80 \uc811\uc18d url \ud655\uc778\\n\\n`Create Service` \ubc84\ud2bc\uc744 \ub20c\ub7ec \ucee8\ud14c\uc774\ub108\ub97c \uc0dd\uc131\ud558\uba74 \uc678\ubd80\uc5d0\uc11c \uc811\uc18d\ud560 \uc218 \uc788\ub294 \uc8fc\uc18c\uc640 \ud3ec\ud2b8\uac00 \uc124\uc815\ub418\uba70 \uc774\ub97c\ud1b5\ud574 \uc811\uc18d\ud560 \uc218 \uc788\ub2e4.\\n\uc11c\ube44\uc2a4 \uc0c1\uc138 \ud398\uc774\uc9c0\uc5d0\uc11c `Hostname` \uc744 \ub204\ub974\uace0 `External hostname` \ud56d\ubaa9\uc5d0 \ubcf4\uc774\ub294 url \uc744 \uae30\uc5b5\ud574\ub454\ub2e4.\\n\\n![external-url](external-url.png)\\n\\n## Spring Boot \ucee8\ud14c\uc774\ub108 \uc0dd\uc131 \ubc0f MySQL \uc5f0\ub3d9\\n\\n\uc774\uc81c Spring Boot \ucee8\ud14c\uc774\ub108\ub97c \uc0dd\uc131\ud558\uace0 MySQL \ucee8\ud14c\uc774\ub108\uc640 \uc5f0\ub3d9\ud574\ubcf4\uc790.\\n\\n> \uc774\ubc88 \uae00\uc5d0\uc11c \uc608\uc81c\ub85c \uc0ac\uc6a9\ud560 \uc800\uc7a5\uc18c\ub294 [santa-close-server](https://github.com/santa-close/santa-close-server) \uc774\ub2e4.\\n\\n### \uc800\uc7a5\uc18c \uc124\uc815\\n\\n\uc6b0\uc120 \ub3c4\ucee4 \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud558\uae30 \uc704\ud55c Dockerfile \uc744 \uc800\uc7a5\uc18c \ub8e8\ud2b8\uc5d0 \uc0dd\uc131\ud55c\ub2e4.\\n\uc608\uc81c \ud504\ub85c\uc81d\ud2b8\ub294 gradle \uacfc \uba40\ud2f0\ubaa8\ub4c8\uc744 \uc0ac\uc6a9\ud558\uba70 server-app \ubaa8\ub4c8\uc744 \ube4c\ub4dc\ud558\uace0 \uc0dd\uc131\ud55c jar \ud30c\uc77c\uc744 \uc2e4\ud589\ud558\ub3c4\ub85d \uc124\uc815\ud558\uc600\ub2e4.\\n\\n:::caution\\nMogenius \ub294 \ubcf4\uc548\uc744 \uc704\ud574 \ucee8\ud14c\uc774\ub108\ub97c root \uacc4\uc815\uc73c\ub85c \uc2e4\ud589\ud558\ub294 \uac83\uc744 \ud5c8\uc6a9\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n\ub530\ub77c\uc11c Dockerfile \uc5d0\uc11c root \uac00 \uc544\ub2cc \uac8c\uc815\uc73c\ub85c \ud504\ub85c\uadf8\ub7a8\uc744 \uc2e4\ud589\ud558\ub3c4\ub85d \uc124\uc815\ud574\uc57c \ud55c\ub2e4.\\n:::\\n\\n```dockerfile\\n# \ube4c\ub4dc stage\\nFROM gradle:jdk17 AS build\\nCOPY --chown=gradle:gradle . /home/gradle/src\\nWORKDIR /home/gradle/src\\n# \ube4c\ub4dc \uc218\ud589\\nRUN gradle build --no-daemon -x test\\n\\n# \uc2e4\ud589 stage\\nFROM ghcr.io/graalvm/jdk:ol8-java17-22.2.0\\nENV LC_ALL=C.UTF-8\\n# app \uc720\uc800 \uc0dd\uc131\\nRUN useradd app\\nUSER app\\n# jar \ud30c\uc77c \ubcf5\uc0ac\\nCOPY --from=build /home/gradle/src/server-app/build/libs/server-app.jar app.jar\\n# jar \ud30c\uc77c \uc2e4\ud589\\nENTRYPOINT [\\"java\\", \\"-Djava.security.egd=file:/dev/urandom\\", \\"-jar\\", \\"app.jar\\"]\\n```\\n\\n\ub514\ube44\uc811\uc18d \uc815\ubcf4\uc640 \uac19\uc740 \ud56d\ubaa9\uc740 \ud658\uacbd\ubcc0\uc218\ub97c \ud1b5\ud574 \uc124\uc815\ud560 \uc218 \uc788\uac8c \ub2e4\uc74c\uacfc \uac19\uc740 \ud30c\uc77c\uc774 \uc874\uc7ac\ud55c\ub2e4.\\n\\n```yaml title=\\"server-app/src/main/resources/application-live.yml\\"\\nspring:\\n  datasource:\\n    driver-class-name: com.mysql.cj.jdbc.Driver\\n    url: ${DATABASE_URL}\\n    username: ${DATABASE_USERNAME}\\n    password: ${DATABASE_PASSWORD}\\n# \uadf8 \uc678 \ub2e4\ub978 \ud658\uacbd\ubcc0\uc218\ub4e4..\\n```\\n\\n### \uc11c\ube44\uc2a4 \ub4f1\ub85d\\n\\n\uc774\ubc88\uc5d0\ub294 `Bring your own code` \ub97c \uc120\ud0dd\ud574 \uc6f9\uc11c\ubc84\ub97c \ucd94\uac00\ud574\ubcf4\uc790.\\n`Service name` \uc5d0 \uc6d0\ud558\ub294 \uac12\uc744 \ub123\uc5b4\uc8fc\uace0 `Repository` \uc5d0\uc11c GitHub \uacc4\uc815\uc744 \uc5f0\uacb0\ud574 \uc800\uc7a5\uc18c\ub97c \uc120\ud0dd\ud560\ud560 \uc218 \uc788\ub3c4\ub85d \ub9cc\ub4e0\ub2e4.\\n\\n:::info\\nGitHub \uacc4\uc815 \uc5f0\ub3d9\uc5c6\uc774 public \uc800\uc7a5\uc18c url \uc744 \ud65c\uc6a9\ud560 \uc218 \uc788\uc9c0\ub9cc CI/CD \uac00 \uc124\uc815\ub418\uc9c0 \uc54a\ub294\ub2e4.\\n:::\\n\\n\uc5f0\uacb0\uc774 \uc644\ub8cc\ub418\uc5c8\uc73c\uba74 `Git Repository` \ud56d\ubaa9\uc5d0\uc11c \ubc30\ud3ec\ub97c \uc6d0\ud558\ub294 \uc800\uc7a5\uc18c\ub97c \uc120\ud0dd\ud558\uace0 `Git Branch` \uc5d0\uc11c \uc790\ub3d9\ube4c\ub4dc\ub97c \uc6d0\ud558\ub294 \ube0c\ub79c\uce58\ub97c \uc120\ud0dd\ud55c\ub2e4.\\nDockerfile \uc774 \ud504\ub85c\uc81d\ud2b8 \ub8e8\ud2b8\uac00 \uc544\ub2cc \ub2e4\ub978\uacf3\uc5d0 \uc788\uac70\ub098 \ube4c\ub4dc\ub97c \uc2e4\ud589\ud560 \ub514\ub809\ud1a0\ub97c \ub2e4\ub974\uac8c \uac00\uc838\uac00\ub824\uba74 `Dockerfile Name`, `Docker Context` \ub97c \uc218\uc815\ud55c\ub2e4.\\n\\n![web-name](web-name.png)\\n\\n`Environment Variables` \uc5d0\uc11c\ub294 \uc55e\uc11c application-live.yml \uc5d0\uc11c \ud544\uc694\ub85c\ud558\ub294 \ud658\uacbd\ubcc0\uc218\ub97c \ub4f1\ub85d\ud558\uba74 \ub41c\ub2e4.\\n\ucd94\uac00\ub85c `SPRING_PROFILES_ACTIVE` \uc758 \uac12\uc744 `live` \ub85c \uc124\uc815\ud574 spring \ud504\ub85c\ud544\uc744 `live` \ub85c \uc124\uc815\ud55c\ub2e4.\\n\\nvalue \uc5d0 \uc77c\ubd80 \ud2b9\uc218\ubb38\uc790\uac00 \ub4e4\uc5b4\uac00\ub294 \uacbd\uc6b0 \ud658\uacbd\ubcc0\uc218 \ub4f1\ub85d\uc774 \uc548\ub418\ub294 \uacbd\uc6b0\uac00 \uc788\ub294\ub370 \uadf8\ub7f4 \ub54c\uc5d0\ub294 `Key Vault` \ub97c \ud65c\uc6a9\ud55c\ub2e4.\\n\ucfe0\ubc84\ub124\ud2f0\uc2a4\uc758 secret \uacfc \ube44\uc2b7\ud55c \uae30\ub2a5\uc73c\ub85c \ubbfc\uac10\ud55c \uc815\ubcf4\ub97c \uc554\ud638\ud654\ud574 \uc800\uc7a5\ud55c \ud6c4 \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc5d0\uc11c\ub294 \ubcf5\ud638\ud654\ud55c \uac12\uc744 \uc0ac\uc6a9\ud558\uac8c \ub41c\ub2e4.\\n\\n![key-vault](key-vault.png)\\n\\n\uac12\uc744 \ucd94\uac00\ud55c \ud6c4 \ud658\uacbd\ubcc0\uc218 \uba54\ub274\uc5d0\uc11c \ud574\ub2f9 key \ub97c \uc0ac\uc6a9\ud558\ub3c4\ub85d \uc124\uc815\ud574\uc57c\ud55c\ub2e4.\\n\\n![add-key-vault](add-key-valut.png)\\n\\nPorts \ud56d\ubaa9\uc5d0\uc11c \ub0b4\ubd80 \ud3ec\ud2b8\ub294 8080 Type \uc740 HTTPS \ub85c \uc124\uc815\ud558\ub3c4\ub85d \ud55c\ub2e4.\\n\uc774\ub7ec\uba74 \uc678\ubd80\uc5d0\uc11c https \uc811\uc18d\ud560 \uc218 \uc788\ub294 url \uc744 \uc5bb\uc744 \uc218 \uc788\uace0 http -> https \ub9ac\ub514\ub809\ud2b8 \uc124\uc815\uae4c\uc9c0 \uc790\ub3d9\uc73c\ub85c \uc774\ub8e8\uc5b4\uc9c4\ub2e4.\\n\\n![web-port](web-port.png)\\n\\n`Create Service` \ubc84\ud2bc\uc744 \ub204\ub974\uba74 \ubaa8\ub4e0 \uc124\uc815\uc774 \uc644\ub8cc\ub41c\ub2e4.\\n\uc774\ud6c4 \uc0dd\uc131\ub41c url \uc744 \ud1b5\ud574 \uc11c\ubc84\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud558\ub294\uc9c0 \ud655\uc778\ud574\ubcf8\ub2e4.\\n\\n## \ub9c8\ubb34\ub9ac\\n\\n\uc9c0\uae08\uae4c\uc9c0 Mogenious \ub97c \uc0ac\uc6a9\ud55c \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec\ub97c \uc0b4\ud3b4\ubcf4\uc558\ub2e4.\\n\uc544\uc9c1 \uc11c\ube44\uc2a4\uac00 \uc0dd\uae34\uc9c0 \uc5bc\ub9c8 \uc9c0\ub098\uc9c0 \uc54a\uc544 \uc11c\ube44\uc2a4\uac00 \uc9c0\uc18d\uc801\uc73c\ub85c \uc720\uc9c0\ub420\uc9c0 \uc5ec\ubd80\ub294 \ubd88\ud22c\uba85\ud558\uc9c0\ub9cc \uadf8 \uc804\uae4c\uc9c0\ub294 \uc720\uc6a9\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc744\uac70\uac19\ub2e4.\\n\uc544\uc9c1 \ubb38\uc11c\uac00 \ubd80\uc871\ud55c \ud3b8\uc774\uc9c0\ub9cc \uc124\uc815 \uc790\uccb4\uac00 \uac04\ub2e8\ud55c \ud3b8\uc774\ub77c \ud070 \uc5b4\ub824\uc6c0 \uc5c6\uc774 \uc9c4\ud589\ud560 \uc218 \uc788\uc744\uac70\ub77c \uc0dd\uac01\ud55c\ub2e4.\\n\ucd94\uac00\ub85c \ube44\uc2b7\ud55c \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\ub294 [Render](https://render.com) \ub77c\ub294 \uc11c\ube44\uc2a4\ub3c4 \uc788\ub294\ub370 \ucd94\ud6c4\uc5d0 \uc0b4\ud3b4\ubcf4\ub3c4\ub85d \ud558\uaca0\ub2e4."},{"id":"2022/08/27/Fly.io\ub97c-\ud65c\uc6a9\ud55c-\ub3c4\ucee4-\ucee8\ud14c\uc774\ub108-\ubc30\ud3ec","metadata":{"permalink":"/2022/08/27/Fly.io\ub97c-\ud65c\uc6a9\ud55c-\ub3c4\ucee4-\ucee8\ud14c\uc774\ub108-\ubc30\ud3ec","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-08-27-fly-io/index.mdx","source":"@site/blog/2022-08-27-fly-io/index.mdx","title":"Fly.io\ub97c \ud65c\uc6a9\ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec","description":"\ud638\uc2a4\ud305 \uc11c\ubc84\ub85c \uc774\uc6a9\uc911\uc778 Heroku \uac00 11\uc6d4 \uc774\ud6c4\ub85c \ub354 \uc774\uc0c1 \ubb34\ub8cc\ud50c\ub79c\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc544 \uc774\uc804\ubd80\ud130 \ub208\uc5ec\uaca8\ubcf8 Fly.io \ub85c \uc774\uc804\ud55c \uacfc\uc815\uc744 \ub2f4\uace0\uc788\ub2e4.","date":"2022-08-27T00:00:00.000Z","formattedDate":"2022\ub144 8\uc6d4 27\uc77c","tags":[{"label":"fly.io","permalink":"/tags/fly-io"},{"label":"nest.js","permalink":"/tags/nest-js"},{"label":"ci/cd","permalink":"/tags/ci-cd"},{"label":"docker","permalink":"/tags/docker"}],"readingTime":10.22,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Fly.io\ub97c \ud65c\uc6a9\ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec","slug":"2022/08/27/Fly.io\ub97c-\ud65c\uc6a9\ud55c-\ub3c4\ucee4-\ucee8\ud14c\uc774\ub108-\ubc30\ud3ec","authors":"jake","tags":["fly.io","nest.js","ci/cd","docker"]},"prevItem":{"title":"Mogenius\ub97c \ud65c\uc6a9\ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec","permalink":"/2022/09/09/Mogenius\ub97c-\ud65c\uc6a9\ud55c-\ub3c4\ucee4-\ucee8\ud14c\uc774\ub108-\ubc30\ud3ec"},"nextItem":{"title":"[Spring Data MongoDB] Atlas Search \ub97c \uc704\ud55c \ucee4\uc2a4\ud140 Kotlin DSL \ub9cc\ub4e4\uae30","permalink":"/2022/07/03/[Spring-Data-MongoDB]-Atlas-Search\ub97c-\uc704\ud55c-\ucee4\uc2a4\ud140-Kotlin-DSL-\ub9cc\ub4e4\uae30"}},"content":"\ud638\uc2a4\ud305 \uc11c\ubc84\ub85c \uc774\uc6a9\uc911\uc778 Heroku \uac00 11\uc6d4 \uc774\ud6c4\ub85c \ub354 \uc774\uc0c1 \ubb34\ub8cc\ud50c\ub79c\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc544 \uc774\uc804\ubd80\ud130 \ub208\uc5ec\uaca8\ubcf8 `Fly.io` \ub85c \uc774\uc804\ud55c \uacfc\uc815\uc744 \ub2f4\uace0\uc788\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## Fly.io\\n\\n[Fly.io](https://fly.io)\ub294 \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108\ub97c \uc27d\uac8c \ubc30\ud3ec\ud560 \uc218 \uc788\ub294 \ud50c\ub7ab\ud3fc\uc774\ub2e4.\\n\uae30\ubcf8\uc801\uc778 \ub3c4\ucee4 \uc9c0\uc2dd\uc774 \uc788\ub2e4\uba74 \uc27d\uac8c \uc11c\ubc84\ub97c \ubc30\ud3ec\ud560 \uc218 \uc788\ub2e4.\\n`Trial Plan` \uc774 \uc788\uc5b4 \ud68c\uc6d0\uac00\uc785\ub9cc \ud574\ub3c4 \uc11c\ubc84\uc2a4\ub97c \ubb34\ub8cc\ub85c \uc774\uc6a9\ud560 \uc218 \uc788\uc73c\uba70 \uacb0\uc81c\uc815\ubcf4\ub97c \ucd94\uac00\ud558\uba74 `Free Plan` \uc73c\ub85c \ubcc0\uacbd\ub418\uba70 \uc870\uae08 \ub354 \ub9ce\uc740 \uc0ac\uc6a9\ub7c9\uc744 \uc5bb\uc744 \uc218 \uc788\ub2e4.\\n\ub450 \ud50c\ub79c\uc758 \ucc28\uc774\uc810\uc740 \uc544\ub798 \uc0ac\uc9c4\uc744 \ucc38\uc870\ud55c\ub2e4.\\n\\n![pricing](pricing.png)\\n\\n:::info\\n\ucd94\ud6c4\uc5d0 \ub2ec\ub77c\uc9c8 \uc218 \uc788\ub294 \ub0b4\uc6a9\uc774\ub77c \uacf5\uc2dd \uc0ac\uc774\ud2b8\uc5d0\uc11c \uc9c1\uc811 \ud655\uc778\ud558\ub294 \uac83\uc744 \uad8c\uc7a5\ud55c\ub2e4.\\n:::\\n\\n## flyctl \uc124\uce58\\n\\n\ubc30\ud3ec \uacfc\uc815\uc740 \ub300\ubd80\ubd84 `flyctl` \ub85c \ubd88\ub9ac\ub294 cli \ub3c4\uad6c\ub97c \ud65c\uc6a9\ud574 \ud130\ubbf8\ub110 \ud658\uacbd\uc5d0\uc11c \uc9c4\ud589\ub41c\ub2e4.\\nMac \uc5d0\uc11c\ub294 homebrew \uac00 \uc124\uce58\ub41c \ud658\uacbd\uc774\ub77c\uba74 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \uc124\uce58\ud560 \uc218 \uc788\ub2e4.\\n\\n```shell\\nbrew install flyctl\\n```\\n\\n\uc5c6\ub294 \uacbd\uc6b0\ub77c\uba74 \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \ud65c\uc6a9\ud55c\ub2e4.\\n\\n```shell\\ncurl -L https://fly.io/install.sh | sh\\n```\\n\\nWindows \ub77c\uba74 PowerShell \uc5d0\uc11c \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \ud65c\uc6a9\ud55c\ub2e4.\\n\\n```powershell\\niwr https://fly.io/install.ps1 -useb | iex\\n```\\n\\n## \ud68c\uc6d0\uac00\uc785 & \ub85c\uadf8\uc778\\n\\n\uc11c\ube44\uc2a4\ub97c \uc774\uc6a9\ud558\uae30 \uc704\ud574\uc11c \ud68c\uc6d0\uac00\uc785\uc774 \ud544\uc694\ud558\uba70 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud558\uba74 \uc790\ub3d9\uc73c\ub85c \ube0c\ub77c\uc6b0\uc800\uac00 \uc5f4\ub9ac\uba74\uc11c \ud68c\uc6d0\uac00\uc785\uc744 \uc9c4\ud589 \ud560 \uc218 \uc788\ub2e4.\\n\\n> \ub9cc\uc57d \uc774\ubbf8 \ud68c\uc6d0\uac00\uc785\uc744 \ud588\ub2e4\uba74 \ub85c\uadf8\uc778 \uacfc\uc815\uc744 \uc9c4\ud589\ud558\ub3c4\ub85d \ud55c\ub2e4.\\n\\n```shell\\nflyctl auth login\\n```\\n\\nGithub \uacc4\uc815\uc744 \ud65c\uc6a9\ud558\uac70\ub098 \uc774\uba54\uc77c \uc8fc\uc18c\ub97c \uc785\ub825\ud574 \ud68c\uc6d0\uac00\uc785\uc744 \uc9c4\ud589\ud558\uba70 \ub2e4\uc74c \uacfc\uc815\uc5d0\uc11c \uacb0\uc81c\uc815\ubcf4\ub97c \uc785\ub825\ud558\uac70\ub098 \uc2a4\ud0b5\ud55c\ub2e4.\\n\\n![login](login.png)\\n\\n## \uc124\uc815 \ud30c\uc77c \uc0dd\uc131\\n\\n\ubc30\ud3ec\ub97c \uc6d0\ud558\ub294 \uc11c\ubc84\uc758 \ucf54\ub4dc\uac00 \uc788\ub294 \uc800\uc7a5\uc18c \uc704\uce58\ub85c \uc774\ub3d9\ud574 \ub2e4\uc74c \uacfc\uc815\uc744 \uc9c4\ud589\ud55c\ub2e4.\\n\ubc30\ud3ec\uc5d0 \ub300\ud55c \uc124\uc815\uc740 `fly.toml` \ud30c\uc77c\uc744 \ud1b5\ud574 \uc774\ub8e8\uc5b4\uc9c0\uba70 \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \ud65c\uc6a9\ud574 \ud574\ub2f9 \ud30c\uc77c\uc744 \uc27d\uac8c \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4.\\n\\n```shell\\nflyctl launch\\n```\\n\\n\ud574\ub2f9 \uba85\ub839\uc5b4\ub294 \ud604\uc7ac \ub514\ub809\ud1a0\ub9ac\uc758 \ucf54\ub4dc\ub97c \ubd84\uc11d\ud574\uc11c \uc5b4\ub5a4 \ube4c\ub4dc\ub3c4\uad6c\ub97c \ud65c\uc6a9\ud560\uc9c0 \ud310\ub2e8\ud574 \uc124\uc815\ud30c\uc77c\uc744 \uc0dd\uc131\ud55c\ub2e4.\\n\ub530\ub77c\uc11c \uac04\ub2e8\ud55c \ucf54\ub4dc\uc778 \uacbd\uc6b0\uc5d0\ub294 \ub3c4\ucee4\uc9c0\uc2dd\uc774 \uc5c6\uc5b4\ub3c4 \ubc14\ub85c \uc11c\ubc84\ub97c \ubc30\ud3ec\ud560 \uc218 \uc788\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.\\n\\n:::info\\n\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 pnpm \uc744 \ud328\ud0a4\uc9c0 \ub9e4\ub2c8\uc800\ub85c \uc0ac\uc6a9\ud558\uace0 nest.js \ub97c \uc0ac\uc6a9\ud558\ub294 \ub2e4\uc74c \uc800\uc7a5\uc18c\ub97c \uae30\uc900\uc73c\ub85c \uc124\uba85\ud55c\ub2e4.\\nhttps://github.com/bae-no/bae-no-server\\n:::\\n\\n![flyctl-launch](flyctl-launch.png)\\n\\n\uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud558\uba74 \uc5ec\ub7ec \uc120\ud0dd\uc9c0\ub97c \ubb3c\uc5b4\ubcf4\uac8c \ub418\ub294\ub370 \uc0c1\ud669\uc5d0 \ub530\ub77c \uc801\uc808\ud560 \ud56d\ubaa9\uc744 \uc120\ud0dd\ud558\ub3c4\ub85d \ud55c\ub2e4.\\n\\n- App Name: \ubc30\ud3ec App \uc774\ub984, \uc6d0\ud558\ub294 \uc774\ub984\uc73c\ub85c \uc124\uc815\ud55c\ub2e4.\\n- Region: \ucee8\ud14c\uc774\ub108\uac00 \uc62c\ub77c\uac08 \uc9c0\uc5ed, \uc11c\ubc84 \uc774\uc6a9\uc790\uc5d0\uac8c \uac00\uae4c\uc6b4 \uc9c0\uc5ed\uc744 \uc120\ud0dd\ud558\ub3c4\ub85d \ud55c\ub2e4.\\n- Set up Postgresql database: postgresql \uc744 \uc11c\ubc84\ub97c fly.io \ub85c \ub9cc\ub4e4\uc5b4 \uc0ac\uc6a9\ud560 \ubaa9\uc801\uc774\ub77c\uba74 yes \ub97c \uc120\ud0dd\ud55c\ub2e4.\\n- Deploy: \ubc14\ub85c \ubc30\ud3ec\ub97c \uc9c4\ud589\ud560 \uac83\uc778\uc9c0 \uc5ec\ubd80, \uc124\uc815\ud30c\uc77c\uc744 \ud655\uc778\ud558\uae30 \uc704\ud574 No \ub97c \uc120\ud0dd\ud55c\ub2e4.\\n\\n## \uc124\uc815\ud30c\uc77c \ud655\uc778\\n\\n\uc790\ub3d9 \uc0dd\uc131\ud55c `fly.toml` \ud30c\uc77c\uc744 \uc0b4\ud3b4\ubcf4\uace0 \uc0c1\ud669\uc5d0 \ub530\ub77c \uc218\uc815\ud574\uc57c \ud55c\ub2e4.\\n\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c \uc0ac\uc6a9\ud55c \uc800\uc7a5\uc18c\uc5d0\uc11c\ub294 pnpm \uc744 \ud328\ud0a4\uc9c0 \ub9e4\ub2c8\uc800\ub85c \uc0ac\uc6a9\ud558\ub294\ub370 `heroku/buildpack` \uc774 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uae30\uc5d0 builder \ub77c\uc778\uc744 \uc0ad\uc81c\ud588\ub2e4\\n\uc774 \uacbd\uc6b0\uc5d0\ub294 \uc9c1\uc811 \uc800\uc7a5\uc18c root \uc5d0 `Dockerfile` \ub97c \uc0dd\uc131\ud574 \ube4c\ub4dc\uc124\uc815\uc744 \uc9c4\ud589\ud558\uac8c \ub41c\ub2e4.\\n\\n```toml title=\\"fly.toml\\"\\napp = \\"bae-no-server\\"\\nkill_signal = \\"SIGINT\\"\\nkill_timeout = 5\\nprocesses = []\\n\\n[build]\\n  # \ube4c\ub4dc\uc5d0 \uc0ac\uc6a9\ud560 \ub3c4\ucee4 \uc774\ubbf8\uc9c0\\n  # \ub9cc\uc57d \uc9c1\uc811 Dockfile \ub97c \ub9cc\ub4dc\ub294 \uacbd\uc6b0\ub77c\uba74 \uc544\ub798 \ub77c\uc778\uc744 \uc0ad\uc81c\ud55c\ub2e4\\n  builder = \\"heroku/buildpacks:20\\"\\n\\n[env]\\n  PORT = \\"8080\\" # \ud658\uacbd\ubcc0\uc218 \uc124\uc815\\n\\n[[services]]\\n  http_checks = []\\n  internal_port = 8080 # \uc11c\ubc84\uac00 \uc0ac\uc6a9\ud558\ub294 \ud3ec\ud2b8 \ubc88\ud638\ub85c \ubcc0\uacbd\ud574\uc900\ub2e4\\n  processes = [\\"app\\"]\\n  protocol = \\"tcp\\"\\n  script_checks = []\\n```\\n\\n:::info\\nNest.js \uc758 \uae30\ubcf8 \uc11c\ube44\uc2a4 \ud3ec\ud2b8\ub294 3000 \uc774\uc9c0\ub9cc fly.toml \uc758 internal_port \ub97c 3000 \uc73c\ub85c \ubc14\uafb8\uc9c0 \uc54a\uc558\ub2e4.\\n\uadf8 \uc774\uc720\ub294 `main.ts` \uc5d0\uc11c `process.env.PORT` \ub97c \uc0ac\uc6a9\ud574 \ud3ec\ud2b8\ubc88\ud638\ub97c \uc124\uc815\ud558\ub3c4\ub85d \ucf54\ub4dc\ub97c \uc218\uc815\ud558\uc600\uace0 `fly.toml` \uc758 env \uc124\uc815\uc5d0\uc11c PORT \ub97c 8080 \uc73c\ub85c \uc124\uc815\ud558\uc600\uae30 \ub54c\ubb38\uc774\ub2e4.\\n\\n```ts\\nawait app.listen(process.env.PORT || 3000);\\n```\\n\\n:::\\n\\n## Dockerfile \uc0dd\uc131\\n\\n\ub300\ubd80\ubd84\uc758 \uc11c\ubc84 \ucf54\ub4dc\ub294 \ubc30\ud3ec\uc804\uc5d0 \ube4c\ub4dc\uacfc\uc815\uc774 \ud544\uc694\ud55c\ub370 heroku \uc5d0\uc11c\ub294 \uc774\ub97c buildpack \uc744 \ud1b5\ud574 \uc218\ud589\ud55c\ub2e4.\\nfly.io \ub294 \uc774 \uac1c\ub150\uc744 \ucc44\ud0dd\ud574 \uc0ac\uc6a9\ud558\uae30\uc5d0 `flyctl launch` \ub97c \uc2e4\ud589\ud558\uba74 `heroku/buildpack` \uc774 builder \uc635\uc158\uc5d0 \ub4e4\uc5b4\uac00\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4.\\n\\n\ub2e4\ub9cc \ud574\ub2f9 buildpack \uc740 pnpm \uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uae30\uc5d0 \ucee4\uc2a4\ud140 buildpack \uc744 \uc0ac\uc6a9\ud558\uac70\ub098 \uc9c1\uc811 Dockerfile \uc744 \ub9cc\ub4e4\uc5b4\uc57c\ud55c\ub2e4.\\n\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 Dockerfile \uc744 \ub9cc\ub4dc\ub294 \ubc29\ubc95\uc744 \uc120\ud0dd\ud558\uc600\ub2e4.\\n\\n```dockerfile\\nFROM node:16-alpine\\n\\nRUN npm install -g pnpm\\n\\nCOPY .npmrc package.json pnpm-lock.yaml ./\\nRUN pnpm install --frozen-lockfile\\n\\nCOPY . .\\nRUN npm run build\\n\\nEXPOSE 3000\\nCMD [ \\"node\\", \\"dist/apps/app/src/main\\" ]\\n```\\n\\n\ud574\ub2f9 \ud30c\uc77c\uc744 \ubcf4\uba74 \uc9c1\uc811 `\ud328\ud0a4\uc9c0 \uc124\uce58 + \ube4c\ub4dc + \uc2e4\ud589`\uba85\ub839\uc5b4\ub97c \ub123\uc5b4\uc900 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n## secret \uc124\uc815\\n\\n\ub300\ubd80\ubd84\uc758 \uacbd\uc6b0 \uc11c\ubc84\ub97c \uc2e4\ud589\ud558\uae30 \uc704\ud55c \ud658\uacbd\ubcc0\uc218\uac00 \ud544\uc694\ud55c \uacbd\uc6b0\uac00 \uc788\ub2e4.\\n`fly.toml` \uc758 env \uc124\uc815\uc744 \ud1b5\ud574 \ud658\uacbd\ubcc0\uc218\ub97c \uc124\uc815\ud560 \uc218 \uc788\uc73c\ub098 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc811\uc18d\uc815\ubcf4 \uac19\uc740 \ubbfc\uac10\ud55c \ub0b4\uc6a9\uc744 \ub123\uc5b4 \uacf5\uac1c github \uc800\uc7a5\uc18c\uc5d0 \uc62c\ub9ac\ub294 \uac83\uc740 \uc704\ud5d8\ud558\ub2e4.\\nfly.io \uc5d0\uc11c\ub294 \uc774\ub7ec\ud55c \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud574 secret \uc744 \uc81c\uacf5\ud55c\ub2e4.\\n\\nsecret \uc740 \ub0b4\ubd80 \uac12\ub4e4\uc744 \uc554\ud638\ud654\ud574\uc11c \uc800\uc7a5\ud558\uba70 \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc5d0\uc11c\ub294 \ubcf5\ud638\ud654\ud55c \uac12\uc73c\ub85c \ucc38\uc870\ud560 \uc218 \uc788\uac8c \ub9cc\ub4e4\uc5b4\uc900\ub2e4.\\n`flyctl` \uc744 \ud1b5\ud574 secret \uc744 \uad00\ub9ac\ud560 \uc218 \uc788\uc73c\uba70 `flyctl secret set` \uc744 \ud65c\uc6a9\ud574 \uc5ec\ub7ec key, value \ub97c \uc124\uc815\ud560 \uc218 \uc788\ub2e4.\\n\\n```shell\\nflyctl secret set SECRET=VALUE SECRET2=VALUE2 ...\\n```\\n\\n\uc124\uc815\ud55c \uac12\ub4e4\uc740 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \ud655\uc778\ud560 \uc218 \uc788\uc73c\uba70 value \ubd80\ubd84\uc740 \uc554\ud638\ud654\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n```shell\\nflyctl secrets list\\n\\nNAME              \\tDIGEST                          \\tCREATED AT\\nSECRET      \\t    5q97fbe12c037e0359f7a2c43827ca27\\t13h5m  ago\\nSECRET2   \\t        34173cb3zf07f89dd2ebc2ac9128303f\\t12h59m ago\\n```\\n\\n## \ubc30\ud3ec\\n\\n\uc774\uc81c \ubaa8\ub4e0 \uc124\uc815\uc744 \ub9c8\uce58\uace0 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud574 \ubc30\ud3ec\ub97c \uc9c4\ud589\ud55c\ub2e4.\\n\\n```shell\\nflyctl deploy\\n```\\n\\n\ucd9c\ub825\ub418\ub294 \uba54\uc2dc\uc9c0\ub4e4\uc744 \uc0b4\ud3b4\ubcf4\uba74 \ub3c4\ucee4 \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud560 \ub54c \uc790\uc8fc \ubcf4\uac8c\ub418\ub294 \ub0b4\uc6a9\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\uc774\ub294 \ub3c4\ucee4\uac00 \uc124\uce58\ub41c \uc678\ubd80 \uc11c\ubc84\ub97c \ud65c\uc6a9\ud558\ub294 \uacbd\ud5d8\uc744 \uc81c\uacf5\ud574\uc900\ub2e4.\\n\uc2e4\uc81c\ub85c [fly.io \ub300\uc2dc\ubcf4\ub4dc](https://fly.io/dashboard/personal) \uc5d0 \ub4e4\uc5b4\uac00\uba74 \ube4c\ub4dc\uc6a9\ub3c4\uc758 \uc0c8\ub85c\uc6b4 app \uc774 \uc0dd\uc131\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n![dashboard](dashboard.png)\\n\\n\uc704\uc640 \uac19\uc740 \ub098\ub9cc\uc758 build app \uc744 \uac00\uc9c8 \uc218 \uc788\ub294 \uc7a5\uc810\uc740 docker layer \uce90\uc2dc\ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4\ub294 \uc810\uc774\ub2e4.\\n\uccab \ubc30\ud3ec\uc2dc\uc5d0\ub294 \uce90\uc2dc\uac00 \uc5c6\uc73c\ubbc0\ub85c Dockerfile \uc5d0 \uc9c0\uc815\ub41c \ubaa8\ub4e0 \uacfc\uc815\uc744 \uc9c4\ud589\ud574 \uc2dc\uac04\uc774 \uac78\ub9ac\uc9c0\ub9cc \uc774\ud6c4\uc5d0\ub294 \uc218\uc815\ub41c \uc2a4\ud0ed\ub9cc \uc218\ud589\ud558\uae30\uc5d0 \ubc30\ud3ec\uc2dc\uac04\uc774 \ub2e8\ucd95\ub41c\ub2e4.\\n\ubc30\ud3ec \uc774\ud6c4 \ub300\uc2dc\ubcf4\ub4dc\uc758 overview \ub97c \ud0ed\uc5d0\uc11c \uc11c\ubc84 url \uc744 \ud655\uc778\ud560 \uc218 \uc788\uc73c\uba70 \uc815\uc0c1\uc801\uc73c\ub85c \uc811\uc18d\ub418\ub294\uc9c0 \ud655\uc778\ud55c\ub2e4.\\n\\n![hostname](hostname.png)\\n\\n## Github Action \uc5f0\ub3d9\\n\\n\uc774\uc81c Gihub Action \uc744 \uc0ac\uc6a9\ud558\uc5ec `main` \ube0c\ub79c\uce58\uc5d0 \ud478\uc2dc\uac00 \ubc1c\uc0dd\ud558\uba74 \uc790\ub3d9\uc73c\ub85c fly.io \ub85c \ubc30\ud3ec\ub97c \uc9c4\ud589\ud558\ub3c4\ub85d \uc124\uc815\ud574\ubcf4\uc790.\\n\\n### API Token \ubc1c\uae09\\n\\n\ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 api token \uc744 \ubc1c\uae09\ud55c\ub2e4. (\ub85c\uadf8\uc778 \uc0c1\ud0dc\uc774\uc5b4\uc57c \ud568)\\n\\n```shell\\nflyctl auth token\\n```\\n\\n### Github Secret \uc5d0 TOKEN \ucd94\uac00\\n\\n\ubc1c\uae09\ud55c \ud1a0\ud070\uc744 \ubcf5\uc0ac\ud55c \ud6c4 Github \uc800\uc7a5\uc18c\uc758 Settings -> Secrets -> Actions -> New secret \uc744 \uc120\ud0dd\ud574 \uc0c8\ub85c\uc6b4 secret \uc744 \uc0dd\uc131\ud55c\ub2e4.\\nName \uc740 `FLY_API_TOKEN` \uc774\uba70 Value \ub294 \ubc1c\uae09\ubc1b\uc740 \ud1a0\ud070\uc744 \uc785\ub825\ud55c\ub2e4.\\n\ub9c8\uc9c0\ub9c9\uc73c\ub85c `Add secret` \uc744 \ub204\ub974\uba74 \uc644\ub8cc\ub41c\ub2e4.\\n\\n![add-token](add-token.png)\\n\\n### Github Action \uc124\uc815\\n\\n\uc774\uc81c \ub2e4\uc74c\uacfc \uac19\uc740 \uc124\uc815\ud30c\uc77c\uc744 \ub9cc\ub4e0 \ud6c4 \ud478\uc2dc\ud558\uba74 \uc55e\uc73c\ub85c main \uc5d0 \ucee4\ubc0b\uc774 \ud478\uc2dc\ub418\uba74 \ubc30\ud3ec\uac00 \uc9c4\ud589\ub41c\ub2e4.\\n\\n```yaml title=\\".github/workflows/main.yml\\"\\nname: Fly Deploy\\n\\non:\\n  push:\\n    branches:\\n      - main\\n\\nenv:\\n  FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}\\n\\njobs:\\n  deploy:\\n    name: Deploy app\\n    runs-on: ubuntu-latest\\n    steps:\\n      - uses: actions/checkout@v3\\n      - uses: superfly/flyctl-actions/setup-flyctl@master\\n      - run: flyctl deploy --remote-only\\n```\\n\\n![deploy](deploy.png)"},{"id":"2022/07/03/[Spring-Data-MongoDB]-Atlas-Search\ub97c-\uc704\ud55c-\ucee4\uc2a4\ud140-Kotlin-DSL-\ub9cc\ub4e4\uae30","metadata":{"permalink":"/2022/07/03/[Spring-Data-MongoDB]-Atlas-Search\ub97c-\uc704\ud55c-\ucee4\uc2a4\ud140-Kotlin-DSL-\ub9cc\ub4e4\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-07-03-atlas-search-kotlin-dsl/index.mdx","source":"@site/blog/2022-07-03-atlas-search-kotlin-dsl/index.mdx","title":"[Spring Data MongoDB] Atlas Search \ub97c \uc704\ud55c \ucee4\uc2a4\ud140 Kotlin DSL \ub9cc\ub4e4\uae30","description":"MongoDB Atlas Search \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uc804\ubb38 \uac80\uc0c9 \uae30\ub2a5\uc744 Spring Data MongoDB \uc73c\ub85c \uc870\ud68c\ud558\uae30 \uc704\ud55c dsl \uc744 \ub9cc\ub4dc\ub294 \uacfc\uc815\uc744 \ub2f4\uace0\uc788\ub2e4.","date":"2022-07-03T00:00:00.000Z","formattedDate":"2022\ub144 7\uc6d4 3\uc77c","tags":[{"label":"spring","permalink":"/tags/spring"},{"label":"mongodb","permalink":"/tags/mongodb"},{"label":"atlas","permalink":"/tags/atlas"},{"label":"dsl","permalink":"/tags/dsl"}],"readingTime":4.865,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"[Spring Data MongoDB] Atlas Search \ub97c \uc704\ud55c \ucee4\uc2a4\ud140 Kotlin DSL \ub9cc\ub4e4\uae30","slug":"2022/07/03/[Spring-Data-MongoDB]-Atlas-Search\ub97c-\uc704\ud55c-\ucee4\uc2a4\ud140-Kotlin-DSL-\ub9cc\ub4e4\uae30","authors":"jake","tags":["spring","mongodb","atlas","dsl"]},"prevItem":{"title":"Fly.io\ub97c \ud65c\uc6a9\ud55c \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec","permalink":"/2022/08/27/Fly.io\ub97c-\ud65c\uc6a9\ud55c-\ub3c4\ucee4-\ucee8\ud14c\uc774\ub108-\ubc30\ud3ec"},"nextItem":{"title":"Kotlin + Spring GraphQL + Spring Security \uc0ac\uc6a9\ud558\uae30","permalink":"/2022/06/06/Kotlin-Spring-GraphQL-Spring-Security-\uc0ac\uc6a9\ud558\uae30"}},"content":"[MongoDB Atlas Search](https://www.mongodb.com/ko-kr/atlas/search) \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uc804\ubb38 \uac80\uc0c9 \uae30\ub2a5\uc744 `Spring Data MongoDB` \uc73c\ub85c \uc870\ud68c\ud558\uae30 \uc704\ud55c dsl \uc744 \ub9cc\ub4dc\ub294 \uacfc\uc815\uc744 \ub2f4\uace0\uc788\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## MongoDB CLI\\n\\n\uba3c\uc800 MongoDB \ucf58\uc194\uc5d0\uc11c Atlas Search \ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud55c \ubc29\ubc95\uc744 \uc54c\uc544\ubcf4\uc790.  \\n\uacf5\uc2dd\ubb38\uc11c\ub97c \ud655\uc778\ud574\ubcf4\uba74 [$search aggregation](https://www.mongodb.com/docs/atlas/atlas-search/query-syntax/) \ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4.  \\n\uc608\ub97c\ub4e4\uba74 `movies` \ub77c\ub294 \uceec\ub809\uc158\uc5d0\uc11c \uc788\ub294 `released` \ud544\ub4dc\ub97c `keyword` \ub85c \uac80\uc0c9\ud55c \uacb0\uacfc\ub97c 10\uac1c \uac00\uc838\uc624\ub294 \uc791\uc5c5\uc740 \ub2e4\uc74c\uacfc \uac19\uc774 \uc774\ub8e8\uc5b4\uc9c4\ub2e4.\\n\\n```js\\ndb.movies.aggregate([\\n  {\\n    $search: {\\n      text: {\\n        path: \\"released\\",\\n        query: \\"keyword\\",\\n      },\\n    },\\n  },\\n  {\\n    $limit: 10,\\n  },\\n  {\\n    $project: {\\n      title: 1,\\n      released: 1,\\n    },\\n  },\\n]);\\n```\\n\\n## MongoTemplate\\n\\n\uc704 \uc791\uc5c5\uc744 Spring Data MongoDB \ub97c \ud1b5\ud574 \uc870\ud68c\ud558\ub294 \uc0c1\ud669\uc744 \uac00\uc815\ud574\ubcf4\uc790.  \\nrepository \ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 `@Query` \uc5b4\ub178\ud14c\uc774\uc158\uc744 \ud65c\uc6a9\ud558\uac70\ub098 \ubcf5\uc7a1\ud55c \ucffc\ub9ac\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 mongoTemplate \ub97c \ud65c\uc6a9\ud558\uac8c \ub41c\ub2e4.\\n\\n\ubcf5\uc7a1\ud55c \ucffc\ub9ac\ub97c \uc218\ud589\ud558\ub294 \uc0c1\ud669\uc744 \uac00\uc815\ud574 mongoTemplate \uc758 aggregate \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud574\ubcf4\uc790.  \\n\uccab \ubc88\uc9f8 \ud30c\ub77c\ubbf8\ud130\ub85c \uac01 pipeline \uc744 \ub2f4\ub294 \ud558\ub098\uc758 `Aggregation` \uc778\uc2a4\ud134\uc2a4\ud2c0 \uc81c\uacf5\ud574\uc57c \ud55c\ub2e4.  \\nSpring Data MongoDB \uc5d0\uc11c\ub294 `$limit` \uacfc `$project` \uc744 \uc704\ud55c aggregation \uc744 \uc81c\uacf5\ud558\uc9c0\ub9cc `$search` \ub294 \uadf8\ub807\uc9c0 \uc54a\uae30\uc5d0 \uc9c1\uc811 \uc0dd\uc131\ud574\uc57c \ud55c\ub2e4.\\n\\n```kt\\ndata class Movie(\\n    val title: String,\\n    val released: String,\\n)\\n\\nmongoTemplate.aggregate(\\n    Aggregation.newAggregation(\\n        // highlight-start\\n        AggregationOperation {\\n            Document(\\n                \\"\\\\$search\\",\\n                Document(\\n                    \\"text\\",\\n                    Document(\\"path\\", \\"released\\").append(\\"query\\", \\"keyword\\")\\n                )\\n            )\\n        },\\n        // highlight-end\\n        Aggregation.limit(10),\\n        Aggregation.project(\\"title\\", \\"released\\"),\\n    ),\\n    Movie::class.java,\\n    Movie::class.java,\\n)\\n```\\n\\n\ud558\uc774\ub77c\uc774\ud305 \ub41c \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uba74 Json \uc5d0 \ub9e4\uce6d\ub418\ub294 Document \uc778\uc2a4\ud134\uc2a4\ub97c \ub9cc\ub4e4\uace0 key \uc640 value \ub97c \ud615\ud0dc\uc5d0 \ub9de\uac8c \ub123\uc5b4\uc900 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4.  \\n\uc704\uc640 \uac19\uc740 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud560\ub54c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ubd88\ud3b8\ud568\uc774 \uc874\uc7ac\ud55c\ub2e4.\\n\\n- \uac00\ub3c5\uc131\\n\\njson \uad6c\uc870\ub97c \ud45c\ud604\ud558\uae30 \uc704\ud574 Document \ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\ub294\ub370 \ubcf5\uc7a1\ud55c \uad6c\uc870\ub97c \ub9cc\ub4dc\ub824\uba74 \ub9ce\uc740 Document \ud0a4\uc6cc\ub4dc\uac00 \ucf54\ub4dc\uc0c1\uc5d0 \uc874\uc7ac\ud558\uac8c \ub41c\ub2e4.  \\n\uc774\ub85c\uc778\ud574 \ucf54\ub4dc\ub97c \ud1b5\ud574 \uc5b4\ub5a4 json \uc774 \ub9cc\ub4e4\uc5b4\uc9c0\ub294\uc9c0 \ud30c\uc545\ud558\uae30 \uc5b4\ub824\uc6b8 \uc218 \uc788\ub2e4.\\n\\n- typesafe\\n\\n\uc704 \ucf54\ub4dc\uc5d0\uc11c Document \uac00 \uc0ac\uc6a9\ub41c \uacf3\uc758 key \ubd80\ubd84\ub9cc \uc0b4\ud3b4\ubcf4\uba74 `$search` \uc640 `text`, `path`, `query` \uc640 \uac19\uc740 \ubb38\uc790\uc5f4\uc774 \ubcf4\uc778\ub2e4.  \\n\uc704\uc640\uac19\uc740 \ubb38\uc790\uc5f4\uc740 \uc798\ubabb \uc785\ub825\ud574\ub3c4 \ucef4\ud30c\uc77c \uc2dc\uc810\uc5d0\ub294 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\uace0 \uc2e4\uc81c \ucffc\ub9ac\ub97c \uc218\ud589\ud560 \ub54c \ubc1c\uc0dd\ud55c\ub2e4.  \\n\ub610\ud55c \uac01 key \uc758 value \uc5b4\ub294 \uc5b4\ub5a4 \ud0c0\uc785\uc758 \uac12\uc744 \uc8fc\uc5b4\uc57c \ud558\ub294\uc9c0 \ub2e8\uc11c\ub97c \uc81c\uacf5\ud558\uc9c0 \ubabb\ud55c\ub2e4.  \\n\ub9cc\uc57d `text` \uc544\ub798\uc5d0 `query` \uac12\uc740 \ud544\uc218\ub85c \uc8fc\uc5b4\uc57c \ud558\ub294\ub370 \uc81c\uacf5\ud558\uc9c0 \uc54a\ub294\uacbd\uc6b0 \ub7f0\ud0c0\uc784 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud55c\ub2e4.\\n\\n## Kotlin DSL\\n\\nKotlin DSL \uc740 json \uacfc \uac19\uc740 \ud2b8\ub9ac\uad6c\uc870\ub97c \uac00\ub3c5\uc131 \uc788\ub294 \ucf54\ub4dc\ub85c \ud45c\ud604\ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc744 \uc81c\uacf5\ud574\uc900\ub2e4.  \\n[kotlin-html](https://github.com/kotlin/kotlinx.html) \uacfc \uac19\uc740 \ud328\ud0a4\uc9c0\ub97c \uc0b4\ud3b4\ubcf4\uba74 html \uad6c\uc870\ub97c \ucf54\ud2c0\ub9b0 \ucf54\ub4dc\ub85c \ud45c\ud604\ud55c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n```kt\\nimport kotlinx.browser.*\\nimport kotlinx.html.*\\nimport kotlinx.html.dom.*\\n\\nfun main() {\\n    document.body!!.append.div {\\n        h1 {\\n            +\\"Welcome to Kotlin/JS!\\"\\n        }\\n        p {\\n            +\\"Fancy joining this year\'s \\"\\n            a(\\"https://kotlinconf.com/\\") {\\n                +\\"KotlinConf\\"\\n            }\\n            +\\"?\\"\\n        }\\n    }\\n}\\n```\\n\\n## Custom DSL\\n\\n\uc704\uc640 \uac19\uc740 DSL \uc740 \ucf54\ud2c0\ub9b0\uc758 **\uc218\uc2e0 \uac1d\uccb4 \uc9c0\uc815 \ub78c\ub2e4**\ub97c \ud65c\uc6a9\ud574\uc11c \uc9c1\uc811 \ub9cc\ub4e4 \uc218 \uc788\ub2e4.\\n\\n:::info\\nDSL \uc5d0 \ub300\ud55c \ub0b4\uc6a9\uacfc \ub9cc\ub4dc\ub294 \ubc29\ubc95\uc5d0 \ub300\ud55c \uc774\ud574\ub294 \ub2e4\ub978 \ube14\ub85c\uadf8\ub098 \uc11c\uc801\uc744 \ucc38\uc870\ud558\ub3c4\ub85d \ud55c\ub2e4.\\n:::\\n\\n> \ub2e4\uc74c \uc800\uc7a5\uc18c\uc5d0 \ubaa8\ub4e0 \ucf54\ub4dc\uac00 \uc874\uc7ac\ud55c\ub2e4. [\ub9c1\ud06c](https://github.com/jbl428/study-note/tree/master/kotlin/spring-graphql/src/main/kotlin/com/graphql/sample/aggregation)\\n\\n\uc9c1\uc811 \ub9cc\ub4e0 DSL \uc744 \ud65c\uc6a9\ud574 \uae30\uc874 \ucf54\ub4dc\ub97c \uc544\ub798\uc640 \uac19\uc774 \ubc14\uafc0 \uc218 \uc788\ub2e4.\\n\\n```kt\\nmongoTemplate.aggregate(\\n    aggregation {\\n        search {\\n            text {\\n                path { +Movie::released }\\n                query(\\"keyword\\")\\n            }\\n        }\\n        limit(10)\\n        project {\\n            // KProperty \ub97c \ud65c\uc6a9\ud574\uc11c \ud074\ub798\uc2a4\uc758 \ud544\ub4dc\uba85\uc73c\ub85c \ucc38\uc870\ud560 \uc218 \uc788\uac8c\ud558\uc600\ub2e4.\\n            // \uc774\ub807\uac8c \ud558\uba74 \ucd94\ud6c4\uc5d0 Movie \uc758 title \ud544\ub4dc\uba85\uc744 \ubc14\uafd4\ub3c4 \uc544\ub798 \ucf54\ub4dc\ub3c4 \uac19\uc774 \ubc14\ub014\uac83\uc774\ub2e4.\\n            +Movie::title\\n            +Movie::released\\n        }\\n    },\\n    Movie::class.java,\\n    Movie::class.java,\\n)\\n```\\n\\n\uc774\uc804\ubcf4\ub2e4 \ub354 \uac00\ub3c5\uc131 \uc788\uace0 \uc548\uc804\ud55c \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uc218 \uc788\ub2e4\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4."},{"id":"2022/06/06/Kotlin-Spring-GraphQL-Spring-Security-\uc0ac\uc6a9\ud558\uae30","metadata":{"permalink":"/2022/06/06/Kotlin-Spring-GraphQL-Spring-Security-\uc0ac\uc6a9\ud558\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-06-06-spring-graphql/index.mdx","source":"@site/blog/2022-06-06-spring-graphql/index.mdx","title":"Kotlin + Spring GraphQL + Spring Security \uc0ac\uc6a9\ud558\uae30","description":"\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 Spring for GraphQL \ud504\ub85c\uc81d\ud2b8\uac00 GA \ub418\uc5b4 \uc0d8\ud50c \ud504\ub85c\uc81d\ud2b8\ub97c \ub9cc\ub4dc\ub294 \uacfc\uc815\uc744 \uae30\uc220\ud558\ub824\uace0 \ud55c\ub2e4.","date":"2022-06-06T00:00:00.000Z","formattedDate":"2022\ub144 6\uc6d4 6\uc77c","tags":[{"label":"spring","permalink":"/tags/spring"},{"label":"graphql","permalink":"/tags/graphql"},{"label":"security","permalink":"/tags/security"},{"label":"jwt","permalink":"/tags/jwt"}],"readingTime":16.69,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Kotlin + Spring GraphQL + Spring Security \uc0ac\uc6a9\ud558\uae30","slug":"2022/06/06/Kotlin-Spring-GraphQL-Spring-Security-\uc0ac\uc6a9\ud558\uae30","authors":"jake","tags":["spring","graphql","security","jwt"]},"prevItem":{"title":"[Spring Data MongoDB] Atlas Search \ub97c \uc704\ud55c \ucee4\uc2a4\ud140 Kotlin DSL \ub9cc\ub4e4\uae30","permalink":"/2022/07/03/[Spring-Data-MongoDB]-Atlas-Search\ub97c-\uc704\ud55c-\ucee4\uc2a4\ud140-Kotlin-DSL-\ub9cc\ub4e4\uae30"},"nextItem":{"title":"Github Page\ub97c GraphQL \uc2a4\ud0a4\ub9c8 \uc11c\ubc84\ub85c \ub9cc\ub4e4\uae30","permalink":"/2022/05/18/Github-Page\ub97c-GraphQL-\uc2a4\ud0a4\ub9c8-\uc11c\ubc84\ub85c-\ub9cc\ub4e4\uae30"}},"content":"\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 `Spring for GraphQL` \ud504\ub85c\uc81d\ud2b8\uac00 GA \ub418\uc5b4 \uc0d8\ud50c \ud504\ub85c\uc81d\ud2b8\ub97c \ub9cc\ub4dc\ub294 \uacfc\uc815\uc744 \uae30\uc220\ud558\ub824\uace0 \ud55c\ub2e4.\\n\ub2e4\uc74c\uacfc \uac19\uc740 \uae30\uc220\uc744 \uc0ac\uc6a9\ud574\uc11c \uad6c\ud604\ud558\uc600\ub2e4.\\n\\n- [Kotlin](https://kotlinlang.org)\\n- [Spring Boot (WebFlux)](https://spring.io/projects/spring-boot)\\n- [Spring GraphQL](https://spring.io/projects/spring-graphql)\\n- [Spring Security](https://spring.io/projects/spring-security)\\n- [Spring Data MongoDB (Reactive)](https://spring.io/projects/spring-data-mongodb)\\n- [Gradle](https://gradle.org)\\n\\n> \uc0d8\ud50c \ud504\ub85c\uc81d\ud2b8 \ucf54\ub4dc\ub294 [github](https://github.com/jbl428/study-note/tree/master/kotlin/spring-graphql) \uc5d0\uc11c \ubcfc \uc218 \uc788\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \ucd08\uae30 \ud504\ub85c\uc81d\ud2b8 \uc138\ud305\\n\\n[Spring Initializr](https://start.spring.io) \uc5d0 \uc811\uc18d\ud574\uc11c \ucd08\uae30 \uc2a4\ud504\ub9c1 \ud504\ub85c\uc81d\ud2b8 \uc138\ud305\uc744 \uc2dc\uc791\ud55c\ub2e4.\\n`Gradle Project` \ub97c \uc120\ud0dd\ud558\uace0 Language \ub294 `Kotlin` \uc744 \uc120\ud0dd\ud55c\ub2e4.\\n\uc758\uc874\uc131\uc740 \uc544\ub798 \ud654\uba74\uc5d0 \ubcf4\uc774\ub294 \uac83\uc744 \uc120\ud0dd\ud558\uba74 \ub41c\ub2e4.\\n\\n![spring-initializr](spring-initializr.png)\\n\\n## MongoDB \uc124\uc815\\n\\n\ubcf4\ud1b5 \uc2a4\ud504\ub9c1 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c [Spring Data JPA](https://spring.io/projects/spring-data-jpa) \ub97c \ud65c\uc6a9\ud558\ub294 \uc608\uc81c\uac00 \ub9ce\ub2e4.\\n\ud558\uc9c0\ub9cc \ucf54\ud2c0\ub9b0\uc5d0\uc11c\ub294 \uc5d4\ud2f0\ud2f0 \uc120\uc5b8\uc2dc `data class` \ub97c \uc0ac\uc6a9\ud558\uc9c0 \ubabb\ud558\uace0 \ud544\ub4dc\ub97c `var` \ub85c \uc120\uc5b8\ud574\uc57c \ud558\ub294 \ub4f1 \uc5ec\ub7ec \ubb38\uc81c\uac00 \uc788\ub2e4.\\n\uadf8\ub798\uc11c \uc774\ubc88\uc5d0\ub294 \ucf54\ud2c0\ub9b0\uc744 \uc798 \uc9c0\uc6d0\ud558\ub294 `Spring Data MongoDB` \ub97c \uc0ac\uc6a9\ud558\uba70 reactive \uae30\ubc18\uc758 \ud504\ub85c\uc81d\ud2b8\ub97c \ub9cc\ub4e4\uc5b4\ubcf4\ub824\uace0 \ud55c\ub2e4.\\n\\n\uba3c\uc800 docker-compose.yml \ud30c\uc77c\uc744 \uc0dd\uc131\ud574 \uc544\ub798\uc640 \uac19\uc740 \ub0b4\uc6a9\uc744 \ub123\uc5b4\uc900\ub2e4.\\n\\n```yaml title=\\"docker-compose.yml\\"\\nservices:\\n  mongo:\\n    image: mongo:5.0.6\\n    restart: always\\n    ports:\\n      - \\"27017:27017\\"\\n    environment:\\n      MONGO_INITDB_DATABASE: test\\n      MONGO_INITDB_ROOT_USERNAME: test\\n      MONGO_INITDB_ROOT_PASSWORD: test\\n```\\n\\n\uc774\uc81c `docker-compose up` \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud558\uba74 27017 \ud3ec\ud2b8\uc5d0 MongoDB \uc11c\ubc84\uac00 \uc2e4\ud589\ub41c\ub2e4.\\n\ud504\ub85c\uc81d\ud2b8 \ud658\uacbd\ubcc0\uc218 \ud30c\uc77c\uc744 \ud1b5\ud574 \ub514\ube44 \uc811\uc18d\uc815\ubcf4\ub97c \ub123\uc5b4\uc900\ub2e4.\\n\\n```yaml title=\\"src/main/resources/application.yml\\"\\nspring:\\n  data:\\n    mongodb:\\n      host: localhost\\n      port: 27017\\n      database: test\\n      username: test\\n      password: test\\n      authentication-database: admin\\n```\\n\\n\ud14c\uc2a4\ud2b8 \ucf54\ub4dc\uc5d0\uc11c\ub294 \uc2e4\uc81c \ud574\ub2f9 \uc11c\ubc84\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 `Embedded MongoDB` \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\uc544\ub798\uc640 \uac19\uc774 version \uc5d0 \uc6d0\ud558\ub294 \ubc84\uc804\uc744 \ub123\uc5b4\uc8fc\uba74 \ud574\ub2f9\ubc84\uc804\uc73c\ub85c \ub3d9\uc791\ud558\ub294 \ub0b4\uc7a5 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud55c\ub2e4.\\n\\n:::info\\n\uc704\uc640 \uac19\uc740 \ub0b4\uc7a5 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub85c \ud558\ub294 \ud14c\uc2a4\ud2b8\uac00 \uc2e4\uc81c \uc11c\ubc84\uc5d0\uc11c \ud558\ub294 \ud14c\uc2a4\ud2b8\ub97c \uc644\uc804\ud788 \ub300\uccb4\ud560 \uc218 \uc5c6\ub2e4.\\nEmbedded \uc5d0\uc11c \ud2b9\uc815 \uae30\ub2a5\uc774 \uc81c\ub300\ub85c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0\ub098 \ub354 \uc5c4\uaca9\ud55c \ud14c\uc2a4\ud2b8\ub97c \uc6d0\ud55c\ub2e4\uba74 \uc2e4\uc81c \ub514\ube44\uc11c\ubc84\ub85c \ud14c\uc2a4\ud2b8 \ud574\uc57c\ud55c\ub2e4.\\n:::\\n\\n```yaml title=\\"src/test/resources/application.yml\\"\\nspring:\\n  mongodb:\\n    embedded:\\n      version: \\"5.0.6\\"\\n```\\n\\n## Repository\\n\\n\ub2e8\uc21c\ud55c \uc608\uc81c\ub97c \uc704\ud574 `Book` document \ub97c \uc758\ubbf8\ud558\ub294 \ud074\ub798\uc2a4\ub97c \uc0dd\uc131\ud55c\ub2e4.\\nJPA \uc640 \ub2ec\ub9ac `data class` \ub85c \uc120\uc5b8\ud560 \uc218 \uc788\uc73c\uba70 \ud544\uc694\ud55c annotation \uac1c\uc218\ub3c4 \uc801\ub2e4.\\n\\n```kt title=\\"Book.kt\\"\\ndata class Book(\\n    val title: String,\\n    val author: String,\\n    val isbn: String,\\n    val publishers: List<Publisher> = emptyList(),\\n    val info: Info? = null\\n) {\\n    // \uc774 \ud544\ub4dc\ub294 _id \ub97c \uc758\ubbf8\ud558\uba70 insert \uc2dc \uc790\ub3d9 \ud560\ub2f9\ub418\ubbc0\ub85c lateinit \uc73c\ub85c \uc120\uc5b8\ud588\ub2e4\\n    @Id\\n    lateinit var id: String\\n}\\n\\ndata class Publisher(\\n    val name: String,\\n    val email: String,\\n)\\n\\ndata class Info(\\n    val preface: String,\\n)\\n```\\n\\n\uae30\ubcf8\uc801\uc778 CRUD \ub97c \ub2f4\ub2f9\ud560 repository \ub97c \uc0dd\uc131\ud55c\ub2e4.\\n\\n```kt title=\\"BookRepository.kt\\"\\nimport org.springframework.data.mongodb.repository.ReactiveMongoRepository\\n\\ninterface BookRepository : ReactiveMongoRepository<Book, String>\\n```\\n\\n## Service\\n\\n\uc774\ubc88 \uc608\uc81c\uc5d0\uc11c\ub294 `Book` \ub97c \uc0dd\uc131\ud558\uace0 \uc870\ud68c\ud558\ub294 \ub85c\uc9c1\ub9cc \uad6c\ud604\ud558\ub824\uace0 \ud55c\ub2e4.\\n`BookService` \ub294 `BookRepository` \ub97c \uc774\uc6a9\ud558\uc5ec `Book` \ub97c \uc0dd\uc131\ud558\uace0 \uc870\ud68c\ud55c\ub2e4.\\nKotlin \uc758 suspend \ud568\uc218\uc640 `kotlinx-coroutines-reactor` \ud328\ud0a4\uc9c0\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ud655\uc7a5\ud568\uc218\ub97c \ud65c\uc6a9\ud558\uba74 \uae30\uc874 reactive \uae30\ubc18\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 `Mono`, `Flux` \uc0ac\uc6a9\uc744 \ub300\uccb4\ud560 \uc218 \uc788\ub2e4.\\n\\n```kt title=\\"BookService.kt\\"\\n@Service\\nclass BookService(private val bookRepository: BookRepository) {\\n\\n    // java \ub97c \uc0ac\uc6a9\ud588\ub2e4\uba74 \uc774 \uba54\uc18c\ub4dc\ub294 Flux<Book> \uc744 \ubc18\ud658\ud560 \uac83\uc774\ub2e4\\n    suspend fun find(): List<Book> =\\n        bookRepository\\n            .findAll()     // reactive \uae30\ubc18\uc5d0\uc11c\ub294 Flux \ub97c \ubc18\ud658\ud55c\ub2e4\\n            .collectList() // Flux \ub97c Mono \ub85c \ub9cc\ub4e4\uc5b4\uc8fc\ub294 \uba54\uc18c\ub4dc\\n            .awaitSingle() // \uc774 \ud655\uc7a5\ud568\uc218 \ub355\ubd84\uc5d0 \ubc18\ud658\uac12\uc740 List<Book> \uc774 \ub420 \uc218 \uc788\ub2e4\\n\\n    // Book \uc744 \uc0dd\uc131\ud558\uace0 \ubc18\ud658\ud55c\ub2e4 id \ud544\ub4dc\ub294 \uc790\ub3d9\uc73c\ub85c \uc124\uc815\ub41c\ub2e4\\n    suspend fun create(input: CreateBookInput): Book =\\n        Book(\\n            title = input.title,\\n            author = input.author,\\n            isbn = input.isbn,\\n        ).run {\\n            bookRepository.save(this)\\n        }.awaitSingle()\\n}\\n```\\n\\n\uc704 \uc11c\ube44\uc2a4 \ub85c\uc9c1\uc744 `Embedded MongoDb` \ub97c \ud65c\uc6a9\ud574 \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc791\uc131\ud574\ubcf4\uc790.\\n\ud14c\uc2a4\ud2b8 \ud504\ub808\uc784\uc6cc\ud06c\ub294 `Junit` \ub300\uc2e0 \ucf54\ud2c0\ub9b0 dsl \uc744 \ud65c\uc6a9\ud558\ub294 `kotest` \ub97c \uc0ac\uc6a9\ud588\ub2e4.\\njunit \uc5d0\uc11c\ub294 suspend \ud568\uc218\ub97c \ud14c\uc2a4\ud2b8\ud558\ub824\uba74 `runBlocking` \ud568\uc218\ub97c \uc0ac\uc6a9\ud574\uc57c \ud558\ub294 \ub4f1 \ubc88\uac70\ub85c\uc6b4 \uc791\uc5c5\uc774 \ud544\uc694\ud55c\uc9c0\ub9cc kotest \ub294 test scope \uc790\uccb4\uac00 suspend \ud568\uc218\ub97c \uc9c0\uc6d0\ud558\uae30\uc5d0 \ub354 \uac04\uacb0\ud55c \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uc218 \uc788\ub2e4.\\n\\n\uba3c\uc800 \ub2e4\uc74c \ud328\ud0a4\uc9c0\ub97c \uc124\uce58\ud574\uc57c \ud55c\ub2e4.\\n\\n```kts title=\\"build.gradle.kts\\"\\ndependencies {\\n    testImplementation(\\"io.kotest:kotest-runner-junit5:5.3.0\\")\\n    testImplementation(\\"io.kotest.extensions:kotest-extensions-spring:1.1.1\\")\\n}\\n```\\n\\n\ub2e4\uc74c\uc740 kotest \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uc5ec\ub7ec spec \uc911 `FreeSpec` \uc744 \ud65c\uc6a9\ud55c \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\uc774\ub2e4.\\n\\n```kt title=\\"BookServiceTest.kt\\"\\n@DataMongoTest\\ninternal class BookServiceTest(\\n    private val bookRepository: BookRepository,\\n) : FreeSpec({\\n    val bookService = BookService(bookRepository)\\n\\n    beforeSpec {\\n        // \uac01 \ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4\uac04\uc758 \ub3c5\ub9bd\uc131\uc744 \uc704\ud574 book \uceec\ub809\uc158\uc758 \ub370\uc774\ud130\ub97c \ubaa8\ub450 \uc0ad\uc81c\ud55c\ub2e4\\n        // block \uc744 \uc0ac\uc6a9\ud574 \uc0ad\uc81c \uc791\uc5c5\uc774 \ub05d\ub0a0\ub54c\uae4c\uc9c0 \uae30\ub2e4\ub9b0\ub2e4\\n        // \ub9cc\uc57d awaitSingle \uc744 \uc0ac\uc6a9\ud558\uba74 \uc544\uc9c1 \uc0ad\uc81c\uac00 \uc644\ub8cc\ub418\uc9c0 \uc54a\uc558\ub294\ub370\ub3c4 \ud14c\uc2a4\ud2b8\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\uc73c\ubbc0\ub85c \uc8fc\uc758\\n        bookRepository.deleteAll().block()\\n    }\\n\\n    \\"find\\" {\\n        // given\\n        val book = Book(\\n            title = \\"The Lord of the Rings\\",\\n            author = \\"J.R.R. Tolkien\\",\\n            isbn = \\"0-395-07477-1\\",\\n        )\\n        // awaitSingle \ud655\uc7a5\ud568\uc218\ub294 suspend \ud568\uc218\uc5d0\uc11c\ub9cc \ud638\ucd9c\ud560 \uc218 \uc788\ub2e4\\n        bookRepository.save(book).awaitSingle()\\n\\n        // when\\n        val foundBook = bookService.find()\\n\\n        // then\\n        foundBook shouldBe listOf(book)\\n    }\\n\\n    \\"create\\" {\\n        // given\\n        val input = CreateBookInput(\\n            title = \\"The Lord of the Rings\\",\\n            author = \\"J.R.R. Tolkien\\",\\n            isbn = \\"0-395-07477-1\\",\\n        )\\n\\n        // when\\n        val result = bookService.create(input)\\n\\n        // then\\n        assertSoftly(result) {\\n            title shouldBe input.title\\n            author shouldBe input.author\\n            isbn shouldBe input.isbn\\n        }\\n    }\\n})\\n```\\n\\n## Controller\\n\\n\uc774\uc81c GraphQL \uacfc \uc5f0\uad00\ub41c \uc791\uc5c5\uc744 \uc218\ud589\ud558\ub294 \ucee8\ud2b8\ub864\ub7ec\ub97c \uc791\uc131\ud574\ubcf4\uc790.\\n\\n### \uad6c\ud604 \ubc29\ubc95\\n\\n\uadf8\uc804\uc5d0 \uc6a9\uc5b4\uc5d0 \ub300\ud55c \uc124\uba85\uc744 \ud558\ub824\uace0\ud55c\ub2e4.\\n\\nGraphQL api \ub97c \uac1c\ubc1c\ud560 \ub54c \ub2e4\uc74c \ub450 \ubc29\uc2dd\uc911 \ud558\ub098\ub97c \uc120\ud0dd\ud558\uac8c \ub41c\ub2e4.\\n\\n- code first\\n- schema first\\n\\ncode first \ub294 \uc774\ub984 \uadf8\ub300\ub85c \ucf54\ub4dc\ub97c \uba3c\uc800 \uc791\uc131\ud558\uace0 GraphQL \uc2a4\ud0a4\ub9c8\ub97c \uc790\ub3d9 \uc0dd\uc131\ud558\ub294 \ubc29\ubc95\uc774\ub2e4.\\n\ubc18\ub300\ub85c schema first \ub294 GraphQL \uc2a4\ud0a4\ub9c8\ub97c \uba3c\uc800 \uc791\uc131\ud558\uace0 \ucf54\ub4dc\ub97c \uc790\ub3d9 \uc0dd\uc131\ud558\uac70\ub098 \uc9c1\uc811 \uad6c\ud604\ud558\ub294 \ubc29\ubc95\uc774\ub2e4.\\n\\ncode first \ubc29\uc2dd\uc740 \uc2e4\uc81c \ucf54\ub4dc\uc640 \uc2a4\ud0a4\ub9c8\uac00 \ud56d\uc0c1 \uc77c\uce58\ud558\ub294 \uac83\uc744 \ubcf4\uc7a5\ud558\uc9c0\ub9cc FE \uc5d0\uc11c \ud544\uc694\ud55c \uc2a4\ud0a4\ub9c8\ub97c \uc704\ud574\uc11c \ubc31\uc5d4\ub4dc \uc791\uc5c5\uc744 \uae30\ub2e4\ub824\uc57c \ud55c\ub2e4.\\nschema first \ubc29\uc2dd\uc740 \ubc18\ub300\ub85c \uc2a4\ud0a4\ub9c8\ub97c \uba3c\uc800 \ub9cc\ub4e4\uae30\uc5d0 FE, BE \ub3d9\uc2dc \uac1c\ubc1c\uc774 \uac00\ub2a5\ud558\uc9c0\ub9cc \uc2a4\ud0a4\ub9c8\uc640 \uc2e4\uc81c\ucf54\ub4dc\uac04\uc758 \ubd88\uc77c\uce58\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub3c4\ub85d \uc8fc\uc758\ud574\uc57c \ud55c\ub2e4.\\n\\n> \uae00 \uc791\uc131\uc77c \uae30\uc900 Spring GraphQL \uc740 schema first \ubc29\uc2dd\ub9cc \uc9c0\uc6d0\ud55c\ub2e4.\\n\\n### \uc2a4\ud0a4\ub9c8 \uc791\uc131\\n\\n`src/main/resources/graphql` \uacbd\ub85c\uc5d0 `graphqls` \ub098 `gqls` \ud655\uc7a5\uc790\ub97c \uac00\uc9c4 \ud30c\uc77c\uc744 \uc0dd\uc131\ud558\uba74 \uc2a4\ud504\ub9c1\uc774 \ud574\ub2f9 \uc2a4\ud0a4\ub9c8\ub97c \uc77d\ub294\ub2e4.\\n\uc774\ubc88\uc5d0\ub294 \uac04\ub2e8\ud55c \uc608\uc81c\ub85c \ucc45\uc744 \uc0dd\uc131\ud558\uace0 \ubaa9\ub85d\uc744 \uc870\ud68c\ud558\ub294 api \ub97c \uad6c\ud604\ud55c\ub2e4\uace0 \uac00\uc815\ud558\uc790.\\n\\n```graphql title=\\"schema.graphqls\\"\\ntype Query {\\n  books: [Book!]!\\n}\\n\\ntype Mutation {\\n  createBook(input: CreateBookInput!): Book!\\n}\\n\\ninput CreateBookInput {\\n  title: String!\\n  author: String!\\n  isbn: String!\\n}\\n\\ntype Book {\\n  id: ID!\\n  title: String!\\n  author: String!\\n  isbn: String!\\n}\\n```\\n\\n### \ucee8\ud2b8\ub864\ub7ec \uc791\uc131\\n\\n\uc774\uc81c \uc704 \uc2a4\ud0a4\ub9c8\uc5d0 \ub300\uc751\ud558\ub294 \ucee8\ud2b8\ub864\ub7ec \ucf54\ub4dc\ub97c \uc791\uc131\ud574\ubcf4\uc790.\\n\uc6b0\uc120 REST API \uc640 \ub3d9\uc77c\ud558\uac8c `@Controller` \ub97c \uc0ac\uc6a9\ud574 \ucee8\ud2b8\ub864\ub7ec\ub97c \uc815\uc758\ud55c\ub2e4.\\nREST API \uc640 \ub2e4\ub978\uc810\uc740 `@GetMapping` \uacfc \uac19\uc740 \uc5b4\ub178\ud14c\uc774\uc158 \ub300\uc2e0 `@QueryMapping` \uacfc `@MutationMapping` \ub97c \uc0ac\uc6a9\ud55c\ub2e4.\\n\uac01\uac01 \uc774\ub984 \uadf8\ub300\ub85c Query \uc640 Mutation \uc744 \uc704\ud55c \uac83\uc774\uba70 \uba54\uc18c\ub4dc\uba85\uc774 GraphQL \ud544\ub4dc\uba85\uc774 \ub41c\ub2e4.\\n\uba54\uc18c\ub4dc\uc758 \ubc18\ud658\uac12\uc740 \uc694\uccad\uc758 \uc751\ub2f5\uc73c\ub85c \ub9e4\ud551\ub41c\ub2e4.\\n\\nGraphQL input \uac1d\uccb4\ub294 `@Argument` \uc5b4\ub178\ud14c\uc774\uc158\uc744 \uc0ac\uc6a9\ud574 \uc815\uc758\ud55c\ub2e4.\\n\uac1d\uccb4\uc758 \ud0c0\uc785\uc774 `CreateBookInput` \uc774\uba70 \uc2a4\ud0a4\ub9c8\uc5d0 \uc815\uc758\ud55c input \uba85\uacfc \uc77c\uce58\ud558\uc9c0\ub9cc \uaf2d \uc77c\uce58\ud560 \ud544\uc694\ub294 \uc5c6\ub2e4.\\n\ub2e4\ub9cc \uac1d\uccb4\uc758 \ud504\ub85c\ud37c\ud2f0\uba85\uacfc \ud0c0\uc785\uc774 input \uc5d0 \uc9c0\uc815\ud55c \uac83\uacfc \uac19\uc544\uc57c \uc62c\ubc14\ub974\uac8c \uc791\ub3d9\ud55c\ub2e4.\\n\\n```kt title=\\"BookController.kt\\"\\n@Controller\\nclass BookController(private val bookService: BookService) {\\n\\n    @QueryMapping\\n    suspend fun books(): List<Book> = bookService.find()\\n\\n    @MutationMapping\\n    suspend fun createBook(@Argument input: CreateBookInput): Book = bookService.create(input)\\n}\\n```\\n\\n### \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\\n\\n`Spring for GraphQL` \uc5d0\uc11c\ub294 GraphQL \ucee8\ud2b8\ub864\ub7ec \ud14c\uc2a4\ud2b8\ub97c \uc704\ud55c \uae30\ub2a5\uc744 \uc9c0\uc6d0\ud55c\ub2e4.\\n\uba3c\uc800 \uc544\ub798 \ud328\ud0a4\uc9c0\ub97c \ucd94\uac00\ud55c\ub2e4.\\n\\n```kts\\ndependencies {\\n    testImplementation(\\"org.springframework.graphql:spring-graphql-test\\")\\n}\\n```\\n\\n\ud574\ub2f9 \ud328\ud0a4\uc9c0\ub294 GraphQL \uc694\uccad\uc744 \uc704\ud55c \uc5ec\ub7ec \uc885\ub958\uc758 \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \uc81c\uacf5\ud55c\ub2e4.\\n\uc774\ubc88 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c\ub294 `HttpGraphQlTester` \ub97c \uc0ac\uc6a9\ud558\ub824\uace0 \ud55c\ub2e4.\\n\uc9c1\uc811 Client \ub97c \ub9cc\ub4e4 \uc218 \uc788\uc9c0\ub9cc `@AutoConfigureHttpGraphQlTester` \ub97c \uc0ac\uc6a9\ud558\uba74 \uc2a4\ud504\ub9c1\uc774 \uc790\ub3d9\uc73c\ub85c \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \ub9cc\ub4e4\uc5b4 \uc900\ub2e4.\\n\\nGraphQL \uc694\uccad body \ub294 \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\uc5d0 \uc9c1\uc811 \uc120\uc5b8\ud574\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc9c0\ub9cc syntax highlighting \uc774\ub098 indent \ub97c \uc9c0\ud0a4\uba74\uc11c \uc791\uc131\ud558\ub294\uac83\uc774 \ubd88\ud3b8\ud558\uae30\uc5d0 \ub2e4\ub978 \ud30c\uc77c\uc5d0 \uc791\uc131 \ud6c4 \ubd88\ub7ec\uc624\ub294 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud558\uc600\ub2e4.\\n`src/test/resources/graphql-test` \uacbd\ub85c\uc5d0 \uc544\ub798 \ud30c\uc77c\uc744 \uc0dd\uc131\ud55c\ub2e4.\\n\\n```graphql title=\\"createBook.gql\\"\\nmutation createBook($input: CreateBookInput!) {\\n  createBook(input: $input) {\\n    id\\n    title\\n    author\\n    isbn\\n  }\\n}\\n```\\n\\n:::info\\n\uc704\ucc98\ub7fc \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\uc640 \uc694\uccad\uc815\ubcf4\uac00 \ub2e4\ub978 \ud30c\uc77c\ub85c \ubd84\ub9ac\ub418\uba74 \ub450 \ud30c\uc77c\uc744 \uc774\ub3d9\ud558\uba74\uc11c \ub85c\uc9c1\uc744 \ud655\uc778\ud574\uc57c \ud558\ub294 \ubd88\ud3b8\ud568\uc774 \uc874\uc7ac\ud55c\ub2e4.\\n\ud558\uc9c0\ub9cc IntelliJ IDEA \uc758 [GraphQL](https://plugins.jetbrains.com/plugin/8097-graphql) \ud50c\ub7ec\uadf8\uc778\uc744 \uc0ac\uc6a9\ud574 GraphQL \uc790\ub3d9\uc644\uc131\uacfc \uad6c\ubb38 \uc624\ub958\ub97c \ud655\uc778\ud560 \uc218 \uc788\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.\\n:::\\n\\n\uc774\uc81c \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc791\uc131\ud574\ubcf4\uc790.\\n\\n```kt title=\\"BookControllerTest.kt\\"\\n@SpringBootTest\\n@AutoConfigureHttpGraphQlTester\\ninternal class BookControllerTest(\\n    // mokito \ub300\uc2e0 mockk \ub97c \ud1b5\ud574 bean \uc744 mocking \ud558\uc600\ub2e4\\n    @MockkBean\\n    private val bookService: BookService,\\n    private val graphQlTester: HttpGraphQlTester\\n) : StringSpec({\\n\\n    \\"create\\" {\\n        // given\\n        val input = CreateBookInput(\\"title\\", \\"author\\", \\"isbn\\")\\n        val book = Book(\\"title\\", \\"author\\", \\"isbn\\").also { it.id = \\"1\\" }\\n        coEvery { bookService.create(any()) } returns book\\n\\n        // when\\n        val response = graphQlTester\\n            // documentName \uba54\uc18c\ub4dc\ub97c \ud1b5\ud574 \uc694\uccad body \ub97c \uac00\uc9c4 \ud30c\uc77c\uba85(createBook.gql)\uc744 \uc9c0\uc815\ud55c\ub2e4\\n            .documentName(\\"createBook\\")\\n            // input \uc740 variable \uba54\uc18c\ub4dc\ub97c \ud1b5\ud574 \ub123\uc744 \uc218 \uc788\ub2e4\\n            .variable(\\"input\\", input)\\n            .execute()\\n\\n        // then\\n        response\\n            // \uc751\ub2f5\uc740 JsonPath \ub97c \ud1b5\ud574 \uac80\uc99d\ud558\uba70 \uc544\ub798\ub294 data \ubc11\uc758 createBook \ud544\ub4dc\ub97c \uc9c0\uc815\ud55c \uac83\uc774\ub2e4\\n            .path(\\"createBook\\")\\n            // data.createBook \ud544\ub4dc\ub97c Book \ud074\ub798\uc2a4\ub85c \ubcc0\ud658\ud55c\ub2e4\\n            .entity(Book::class.java)\\n            // \ubcc0\ud658\ud55c \uacb0\uacfc\uac00 book \uacfc \uc77c\uce58\ud558\ub294\uc9c0 \uac80\uc99d\ud55c\ub2e4\\n            .isEqualTo(book)\\n    }\\n})\\n```\\n\\n## Security\\n\\n> \uc774\ubc88 \ub0b4\uc6a9\uc740 Spring Security \uc640 jwt \uc778\uc99d\uc5d0 \ub300\ud574 \uc5b4\ub290\uc815\ub3c4 \uc54c\uace0 \uc788\ub2e4\uace0 \uac00\uc815\ud558\uace0 \uc791\uc131\ud558\uc600\ub2e4.\\n\\n\uc774\uc81c `Spring Security` \ub97c \ud65c\uc6a9\ud574 jwt \uae30\ubc18 \uc778\uc99d\uc744 \uad6c\ud604\ud574\ubcf4\uc790.\\nREST API \ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 url path \ub97c \uad6c\ubd84\uc790\ub85c \ud558\uc5ec \uc778\uc99d\uc774 \ud544\uc694\ud55c api \ub97c \uc815\uc758\ud560 \uc218 \uc788\uc73c\ub098 \ubaa8\ub4e0 \uc694\uccad\uc774 \ud558\ub098\uc758 url \uc5d0\uc11c \uc774\ub8e8\uc5b4\uc9c0\ub294 GraphQL \uc758 \uacbd\uc6b0 \uac01 \ucee8\ud2b8\ub864\ub7ec\uc758 \uba54\uc18c\ub4dc\ub9c8\ub2e4 `@PreAuthorize` \uac19\uc740 \uc5b4\ub178\ud14c\uc774\uc158\uc744 \ud65c\uc6a9\ud574 \uc778\uc99d\uc744 \uad6c\ud604\ud55c\ub2e4.\\n\uba3c\uc800 AuthenticationManager \uc744 \uc0dd\uc131\ud55c\ub2e4.\\n\\n```kt title=\\"AuthenticationManager.kt\\"\\n@Component\\nclass AuthenticationManager : ReactiveAuthenticationManager {\\n\\n    override fun authenticate(authentication: Authentication): Mono<Authentication> {\\n        return authentication.toMono()\\n    }\\n}\\n```\\n\\nWebFlux \ub97c \uc0ac\uc6a9\ud558\uae30 \ub54c\ubb38\uc5d0 ReactiveAuthenticationManager \ub97c \uc0c1\uc18d\ubc1b\uc558\uace0 authenticate \uba54\uc18c\ub4dc\ub294 \ub2e8\uc21c\ud788 \ud30c\ub77c\ubbf8\ud130\ub97c Mono \ub85c \uac10\uc2f8 \uadf8\ub300\ub85c \ubc18\ud658\ud55c\ub2e4.\\n\ud30c\ub77c\ubbf8\ud130 authentication \ub294 jwt \ud1a0\ud070\uc744 \ud30c\uc2f1\ud55c \uacb0\uacfc\ub97c \ub2f4\uace0 \uc788\ub294\ub370 \uc774\ub97c \ud65c\uc6a9\ud55c \ucd94\uac00\uc801\uc778 \ub85c\uc9c1\uc774 \ud544\uc694\ud558\ub2e4\uba74 \uc774 \uba54\uc18c\ub4dc\uc5d0 \ub123\uc5b4\uc900\ub2e4.\\n\uc774\uc81c \ubcf8\uaca9\uc801\uc778 \uc778\uc99d\uc744 \uc124\uc815\ud574\ubcf4\uc790.\\n\\n```kt title=\\"SecurityConfig.kt\\"\\n// \uc544\ub798 import \ub294 \uc9c1\uc811 \ubcf5\uc0ac\ud574\uc11c \ub123\uc5b4\uc8fc\ub3c4\ub85d \ud55c\ub2e4. IDE \uc5d0\uc11c \uc81c\ub300\ub85c \uc790\ub3d9 import \uac00 \uc548\ub418\ub294 \uacbd\uc6b0\uac00 \uc788\ub2e4.\\nimport org.springframework.security.config.web.server.invoke\\n\\n@Configuration\\n@EnableWebFluxSecurity\\n@EnableReactiveMethodSecurity\\nclass SecurityConfig {\\n\\n    @Bean\\n    fun springWebFilterChain(\\n        http: ServerHttpSecurity,\\n        manager: AuthenticationManager,\\n    ): SecurityWebFilterChain =\\n        // \uc544\ub798 \ucc98\ub7fc kotlin dsl \uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \uc0c1\ub2e8\uc758 import \uad6c\ubb38\uc744 \ub123\uc5b4\uc8fc\uc5b4\uc57c \ud55c\ub2e4.\\n        http {\\n            csrf { disable() }\\n            authorizeExchange {\\n                // \uc6b0\uc120 \ubaa8\ub4e0 \uc694\uccad\uc740 \ud5c8\uc6a9\ud558\ub3c4\ub85d \ud558\uace0 \uc778\uc99d\uc774 \ud544\uc694\ud55c api \uc5d0\ub9cc \uc5b4\ub178\ud14c\uc774\uc158\uc744 \ucd94\uac00\ud558\ub824\uace0 \ud55c\ub2e4.\\n                authorize(anyExchange, permitAll)\\n            }\\n            httpBasic { disable() }\\n            addFilterAt(jwtAuthenticationFilter(manager), SecurityWebFiltersOrder.AUTHENTICATION)\\n        }\\n\\n    fun jwtAuthenticationFilter(manager: ReactiveAuthenticationManager): AuthenticationWebFilter {\\n        val bearerAuthenticationFilter = AuthenticationWebFilter(manager)\\n\\n        bearerAuthenticationFilter.setServerAuthenticationConverter { exchange ->\\n            /*\\n                \uc774\uacf3\uc5d0\uc11c exchange \ub97c \ud65c\uc6a9\ud574 jwt \ud1a0\ud070\uc744 \ud30c\uc2f1\ud558\ub294 \ub85c\uc9c1\uc744 \ub123\uc5b4\uc8fc\uc5b4\uc57c \ud55c\ub2e4.\\n                \uc608\uc81c \ucf54\ub4dc\ub294 kjwt \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ud65c\uc6a9\ud588\ub294\ub370 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0 \uc775\uc219\ud558\uc9c0 \uc54a\ub2e4\uba74 \uc774\ud574\ud558\uae30 \uc5b4\ub824\uc6b8 \uc218 \uc788\ub2e4.\\n                \ud558\ub294 \uc77c\uc740 \uc694\uccad Authorizaion \ud5e4\ub354\uc5d0 \uc874\uc7ac\ud558\ub294 jwt \ud1a0\ud070\uc744 \ud30c\uc2f1\ud574 role \ud544\ub4dc\ub97c \uc77d\ub294 \ub85c\uc9c1\uc774\ub2e4.\\n            */\\n            exchange\\n                .request\\n                .headers\\n                .getOrDefault(HttpHeaders.AUTHORIZATION, emptyList())\\n                .firstOrNone()\\n                .filter { it.startsWith(\\"Bearer \\") }\\n                .map { it.substring(7) }\\n                .toEither { KJWTVerificationError.InvalidJWT }\\n                .flatMap { verifySignature<JWSHMAC256Algorithm>(it, JWT_SECRET) }\\n                .flatMap { it.claimValue(\\"role\\").toEither { KJWTVerificationError.InvalidJWT } }\\n                .fold(\\n                    ifLeft = { Mono.empty() }, // \ud1a0\ud070 \ud30c\uc2f1\uc774 \uc2e4\ud328\ud558\uba74 empty \ub97c \ubc18\ud658\ud55c\ub2e4.\\n                    ifRight = {\\n                        // \uc131\uacf5\ud558\uba74 \ud1a0\ud070\uc5d0\uc11c \uac00\uc838\uc628 role \uac12\uc744 SimpleGrantedAuthority \ub85c \uac10\uc2f8\uc11c UsernamePasswordAuthenticationToken \uc5d0 \ub123\uc5b4\uc900\ub2e4.\\n                        UsernamePasswordAuthenticationToken(\\n                            null,\\n                            null,\\n                            listOf(SimpleGrantedAuthority(\\"ROLE_$it\\"))\\n                        ).toMono()\\n                    },\\n                )\\n        }\\n\\n        return bearerAuthenticationFilter\\n    }\\n\\n    companion object {\\n        // \ud3b8\uc758\ub97c \uc704\ud574 secret \uac12\uc744 \uac04\ub2e8\ud558\uac8c \uc124\uc815\ud588\ub294\ub370 \uc2e4\uc81c\ub85c\ub294 \ucd94\ub860\ud558\uae30 \uc5b4\ub824\uc6b4 \uac12\uc744 \ub123\uc5b4\uc8fc\uc5b4\uc57c \ud55c\ub2e4.\\n        const val JWT_SECRET = \\"secret\\"\\n    }\\n}\\n```\\n\\n\uc774\uc81c \uc778\uc99d\uc744 \uc6d0\ud558\ub294 api \uc5d0 `@PreAuthorize` \uc5b4\ub178\ud14c\uc774\uc158\uc744 \ucd94\uac00\ud574\ubcf4\uc790.\\n\\n```kt title=\\"BookController.kt\\"\\n@Controller\\nclass BookController(private val bookService: BookService) {\\n\\n    @QueryMapping\\n    // ADMIN \uad8c\ud55c\uc744 \uac00\uc9c4 \uc0ac\uc6a9\uc790\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\ub2e4.\\n    @PreAuthorize(\\"hasRole(\'ADMIN\')\\")\\n    suspend fun books(): List<Book> = bookService.find()\\n}\\n```\\n\\n\uc774\uc81c books \ub97c \uc870\ud68c\ud558\ub294 \uacbd\uc6b0 \uc720\ud6a8\ud55c jwt \ud1a0\ud070\uc758 role \uac12\uc774 ADMIN \uc774 \uc544\ub2cc\uacbd\uc6b0 \uc5d0\ub7ec\uc751\ub2f5\uc744 \ubc1b\uac8c\ub41c\ub2e4.\\n\ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub85c \uac80\uc99d\ud574\ubcf4\uc790.\\n\\n```kt title=\\"BookControllerTest.kt\\"\\n\\"find\\" {\\n    // given\\n    val book = Book(\\"title\\", \\"author\\", \\"isbn\\").also { it.id = \\"1\\" }\\n    coEvery { bookService.find() } returns listOf(book)\\n    val authTester = graphQlTester\\n        .mutate()\\n        // \ud5e4\ub354\uc5d0 \uc720\ud6a8\ud55c jwt \ud1a0\ud070\uc744 \ub123\uc5b4\uc900\ub2e4.\\n        .headers { it.setBearerAuth(\\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiQURNSU4ifQ.YugxAPZbmANcCJRY1jC2sYnOhcngLeJpdH7jpEHrB_c\\") }\\n        .build()\\n\\n    // when\\n    val response = authTester\\n        .documentName(\\"books\\")\\n        .execute()\\n\\n    // then\\n    response\\n        .path(\\"books\\")\\n        .entityList(Book::class.java)\\n        .hasSize(1)\\n        .contains(book)\\n}\\n```\\n\\n\ud14c\uc2a4\ud2b8 \ucf54\ub4dc\uc5d0\uc11c jwt \ud1a0\ud070\uc744 \ub123\uc5b4 \uc694\uccad\ud558\ub824\uba74 headers \uba54\uc18c\ub4dc\uc640 setBearerAuth \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4.\\n\uc8fc\uc5b4\uc9c4 jwt \ud1a0\ud070\uc744 \ud655\uc778\ud574\ubcf4\uba74 role \uac12\uc774 ADMIN \uc774\ub77c\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\ub610\ud55c secret \uac12\uc744 \uc774\uc804 \ud30c\uc77c\uc5d0\uc11c \uc124\uc815\ud55c `secret` \uc73c\ub85c \ub123\uc5b4\uc900 \uacbd\uc6b0 \uc720\ud6a8\ud55c jwt \ud1a0\ud070\uc774\ub77c\ub294 \uac83\ub3c4 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n![jwt](jwt.png)"},{"id":"2022/05/18/Github-Page\ub97c-GraphQL-\uc2a4\ud0a4\ub9c8-\uc11c\ubc84\ub85c-\ub9cc\ub4e4\uae30","metadata":{"permalink":"/2022/05/18/Github-Page\ub97c-GraphQL-\uc2a4\ud0a4\ub9c8-\uc11c\ubc84\ub85c-\ub9cc\ub4e4\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-05-18-graphql-server-by-github-page/index.mdx","source":"@site/blog/2022-05-18-graphql-server-by-github-page/index.mdx","title":"Github Page\ub97c GraphQL \uc2a4\ud0a4\ub9c8 \uc11c\ubc84\ub85c \ub9cc\ub4e4\uae30","description":"\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 Github Page \ub97c GraphQL \uc2a4\ud0a4\ub9c8 \uc11c\ubc84\ub85c \ud65c\uc6a9\ud558\ub294 \uacfc\uc815\uc744 \uae30\uc220\ud558\ub824\uace0 \ud55c\ub2e4.","date":"2022-05-18T00:00:00.000Z","formattedDate":"2022\ub144 5\uc6d4 18\uc77c","tags":[{"label":"graphql","permalink":"/tags/graphql"},{"label":"github","permalink":"/tags/github"},{"label":"page","permalink":"/tags/page"}],"readingTime":9.99,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Github Page\ub97c GraphQL \uc2a4\ud0a4\ub9c8 \uc11c\ubc84\ub85c \ub9cc\ub4e4\uae30","slug":"2022/05/18/Github-Page\ub97c-GraphQL-\uc2a4\ud0a4\ub9c8-\uc11c\ubc84\ub85c-\ub9cc\ub4e4\uae30","authors":"jake","tags":["graphql","github","page"]},"prevItem":{"title":"Kotlin + Spring GraphQL + Spring Security \uc0ac\uc6a9\ud558\uae30","permalink":"/2022/06/06/Kotlin-Spring-GraphQL-Spring-Security-\uc0ac\uc6a9\ud558\uae30"},"nextItem":{"title":"kotlin\uc5d0\uc11c testcontainers \uc0ac\uc6a9\ud558\uae30","permalink":"/2022/04/30/kotlin\uc5d0\uc11c-testcontainers-\uc0ac\uc6a9\ud558\uae30"}},"content":"\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 Github Page \ub97c GraphQL \uc2a4\ud0a4\ub9c8 \uc11c\ubc84\ub85c \ud65c\uc6a9\ud558\ub294 \uacfc\uc815\uc744 \uae30\uc220\ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \uc0c1\ud669\\n\\n\ucd5c\uadfc GraphQL \uc744 \uc0ac\uc6a9\ud558\ub294 \uc0ac\uc774\ub4dc \ud504\ub85c\uc81d\ud2b8\ub97c \uc9c4\ud589\ud558\uace0 \uc788\ub294\ub370 FE \uc5d0\uc11c [graphql-codegen](https://www.graphql-code-generator.com/) \uc744 \ud65c\uc6a9\ud574 \uc2a4\ud0a4\ub9c8 \ud0c0\uc785\uc815\ubcf4\ub97c \ub9cc\ub4e4\uc5b4\uc57c \ud558\ub294 (codegen) \uc0c1\ud669\uc774 \uc0dd\uacbc\ub2e4.  \\n\ubcf4\ud1b5 \ud0c0\uc785\uc815\ubcf4\ub97c \ub9cc\ub4e4\ub54c\uc5d0\ub294 `introspection` \uc744 \uc9c0\uc6d0\ud558\ub294 GraphQL \uc11c\ubc84 URL \uc744 \uc81c\uacf5\ud558\uac70\ub098 schema \ud30c\uc77c \uacbd\ub85c\ub97c \uc9c0\uc815\ud574\uc57c \ud55c\ub2e4.  \\n\ub2f9\uc2dc GraphQL \uc11c\ubc84\ub97c \ub530\ub85c \ub744\uc6b0\uae30 \uc704\ud55c \uc138\ud305\uc774 \uc5c6\uc5c8\uace0 \uc11c\ubc84\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83 \uc790\uccb4\uac00 \ube44\uc6a9\uc774 \ub4e4\uae30\ub54c\ubb38\uc5d0 \uae30\uc874\uc5d0\ub294 FE \uc800\uc7a5\uc18c\uc5d0\uc11c BE \uc800\uc7a5\uc18c\uc758 \uc2a4\ud0a4\ub9c8 \ud30c\uc77c\uc744 \ubcf5\uc0ac\ud574\uc11c \uc0ac\uc6a9\ud558\uc600\ub2e4.\\n\\n\uc774 \ubc29\uc2dd\uc758 \ub2e8\uc810\uc740 \uc2a4\ud0a4\ub9c8 \ubcc0\uacbd \uc2dc \ub9e4\ubc88 BE \uc800\uc7a5\uc18c\uc5d0\uc11c \ubcf5\uc0ac\ud558\ub294 \uacfc\uc815\uc744 \uac70\uccd0\uc57c \ud558\uae30\uc5d0 \ub9e4\uc6b0 \ubc88\uac70\ub85c\uc6e0\ub2e4.  \\nBE \uc791\uc5c5\uc774 \ub05d\ub098\uba74 \uc2a4\ud0a4\ub9c8\uac00 \ubcc0\uacbd\ub418\uc5c8\uc74c\uc744 \ub9e4\ubc88 FE \uc5d0\uac8c \uc54c\ub824\uc8fc\uc5b4\uc57c \ud558\ub294 \uac83 \ub610\ud55c \ubd88\ud3b8\ud558\uc600\ub2e4.  \\n\ucc98\uc74c\uc5d0\ub294 \ubb34\ub8cc\ub85c GraphQL \uc11c\ubc84\ub97c \uc81c\uacf5\ud574\uc8fc\ub294 \uc11c\ube44\uc2a4\ub97c \ucc3e\uc544\ubcf4\ub824\uace0 \ud588\ub2e4.  \\n\ud558\uc9c0\ub9cc \uc0dd\uac01\ud574\ubcf4\ub2c8 codegen \uc744 \uc704\ud574\uc11c Graphql \uc11c\ubc84\uc758 \ubaa8\ub4e0 \uae30\ub2a5\uc774 \ud544\uc694\ud55c\uac8c \uc544\ub2c8\ub77c `introspection` \uacb0\uacfc\ub9cc \ub0b4\ub824\uc904 \uc218 \uc788\uc73c\uba74 \ub418\uae30\uc5d0 \uc815\uc801 \ud398\uc774\uc9c0 \uae30\ub2a5\ub9cc \uc788\uc73c\uba74 \ucda9\ubd84\ud558\ub2e4\uace0 \uc0dd\uac01\ud588\ub2e4.  \\n\ub530\ub77c\uc11c \uc774\ubc88 \uae00\uc740 Github Page \ub97c \ud65c\uc6a9\ud558\ub294 \uacfc\uc815\uc744 \ub2f4\uace0 \uc788\uc9c0\ub9cc \ub2e4\ub978 \uc815\uc801 \ud398\uc774\uc9c0\ub97c \uc81c\uacf5\ud558\ub294 \uc5b4\ub290 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud574\ub3c4 \ub3d9\uc77c\ud558\uac8c \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\\n## Introspection\\n\\nGraphQL \uc5d0\uc11c `introspection` \uc774\ub780 \uc2a4\ud0a4\ub9c8 \ud0c0\uc785\uacfc \ud544\ub4dc\uac19\uc740 \uba54\ud0c0\uc815\ubcf4\ub97c \uc81c\uacf5\ud558\ub294 \uac83\uc744 \uc758\ubbf8\ud55c\ub2e4.  \\n\uc774\ub97c \ud1b5\ud574 \uc11c\ubc84\uac00 \uc81c\uacf5\ud558\ub294 Query, Mutation, Subscription \uc758 \uc774\ub984, \ud544\ub4dc \ud0c0\uc785\uac19\uc740 \uc815\ubcf4\ub97c \ud655\uc778\ud560 \uc218 \uc788\uac8c\ub41c\ub2e4.  \\n`graphql-codegen` \uc774\ub098 `apollo-sandbox` \uc640 \uac19\uc740 \uc2a4\ud0a4\ub9c8 \uc815\ubcf4\uac00 \ud544\uc694\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \uc774 \uae30\ub2a5\uc744 \ud65c\uc6a9\ud55c\ub2e4.  \\n\uc2a4\ud0a4\ub9c8 \uc815\ubcf4\uc5d0 \ub300\ud55c \uc0c1\uc138\ud55c \uc815\ubcf4\ub97c \uc804\ub2ec\ud558\uae30\uc5d0 \ubcf4\ud1b5 \uc6b4\uc601\ud658\uacbd\uc5d0\uc11c\ub294 \uc774 \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\uc9c0 \uc54a\ub3c4\ub85d \uc124\uc815\ud574\uc57c \ud55c\ub2e4.\\n\\n\ub370\uc774\ud130\ub97c \uac00\uc838\uc624\uae30 \uc704\ud55c \uc694\uccad\uc740 GraphQL \uc694\uccad\ubc29\ubc95\uc744 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud558\uba74 \ub418\uba70 \ub2e8\uc21c\ud788 body \uc6d0\ud558\ub294 \uc815\ubcf4\ub97c \ub123\uc5b4\uc900\ub2e4.  \\n\uc608\ub97c\ub4e4\uba74 \uc544\ub798\uc640 \uac19\uc740 \uc694\uccad\uc744 \ud558\uba74 \uc11c\ubc84\uac00 \uc81c\uacf5\ud558\ub294 \ubaa8\ub4e0 \ud0c0\uc785\uc774\ub984\uc744 \uc5bb\uc744 \uc218 \uc788\ub2e4.\\n\\n- \uc694\uccad\\n\\n```graphql\\nquery {\\n  __schema {\\n    types {\\n      name\\n    }\\n  }\\n}\\n```\\n\\n- \uc751\ub2f5\\n\\n```json\\n{\\n  \\"data\\": {\\n    \\"__schema\\": {\\n      \\"types\\": [\\n        {\\n          \\"name\\": \\"Query\\"\\n        },\\n        {\\n          \\"name\\": \\"String\\"\\n        },\\n        ... \uc0dd\ub7b5\\n      ]\\n    }\\n  }\\n}\\n```\\n\\ncodegen \uc5d0\uc11c\ub294 \uc704\ucc98\ub7fc \ub2e8\uc21c\ud788 type name \ubfd0\ub9cc \uc544\ub2c8\ub77c \ubaa8\ub4e0 \uc2a4\ud0a4\ub9c8 \uc815\ubcf4\ub97c \uc694\uad6c\ud558\uae30\uc5d0 \uc694\uccad body \uc5d0 \uad49\uc7a5\ud788 \ub9ce\uc740 \ub0b4\uc6a9\uc774 \ub4e4\uc5b4\uac04\ub2e4.  \\ncodegen \uc774 graphql \uc11c\ubc84\ub85c \uc694\uccad\ud560 \ub54c \uc5b4\ub5a4 body \ub97c \uc0ac\uc6a9\ud558\ub294\uc9c0 \ud655\uc778\ud558\ub824\uba74 `graphql-js` \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 `getIntrospectionQuery` \ud568\uc218\ub97c \ud638\ucd9c\ud558\uba74 \ub41c\ub2e4.\\n\\n```typescript\\nimport { getIntrospectionQuery } from \\"graphql\\";\\n\\nconsole.log(getIntrospectionQuery());\\n```\\n\\n## GraphQL \uc758 GET \uc694\uccad\\n\\nGraphQL \uc740 \ubcf4\ud1b5 \ub300\ubd80\ubd84\uc758 \uc694\uccad\uc5d0 `POST` \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc9c0\ub9cc GraphQL \uc2a4\ud329\ubb38\uc11c\ub97c \ubcf4\uba74 `GET` \uba54\uc18c\ub4dc\ub3c4 \uc9c0\uc6d0\ud574\uc57c \ud55c\ub2e4.\\n\\n- https://graphql.org/learn/serving-over-http/#http-methods-headers-and-body\\n\\nGET \uba54\uc18c\ub4dc\ub85c \uc694\uccad\ud558\ub824\uba74 \uae30\uc874 body \uc5d0 \ub123\uc5c8\ub358 \ub0b4\uc6a9\uc744 \ub2e8\uc21c\ud788 querystring \uc5d0 \ub123\uc5b4\uc8fc\uba74 \ub41c\ub2e4.\\n\\n> http://myapi/graphql?query=`GraphQL body`\\n\\ncodegen \ub610\ud55c GraphQL \uc11c\ubc84\ub85c \uc694\uccad \uc2dc \uc5b4\ub5a4 \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud560 \uac83\uc778\uc9c0 \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4.\\n\\n\uc9c0\uae08\uae4c\uc9c0 \uc54c\uc544\ubcf8 \ub0b4\uc6a9\uc744 \uc815\ub9ac\ud574\ubcf4\uba74 codegen \uc744 \uc704\ud574\uc11c\ub294 \ubaa8\ub4e0 \uc2a4\ud0a4\ub9c8 \uc815\ubcf4\ub97c \uc704\ud574 `introspection` \uc694\uccad\uc744 \ud558\uba70 `GET` \ub610\ub294 `POST` \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud55c\ub2e4.  \\n\uc774\ub294 \uaf2d GraphQL \uc11c\ubc84\uac00 \uc544\ub2c8\ub354\ub77c\ub3c4 `introspection` \uc694\uccad\uc758 \uc751\ub2f5 body \ub97c \ud30c\uc77c\ub85c \ub9cc\ub4e0 \ub2e4\uc74c\uc5d0 url \ub85c \ud574\ub2f9 \ud30c\uc77c\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\uac8c\ud55c\ub2e4\uba74 codegen \uc744 \uc0ac\uc6a9\ud558\ub294\ub370 \uc804\ud600 \ubb38\uc81c\uac00 \uc5c6\ub2e4\ub294 \uac83\uc744 \uc758\ubbf8\ud55c\ub2e4.  \\n\uc989 S3 \uac19\uc740 \ubc84\ud0b7 \uc11c\ube44\uc2a4\ub098 \uc815\uc801 \ud398\uc774\uc9c0 \uc11c\ube44\uc2a4\ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\ud558\uc9c0\ub9cc \ud604\uc7ac \ucf54\ub4dc \uc800\uc7a5\uc18c\ub85c Github \uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\uc73c\ubbc0\ub85c \uc2a4\ud0a4\ub9c8 \ud30c\uc77c\ub3c4 Github \uc800\uc7a5\uc18c\ub85c \uad00\ub9ac\ud558\uace0 \uc2f6\uc5c8\uae30\uc5d0 Github Page \ub97c \uc0ac\uc6a9\ud558\uae30\ub85c \ud558\uc600\ub2e4.\\n\\n## \uc124\uc815\\n\\n### Introspection \ud30c\uc77c \uc0dd\uc131\\n\\n\uba3c\uc800 `introspection` \uc694\uccad\uc758 \uc751\ub2f5 json \uc744 \ud30c\uc77c\ub85c \uc800\uc7a5\ud574\uc57c \ud55c\ub2e4.  \\n`graphql-js` \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 GraphQL \uc2a4\ud0a4\ub9c8\ub97c \uc77d\uc5b4\uc11c `introspection` \uacb0\uacfc\ub85c \ub9cc\ub4e4\uc5b4\uc8fc\ub294 \ud568\uc218\ub97c \uc81c\uacf5\ud55c\ub2e4.  \\n\ub9cc\uc57d \uc2a4\ud0a4\ub9c8 \ud30c\uc77c\uc774 \uc874\uc7ac\ud55c\ub2e4\uba74 \ud574\ub2f9 \ud30c\uc77c\uc744 \uc77d\uc5b4\uc11c `buildSchema` \ud568\uc218\ub97c \ud1b5\ud574 \uc2a4\ud0a4\ub9c8 \uac1d\uccb4\ub85c \ub9cc\ub4e0 \ud6c4 `introspectionFromSchema` \ud568\uc218\ub97c \ud638\ucd9c\ud558\uba74 \ub41c\ub2e4.\\n\\n```ts\\nimport { readFileSync, writeFileSync } from \\"fs\\";\\nimport { buildSchema, introspectionFromSchema } from \\"graphql\\";\\n\\nconst schema = readFileSync(\\"\uc2a4\ud0a4\ub9c8 \ud30c\uc77c \uacbd\ub85c\\");\\n\\nconst introspectionQuery = introspectionFromSchema(\\n  buildSchema(schema.toString())\\n);\\n\\nwriteFileSync(\\n  \\"introspection.json\\",\\n  // GraphQL \uc751\ub2f5\uc740 \ud56d\uc0c1 data \ud544\ub4dc\uc548\uc5d0 \ub4e4\uc5b4\uac00\ubbc0\ub85c \uc544\ub798\uc640\uac19\uc774 \uac10\uc2f8\uc8fc\uc5b4\uc57c \ud55c\ub2e4\\n  JSON.stringify({ data: introspectionQuery })\\n);\\n```\\n\\n### Github Action \uc124\uc815\\n\\n\uc774\uc81c \uc2a4\ud0a4\ub9c8\uc758 \ubcc0\uacbd\uc774 \ubc1c\uc0dd\ud55c \uacbd\uc6b0 Github Page \ub85c \ub3d9\uc791\ud558\ub294 \uc2a4\ud0a4\ub9c8 \uc800\uc7a5\uc18c\uc5d0 \uc62c\ub77c\uac08 `introspection` \ud30c\uc77c\uc744 \uac31\uc2e0\ud558\ub294 \uc791\uc5c5\uc774 \ud544\uc694\ud558\ub2e4.  \\nBE \uc800\uc7a5\uc18c\uc758 `main` \ube0c\ub79c\uce58\uc5d0 \ucee4\ubc0b\uc774 \ud478\uc2dc\ub418\uba74 \uc2a4\ud0a4\ub9c8 \uc800\uc7a5\uc18c\uc758 workflow \ub97c \uc2e4\ud589\ud558\ub294 \ubc29\ubc95\uc73c\ub85c \ud574\uacb0\ud560 \uc218 \uc788\ub2e4.  \\n\ud574\ub2f9 workflow \ub294 BE \uc800\uc7a5\uc18c\ub97c \uac00\uc838\uc640 `introspection` \ud30c\uc77c\uc744 \ub9cc\ub4e4\uace0 \uc774\ub97c \ucee4\ubc0b\ud574 \uc800\uc7a5\uc18c\uc5d0 push \ud558\ub294 \uacfc\uc815\uc774 \ud544\uc694\ud558\ub2e4.\\n\\n:::info\\n\uc2a4\ud0a4\ub9c8 \uc800\uc815\uc18c\ub97c \ub530\ub85c \ubd84\ub9ac\ud558\uc9c0 \uc54a\uace0 GraphQL \uc11c\ubc84 \uc800\uc7a5\uc18c \ud558\ub098\ub85c \ud1b5\uc77c\ud560 \uc218\ub3c4 \uc788\ub2e4.  \\n`Github content API` \ub97c \ud65c\uc6a9\ud558\uba74 \uc800\uc7a5\uc18c\uc5d0 \uc62c\ub77c\uac04 \ud30c\uc77c\ub0b4\uc6a9\ub9cc \uc751\ub2f5\uc73c\ub85c \ubc1b\uc744 \uc218 \uc788\uae30\uc5d0 `introspection` \ud30c\uc77c\ub9cc Github \uc5d0 \ud478\uc2dc\ud558\uba74 \ub41c\ub2e4.  \\n\ud574\ub2f9 \ud30c\uc77c\uc744 \uac00\uc838\uc624\ub294 \uc8fc\uc18c\ub97c \uc54c\ub824\uba74 \uc544\ub798 \uc6f9 \ud654\uba74\uc5d0\uc11c `raw` \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uba74 \ub41c\ub2e4.  \\n\ud574\ub2f9 \uc8fc\uc18c\ub97c codegen \uc5d0 \uc81c\uacf5\ud558\uba74 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4.\\n\\n![github-raw](github-raw.png)\\n:::\\n\\n\uba3c\uc800 \uc11c\ub85c \ub2e4\ub978 \uc800\uc7a5\uc18c\uc758 workflow \ub97c \uc2e4\ud589\ud574\uc57c \ud558\ub294\ub370 `repository_dispatch` \uc774\ubca4\ud2b8\ub97c \ud65c\uc6a9\ud574 \ud574\uacb0\ud560 \uc218 \uc788\ub2e4.  \\n\ub2e4\uc74c \ube14\ub85c\uadf8 \uae00\uc744 \ucc38\uc870\ud558\uba74 \ud1a0\ud070 \ubc1c\uae09\uc774\ub098 \uc124\uc815\ubc29\ubc95\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n- https://blog.outsider.ne.kr/1589\\n\\n\ub9cc\uc57d \uc2a4\ud0a4\ub9c8 \uc800\uc7a5\uc18c\uac00 `santa-close/santa-close.github.io` \ub77c \ud55c\ub2e4\uba74 GraphQL \uc11c\ubc84 \uc800\uc7a5\uc18c\uc758 workflow \ud30c\uc77c\uc5d0 \uc544\ub798\uc640 \uac19\uc740 \ub0b4\uc6a9\uc744 \ub123\uc5b4\uc900\ub2e4.  \\nSCHEMA_PAGE_TOKEN \ub294 `Personal access token` \uc73c\ub85c \ubc1c\uae09\ubc29\ubc95\uc740 \ube14\ub85c\uadf8 \uae00\uc744 \ucc38\uc870\ud55c\ub2e4.\\n\\n```yaml\\njobs:\\n  gradle:\\n    runs-on: ubuntu-latest\\n      steps:\\n      - name: Trigger dispatch to generate graphql schema\\n        run: gh api /repos/santa-close/santa-close.github.io/dispatches -f event_type=\'schema\'\\n        env:\\n          GITHUB_TOKEN: ${{ secrets.SCHEMA_PAGE_TOKEN }}\\n```\\n\\n\uc2a4\ud0a4\ub9c8 \uc800\uc7a5\uc18c\uc758 workflow \ud30c\uc77c\uc5d0\uc11c\ub294 \uc11c\ubc84 \uc800\uc7a5\uc18c\ub97c checkout \ud6c4 `introspection` \ud30c\uc77c \uc0dd\uc131 \ud6c4 \ubcc0\uacbd\uc0ac\ud56d\uc744 \ucee4\ubc0b\ud574 \ud478\uc2dc\ud55c\ub2e4.\\n\\n```yaml\\nname: Update graphql introspection\\n\\non:\\n  repository_dispatch:\\n    types: [schema] # \uc774\ubca4\ud2b8 \uc720\ud615\uc774 schema \uc77c \ub54c workflow \uc2e4\ud589\\n\\njobs:\\n  schema:\\n    runs-on: ubuntu-latest\\n\\n    steps:\\n      - name: Checkout server repo\\n        uses: actions/checkout@v3\\n        with:\\n          repository: santa-close/santa-close-server # \uc11c\ubc84 \uc800\uc7a5\uc18c\ub97c \uba3c\uc800 checkout\\n          ref: main\\n\\n      - name: Setup node.js\\n        uses: actions/setup-node@v3\\n        with:\\n          cache: \\"yarn\\"\\n\\n      - name: Install dependencies\\n        run: yarn install\\n\\n      - name: Generate introspection\\n        run: yarn run generate # \uc774 \uba85\ub839\uc5b4\ub294 \uc608\uc2dc\uc774\uba70 introspection \ud30c\uc77c\uc744 \ud2b9\uc815 \uacbd\ub85c\uc5d0 \ub9cc\ub4e4\uc5b4\uc8fc\ub294 \uc2a4\ud06c\ub9bd\ud2b8\ub77c \uac00\uc815\ud558\uc790.\\n\\n      - name: Checkout main repo\\n        uses: actions/checkout@v3\\n        with:\\n          path: main-repo # with \uc635\uc158\uc5d0 path \uac00 \uc5c6\ub2e4\uba74 \ubcf8 \uc800\uc7a5\uc18c (\uc2a4\ud0a4\ub9c8 \uc800\uc7a5\uc18c) \ub97c checkout \ud558\uba70 \uadf8 \uc704\uce58\ub294 main-repo \uac00 \ub41c\ub2e4.\\n          ref: main\\n\\n      - name: Commit introspection.json\\n        working-directory: ./main-repo\\n        continue-on-error: true\\n        # introspection \ud30c\uc77c\uc744 \uc800\uc7a5\uc18c\ub85c \ubcf5\uc0ac\ud558\ub294 cp \uba85\ub839\uc5b4\ub294 \uc0dd\uc131\ud55c \ud30c\uc77c\uba85\uacfc \uc704\uce58\uc5d0 \ub530\ub77c \ub2ec\ub77c\uc57c\ud55c\ub2e4.\\n        # \ub9c8\uc9c0\ub9c9\uc5d0 \uc2e0\uaddc introspection \uacb0\uacfc\ub97c \uc800\uc7a5\uc18c\uc5d0 \ud478\uc2dc\ud55c\ub2e4.\\n        run: |\\n          git config user.name github-actions\\n          git config user.email github-actions@github.com\\n          cp ../introspection.json . \\n          git add introspection.json\\n          git commit -m \\"update introspection\\"\\n          git push\\n```\\n\\n\uc774\uc81c \uac31\uc2e0\ud55c \ud30c\uc77c\uc744 Github Page \uc8fc\uc18c\ub97c \ud1b5\ud574 \ud655\uc778\ud560 \uc218 \uc788\uc73c\uba70 \ud574\ub2f9 url \uc744 codegen \uc5d0 \uc81c\uacf5\ud558\uba74 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4.\\n\\n## \ucc38\uace0\uc0ac\ud56d\\n\\n\uc774\ubc88 \uae00\uc5d0\uc11c \ub098\uc628 \uc138\ud305\uc740 \ubaa8\ub450 \uc544\ub798 \uc800\uc7a5\uc18c\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n- \uc11c\ubc84 \uc800\uc7a5\uc18c : https://github.com/santa-close/santa-close-server\\n- \uc2a4\ud0a4\ub9c8 \uc800\uc7a5\uc18c : https://github.com/santa-close/santa-close.github.io\\n- Introspection url: https://santa-close.github.io/introspection.json"},{"id":"2022/04/30/kotlin\uc5d0\uc11c-testcontainers-\uc0ac\uc6a9\ud558\uae30","metadata":{"permalink":"/2022/04/30/kotlin\uc5d0\uc11c-testcontainers-\uc0ac\uc6a9\ud558\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-04-30-testcontainers-in-kotlin/index.mdx","source":"@site/blog/2022-04-30-testcontainers-in-kotlin/index.mdx","title":"kotlin\uc5d0\uc11c testcontainers \uc0ac\uc6a9\ud558\uae30","description":"\uc774\uc804\uc5d0 node.js \ud658\uacbd\uc5d0\uc11c testcontainers \ub97c \ud65c\uc6a9\ud55c \uae00\uc744 \uc791\uc131\ud558\uc600\ub2e4.","date":"2022-04-30T00:00:00.000Z","formattedDate":"2022\ub144 4\uc6d4 30\uc77c","tags":[{"label":"kotlin","permalink":"/tags/kotlin"},{"label":"testcontainers","permalink":"/tags/testcontainers"}],"readingTime":4.09,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"kotlin\uc5d0\uc11c testcontainers \uc0ac\uc6a9\ud558\uae30","slug":"2022/04/30/kotlin\uc5d0\uc11c-testcontainers-\uc0ac\uc6a9\ud558\uae30","authors":"jake","tags":["kotlin","testcontainers"]},"prevItem":{"title":"Github Page\ub97c GraphQL \uc2a4\ud0a4\ub9c8 \uc11c\ubc84\ub85c \ub9cc\ub4e4\uae30","permalink":"/2022/05/18/Github-Page\ub97c-GraphQL-\uc2a4\ud0a4\ub9c8-\uc11c\ubc84\ub85c-\ub9cc\ub4e4\uae30"},"nextItem":{"title":"graphql \uc7a5\uc810","permalink":"/2022/03/27/graphql-\uc7a5\uc810"}},"content":"\uc774\uc804\uc5d0 node.js \ud658\uacbd\uc5d0\uc11c `testcontainers` \ub97c \ud65c\uc6a9\ud55c \uae00\uc744 \uc791\uc131\ud558\uc600\ub2e4.  \\n\ud14c\uc2a4\ud2b8 \ucf54\ub4dc\uc5d0 \uc9c1\uc811 \ucee8\ud14c\uc774\ub108\ub97c \uc2dc\uc791\ud558\uace0 \uc885\ub8cc\ud558\ub294 \ub85c\uc9c1\uc744 \ub123\uc5b4\uc57c \ud588\uc9c0\ub9cc jvm \uc5d0\uc11c\ub294 annotation \uc744 \ud65c\uc6a9\ud574 \ub354 \uac04\uacb0\ud55c \ucf54\ub4dc\ub97c \ub9cc\ub4e4 \uc218 \uc788\ub2e4.  \\n\uc774\ubc88\uc5d0\ub294 Kotlin/Jvm \ud658\uacbd\uc5d0\uc11c `testcontainers` \ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc744 \uc18c\uac1c\ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \uc0c1\ud669\\n\\ns3 \ub97c \uc0ac\uc6a9\ud558\ub294 \ub85c\uc9c1\uc744 `junit`, `localstack` \uc744 \ud65c\uc6a9\ud574 \ud14c\uc2a4\ud2b8\ub97c \ud558\ub294 \uc0c1\ud669\uc744 \uac00\uc815\ud574\ubcf4\uc790.  \\ndocker \ub97c \ud65c\uc6a9\ud574 \ud14c\uc2a4\ud2b8 \uc2e4\ud589\uc804\uc5d0 \ubbf8\ub9ac `localstack` \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b0\ub294 \ubc29\ubc95\uc774 \uc788\uc9c0\ub9cc \ubc88\uac70\ub85c\uc6b8 \uc218 \uc788\ub2e4.  \\n\ud558\uc9c0\ub9cc `testcontainers` \ub97c \uc0ac\uc6a9\ud558\uba74 \ub2e8\uc77c \ud14c\uc2a4\ud2b8 \uc2e4\ud589 \uc18d\ub3c4\ub294 \ub290\ub9ac\uc9c0\ub9cc \uc0ac\uc804\uc5d0 \ud544\uc694\ud55c \uc138\ud305\uc774 \uc5c6\uc5b4\uc11c \ud3b8\ub9ac\ud558\ub2e4.\\n\\n## \ud328\ud0a4\uc9c0 \uc124\uce58\\n\\njava \uc5b8\uc5b4\uc6a9 `testcontainers` \uc5d0\uc11c\ub294 `localstack` \uc804\uc6a9 \ubaa8\ub4c8\uc744 \uc9c0\uc6d0\ud558\uae30 \ub54c\ubb38\uc5d0 node.js \ubcf4\ub2e4 \ud3b8\ub9ac\ud558\uac8c \ucee8\ud14c\uc774\ub108\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\ub2e4.  \\ngradle \ud658\uacbd\uc5d0\uc11c \ub2e4\uc74c\uacfc \uac19\uc740 \ub0b4\uc6a9\uc744 \ub123\uc5b4\uc900\ub2e4.\\n\\n```kts\\ndependencies {\\n  testImplementation(\\"org.testcontainers:testcontainers:1.17.1\\")\\n  testImplementation(\\"org.testcontainers:junit-jupiter:1.17.1\\")\\n  testImplementation(\\"org.testcontainers:localstack:1.17.1\\")\\n}\\n```\\n\\njunit5 \uc6a9 \ud328\ud0a4\uc9c0\uc640 localstack \uc6a9 \ud328\ud0a4\uc9c0\ub97c \ud568\uaed8 \uc124\uce58\ud55c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.  \\n\ub9cc\uc57d \uac01\uac01\uc758 \ubc84\uc804\uc744 \uba85\uc2dc\ud558\ub294\uac8c \ubc88\uac70\ub85c\uc6b4 \uacbd\uc6b0 `BOM` \ud328\ud0a4\uc9c0\ub97c \ud65c\uc6a9\ud574 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815\ud560 \uc218 \uc788\ub2e4.\\n\\n```kts\\ndependencies {\\n  testImplementation(platform(\\"org.testcontainers:testcontainers-bom:1.17.1\\"))\\n  testImplementation(\\"org.testcontainers:junit-jupiter\\")\\n  testImplementation(\\"org.testcontainers:localstack\\")\\n}\\n```\\n\\ns3 \ub97c \uc704\ud55c aws-sdk \ub97c \uc124\uce58\ud574\uc57c \ud558\ub294\ub370 \uc774\ubc88 \uc608\uc81c\uc5d0\uc11c\ub294 Kotlin \uc6a9 sdk \ub97c \uc0ac\uc6a9\ud558\uace0\uc790 \ud55c\ub2e4.  \\n\ud574\ub2f9 sdk \ub294 \uae00 \uc791\uc131 \uc2dc\uc810\uc5d0\uc11c \uac1c\ubc1c\uc790 \ud504\ub9ac\ubdf0 \uc0c1\ud0dc\uc774\uae30 \ub54c\ubb38\uc5d0 **\uc6b4\uc601\ud658\uacbd \uc801\uc6a9\uc740 \uad8c\uc7a5\ud558\uc9c0 \uc54a\ub294\ub2e4.**\\n\\n```kts\\ndependencies {\\n    implementation(\\"aws.sdk.kotlin:s3:0.+\\")\\n    implementation(\\"com.amazonaws:aws-java-sdk-s3:1.12.200\\")\\n}\\n```\\n\\n## \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\\n\\n\uc774\uc81c \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uc900\ube44\uac00 \ub418\uc5c8\ub2e4.  \\ns3 \ub97c \uc2e4\ud589\ud558\ub294 `localstack` \ucee8\ud14c\uc774\ub108\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \ub9cc\ub4e4 \uc218 \uc788\ub2e4.  \\n\ud574\ub2f9 \ucee8\ud14c\uc774\ub108\ub294 \ud14c\uc2a4\ud2b8\uac00 \ub05d\ub098\uba74 \uc790\ub3d9\uc73c\ub85c \uc885\ub8cc\ub41c\ub2e4.\\n\\n```kt\\n// highlight-next-line\\n@Testcontainers // testcontainer \ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud55c annotaion\\ninternal class S3UploaderTest {\\n  companion object {\\n    // highlight-next-line\\n    @Container // \ucee8\ud14c\uc774\ub108 \uc124\uc815\\n    private val localStack =\\n      LocalStackContainer(DockerImageName.parse(\\"localstack/localstack:0.14.0\\")).apply {\\n        // highlight-next-line\\n        withServices(LocalStackContainer.Service.S3) // s3 \uc11c\ube44\uc2a4\ub9cc \uc2e4\ud589\\n      }\\n    lateinit var s3Client: S3Client\\n\\n    @BeforeAll\\n    @JvmStatic\\n    fun beforeAll() {\\n      // highlight-next-line\\n      // localstack \uc815\ubcf4\ub97c \ud65c\uc6a9\ud574\uc11c s3client \ub97c \uc0dd\uc131\ud55c\ub2e4\\n      s3Client =\\n        S3Client {\\n          region = localStack.region\\n          endpointResolver =\\n            StaticEndpointResolver(\\n              AwsEndpoint(\\n                url = localStack.getEndpointOverride(LocalStackContainer.Service.S3).toString()\\n              )\\n            )\\n          credentialsProvider =\\n            StaticCredentialsProvider(Credentials(localStack.accessKey, localStack.secretKey))\\n        }\\n    }\\n  }\\n}\\n```\\n\\n`org.testcontainers.containers.localstack.LocalStackContainer` \ud328\ud0a4\uc9c0\ub97c \ud65c\uc6a9\ud574 `localstack` \ucee8\ud14c\uc774\ub108\ub97c \ub744\uc6b8 \uc218 \uc788\ub2e4.  \\n`withServices` \uba54\uc18c\ub4dc\ub97c \ud1b5\ud574 \uc5b4\ub5a4 aws \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud560 \uac83\uc778\uc9c0 \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4.  \\n\uc774\ud6c4 `localstack` \ubcc0\uc218\ub97c \ud1b5\ud574 \uc811\uc18d \uc815\ubcf4\ub97c \uac00\uc838\uc640 s3client \ub97c \ucd08\uae30\ud654 \ud558\uc600\ub2e4.  \\n\uc774\uc804 node.js \uc640 \ub2e4\ub974\uac8c \ucee8\ud14c\uc774\ub108\ub97c \uc2dc\uc791/\uc885\ub8cc\ud558\ub294 \ub85c\uc9c1\uacfc \ud658\uacbd\ubcc0\uc218 \uc138\ud305\uacfc \uac19\uc740 \uc791\uc5c5\uc774 \uc0ac\ub77c\uc9c4 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n## \ub9c8\ubb34\ub9ac\\n\\n`testcontainers` \ub294 `localstack` \uc678\uc5d0\ub3c4 \ub370\uc774\ud130\ubca0\uc774\uc2a4, Elasticsearch, Nginx \ub4f1 \uc5ec\ub7ec \ubaa8\ub4c8\uc744 \uc9c0\uc6d0\ud55c\ub2e4.  \\njvm \ud658\uacbd\uc5d0\uc11c\ub294 \ubc18\ubcf5\ub418\ub294 \ubc88\uac70\ub85c\uc6b4 \ub85c\uc9c1\uc744 annotation \uc744 \ud1b5\ud574 \uc27d\uac8c \ub9cc\ub4e4\uc5b4 \uc8fc\ub294 \uacbd\uc6b0\uac00 \ub9ce\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4.  \\n\ub2e4\ub9cc \uc774\ubc88 `testcontainers` \ub3c4 \uadf8\ub807\uace0 \uacf5\uc2dd\ubb38\uc11c\uc5d0 \ub530\ub85c kotlin \uc6a9 \uc608\uc81c\ub97c \uc81c\uacf5\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0\uac00 \uc788\uc5b4 \uc544\uc26c\uc6e0\ub2e4.  \\n\uc55e\uc73c\ub85c kotlin \ubb38\uc11c\ub3c4 \ub9ce\uc544\uc9c0\uae38 \ubc14\ub77c\ubcf8\ub2e4.\\n\\n## \ucc38\uace0\\n\\n- https://www.testcontainers.org/"},{"id":"2022/03/27/graphql-\uc7a5\uc810","metadata":{"permalink":"/2022/03/27/graphql-\uc7a5\uc810","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-03-27-graphql-restapi/index.mdx","source":"@site/blog/2022-03-27-graphql-restapi/index.mdx","title":"graphql \uc7a5\uc810","description":"\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 Node.js \ud658\uacbd\uc5d0\uc11c REST API \uc640 GraphQL \uc744 \uc0ac\uc6a9\ud574\ubcf4\uba74\uc11c \ub290\ub080\uc810\uacfc GraphQL \uc744 \uc120\ud638\ud558\ub294 \uc774\uc720\ub97c \uc791\uc131\ud558\ub824\uace0 \ud55c\ub2e4.","date":"2022-03-27T00:00:00.000Z","formattedDate":"2022\ub144 3\uc6d4 27\uc77c","tags":[{"label":"graphql","permalink":"/tags/graphql"},{"label":"codegen","permalink":"/tags/codegen"}],"readingTime":11.35,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"graphql \uc7a5\uc810","slug":"2022/03/27/graphql-\uc7a5\uc810","authors":"jake","tags":["graphql","codegen"]},"prevItem":{"title":"kotlin\uc5d0\uc11c testcontainers \uc0ac\uc6a9\ud558\uae30","permalink":"/2022/04/30/kotlin\uc5d0\uc11c-testcontainers-\uc0ac\uc6a9\ud558\uae30"},"nextItem":{"title":"MikroORM\uacfc TypeORM \ube44\uad50","permalink":"/2022/02/16/MikroORM\uacfc-TypeORM-\ube44\uad50"}},"content":"\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 Node.js \ud658\uacbd\uc5d0\uc11c REST API \uc640 GraphQL \uc744 \uc0ac\uc6a9\ud574\ubcf4\uba74\uc11c \ub290\ub080\uc810\uacfc GraphQL \uc744 \uc120\ud638\ud558\ub294 \uc774\uc720\ub97c \uc791\uc131\ud558\ub824\uace0 \ud55c\ub2e4.  \\n\uba3c\uc800 \ub098\uc758 \uc774\uc57c\uae30\ub97c \ud574\ubcf4\uc790\uba74 \uac1c\ubc1c\uc790\ub85c \uc804\uc9c1 \ud6c4 \uccab \uc9c1\uc7a5\uc5d0\uc11c\ub294 GraphQL \uc744 \uc0ac\uc6a9\ud558\ub2e4\uac00 REST \ub97c \uc0ac\uc6a9\ud558\ub294 \uacf3\uc73c\ub85c \uc774\uc9c1\ud558\uc600\ub2e4.  \\nGraphQL \uc0ac\uc6a9 \uacbd\ud5d8\uc774 \uc88b\uc558\uae30\uc5d0 \ub2e4\uc2dc REST \ub97c \ud55c\ub2e4\ub294 \uc810\uc5d0\ub294 \uc544\uc26c\uc6e0\uace0 \uc2e4\uc81c\ub85c \uc5ec\ub7ec \ubd88\ud3b8\ud55c\uc810\uc744 \uacaa\uc5c8\ub2e4.  \\n\uadf8\ub54c\ub9c8\ub2e4 GraphQL \uc744 \uc0ac\uc6a9\ud588\ub2e4\uba74 \uc5b4\ub5bb\uac8c \ubd88\ud3b8\ud55c\uc810\uc774 \ud574\uacb0\ub418\uc5c8\uc744\uae4c \uc0dd\uac01\ud558\uace4 \ud588\uc5c8\uace0 \uc774\ubc88\uc5d0 \uadf8 \ub0b4\uc6a9\uc744 \uc801\uc5b4\ubcf4\ub824\uace0 \ud55c\ub2e4.\\n\\n> \uae30\uc220\uc5d0 \ub300\ud55c \uc120\ud638\ub294 \uc0ac\ub78c\ub9c8\ub2e4 \ub2e4\ub974\uae30\uc5d0 \uc774\ubc88 \uae00\uc744 \uc8fc\uad00\uc801\uc778 \ub0b4\uc6a9\uc744 \ub2f4\uace0\uc788\uc2b5\ub2c8\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n### API Spec \uc815\ud558\uae30\\n\\n\ubcf4\ud1b5 REST \ud658\uacbd\uc5d0\uc11c\ub294 \uc5b4\ub5a4 \ub3d9\uc791\uc744 \uc218\ud589\ud558\uac70\ub098 \ub370\uc774\ud130\ub97c \uc694\uccad\ud558\ub824\uba74 \ub2e4\uc74c \ud56d\ubaa9\uc5d0 \ub300\ud55c \uc124\uacc4\uac00 \ud544\uc694\ud558\ub2e4.\\n\\n- HTTP method\\n- path\\n- body \ub610\ub294 querystring \ud615\ud0dc\\n\\n\uacbd\ud5d8\uc0c1 \ub2e4\uc74c\uacfc \uac19\uc740 \uc0c1\ud669\uc5d0\uc11c \uac1c\ubc1c\uc790\ub9c8\ub2e4 \uc11c\ub85c \ub2e4\ub978 \uc0dd\uac01\uc744 \uac00\uc9c0\ub294 \uacbd\uc6b0\uac00 \ub9ce\uc558\ub2e4.\\n\\n- \uc5b8\uc81c PATCH \ub97c \uc0ac\uc6a9\ud558\uace0 PUT \uc744 \uc0ac\uc6a9\ud560\uc9c0\\n- resource \ud45c\ud604\uc744 \ub2e8\uc218\ub85c \ud560\uc9c0 \ubcf5\uc218\ub85c \ud560\uc9c0\\n- id \uc5d0 \ub300\ud55c \uac12\uc744 path, querystring, body \uc911 \uc5b4\ub514\uc5d0 \ub123\uc744\uc9c0\\n\\n\ubb3c\ub860 \uac80\uc0c9\ud574\ubcf4\uba74 \uc5ec\ub7ec \uac00\uc774\ub4dc \ubb38\uc11c\uac00 \uc874\uc7ac\ud558\uc9c0\ub9cc \uc774\ub294 \ub9d0 \uadf8\ub300\ub85c \uac00\uc774\ub4dc\uc77c\ubfd0 \uc9c0\ucf1c\uc57c \ud560 \uac15\uc81c\uc131\uc774 \uc5c6\ub2e4.  \\n\ud558\uc9c0\ub9cc GraphQL \uc5d0\uc11c\ub294 \uc704\uc640\uac19\uc740 \uc120\ud0dd\uc758 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n\\n- \ubaa8\ub4e0 \uc694\uccad\uc740 GET \ub610\ub294 POST \ub85c \uc774\ub8e8\uc5b4\uc9c4\ub2e4. (\ub300\ubd80\ubd84 POST \ub85c \uc694\uccad\ud558\uba70 FE \uac1c\ubc1c \uc2dc \ub458 \uc911 \uc5b4\ub290\uac83\uc744 \uc120\ud0dd\ud574\uc57c \ud558\ub294\uc9c0 \uc2e0\uacbd\uc4f0\uc9c0 \uc54a\uace0 \ucf54\ub4dc\ub97c \uc791\uc131\ud55c\ub2e4)\\n- path \ub3c4 \ub2e8\uc77c endpoint \ub85c \uc774\ub8e8\uc5b4\uc9c4\ub2e4. (\ubcf4\ud1b5 /graphql)\\n- \ubaa8\ub4e0 parameter \ub370\uc774\ud130\ub294 body \uc5d0 \ub4e4\uc5b4\uac04\ub2e4.\\n- \uc870\ud68c API \ub294 `Query` \ud544\ub4dc \uc544\ub798\uc5d0 \uc218\uc815 API \ub294 `Mutation` \ud544\ub4dc \uc544\ub798\uc5d0 \ub4e4\uc5b4\uac04\ub2e4.\\n\\n\ubb3c\ub860 GraphQL \uc5d0\uc11c\ub3c4 \ud544\ub4dc\uba85\uc744 \uc5b4\ub5bb\uac8c \uac00\uc838\uac00\uc57c \ud560\uc9c0\uc5d0 \ub300\ud55c \ub17c\uc758\uac00 \ud544\uc694\ud558\uc9c0\ub9cc REST \uc5d0 \ube44\ud574\uc11c \uc120\ud0dd\ud574\uc57c \ud558\ub294 \uac00\uc9d3\uc218\uac00 \ud6e8\uc52c \uc801\ub2e4.  \\n\ud2b9\ud788 \ud544\ub4dc\uba85\uc758 \uacbd\uc6b0 FE \uc5d0\uc11c \ub2e4\ub978 \uc774\ub984\uc73c\ub85c \ubc14\uafb8\uae38 \uc6d0\ud558\ub294 \uacbd\uc6b0 GraphQL \uc5d0\uc11c\ub294 BE \uc758 \uc791\uc5c5\uc5c6\uc774 alias \ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.\\n\\n```graphql\\nquery getPosts {\\n  # posts \ub300\uc2e0 myPosts \ub85c \ubcc0\uacbd\\n  myPosts: posts(id: 1) {\\n    postId: id # id \ub300\uc2e0 postId \ub85c \ubcc0\uacbd\\n    createdAt\\n  }\\n}\\n```\\n\\n### \ubb38\uc11c\ud654\\n\\n\ucc98\uc74c \uc815\ud55c API \uc2a4\ud329\uc740 \uac1c\ubc1c\uc911\uc5d0 \uc5b8\uc81c\ub4e0 \ubcc0\uacbd\ub420 \uac00\ub2a5\uc131\uc774 \uc874\uc7ac\ud558\uba70 \uc6b4\uc601 \ubc30\ud3ec \uc774\ud6c4\uc5d0\ub3c4 \uc0c8\ub85c\uc6b4 \uc694\uad6c\uc0ac\ud56d\uc73c\ub85c \uc778\ud574 \ubcc0\uacbd\ub420 \uc218 \uc788\ub2e4.  \\nAPI \uba85\uc138\uc11c\ub97c \ubb38\uc11c\ub85c \uad00\ub9ac\ud558\ub294 \uacbd\uc6b0 \ubaa8\ub4e0 \ubb38\uc11c\uac00 \uadf8\ub807\ub4ef \uc2dc\uac04\uc774 \uc9c0\ub098\uba74 \ucd5c\uc2e0\ud654\uac00 \uc81c\ub300\ub85c \ub418\uc9c0\uc54a\ub294 \ud604\uc0c1\uc774 \ubc1c\uc0dd\ud55c\ub2e4.  \\n\ud2b9\ud788 BE \uc5d0\uc11c \ubcc0\uacbd\ud55c \uc0ac\ud56d\uc744 FE \uc5d0\uac8c \uc804\ub2ec\ud558\ub294 \uac83\uc744 \ube60\ud2b8\ub9b0 \uacbd\uc6b0 \uc774\ub97c \uc54c\uc544\ucc28\ub9ac\ub294 \uc2dc\uae30\uac00 QA \ub098 \uc2ec\uac01\ud55c \uacbd\uc6b0 \uc6b4\uc601 \ubc30\ud3ec \uc774\ud6c4\uac00 \ub420 \uc218 \uc788\ub2e4.\\n\\nGraphQL \uc740 API \uc2a4\ud329\uc744 \ud558\ub098\uc758 schema \ud30c\uc77c\ub85c \uc720\uc9c0\ud558\uace0 \uc2a4\ud329\uc774 \ubcc0\uacbd\ub418\uba74 \ud574\ub2f9 \ud30c\uc77c\uc740 \uc790\ub3d9\uc73c\ub85c \ub3d9\uae30\ud654\uac00 \uc774\ub8e8\uc5b4\uc9c0\uae30\uc5d0 \ucd5c\uc2e0\ud654\uc758 \ubb38\uc81c\uc5d0\uc11c \uc790\uc720\ub86d\ub2e4.  \\n\ud2b9\ud788 [graphql-code-generator](https://www.graphql-code-generator.com/) \ub97c \ud65c\uc6a9\ud558\uba74 FE \uc5d0\uc11c schema \uc758 \ubcc0\uacbd\uc774 \uae30\uc874 \uc791\uc131\ud55c \ucf54\ub4dc\uc5d0 \uc601\ud5a5\uc744 \uc8fc\ub294\uc9c0 \uac80\uc99d\ud560 \uc218 \uc788\uae30\uc5d0 \ub354 \uc548\uc804\ud55c \uac1c\ubc1c\uc774 \uac00\ub2a5\ud558\ub2e4.\\n\\nGraphQL \uc2a4\ud0a4\ub9c8\uc5d0\ub294 \uc8fc\uc11d\uc744 \ub123\uc744 \uc218 \uc788\uace0 `@depreacted` \uac19\uc740 directive \ub97c \ud1b5\ud574 \ud2b9\uc815 \ud544\ub4dc\uc5d0 \ub300\ud55c \uc124\uba85\uc744 \ub123\uac70\ub098 \ud3d0\uae30\uc5ec\ubd80\ub97c \ud45c\uc2dc\ud560 \uc218 \uc788\ub2e4.  \\n\uc774\ub294 API \uba85\uc138\ub97c \uac1c\ubc1c\uc790\uac00 IDE \ub0b4\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uac8c \ub9cc\ub4e4\uc5b4\uc900\ub2e4.  \\n\uc608\ub97c\ub4e4\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 schema \uac00 \uc788\ub2e4\uace0 \uac00\uc815\ud574\ubcf4\uc790.\\n\\n```graphql\\n\\"\\"\\"\\n\uc5ec\uae30\uc5d0 \uc8fc\uc11d\\n\\"\\"\\"\\ntype User {\\n  id: ID!\\n  username: String!\\n  email: String! @deprecated(reason: \\"Use `socialEmail`.\\") # deprecated \ud45c\uc2dc\\n  socialEmail: String!\\n}\\n```\\n\\ngenerate \ud6c4\uc5d0\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ud0c0\uc785\uc744 \ub9cc\ub4e4\uc5b4\uc8fc\uba70 IDE \uc5d0\uc11c `User` \ud544\ub4dc\uc5d0 \ub300\ud55c \uc124\uba85\uc744 \ubcfc \uc218 \uc788\uace0 `email` \ud544\ub4dc \uc0ac\uc6a9 \uc2dc \ucde8\uc18c\uc120\uc73c\ub85c \ud45c\uc2dc\ud574\uc900\ub2e4.\\n\\n```ts\\n/** \uc5ec\uae30\uc5d0 \uc8fc\uc11d */\\nexport type User = {\\n  __typename?: \\"User\\";\\n  id: Scalars[\\"ID\\"];\\n  username: Scalars[\\"String\\"];\\n  /** @deprecated Use `socialEmail`. */\\n  email: Scalars[\\"String\\"];\\n  socialEmail: Scalars[\\"String\\"];\\n};\\n```\\n\\n### Type safe\\n\\n\uc704\uc5d0\uc11c \uc18c\uac1c\ud55c `graphql-code-generator` \ub97c \ud65c\uc6a9\ud558\uba74 FE \uc5d0\uc11c TypeScript \ud658\uacbd\uc5d0\uc11c \uac1c\ubc1c \uc2dc API \uc2a4\ud329\uc5d0 \ub300\ud55c \ud0c0\uc785 \uc120\uc5b8\uacfc \uc11c\ubc84\ub85c \uc694\uccad \uc2dc \ud544\uc694\ud55c \ud30c\ub77c\ubbf8\ud130\ub4e4\uc5d0 \ub300\ud55c \uc120\uc5b8\uc744 \uc790\ub3d9 \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.  \\n\uc774\ub294 API \uc640 \ud0c0\uc785 \uc120\uc5b8\uac04\uc758 \ub3d9\uae30\ud654 \uc791\uc5c5\uac19\uc740 \ub2e8\uc21c\ud55c \uc791\uc5c5\uc740 \ucef4\ud4e8\ud130\uc5d0\uac8c \ub9e1\uae30\uace0 \uc624\uc9c1 \ub85c\uc9c1\uad6c\ud604\uc5d0\ub9cc \uc9d1\uc911\ud560 \uc218 \uc788\uac8c \ub9cc\ub4e4\uc5b4\uc900\ub2e4.  \\n\ub610\ud55c Enum \ud0c0\uc785\uc744 \uc9c0\uc6d0\ud558\uae30\uc5d0 \uc5b4\ub5a4 \uc5f4\uac70\ud615 \uac12\uc744 string \uc73c\ub85c \uc120\uc5b8\ud574\uc11c \uc0ac\uc6a9\ud558\ub294 \uac83\ubcf4\ub2e4 \ub9ac\ud329\ud1a0\ub9c1\uc774 \ud3b8\ud558\uace0 \uc0ac\uc6a9\ud558\ub294 \uacf3 \ucd94\uc801\uc774 \uc6a9\uc774\ud558\ub2e4.  \\nBE \uc5d0\uc11c\ub294 \uc694\uccad\uac12\uc758 \uac80\uc99d\ub85c\uc9c1\uc744 \uc791\uc131\ud560 \ub54c \ud0c0\uc785\uc5d0 \ub300\ud574\uc11c\ub294 \uc2e0\uacbd\uc4f0\uc9c0 \uc54a\uc544\ub3c4 \ub418\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.  \\n\uc608\ub97c\ub4e4\uc5b4 `class-transformer` \ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 `@IsString`, `@IsInt` \uac19\uc740 \ud0c0\uc785\uac80\uc99d \ub370\ucf54\ub808\uc774\ud130\ub294 \ub123\uc5b4\uc904 \ud544\uc694\uac00 \uc5c6\uc73c\uba70 null \ud655\uc778 \ub610\ud55c \ud0c0\uc785 \uc790\uccb4\ub97c required \ub85c \uc120\uc5b8\ub9cc \ud558\uba74 \ub41c\ub2e4.\\n\\n```ts\\n@ObjectType()\\nexport class Author {\\n  @Field((type) => Int) // Int \ud0c0\uc785\uc774\uba70 required\\n  id: number;\\n\\n  @Field({ nullable: true }) // string \ud0c0\uc785\uc774\uba70 nullable\\n  name?: string;\\n}\\n```\\n\\n\uc774\ub294 \ud0c0\uc785\uac80\uc99d\uc5d0 \ub300\ud55c \ub85c\uc9c1\uc740 graphql \uc11c\ubc84\uc5d0\uac8c \uc704\uc784\ud558\uace0 \ud14c\uc2a4\ud2b8 \ucf54\ub4dc \uc791\uc131\uc2dc \uc785\ub825\uac12 \uac80\uc99d\uc5d0 \ub300\ud574\uc11c REST \ubcf4\ub2e4 \ub354 \uc801\uc740 \ucf00\uc774\uc2a4\ub9cc \uace0\ub824\ud574 \uc791\uc131\ud574\ub3c4 \ub41c\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4.  \\nGraphQL \uc740 \uc785\ub825\uac12 \ubfd0\ub9cc \uc544\ub2c8\ub77c \uc751\ub2f5\uac12\ub3c4 \uac80\uc99d\uc744 \ud558\ub294\ub370 \uc608\ub97c\ub4e4\uc5b4 `String` \ud0c0\uc785\uc73c\ub85c \uc120\uc5b8\ub41c \ud544\ub4dc\uac00 \ub7f0\ud0c0\uc784\uc5d0\uc11c `null` \uc774\ub098 `number` \ub97c \ubc18\ud658\ud558\ub294 \uacbd\uc6b0 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud55c\ub2e4.\\n\\n```ts\\n@ObjectType()\\nexport class Response {\\n  @Field()\\n  get name(): string {\\n    return 123 as any; // error\\n  }\\n}\\n```\\n\\n\ubc18\uba74 REST \uc5d0\uc11c\ub294 \ub7f0\ud0c0\uc784\uc5d0\uc11c \uc804\ud600 \ub2e4\ub978 \ud0c0\uc785\uc744 \ubc18\ud658\ud574\ub3c4 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4.  \\n\uc120\uc5b8\ub41c \ud0c0\uc785\uacfc \ub2e4\ub978 \ud0c0\uc785\uc744 \ubc18\ud658\ud558\ub294 \uacbd\uc6b0\uac00 \ub9ce\uc774 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\uc9c0\ub9cc not null \ub85c \uae30\ub300\ud558\ub294 \ud544\ub4dc\uac00 \ub7f0\ud0c0\uc784\uc5d0\uc11c null \ub85c \uc624\ub294 \uacbd\uc6b0\ub294 \uc790\uc8fc \ubc1c\uc0dd\ud55c\ub2e4.  \\nGraphQL \uc5d0\uc11c\ub294 not null \ub85c \uc120\uc5b8\ub41c \ud0c0\uc785\uc740 \ub7f0\ud0c0\uc784\uc5d0\uc11c\ub3c4 \uc808\ub300 null \ub85c \uc624\uc9c0 \uc54a\uc74c\uc744 \ubcf4\uc7a5\ud558\ubbc0\ub85c FE \ub294 API \uc2a4\ud329\uc744 \ubbff\uace0 \ub85c\uc9c1\uc744 \uc791\uc131\ud560 \uc218 \uc788\ub2e4.\\n\\n### Versioning\\n\\nREST \uc5d0\uc11c\ub294 \ubc84\uc804\uc774 \ud06c\uac8c \ubc14\ub00c\ub294 \uacbd\uc6b0\uc5d0 \ub300\ube44\ud574 \uc8fc\ub85c path \uc5d0 \ubc84\uc804\uc815\ubcf4\ub97c \ub123\uc5b4 \ud558\uc704 \ud638\ud658\uc131\uc744 \ub300\uc751\ud55c\ub2e4.  \\n\uc0c8\ub85c\uc6b4 \ubc84\uc804\uc744 \ub9cc\ub4dc\ub294 \uacbd\uc6b0 \uae30\uc874 \ubc84\uc804\uc758 \ud30c\uc77c\uc744 \ubcf5\uc0ac\ud574 \uc218\uc815\ud558\uac8c \ub418\uace0 \uc0c1\ud669\uc5d0 \ub530\ub77c \ub9ce\uc740 \ucf54\ub4dc\ub97c \uc911\ubcf5\uc73c\ub85c \uc0dd\uc131\ud558\uac8c \ub41c\ub2e4.  \\n\uc2dc\uac04\uc774 \uc9c0\ub098 \uae30\uc874 \ubc84\uc804\uc744 \ub354\uc774\uc0c1 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uc0c1\ud669\uc774 \uc640\ub3c4 \uae30\uc874 \ucf54\ub4dc\ub97c \uc0ad\uc81c\ud558\ub294 \uac83\uc744 \uae5c\ubc15\ud558\ub294 \uacbd\uc6b0\uac00 \ub9ce\uace0 \uc8fd\uc740 \ucf54\ub4dc\ub85c \ub0a8\uac8c\ub418\ub294 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\uac8c \ub41c\ub2e4.  \\nGraphQL \uc740 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc694\uccad\ud558\ub294 \ud544\ub4dc\uc5d0 \ub300\ud574\uc11c\ub9cc \uc751\ub2f5\uc744 \ub0b4\ub824\uc8fc\ub294 \ubc29\uc2dd\uc774\ubbc0\ub85c \ubc84\uc800\ub2dd\uc5d0 \ub300\ud55c \ud544\uc694\uac00 \ud06c\uac8c \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4.\\nBE \uc5d0\uc11c\ub294 \uae30\uc874 \ud544\ub4dc\uc5d0 deprecated \ud45c\uc2dc\ub97c \ud558\uace0 \uc0c8\ub85c\uc6b4 \ud544\ub4dc\ub9cc \ucd94\uac00\ud558\uba74 \ub418\uba70 FE \uc5d0\uc11c\ub294 \uc694\uccad body \uc5d0 \uae30\uc874 \ud544\ub4dc\ub294 \uc9c0\uc6b0\uace0 \uc0c8\ub85c\uc6b4 \ud544\ub4dc\ub9cc \uc9c0\uc815\ud558\uba74 \ub41c\ub2e4.  \\n\uae30\uc874 \ud544\ub4dc\uba85\uc744 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud558\uace0 \uc2f6\ub2e4\uba74 alias \ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\\n### \ub2e8\uc810\\n\\nGraphQL \uc740 \ub300\ubd80\ubd84\uc758 \uacbd\uc6b0 REST \ubcf4\ub2e4 \uc7a5\uc810\uc774 \uc788\uc9c0\ub9cc \uc544\ub798\uc640 \uac19\uc740 \ub2e8\uc810\ub3c4 \uc874\uc7ac\ud55c\ub2e4.\\n\\n#### \ubaa8\ub2c8\ud130\ub9c1\\n\\n\ubaa8\ub4e0 api \uac00 \ud558\ub098\uc758 endpoint \ub97c \uac00\uc9c0\ub294 \uc0c1\ud669\uc774 \ubaa8\ub2c8\ud130\ub9c1 \uad00\uc810\uc5d0\uc11c\ub294 \ub2e8\uc810\uc774 \ub420 \uc218 \uc788\ub2e4.  \\napi \ub97c \uad6c\ubd84\ud558\ub824\uba74 body \ub97c \ud65c\uc6a9\ud574\uc57c \ud558\uba70 \ud68c\uc0ac\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 APM \uc194\ub8e8\uc158\uc774 GraphQL \uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294\ub2e4\uba74 \ubb38\uc81c\uac00 \ub420 \uc218 \uc788\ub2e4.  \\n\ub2e4\ub9cc `apollo server` \ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 `apollo studio` \ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\uace0 `Datadog` \uc640 \uc5f0\ub3d9\ub3c4 \uac00\ub2a5\ud558\ub2e4.\\n\\n#### \ud30c\uc77c \uc5c5\ub85c\ub4dc\\n\\n\uacf5\uc2dd\uc801\uc778 \ud30c\uc77c \uc5c5\ub85c\ub4dc\uc5d0 \ub300\ud55c \uc2a4\ud329\uc774 \uc5c6\uc5b4 \uc9c1\uc811 multipart form \uc9c0\uc6d0\uc744 \uad6c\ud604\ud558\uac70\ub098 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4.  \\nnode.js \uc5d0\uc11c\ub294 `graphql-upload` \uac00 \ub9ce\uc774 \uc0ac\uc6a9\ub418\uace0 \ubb38\uc11c\ub3c4 \ub9ce\uc544\uc11c \ud070 \ubb38\uc81c\uac00 \uc5c6\uc9c0\ub9cc \ub2e4\ub978 \uc5b8\uc5b4\uc5d0\uc11c\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \uc5c6\ub294 \uacbd\uc6b0\uac00 \uc788\ub2e4.  \\n\ucd5c\uadfc [graphql-kotlin](https://github.com/ExpediaGroup/graphql-kotlin) \uc73c\ub85c \ud30c\uc77c \uc5c5\ub85c\ub4dc\ub97c \uad6c\ud604\ud574\uc57c \ud558\ub294 \uc0c1\ud669\uc774 \uc788\uc5c8\ub294\ub370 \ubb38\uc11c\uac00 \uc5c6\uc5b4 \uc5c5\ub85c\ub4dc\ub9cc REST API \ub85c \uad6c\ud604\ud558\uc600\ub2e4.\\n\\n### \ub9c8\ubb34\ub9ac\\n\\n\uac1c\uc778\uc801\uc73c\ub85c typesafe \ud55c \uac1c\ubc1c\uc744 \uc120\ud638\ud558\uae30\uc5d0 GraphQL \uc744 \uc0ac\uc6a9\ud558\ub2e4\uac00 REST API \ub97c \uc4f0\ub294 \uacbd\ud5d8\uc774 \ub9c8\uce58 TypeScript \ub97c \uc0ac\uc6a9\ud558\ub2e4\uac00 \ub2e4\uc2dc JavaScript \ub85c \ub3cc\uc544\uac00\ub294 \ub290\ub08c\uc744 \ubc1b\uc558\ub2e4."},{"id":"2022/02/16/MikroORM\uacfc-TypeORM-\ube44\uad50","metadata":{"permalink":"/2022/02/16/MikroORM\uacfc-TypeORM-\ube44\uad50","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-02-16-mikroorm-vs-typeorm/index.mdx","source":"@site/blog/2022-02-16-mikroorm-vs-typeorm/index.mdx","title":"MikroORM\uacfc TypeORM \ube44\uad50","description":"\uc774\ubc88 \uae00\uc740 ts \ud658\uacbd\uc5d0\uc11c \uc8fc\ub85c \uc0ac\uc6a9\ub418\ub294 ORM \uc778 TypeORM \ub97c \uc0ac\uc6a9\ud558\uba74\uc11c \ubc1c\uc0dd\ud55c \ubb38\uc81c\uc810\uc744 \uc18c\uac1c\ud558\uace0 \ub610 \ub2e4\ub978 ORM \uc778 MikroORM \uc5d0\uc11c \uc5b4\ub5bb\uac8c \ud574\uacb0\ud558\uace0 \uc788\ub294\uc9c0\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc744 \ub2f4\uace0\uc788\ub2e4.","date":"2022-02-16T00:00:00.000Z","formattedDate":"2022\ub144 2\uc6d4 16\uc77c","tags":[{"label":"mikroorm","permalink":"/tags/mikroorm"},{"label":"typeorm","permalink":"/tags/typeorm"}],"readingTime":26.62,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"MikroORM\uacfc TypeORM \ube44\uad50","slug":"2022/02/16/MikroORM\uacfc-TypeORM-\ube44\uad50","authors":"jake","tags":["mikroorm","typeorm"]},"prevItem":{"title":"graphql \uc7a5\uc810","permalink":"/2022/03/27/graphql-\uc7a5\uc810"},"nextItem":{"title":"Kotlin\uc73c\ub85c \uc9c0\uc5f0\ud3c9\uac00 \uad6c\ud604\ud558\uae30","permalink":"/2022/01/30/Kotlin\uc73c\ub85c-\uc9c0\uc5f0\ud3c9\uac00-\uad6c\ud604\ud558\uae30"}},"content":"import Tabs from \\"@theme/Tabs\\";\\nimport TabItem from \\"@theme/TabItem\\";\\n\\n\uc774\ubc88 \uae00\uc740 ts \ud658\uacbd\uc5d0\uc11c \uc8fc\ub85c \uc0ac\uc6a9\ub418\ub294 ORM \uc778 `TypeORM` \ub97c \uc0ac\uc6a9\ud558\uba74\uc11c \ubc1c\uc0dd\ud55c \ubb38\uc81c\uc810\uc744 \uc18c\uac1c\ud558\uace0 \ub610 \ub2e4\ub978 ORM \uc778 `MikroORM` \uc5d0\uc11c \uc5b4\ub5bb\uac8c \ud574\uacb0\ud558\uace0 \uc788\ub294\uc9c0\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc744 \ub2f4\uace0\uc788\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## TypeORM\\n\\nTypeORM \uc740 `JavaScript` \uc640 `TypeScript` \ud658\uacbd\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 ORM (Object\u2013relational mapping) \uc774\ub2e4.  \\n\uc8fc\ub85c ts \uc9c4\uc601\uc5d0\uc11c \ub9ce\uc774 \uc0ac\uc6a9\ud558\uba70 `Active Record` \uc640 `Data Mapper` \ud328\ud134\uc744 \uc9c0\uc6d0\ud55c\ub2e4.\\n\\n\ucc98\uc74c \uc774 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ubc1c\uacac\ud588\uc744 \ub54c\uc5d0\ub294 \uad49\uc7a5\ud788 \ub9c8\uc74c\uc5d0 \ub4e4\uc5c8\uc9c0\ub9cc \uc2e4\ubb34\uc5d0\uc11c \uacc4\uc18d \uc0ac\uc6a9\ud574\ubcf4\ub2c8 \uc774\ub984\uc5d0 \ube44\ud574 \uc0dd\uac01\ub9cc\ud07c typesafe \ud558\uc9c0 \uc54a\ub2e4\uace0 \ub290\uaf08\uc73c\uba70 \uc5ec\ub7ec \uc774\uc288\ub97c \uc790\uc8fc \uacaa\uc5c8\ub2e4.  \\n\ud2b9\ud788 \uc774 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc544\uc9c1\ub3c4 \uccab major \ubc84\uc804\uc774 \ub098\uc624\uc9c0 \uc54a\uc558\uc744 \uc815\ub3c4\ub85c \uc5c5\ub370\uc774\ud2b8\uac00 \ub354\ub518 \uc0c1\ud669\uc774\ub2e4.  \\n\ud558\uc9c0\ub9cc `TypeORM` \uc678\uc5d0 \ub354 \ub098\uc740 \ub300\uc548\uc774 \uc5c6\ub294 \uc0c1\ud669\uc774\ub77c \uacc4\uc18d \uc0ac\uc6a9\ud558\uace0 \uc788\uc5c8\ub2e4.\\n\\n## MikroORM\\n\\n`MikroORM` \uc740 \uc624\ub79c\uae30\uac04 PHP \uac1c\ubc1c\uc790\uc600\ub358 [Martin Ad\xe1mek](https://github.com/B4nan) \uac00 Node.js \ub85c \ub118\uc5b4\uc624\uba74\uc11c \ub9cc\ub4e0 ORM \ub77c\uc774\ube0c\ub7ec\ub9ac\ub2e4.  \\n\ub118\uc5b4\uc624\uba74\uc11c `TypeORM` \uc744 \uc368\ubd24\ub294\ub370 \uc2e4\ub9dd\uc744 \ub290\uaef4 \uc9c1\uc811 \ub9cc\ub4e4\uc5c8\ub2e4\uace0 \ud55c\ub2e4.\\n\\n> \uc774\uc640 \uad00\ub828\ub41c \uae00\uc740 [\ub9c1\ud06c](https://medium.com/dailyjs/introducing-mikro-orm-typescript-data-mapper-orm-with-identity-map-9ba58d049e02) \uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n`MikroORM` \uc740 `Data Mapper`, `Unit of Work` \uc640 `Identity Map` \ud328\ud134\uc744 \uc9c0\uc6d0\ud55c\ub2e4.  \\n\uacf5\uc2dd\ubb38\uc11c\ub97c \uc0b4\ud3b4\ubcf4\uace0 \uc9c1\uc811 \uc608\uc81c\ub97c \ub9cc\ub4e4\uc5b4 \ubcf4\uba74\uc11c \ub290\ub080\uc810\uc740 `TypeORM` \uc5d0\uc11c \uc81c\ub300\ub85c \ub3d9\uc791\ud558\uc9c0 \uc54a\uc558\ub358 **\ubb38\uc81c\uac00 \uae54\ub054\ud558\uac8c \ud574\uacb0\ub418\uba70 \ud6e8\uc52c typesafe** \ud558\ub2e4\ub294 \uac83\uc774\uc5c8\ub2e4.\\n\\n\uc774\uc81c \ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uae30\ub2a5\uacfc \ud0c0\uc785\uc548\uc815\uc131 \uce21\uba74\uc5d0\uc11c \ube44\uad50\ud574\ubcf4\uc790.\\n\\n:::info\\n\uc774\ud6c4 \ub098\uc624\ub294 \ucf54\ub4dc `Nest.js` \ud658\uacbd\uc5d0\uc11c `Data Mapper` \ud328\ud134\uc744 \uc0ac\uc6a9\ud55c \uc608\uc81c\uc774\uba70 \uc804\uccb4 \ucf54\ub4dc\ub294 [\ub9c1\ud06c](https://github.com/jbl428/study-note/tree/master/nodejs/orm) \ub97c \ucc38\uc870\ud55c\ub2e4.  \\n:::\\n\\n## Entity \uc815\uc758 \ubc29\uc2dd\\n\\n\ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubaa8\ub450 \ud074\ub798\uc2a4\uc640 \ud504\ub85c\ud37c\ud2f0\uc5d0 \ub370\ucf54\ub808\uc774\ud130\ub97c \ucd94\uac00\ud574 \uc5d4\ud2f0\ud2f0\ub97c \uc815\uc758\ud55c\ub2e4.  \\n`MikroORM` \ub294 \ucd94\uac00\ub85c `EntitySchema` \ub77c\ub294 \ubc29\uc2dd\uc744 \uc9c0\uc6d0\ud558\uba70 \uc2a4\ud0a4\ub9c8\ub97c \ud504\ub85c\uadf8\ub798\ubc0d \ud558\ub4ef\uc774 \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4.  \\n\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 \uc8fc\ub85c \uc0ac\uc6a9\ud558\ub294 \ub370\ucf54\ub808\uc774\ud130 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud560 \uac83\uc774\ub2e4.\\n\\n\uceec\ub7fc\uc758 \ud0c0\uc785\uc815\ubcf4\uc640 \ub370\ucf54\ub808\uc774\ud130\uc758 \uba54\ud0c0\ub370\uc774\ud130 \uc815\ubcf4\ub97c \uc5bb\uae30 \uc704\ud574 \ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubaa8\ub450 `reflect-metadata` \ub97c \uc0ac\uc6a9\ud55c\ub2e4.  \\n\ud558\uc9c0\ub9cc `MikroORM` \uc740 `ts-morph` \ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\uc2dd\uc744 \ucd94\uac00\ub85c \uc9c0\uc6d0\ud558\uba70 \uc774\ub97c \uc0ac\uc6a9\ud558\uba74 \uc5d4\ud2f0\ud2f0 \uc120\uc5b8\uc774 \ub354 \uac04\uacb0\ud574\uc9c4\ub2e4.\\n\\n\uc608\uc81c\ub85c \ub9cc\ub4e4 \uc5d4\ud2f0\ud2f0\ub294 `Post` \uc640 `Comment` \ub85c \ud558\ub098\uc758 \ud3ec\uc2a4\ud2b8\uc5d0 \uc5ec\ub7ec \ub313\uae00\uc774 \uc874\uc7ac\ud558\ub294 1:N \uad00\uacc4\uc774\ub2e4.  \\n\uba3c\uc800 `TypeORM` \uc758 \uacbd\uc6b0 \uc544\ub798\uc640 \uac19\uc774 \uc120\uc5b8\ud55c\ub2e4.\\n\\n<Tabs groupId=\\"orm\\">\\n  <TabItem value=\\"post\\" label=\\"post.entity.ts\\" default>\\n\\n```ts\\n@Entity()\\nexport class Post extends BaseEntity {\\n  @Column()\\n  name: string;\\n\\n  @Column()\\n  content: string;\\n\\n  @Column({ type: \\"varchar\\", length: 10, transformer: new PostStatusType() })\\n  status: PostStatus; // \ucee4\uc2a4\ud140 \ud0c0\uc785\\n\\n  @Column({ nullable: true })\\n  memo?: string;\\n\\n  @OneToMany(() => Comment, (comment) => comment.post, {\\n    cascade: [\\"insert\\", \\"update\\"],\\n  })\\n  comments: Comment[];\\n}\\n```\\n\\n  </TabItem>\\n  <TabItem value=\\"comment\\" label=\\"comment.entity.ts\\">\\n\\n```ts\\n@Entity()\\nexport class Comment extends BaseEntity {\\n  @Column()\\n  content: string;\\n\\n  @Column()\\n  like: number;\\n\\n  @Column({ nullable: true })\\n  memo?: string;\\n\\n  @ManyToOne(() => Post, (post) => post.comments, {\\n    createForeignKeyConstraints: false,\\n    nullable: false,\\n  })\\n  @Index(\\"idx_post_id\\")\\n  @JoinColumn({ name: \\"post_id\\", referencedColumnName: \\"id\\" })\\n  post: Post;\\n}\\n```\\n\\n  </TabItem>\\n</Tabs>\\n\\n`MikroORM` \uc740 \ub2e4\uc74c\uacfc \uac19\uc774 \uc120\uc5b8\ud55c\ub2e4.\\n\\n<Tabs groupId=\\"orm\\">\\n  <TabItem value=\\"post\\" label=\\"post.entity.ts\\" default>\\n\\n```ts\\n@Entity()\\nexport class Post extends BaseEntity {\\n  @Property()\\n  name: string;\\n\\n  @Property()\\n  content: string;\\n\\n  @Property({ type: PostStatusType })\\n  status: PostStatus; // \ucee4\uc2a4\ud140 \ud0c0\uc785\\n\\n  @Property()\\n  memo?: string;\\n\\n  @OneToMany(() => Comment, (comment) => comment.post)\\n  comments = new Collection<Comment>(this);\\n}\\n```\\n\\n  </TabItem>\\n  <TabItem value=\\"comment\\" label=\\"comment.entity.ts\\">\\n\\n```ts\\n@Entity()\\nexport class Comment extends BaseEntity {\\n  @Property()\\n  content: string;\\n\\n  @Property()\\n  like: number;\\n\\n  @Property()\\n  memo?: string;\\n\\n  @ManyToOne({ index: true })\\n  post: IdentifiedReference<Post>;\\n}\\n```\\n\\n  </TabItem>\\n</Tabs>\\n\\n\ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \uac04\uc758 \ucc28\uc774\uc810\uc744 \uc0b4\ud3b4\ubcf4\uc790\\n\\n### \ud544\ub4dc\uc758 NULL \uc120\uc5b8\\n\\n\uc6d0\ud558\ub294 \ud544\ub4dc\ub97c `NULL` \ub85c \uc124\uc815\ud558\ub824\uba74 `TypeORM` \uc5d0\uc11c\ub294 \ub370\ucf54\ub808\uc774\ud130\uc5d0 \uc9c1\uc811 `nullable` \uac12\uc744 true \ub85c \uc124\uc815\ud574\uc57c \ud55c\ub2e4.  \\n\ud558\uc9c0\ub9cc `MikroORM` \uc5d0\uc11c\ub294 \ud504\ub85c\ud130\ud2f0 \ud0c0\uc785\uc744 nullable \ub85c \uc120\uc5b8\ud558\uae30\ub9cc \ud558\uba74 \ub41c\ub2e4.  \\n\uc774\ub294 \ub354 \uac04\uacb0\ud560 \ubfd0\ub9cc\uc544\ub2c8\ub77c **ts \ud0c0\uc785\uacfc \uc2e4\uc81c \uceec\ub7fc\uc758 \ud0c0\uc785\uc758 \ub3d9\uc77c\ud568**\uc744 \ubcf4\uc7a5\ud574\uc900\ub2e4.\\n\\n\uc2e4\uc81c\ub85c \uc2e4\ubb34\uc5d0\uc11c \ub370\ucf54\ub808\uc774\ud130\uc5d0\ub294 `nullable` \ub85c \uc120\uc5b8\ud588\uc9c0\ub9cc ts \ud0c0\uc785\uc744 required \ub85c \uc120\uc5b8\ud558\ub294 \uacbd\uc6b0\uac00 \ub9ce\uc558\ub2e4.  \\n\uc774\ub85c\uc778\ud574 `Optional Chaining` \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 \ud504\ub85c\ud130\ud53c\ub97c \ucc38\uc870\ud558\ub2e4\uac00 \ub7f0\ud0c0\uc784 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0\uac00 \ub9ce\uc558\ub2e4.  \\nts \uc758 `strictNullCheck` \uc635\uc158\uc744 \ud65c\uc131\ud654\ud558\uba74 nullable \ud0c0\uc785\uc744 \ucc38\uc870\ud558\uae30 \uc804\uc5d0 null \uccb4\ud06c\ub97c \ud544\uc218\ub85c \ud574\uc57c\ud558\uae30\uc5d0 \ub354 \uc548\uc804\ud55c \uac1c\ubc1c\uc774 \uac00\ub2a5\ud558\ub2e4.\\n\\n### Foreign Key \uc81c\uc57d\uc870\uac74 \ud574\uc81c\\n\\n\ud14c\uc774\ube14 \uc5f0\uad00\uad00\uacc4 \uc124\uc815 \uc2dc `foreign key` \ucd94\uac00\ub97c \uc6d0\ud558\uc9c0 \uc54a\uc744 \ub54c `TypeORM` \uc5d0\uc11c\ub294 \ub9e4\ubc88 \ub370\ucf54\ub808\uc774\ud130\uc5d0 `createForeignKeyConstraints` \uc635\uc158\uc744 \ucd94\uac00\ud574\uc57c \ud55c\ub2e4.  \\n\ud558\uc9c0\ub9cc `MikroORM` \uc5d0\uc11c\ub294 \ub514\ube44 \uad00\ub828 \uc124\uc815\uc5d0\uc11c FK \uc0dd\uc131\uc5ec\ubd80 \uae30\ubcf8\uac12\uc744 \uc124\uc815\ud560 \uc218 \uc788\ub2e4.  \\n\ub2e4\ub9cc \uc2a4\ud0a4\ub9c8 \ub3d9\uae30\ud654 \ubc29\ubc95\uc744 \ub450 \uac00\uc9c0\ub97c \uc9c0\uc6d0\ud558\ub294\ub370 `schemaGenerator` \ubc29\uc2dd\uc740 \ud574\ub2f9 \uc635\uc158\uc774 \uc874\uc7ac\ud558\uc9c0\ub9cc `migration` \ubc29\uc2dd\uc740 \uc9c1\uc811 generator \ub97c \uad6c\ud604\ud574\uc57c \ud55c\ub2e4.\\n\\n```ts\\n// migration \ubc29\uc2dd\uc5d0\uc11c\ub294 \uc9c1\uc811 foreign key \uc0dd\uc131\uc740 \uac74\ub108\ub6f0\ub3c4\ub85d \ub85c\uc9c1\uc744 \uad6c\ud604\ud574\uc57c \ud55c\ub2e4\\nclass CustomMigrationGenerator extends TSMigrationGenerator {\\n  createStatement(sql: string, padLeft: number): string {\\n    if (sql.includes(\\" add constraint \\") || sql.includes(\\" drop constraint \\"))\\n      return \\"\\";\\n\\n    return super.createStatement(sql, padLeft);\\n  }\\n}\\n\\nconst config: MikroOrmModuleOptions = {\\n  // ... \uc0dd\ub7b5\\n  schemaGenerator: {\\n    // highlight-next-line\\n    createForeignKeyConstraints: false, // FK \uc0dd\uc131\ud558\uc9c0 \uc54a\ub3c4\ub85d \uc124\uc815\\n  },\\n  migrations: {\\n    // highlight-next-line\\n    generator: CustomMigrationGenerator, // \ucee4\uc2a4\ud140 generator \uc124\uc815\\n  },\\n};\\n```\\n\\n### Index \uba85\\n\\n:::info\\nTypeORM \uc5d0\uc11c Naming strategy \ub97c \ud1b5\ud574 \uc778\ub371\uc2a4 \uba85\uc744 \ucee4\uc2a4\ud140\ud558\uac8c \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4\ub294\uac8c \ud655\uc778\ub418\uc11c \ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \uac04 \ucc28\uc774\ub294 \uc5c6\ub2e4.\\nhttps://orkhan.gitbook.io/typeorm/docs/naming-strategy\\n:::\\n\\nFK \uc81c\uc57d\uc870\uac74\uc744 \ud574\uc81c\ud558\uba74 \ucc38\uc870 \uceec\ub7fc\uc5d0 index \ub610\ud55c \uc0dd\uc131\ub418\uc9c0 \uc54a\ub294\ub2e4.  \\n\ud558\uc9c0\ub9cc join \uc131\ub2a5\uc744 \uc704\ud574 index \ub294 \ud544\uc694\ud558\ubbc0\ub85c \uc9c1\uc811 \ucd94\uac00\ud574\uc57c \ud55c\ub2e4.  \\n`TypeORM` \uc5d0\uc11c\ub294 `@Index` \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud558\uc9c0\ub9cc `MikroORM` \uc5d0\uc11c\ub294 `@ManyToOne` \ub370\ucf54\ub808\uc774\ud130\uc758 index \uc635\uc158\uc744 \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4.\\n\\n\ub530\ub85c \uc778\ub371\uc2a4\uba85\uc744 \uc9c0\uc815\ud558\uc9c0 \uc54a\uc740\uacbd\uc6b0 `TypeORM` \uc544\ub798 \uc0ac\uc9c4\ucc98\ub7fc \uc54c\uc544\ubcf4\uae30 \ud798\ub4e0 \uc774\ub984\uc73c\ub85c \uc0ac\uc6a9\ud558\uae30\uc5d0 (PK \ub3c4 \ub3d9\uc77c) \uc5d0\ub7ec \ubc1c\uc0dd\uc2dc \ub85c\uadf8\ub97c \ud574\uc11d\ud558\uae30 \uc5b4\ub824\uc6cc\uc9c4\ub2e4.  \\n\ub530\ub77c\uc11c \uc9c1\uc811 \uc778\ub371\uc2a4\uba85\uc744 \uc9c0\uc815\ud574\uc57c \ud55c\ub2e4.\\n\\n![typeorm-index-name](typeorm-index-name.png)\\n\\n\ubc18\uba74 `MikroORM` \uc740 \uc77d\uae30 \uc26c\uc6b4 \uc774\ub984\uc73c\ub85c \uc0dd\uc131\ud558\uae30\uc5d0 \uc9c1\uc811 \uc774\ub984\uc744 \uc9c0\uc815\ud560 \ud544\uc694\uac00 \uc5c6\ub2e4.\\n\\n![mikroorm-index-name](mikroorm-index-name.png)\\n\\n### \uceec\ub7fc\uba85 \uaddc\uce59\\n\\n`TypeORM` \uc740 \uceec\ub7fc\uba85\uc758 \ub124\uc774\ubc0d \uaddc\uce59\uc774 `camelCase` \uc778 \uad00\uacc4\ub85c `snake-case` \uc744 \uc6d0\ud558\ub294 \uacbd\uc6b0 \uc9c1\uc811 \uc774\ub984\uc744 \uc9c0\uc815\ud574\uc8fc\uc5b4\uc57c \ud55c\ub2e4.  \\n\ubb3c\ub860 `namingStrategy` \uc124\uc815\uacfc `typeorm-naming-strategies` \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\uc9c0\ub9cc \uc5f0\uad00\uad00\uacc4 \uceec\ub7fc\uba85\uc5d0\ub294 \uc801\uc6a9\uc774 \uc548\ub418\uae30\uc5d0 \uacb0\uad6d `JoinColumn` \ub370\ucf54\ub808\uc774\ud130\uc5d0 \uc9c1\uc811 \uc9c0\uc815\ud574\uc57c \ud55c\ub2e4.  \\n\ubc18\uba74 `MikroORM` \uc740 \uae30\ubcf8\uac12\uc774 `snake-case` \uc774\uae30\uc5d0 \ub530\ub85c \uc9c0\uc815\ud560 \ud544\uc694\uac00 \uc5c6\ub2e4.\\n\\n## Custom Type\\n\\n\ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub9ac \ubaa8\ub450 \ud544\ub4dc\uc5d0 \uae30\ubcf8 ts \ud0c0\uc785\ub300\uc2e0 \ucee4\uc2a4\ud140 \ud0c0\uc785\uc73c\ub85c \uc120\uc5b8\ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc744 \uc81c\uacf5\ud55c\ub2e4.  \\n`TypeORM` \uc5d0\uc11c\ub294 \ub370\ucf54\ub808\uc774\ud130\uc758 transformer \uc124\uc815\uc774\uba70 `MikroORM` \uc740 type \uc774\ub2e4.  \\n\ucee4\uc2a4\ud140 \ud0c0\uc785\uc744 \uc120\uc5b8\ud558\ub294 \ubc29\ubc95\uc740 \ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubaa8\ub450 \ube44\uc2b7\ud558\uac8c \ud2b9\uc815 interface \ub97c \uad6c\ud604\ud55c \ud074\ub798\uc2a4\ub97c \ub9cc\ub4e4\uba74 \ub41c\ub2e4.\\n\\n\ub0a0\uc9dc \uad00\ub828 \ud544\ub4dc\uc5d0 js date \ub300\uc2e0 `js-joda` \uc758 `LocalDateTime` \uc744 \uc0ac\uc6a9\ud558\uae30 \uc704\ud55c \ucee4\uc2a4\ud140 \ud0c0\uc785 \uad6c\ud604\ubd80\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n<Tabs>\\n  <TabItem value=\\"TypeORM\\" label=\\"TypeORM\\" default>\\n\\n```ts\\nexport class LocalDateTimeType implements ValueTransformer {\\n  to(entityValue: LocalDateTime): Date {\\n    return convert(entityValue).toDate();\\n  }\\n\\n  from(databaseValue: Date): LocalDateTime {\\n    return LocalDateTime.from(nativeJs(databaseValue));\\n  }\\n}\\n```\\n\\n  </TabItem>\\n  <TabItem value=\\"MikroORM\\" label=\\"MikroORM\\">\\n\\n```ts\\nexport class LocalDateTimeType extends Type<LocalDateTime, Date> {\\n  convertToDatabaseValue(\\n    value: LocalDateTime | Date,\\n    platform: Platform\\n  ): Date {\\n    if (value instanceof Date) {\\n      return value;\\n    }\\n\\n    return convert(value).toDate();\\n  }\\n\\n  convertToJSValue(\\n    value: LocalDateTime | Date,\\n    platform: Platform\\n  ): LocalDateTime {\\n    if (value instanceof LocalDateTime) {\\n      return value;\\n    }\\n\\n    if (typeof value === \\"number\\") {\\n      return LocalDateTime.from(nativeJs(new Date(value)));\\n    }\\n\\n    return LocalDateTime.from(nativeJs(value));\\n  }\\n\\n  getColumnType(prop: EntityProperty, platform: Platform) {\\n    return `timestamptz`;\\n  }\\n}\\n```\\n\\n  </TabItem>\\n</Tabs>\\n\\n\ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubaa8\ub450 database \uc640 Node.js \uac04\uc758 \ub370\uc774\ud130 \ucc98\ub9ac\ub85c\uc9c1\uc744 \uba54\uc18c\ub4dc\uc5d0 \uc791\uc131\ud55c\ub2e4.  \\n`TypeORM` \uc758 \uacbd\uc6b0 \ub2e8\uc21c\ud788 from, to \uba54\uc18c\ub4dc\ub9cc \uc81c\uacf5\ud558\uc9c0\ub9cc `MikroORM` \uc740 \ucd94\uac00\ub85c \uc5ec\ub7ec \uc0c1\ud669\uc5d0 \uc0ac\uc6a9\ub418\ub294 \uba54\uc18c\ub4dc\ub97c \uc81c\uacf5\ud55c\ub2e4.\\n\\n> \uc5b4\ub5a4 \uba54\uc18c\ub4dc\ub97c \uc81c\uacf5\ud558\ub294 \uc9c0\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc740 [\ubb38\uc11c](https://mikro-orm.io/docs/custom-types) \ub97c \ucc38\uc870\ud55c\ub2e4.  \\n> \ucd94\uac00\ub85c `MikroORM` \uc5d0\uc11c \uae30\ubcf8\uc73c\ub85c \uc81c\uacf5\ud558\ub294 \ud0c0\uc785\ub3c4 \uc788\ub2e4.\\n\\n#### \uc774\uc288\\n\\n\ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubaa8\ub450 `query builder` \ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \ucee4\uc2a4\ud140 \ud0c0\uc785\uc758 \ubcc0\ud658\ub85c\uc9c1\uc774 \ub3d9\uc791\ud558\uc9c0 \uc54a\ub294 \uc774\uc288\uac00 \uc788\ub2e4.  \\n\ub2e4\uc74c \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n<Tabs>\\n  <TabItem value=\\"TypeORM\\" label=\\"TypeORM\\" default>\\n\\n```ts\\nit(\\"queryBuilder where \uc5d0 string \ud615\ud0dc\ub85c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud55c\ub2e4\\", async () => {\\n  // given\\n  const createdAt = LocalDateTime.of(2022, 2, 1);\\n  const post = PostFactory.make({ createdAt });\\n  await postRepository.save({\\n    ...post,\\n    updatedAt: LocalDateTime.now(),\\n  });\\n\\n  // when\\n  const result = await postRepository\\n    .createQueryBuilder(\\"post\\")\\n    .where(\\"post.createdAt = :createdAt\\", { createdAt })\\n    .getMany();\\n\\n  // then\\n  expect(result).toHaveLength(0);\\n});\\n```\\n\\n  </TabItem>\\n  <TabItem value=\\"MikroORM\\" label=\\"MikroORM\\">\\n\\n```ts\\nit(\\"queryBuilder where \uc5d0 string \ud615\ud0dc\ub85c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \uc870\ud68c\uc5d0 \uc2e4\ud328\ud55c\ub2e4\\", async () => {\\n  // given\\n  const createdAt = LocalDateTime.of(2022, 2, 1);\\n  const post = postFactory.makeOne({ createdAt });\\n  await postEntityRepository.persistAndFlush(post);\\n\\n  // when\\n  const result = await postEntityRepository\\n    .createQueryBuilder(\\"post\\")\\n    .where(\\"post.created_at = ?\\", [createdAt])\\n    .getResult();\\n\\n  // then\\n  expect(result).toHaveLength(0);\\n});\\n```\\n\\n  </TabItem>\\n</Tabs>\\n\\n\ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \ubcf4\uba74 \uba3c\uc800 given \uc808\uc5d0\uc11c \uc784\uc758\uc758 post \ud558\ub098\ub97c insert \ud558\uc600\ub2e4.  \\nwhen \uc5d0\uc11c `query builder` \ub97c \uc0ac\uc6a9\ud574 post \ub97c \uac00\uc838\uc624\ub294\ub370 where \uc808\uc744 \uc0b4\ud3b4\ubcf4\uba74 \ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubaa8\ub450 \uccab \ubc88\uc9f8 \ud30c\ub77c\ubbf8\ud130\uc5d0 \uceec\ub7fc\uba85\uc744 \ubb38\uc790\uc5f4\ub85c \uc9c0\uc815\ud558\uc600\ub2e4.  \\n\uc774\ub807\uac8c \uc9c0\uc815\ud558\uba74 \ub450 \ubc88\uc9f8 \ud30c\ub77c\ubbf8\ud130\ub85c \uc81c\uacf5\ud55c `createdAt` \ubcc0\uc218\uc758 \ud0c0\uc785\uc778 `LocalDateTime` \uc758 \ubcc0\ud658\ub85c\uc9c1\uc774 \uc2e4\ud589\ub418\uc9c0 \uc54a\ub294\ub2e4.\\n\\n\uc2e4\uc81c where \uc808\uc5d0 \uc5b4\ub5a4 \uac12\uc774 \ub4e4\uc5b4\uac14\ub294\uc9c0 \uc0b4\ud3b4\ubcf4\uba74\\n\\n![custom-type-issue](custom-type-issue.png)\\n\\n`createdAt` \ud544\ub4dc\uc758 \ud0c0\uc785\uc740 `timestamptz` \uc778\ub370 \uc704\uc640 \uac19\uc774 \ud0c0\uc784\uc874 \uac12\uc774 \uc5c6\ub294 \ub370\uc774\ud130\ub85c \uc870\ud68c\ud558\uba74 database \uc758 \ud0c0\uc784\uc874 \uc124\uc815\uc5d0 \ub530\ub77c \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud558\uc9c0 \uc54a\uc744 \uc218 \uc788\ub2e4.  \\n\uc704\uc640 \uac19\uc740 \uc0c1\ud669\uc5d0\uc11c\ub294 \ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubaa8\ub450 \ubcc0\ud658\ub85c\uc9c1 \ub300\uc2e0 `LocalDateTime` \uc758 `toJSON` \uba54\uc18c\ub4dc\uac00 \uc2e4\ud589\ub418\uba70 \ud574\ub2f9 \uba54\uc18c\ub4dc\ub294 \ud0c0\uc784\uc874 \uac12\uc744 \uc81c\uac70\ud55c \uacb0\uacfc\ub97c \uc81c\uacf5\ud55c\ub2e4.\\n\\n```ts\\nconst date = LocalDateTime.of(2022, 2, 1);\\nconsole.log(date.toJSON()); // 2022-02-01T00:00\\n```\\n\\n\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \uc9c1\uc811 `toJSON` \uba54\uc18c\ub4dc\ub97c override \ud558\uba74\ub41c\ub2e4.\\n\\n```ts\\n// highlight-start\\n// toJSON override\\nLocalDateTime.prototype.toJSON = function () {\\n  return convert(this).toDate().toISOString();\\n};\\n// highlight-end\\n\\n... \uc0dd\ub7b5\\n\\n// when\\nconst result = await postRepository\\n  .createQueryBuilder(\'post\')\\n  .where(\'post.createdAt = :createdAt\', { createdAt })\\n  .getMany();\\n\\n// then\\nexpect(result).toHaveLength(1); // \uc870\ud68c \uc131\uacf5\\n```\\n\\n![custom-type-issue-solve](custom-type-issue-solve.png)\\n\\n\uc544\ub2c8\uba74 \ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubaa8\ub450 where \uc808\uc5d0 \ubb38\uc790\uc5f4 \ub300\uc2e0 json \uc744 \ud65c\uc6a9\ud574 \uceec\ub7fc\uc744 \uc9c0\uc815\ud558\uba74 \uc815\uc0c1\uc801\uc73c\ub85c \ubcc0\ud658\ub85c\uc9c1\uc774 \uc2e4\ud589\ub41c\ub2e4.\\n\\n```ts\\nconst result = await postRepository\\n  .createQueryBuilder(\\"post\\")\\n  .where({ createdAt })\\n  .getMany();\\n```\\n\\n\ucd94\uac00\ub85c `MikroORM` \uc740 where \uc808\uc5d0\uc11c \uc5d4\ud2f0\ud2f0 \ud544\ub4dc\uba85\uc5d0 \ub300\ud55c intellisense \ub97c \uc9c0\uc6d0\ud55c\ub2e4.  \\n\uc798\ubabb\ub41c \ud544\ub4dc\uba85\uc744 \uc9c0\uc815\ud55c \uacbd\uc6b0 \ud0c0\uc785 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\uc810\uc740 \uc544\uc27d\uc9c0\ub9cc \uc624\ud0c0\ub97c \uc791\uc131\ud560 \ud655\ub960\uc744 \ub0ae\ucdb0\uc8fc\uae30 \ub54c\ubb38\uc5d0 \uc720\uc6a9\ud558\ub2e4.\\n\\n![where-hint](where-hint.png)\\n\\n## QueryBuilder \ub85c \ud2b9\uc815 \ud544\ub4dc select\\n\\n\ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubaa8\ub450 `select` \uba54\uc18c\ub4dc\ub97c \ud1b5\ud574 \uc6d0\ud558\ub294 \ud544\ub4dc\ub9cc \uc9c0\uc815\ud574\uc11c \uac00\uc838\uc62c \uc218 \uc788\ub2e4.  \\n\ud558\uc9c0\ub9cc `TypeORM` \uc5d0\uc11c\ub294 \uc5f0\uad00\uad00\uacc4 \ud544\ub4dc select \uc5d0 \ub300\ud55c \uc774\uc288\uac00 \uc788\ub2e4.\\n\\n\ub2e4\uc74c \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n```ts\\nconst result = await commentRepository\\n  .createQueryBuilder(\\"comment\\")\\n  .select([\\"comment.id\\", \\"comment.post.id\\"])\\n  .where({ post: { id: post.id } })\\n  .getOneOrFail();\\n\\nconsole.log(result); // Comment { id: 1n }\\nconsole.log(result.post); // undefined\\n```\\n\\nComment \uc5d4\ud2f0\ud2f0\uc758 id \ud544\ub4dc\uc640 post_id \ud544\ub4dc\ub9cc \uac00\uc838\uc624\uae30 \uc704\ud574 select \uc808\uc5d0 \uc9c1\uc811 \uc9c0\uc815\ud558\uc600\ub2e4.  \\n\ud558\uc9c0\ub9cc \uacb0\uacfc\ub97c \ubcf4\uba74 id \ub294 \ub2f4\uae30\uc9c0\ub9cc post \ub294 undefined \uac00 \ub41c\ub2e4.\\n\\n\ucffc\ub9ac \ub85c\uadf8\ub97c \ud655\uc778\ud558\uba74 \uc62c\ubc14\ub974\uac8c \ucffc\ub9ac\ub97c \uc218\ud589\ud55c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc9c0\ub9cc \uadf8 \uacb0\uacfc\ub97c \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub2f4\uc744 \ub54c \uc5f0\uad00\uad00\uacc4 \ud544\ub4dc\ub294 \uc81c\ub300\ub85c \ub123\uc9c0 \ubabb\ud558\ub294 \ubb38\uc81c\uac00 \uc788\ub2e4.\\n\\n```sql\\nSELECT \\"comment\\".\\"id\\" AS \\"comment_id\\", \\"comment\\".\\"post_id\\" AS \\"comment_post_id\\"\\nFROM \\"comment\\" \\"comment\\"\\nWHERE \\"comment\\".\\"post_id\\" = $1\\n```\\n\\n\uc774\ub97c \ud574\uacb0\ud558\ub824\uba74 `getOneOrFail` \ub300\uc2e0 `getRawOne` \uc744 \uc0ac\uc6a9\ud574 json \ud615\ud0dc\ub85c \uac00\uc838\uc624\uac70\ub098 join \ubb38\uc744 \uba85\uc2dc\uc801\uc73c\ub85c \uc9c0\uc815\ud574\uc57c \ud55c\ub2e4.\\n\\n```ts\\nconst result = await commentRepository\\n  .createQueryBuilder(\\"comment\\")\\n  .select([\\"comment.id\\", \\"post.id\\"])\\n  .innerJoin(\\"comment.post\\", \\"post\\") // join \uc9c0\uc815\\n  .getOneOrFail();\\n```\\n\\n\uc5d4\ud2f0\ud2f0 \ud30c\uc77c\uc5d0 \uc5f0\uad00\uad00\uacc4 \uceec\ub7fc\uc5d0 \ub300\ud55c \ud544\ub4dc\ub97c \ucd94\uac00\ub85c \uc120\uc5b8\ud558\ub294 \ubc29\ubc95(`RelationId` \ub370\ucf54\ub808\uc774\ud130)\ub3c4 \uc788\uc9c0\ub9cc transformer \uac00 \ub3d9\uc791\ud558\uc9c0 \uc54a\ub294 \ubb38\uc81c\uc640 \ud544\ub4dc\ub97c \uac00\uc838\uc624\ub294 \ubc29\ubc95\uc774 \ub450 \uac00\uc9c0\ub85c \ub098\ub220\uc9c0\ub294 \ubb38\uc81c\uac00 \uc788\ub2e4.\\n\\n\ubc18\uba74 `MikroORM` \uc5d0\uc11c\ub294 \uc704\uc640 \uac19\uc740 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n\\n```ts\\nconst result = await commentEntityRepository\\n  .createQueryBuilder(\\"comment\\")\\n  .select([\\"id\\", \\"post\\"])\\n  .where({ post: { id: post.id } })\\n  .getSingleResult();\\n\\nconsole.log(result.post.id); // \uac12\uc774 \uc874\uc7ac\\n```\\n\\n\ud558\uc9c0\ub9cc join \ud14c\uc774\ube14\uc758 id \uceec\ub7fc \uc678 \ub2e4\ub978 \ud544\ub4dc\ub97c select \ud558\ub824\ub294 \uacbd\uc6b0\uc5d0 \uc81c\ub300\ub85c \ub3d9\uc791\ud558\uc9c0 \uc54a\ub294 \uc774\uc288\uac00 \uc788\ub2e4.\\n\\n```ts\\nconst result = await commentEntityRepository\\n  .createQueryBuilder(\\"c\\")\\n  .select([\\"c.id\\", \\"c.like\\", \\"post\\", \\"p.name\\"])\\n  .join(\\"c.post\\", \\"p\\")\\n  .getSingleResult();\\n\\nconsole.log(result.post.unwrap().name); // undefined\\n```\\n\\nselect \uad6c\ubb38\uc5d0 `p.name` \uc744 \uc120\uc5b8\ud574 \uc774\ub984\ud544\ub4dc\ub97c \uac00\uc838\uc624\ub3c4\ub85d \uc124\uc815\ud588\uc9c0\ub9cc \uacb0\uacfc\uc5d0\ub294 \ub2f4\uae30\uc9c0 \uc54a\ub294\ub2e4.  \\n\uadf8\ub798\uc11c join \ub300\uc2e0 joinAndSelect \ub97c \uc0ac\uc6a9\ud574\uc57c \ud558\ub294\ub370 \uc774\ub294 \ubaa8\ub4e0 \uc5d4\ud2f0\ud2f0\uc758 \ud544\ub4dc\ub97c select \ud558\uae30\uc5d0 \ube44\ud6a8\uc728\uc801\uc774\ub2e4.\\n\\n```ts\\nconst result = await commentEntityRepository\\n  .createQueryBuilder(\\"c\\")\\n  .select([\\"c.id\\", \\"c.like\\", \\"post\\", \\"p.name\\"])\\n  .joinAndSelect(\\"c.post\\", \\"p\\") // post \uc758 \ubaa8\ub4e0 \ud544\ub4dc \uac00\uc838\uc634\\n  .getSingleResult();\\n```\\n\\n## Smart Query Conditions\\n\\n\ub450 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubaa8\ub450 `query builder` \uad00\ub828 \uc774\uc288\uac00 \uc874\uc7ac\ud558\uc9c0\ub9cc `MikroORM` \uc758 \uacbd\uc6b0 `Smart Query Conditions` \ub97c \ud65c\uc6a9\ud558\uba74 \ubcf5\uc7a1\ud55c \uc870\ud68c\uc870\uac74\uc744 typesafe \ud558\uac8c \ub9cc\ub4e4 \uc218 \uc788\ub2e4.  \\n\ub530\ub77c\uc11c `query builder` \ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc544\ub3c4 \ub300\ubd80\ubd84\uc758 \ucffc\ub9ac\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\ub2e4.  \\n\uc608\ub97c\ub4e4\uba74 \ub2e4\uc74c \uc870\uac74\uc744 \ub9cc\uc871\ud558\ub294 comment \ub4e4\uc744 \uc870\ud68c\ud558\ub294 \uc0c1\ud669\uc744 \uac00\uc815\ud574\ubcf4\uc790.\\n\\n- post id \uac00 100\\n- \ub313\uae00 \ub0b4\uc6a9\uc5d0 \\"text\\" \ub97c \ud3ec\ud568\ud558\uac70\ub098 like \uc218\uac00 10 \uc774\uc0c1\\n\\n\ub2e4\uc74c\uacfc \uac19\uc740 \ucf54\ub4dc\ub97c \uc791\uc131\ud558\uba74 \ub41c\ub2e4.\\n\\n```ts\\nawait commentEntityRepository.find({\\n  $and: [\\n    { post: { id: 100n } },\\n    { $or: [{ content: { $like: \\"%text%\\" } }, { like: { $gte: 10 } }] },\\n  ],\\n});\\n```\\n\\n\uc2e4\uc81c \uc218\ud589\ud558\ub294 \ucffc\ub9ac\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n```sql\\nSELECT \\"c0\\".*\\nFROM \\"comment\\" AS \\"c0\\"\\nWHERE \\"c0\\".\\"post_id\\" = \'100\'\\n  AND (\\"c0\\".\\"content\\" LIKE \'%text%\' OR \\"c0\\".\\"like\\" >= 10)\\n```\\n\\nfind \uba54\uc18c\ub4dc \ud30c\ub77c\ubbf8\ud130\uc758 \ud0a4 \uc911\uc5d0 `$` \ub85c \uc2dc\uc791\ud558\ub294 \uac83\uc740 `MikroORM` \uc5d0\uc11c \uc9c0\uc6d0\ud558\ub294 \uc5f0\uc0b0\uc790\ub85c `$and`, `$or` \uc640 \uac19\uc740 \ub17c\ub9ac\uc5f0\uc0b0\uc790\uc640 `like`, `>=` \uac19\uc740 \ube44\uad50\uc5f0\uc0b0\uc790\uac00 \uc788\ub2e4.  \\n\ub9cc\uc57d \uc870\uac74\uc808\uc5d0 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uc5f0\uc0b0\uc790\ub098 \uc798\ubabb\ub41c \ud544\ub4dc\uba85, \ud0c0\uc785\uc5d0 \ub9de\uc9c0\uc54a\ub294 \uac12\uc744 \uc804\ub2ec\ud558\ub294 \uacbd\uc6b0 \ud0c0\uc785\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uae30 \ub54c\ubb38\uc5d0 typesafe \ud55c \uc7a5\uc810\uc774 \uc788\ub2e4.\\n\\n> \uc9c0\uc6d0\ud558\ub294 \ubaa8\ub4e0 \uc5f0\uc0b0\uc790\ub97c \ubcf4\ub824\uba74 [\ub9c1\ud06c](https://mikro-orm.io/docs/query-conditions) \ub97c \ucc38\uc870\ud55c\ub2e4.\\n\\n## Repository \uae30\ubcf8 \uc870\ud68c \uba54\uc18c\ub4dc\\n\\n`find`, `findOne` \uc640 \uac19\uc740 \uc870\ud68c \uba54\uc18c\ub4dc\uc758 \uacbd\uc6b0 `TypeORM` \uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \ub2e8\uc810\uc774 \uc874\uc7ac\ud55c\ub2e4.\\n\\n- select \uc808\uc5d0 join \ud558\ub294 \ud14c\uc774\ube14\uc758 \ud544\ub4dc\ub294 \uc9c0\uc815\ud560 \uc218 \uc5c6\uc74c\\n- \ud14c\uc774\ube14 join \ubc29\uc2dd\uc774 left join \uc73c\ub85c \uace0\uc815\\n- join \ud14c\uc774\ube14 \uc9c0\uc815 \uc635\uc158(relations) \uc758 \ud0c0\uc785\uc774 \ub2e8\uc21c string \uc774\ub77c intellisense \uc9c0\uc6d0\uc774 \uc548\ub418\uace0 \uc798\ubabb \uc785\ub825\ud558\uba74 \ub7f0\ud0c0\uc784 \uc5d0\ub7ec \ubc1c\uc0dd\\n- where \uc808\uc5d0 \uc720\ud6a8\ud558\uc9c0 \uc54a\ub294 \ud544\ub4dc\uba85\uc744 \ub123\uc73c\uba74 \ub7f0\ud0c0\uc784 \uc5d0\ub7ec \ubc1c\uc0dd\\n\\n\uc774\uc81c `MikroORM` \ub97c \uc0ac\uc6a9\ud558\uba74 \uc5b4\ub5bb\uac8c \ud574\uacb0\ub418\ub294\uc9c0 \uc0b4\ud3b4\ubcf4\uc790.\\n\\n### join \ud14c\uc774\ube14 \uceec\ub7fc select\\n\\nintellisense \ub97c \uc9c0\uc6d0\ud558\uba70 join \ud544\ub4dc\uc758 \uacbd\uc6b0\uc5d0\ub3c4 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4.\\n\\n![select-hint](select-hint.png)\\n\\n### join \ubc29\uc2dd\\n\\n\uc5f0\uad00\uad00\uacc4 \ud14c\uc774\ube14\uc758 \ub370\uc774\ud130\ub97c \uc870\ud68c\ud560 \uc2dc `TypeORM` \ucc98\ub7fc left join \uc73c\ub85c \uac00\uc838\uc62c \uc218\ub3c4 \uc788\uace0 select in \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.  \\nstrategy \uc635\uc158\uc744 \uc0ac\uc6a9\ud558\uba70 \ub530\ub85c \uc124\uc815\ud558\uc9c0 \uc54a\uc740 \uacbd\uc6b0 \uae30\ubcf8\uac12\uc740 select in \uc774\ub2e4.\\n\\nselect in \ubc29\uc2dd\uc740 \uae30\ubcf8 \uc5d4\ud2f0\ud2f0\ub9cc \uba3c\uc800 \uc870\ud68c \ud6c4 \uac01 join \ud14c\uc774\ube14\uc5d0 \ub300\ud574\uc11c \uac01\uac01 \ucd94\uac00 \ucffc\ub9ac\ub97c \uc2e4\ud589\ud55c\ub2e4.  \\n\uc608\ub97c \ub4e4\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud55c \uacbd\uc6b0\\n\\n```ts\\n// like \uc218\uac00 100 \uac1c\uac00 \ub118\uc5b4\uac00\ub294 comment \uc640 post \uc815\ubcf4\ub97c \uac00\uc838\uc628\ub2e4\\nconst result = await commentEntityRepository.find(\\n  { like: { $gt: 100 } },\\n  {\\n    populate: [\\"post\\"],\\n    strategy: LoadStrategy.SELECT_IN, // select in \ubc29\uc2dd\uc73c\ub85c \uc870\ud68c\\n    fields: [\\"id\\", \\"like\\", \\"post\\", \\"post.name\\"],\\n  }\\n);\\n```\\n\\n\uc544\ub798\uc640 \uac19\uc740 \ub450 \uac1c\uc758 \ucffc\ub9ac\uac00 \uc218\ud589\ub418\uba70 \uadf8 \uacb0\uacfc\ub97c \ubcd1\ud569\ud574 Comment \uc778\uc2a4\ud134\uc2a4\uc5d0 \ub2f4\ub294\ub2e4.\\n\\n```sql\\nselect \\"c0\\".\\"id\\", \\"c0\\".\\"like\\", \\"c0\\".\\"post_id\\" -- post_id \uc790\ub3d9\uc73c\ub85c \uc870\ud68c\\nfrom \\"comment\\" as \\"c0\\"\\nwhere \\"c0\\".\\"like\\" > 100\\n\\nselect \\"p0\\".\\"id\\", \\"p0\\".\\"name\\"\\nfrom \\"post\\" as \\"p0\\"\\nwhere \\"p0\\".\\"id\\" in (\'1\', \'2\', \'3\') -- \uc704 \ucffc\ub9ac\uc758 \uacb0\uacfc\uc758 post_id \uac00 1, 2, 3 \uc778 \uacbd\uc6b0\\norder by \\"p0\\".\\"id\\" asc\\n```\\n\\n:::info\\nTypeORM \ub3c4 0.3.0 \ubc84\uc804 \uc774\ud6c4\ub85c `relationLoadStrategy` \uc635\uc158\uc744 \ud1b5\ud574 select in \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n:::\\n\\n### join \ud14c\uc774\ube14 \uc9c0\uc815\\n\\n\uc870\ud68c\ud560 \uc5f0\uad00\uad00\uacc4 \ud14c\uc774\ube14 \uc9c0\uc815 \uc2dc \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ud544\ub4dc\uba85\uc744 \ub123\uc73c\uba74 \ud0c0\uc785\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uba70 nested \ud558\uac8c \uc9c0\uc815\ud560 \uc218\ub3c4 \uc788\ub2e4.  \\n\ub9cc\uc57d \ud14c\uc774\ube14\uacfc \uad00\ub828\uc5c6\ub294 \ud544\ub4dc\uba85\uc744 \ub123\uc740\uacbd\uc6b0\ub294 \ubb34\uc2dc\ub41c\ub2e4.\\n\\n```ts\\nawait commentEntityRepository.findOneOrFail(100n, {\\n  populate: [\\"post\\", \\"post.comments\\", \\"like\\"], // like \ub294 \ubb34\uc2dc\\n});\\n```\\n\\n### where \uc808 \ud544\ub4dc \uc9c0\uc815\\n\\n\uc774\uc804 `Smart Query Conditions` \uc5d0\uc11c \uc5b8\uae09\ud55c \uac83\ucc98\ub7fc \uc720\ud6a8\ud558\uc9c0 \uc54a\ub294 \ud544\ub4dc\uba85\uc744 \ub123\uc73c\uba74 \ud0c0\uc785\uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud55c\ub2e4.\\n\\n## Cascade \ubc0f Transaction\\n\\n`TypeORM` post \uc5d4\ud2f0\ud2f0\uc758 comment \ud544\ub4dc\uc120\uc5b8\uc744 \ubcf4\uba74 `cascade` \uc635\uc158\uc774 \uc788\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n```ts\\n@OneToMany(() => Comment, (comment) => comment.post, {\\n  cascade: [\'insert\', \'update\'],\\n})\\ncomments: Comment[];\\n```\\n\\n\uc704 \uc635\uc158\uc740 post \uc5d4\ud2f0\ud2f0\uc5d0 save \uc561\uc158\uc774 \uc77c\uc5b4\ub09c \uacbd\uc6b0 comment \ub3c4 \uac19\uc774 \uc218\uc815\ud558\ub824\ub294 \ubaa9\uc801\uc73c\ub85c \uc4f4\ub2e4.  \\ninsert \uc5d0\uc11c\ub294 \ud070 \ubb38\uc81c\ub294 \uc5c6\uc73c\ub098 update \uc2dc \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4.  \\n\ub2e4\uc74c \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n```ts\\nit(\\"transaction \ud14c\uc2a4\ud2b8\\", async () => {\\n  // given\\n  const post = PostFactory.make();\\n  post.comments = [CommentFactory.make(), CommentFactory.make()];\\n  await postRepository.save(post);\\n\\n  // when\\n  const update = () =>\\n    getManager().transaction(async (manager) => {\\n      post.content = \\"new content\\";\\n      await manager.save(post); // post.comment \ub3c4 \uac19\uc774 update \uc218\ud589\\n    });\\n\\n  // then\\n  await expect(update).rejects.toThrowError(\\"violates not-null constraint\\");\\n});\\n```\\n\\npost \uc5d0\ub294 \ub450 \uac1c\uc758 comment \uac00 \uc874\uc7ac\ud558\uace0 \ud2b8\ub79c\uc7ad\uc158 \ub0b4\uc5d0\uc11c post \uc758 content \ud544\ub4dc \uc218\uc815 \ud6c4 save \ub97c \uc218\ud589\ud588\ub2e4.  \\ncomment \uc758 \ub0b4\uc6a9\uc740 \uc804\ud600 \uc218\uc815\ud558\uc9c0 \uc54a\uc558\uae30\uc5d0 post \ub9cc \uc5c5\ub370\uc774\ud2b8\ub97c \uc218\ud589\ud560\uac83\uc73c\ub85c \uae30\ub300\ud558\uc9c0\ub9cc \uc2e4\uc81c\ub85c\ub294 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud55c\ub2e4.\\n\\n\ucffc\ub9ac\ub85c\uadf8\ub97c \ubcf4\uba74 comment \uc5d0 \ub300\ud574\uc11c 4 \ubc88\uc758 update \uac00 \ubc1c\uc0dd\ud558\uace0 post_id \ud544\ub4dc\ub97c `null` \ub85c \uc124\uc815\ud558\ub824\ub294 \uc2dc\ub3c4\ub97c \ud558\uba70 `not null` \uc870\uac74\uc5d0 \uc758\ud574 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\ub294 \uac83\uc774\ub2e4.\\n\\n![update-null](update-null.png)\\n\\n\uc774\uc640\uac19\uc774 \ube44\uc815\uc0c1\uc801\uc778 \ucffc\ub9ac\ub97c \uc218\ud589\ud560 \uc218 \uc788\uae30\uc5d0 cascade \uc635\uc158 \uc0ac\uc6a9\uc740 \uc9c0\uc591\ud558\ub294\uac8c \uc88b\ub2e4.\\n\\n\ubc18\uba74 `MikroORM` \uc5d0\uc11c\ub294 `Unit of Work` \uc640 `Identity Map` \ud328\ud134\uc73c\ub85c \uc778\ud574 \uc704\uc640\uac19\uc740 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4.  \\n\ub2e4\uc74c \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n```ts\\nconst post = await postEntityRepository.findOneOrFail(100n, {\\n  populate: [\\"comments\\"],\\n});\\n\\n// \ud2b8\ub79c\uc7ad\uc158 \ub0b4\uc5d0\uc11c persist \ub97c \uc9c1\uc811 \ud638\ucd9c\ud558\uc9c0 \uc54a\uc544\ub3c4 update \uc218\ud589\ub41c\ub2e4\\nawait orm.em.transactional(async () => {\\n  post.content = \\"new content\\";\\n  post.comments[0]!.like = 12345;\\n});\\n\\n// \ub610\ub294 \uc544\ub798\ucc98\ub7fc \uc218\ud589\ud574\ub3c4 \uac19\uc740 \uacb0\uacfc\uac00 \ub098\uc628\ub2e4\\nawait postEntityRepository.persistAndFlush(post);\\n```\\n\\n`MikroORM` \uc740 JPA \uc758 \ubcc0\uacbd\uac10\uc9c0\uc640 \uac19\uc740 \uae30\ub2a5\uc774 \uc788\uc5b4 \uc870\ud68c \uba54\uc18c\ub4dc \uacb0\uacfc\ub97c \ub0b4\ubd80\uc801\uc73c\ub85c \uce90\uc2dc\ud55c \ud6c4 \ud2b8\ub79c\uc7ad\uc158\uc774 \ub05d\ub098\uba74 \ub450 \uac12\uc744 \ube44\uad50\ud574 \ubcc0\uacbd\ud55c \ud56d\ubaa9\uc5d0 \ub300\ud574\uc11c\ub9cc update \ub97c \uc218\ud589\ud55c\ub2e4.  \\n\ub610\ud55c `TypeORM` \uc758 save \uc640 \uac19\uc740 persist \uba54\uc18c\ub4dc\ub97c \uc9c1\uc811 \ud638\ucd9c\ud558\uc9c0 \uc54a\uc544\ub3c4 \ud2b8\ub79c\uc7ad\uc158\uc774 \ub05d\ub098\uba74 \uc791\uc5c5\uc744 \uc218\ud589\ud55c\ub2e4.\\n\\n`MikroORM` \uc740 JPA \uc758 \uc601\uc18d\uc131 \ucee8\ud14d\uc2a4\ud2b8\uc640 \uac19\uc740 \uac1c\ub150\uc774 \uc801\uc6a9\ub418\uc5b4 \uc788\uae30\uc5d0 \uc774\ubbf8 \uce90\uc2dc\uc5d0 \uc874\uc7ac\ud558\ub294 \ub370\uc774\ud130\ub97c \ucc3e\ub294 \uacbd\uc6b0\uc5d0\ub294 \ucffc\ub9ac\ub97c \uc218\ud589\ud558\uc9c0 \uc54a\uace0 \uce90\uc2dc\uc5d0 \uc788\ub294 \uac83\uc744 \ubc14\ub85c \uc804\ub2ec\ud55c\ub2e4.\\n\\n```ts\\nconst post = postFactory.makeOne();\\npost.comments.add(...commentFactory.make(5));\\n\\n// post \uc0dd\uc131\\nawait postEntityRepository.persistAndFlush(post);\\n\\n// \ub3d9\uc77c\ud55c post \uc870\ud68c\\nconst newPost = await postEntityRepository.findOneOrFail(post.id, {\\n  populate: [\\"comments\\"],\\n});\\n\\n// \ub450 \ubcc0\uc218\ub294 \ub3d9\uc77c\ud55c \uc778\uc2a4\ud134\uc2a4\ub97c \uac00\ub9ac\ud0b4\\nconsole.log(newPost === post); // true\\n```\\n\\n## Sqlite \uc9c0\uc6d0\\n\\n\ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \ud1b5\ud569 \ud14c\uc2a4\ud2b8 \uc791\uc131\uc2dc JVM \uc9c4\uc601\uc5d0\uc11c\ub294 \ubcf4\ud1b5 h2 \uc640 \uac19\uc740 \uacbd\ub7c9 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \ud65c\uc6a9\ud55c\ub2e4.  \\nNode.js \uc5d0\uc11c\ub294 `sqlite` \ub97c \ud65c\uc6a9\ud574 \ud14c\uc2a4\ud2b8\ud560 \uc218 \uc788\uc9c0\ub9cc `TypeORM` \uc5d0\uc11c\ub294 \ucee4\uc2a4\ud140 \ud0c0\uc785 \uad00\ub828 \uc774\uc288\uac00 \ubc1c\uc0dd\ud55c\ub2e4.\\n\\n\uae30\ubcf8 \uc5d4\ud2f0\ud2f0 \ud30c\uc77c\uc744 \uc0b4\ud3b4\ubcf4\uba74 `createdAt` \ud544\ub4dc\ub97c js \ub0b4\uc7a5 `Date` \ub300\uc2e0 `LocalDateTime` \uc744 \uc0ac\uc6a9\ud588\ub2e4.\\n\\n```ts\\n@Column({\\n  type: \'timestamptz\',\\n  transformer: new LocalDateTimeType(),\\n  nullable: false,\\n  update: false,\\n})\\ncreatedAt: LocalDateTime;\\n```\\n\\nsqlite \uad00\ub828 \uc124\uc815\uc744 \ud55c \ud6c4 \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud558\uba74 \uc544\ub798\uc640 \uac19\uc740 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud55c\ub2e4.\\n\\n```text\\nDataTypeNotSupportedError: Data type \\"timestamptz\\" in \\"Comment.createdAt\\" is not supported by \\"better-sqlite3\\" database.\\n```\\n\\n\uae30\ubcf8 `Date` \ud0c0\uc785 \uc0ac\uc6a9\ud558\uba74 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud558\uc9c0\ub9cc \ud14c\uc2a4\ud2b8\ub97c \uc704\ud574 \ucee4\uc2a4\ud140 \ud0c0\uc785\uc744 \ud3ec\uae30\ud574\uc57c \ud558\ub294 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud55c\ub2e4.  \\n\ubc18\uba74 `MikroORM` \uc740 \ud574\ub2f9 \uc774\uc288\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\uc73c\uba70 \ucee4\uc2a4\ud140 \ub0a0\uc9dc \ud0c0\uc785\uc740 unix time \uc73c\ub85c \ubcc0\ud658\ub418\uc5b4 \ub4e4\uc5b4\uac04\ub2e4.\\n\\n## \ub9c8\ubb34\ub9ac\\n\\nTypeScript \uc640 \uac19\uc740 \uc815\uc801 \uc5b8\uc5b4\ub97c \uc0ac\uc6a9\ud560 \ub54c\uc758 \ud070 \uc7a5\uc810\uc740 \ucef4\ud30c\uc77c \ub2e8\uacc4 \uc774\uc804\uc5d0 \uac1c\ubc1c\uc790\uc758 \uc2e4\uc218\ub97c \uc0ac\uc804\uc5d0 \uc7a1\uc544\ub0bc \uc218 \uc788\ub2e4\ub294 \uac83\uc774\ub2e4.  \\n`TypeORM` \uc744 \uc0ac\uc6a9\ud558\uba74\uc11c \uc704\uc640 \uac19\uc740 \uc7a5\uc810\uc744 \uc5bb\uae30\ub97c \ubc14\ub790\uc9c0\ub9cc \uadf8\ub3d9\uc548 \uc0ac\uc6a9\ud558\uba74\uc11c \ub290\ub080\uc810\uc740 \uc774\ub984\uc5d0 \ube44\ud574 \uc0dd\uac01\ubcf4\ub2e4 typesafe \ud558\uc9c0 \uc54a\ub2e4\ub294 \uac83\uc774\uc5c8\ub2e4.\\n\\n\ub610\ud55c \uc5ec\ub7ec \uc774\uc288\uac00 \ubc1c\uc0dd\ud574 \ud574\uacb0\ubc29\ubc95\uc744 \ucc3e\ub294\ub370 \ub9ce\uc740\uc2dc\uac04\uc744 \ub4e4\uc600\uace0 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \ubc1c\uc804\uc18d\ub3c4\uac00 \ub290\ub824 \uc544\uc26c\uc6c0\uc774 \ub9ce\uc558\ub2e4.  \\n\uc774\ubc88\uc5d0 `MikroORM` \uc744 \uc0b4\ud3b4\ubcf4\uba74\uc11c \uc544\uc9c1 \uc0ac\uc6a9\uc790\uac00 \ub9ce\uc9c0 \uc54a\uc544 \ubb38\uc11c\uac00 \uc801\ub2e4\ub294 \ub2e8\uc810\uc744 \uc81c\uc678\ud558\uba74 \uc0c1\ub2f9\ud788 \uc798 \ub9cc\ub4e4\uc5b4\uc9c4 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub77c\uace0 \ub290\uaf08\ub2e4.  \\n\ud604\uc7ac \uafb8\uc900\ud788 \uc5c5\ub370\uc774\ud2b8\ub97c \uc9c4\ud589\ud558\uace0 \uc788\uace0 [nest.js \uacf5\uc2dd\ubb38\uc11c](https://docs.nestjs.com/recipes/mikroorm) \uc5d0\ub3c4 \ud3ec\ud568\ub418\uc5c8\uae30 \ub54c\ubb38\uc5d0 \uc0ac\uc6a9\uc790\uac00 \ub298\uc5b4\ub0a0 \uac00\ub2a5\uc131\uc774 \uc788\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4."},{"id":"2022/01/30/Kotlin\uc73c\ub85c-\uc9c0\uc5f0\ud3c9\uac00-\uad6c\ud604\ud558\uae30","metadata":{"permalink":"/2022/01/30/Kotlin\uc73c\ub85c-\uc9c0\uc5f0\ud3c9\uac00-\uad6c\ud604\ud558\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-01-30-lazy-eval-in-kotlin/index.mdx","source":"@site/blog/2022-01-30-lazy-eval-in-kotlin/index.mdx","title":"Kotlin\uc73c\ub85c \uc9c0\uc5f0\ud3c9\uac00 \uad6c\ud604\ud558\uae30","description":"\uc9c0\uc5f0\ud3c9\uac00\ub294 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0\uc11c \uc790\uc8fc \ub4f1\uc7a5\ud558\ub294 \uac1c\ub150\uc774\uba70 \uc5b4\ub5a4 \ud45c\ud604\uc2dd\uc758 \uac12\uc744 \ud544\uc694\ub85c \ud560 \ub54c\uae4c\uc9c0 \ud3c9\uac00\ub97c \ubbf8\ub8e8\ub294 \ubc29\ubc95\uc774\ub2e4.","date":"2022-01-30T00:00:00.000Z","formattedDate":"2022\ub144 1\uc6d4 30\uc77c","tags":[{"label":"kotlin","permalink":"/tags/kotlin"},{"label":"lazy evaluation","permalink":"/tags/lazy-evaluation"}],"readingTime":10.97,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Kotlin\uc73c\ub85c \uc9c0\uc5f0\ud3c9\uac00 \uad6c\ud604\ud558\uae30","slug":"2022/01/30/Kotlin\uc73c\ub85c-\uc9c0\uc5f0\ud3c9\uac00-\uad6c\ud604\ud558\uae30","authors":"jake","tags":["kotlin","lazy evaluation"]},"prevItem":{"title":"MikroORM\uacfc TypeORM \ube44\uad50","permalink":"/2022/02/16/MikroORM\uacfc-TypeORM-\ube44\uad50"},"nextItem":{"title":"ts-morph\ub85c \uac1c\ubc1c \ucee8\ubca4\uc158 \uac80\uc99d \uc790\ub3d9\ud654\ud558\uae30","permalink":"/2022/01/08/ts-morph\ub85c-\uac1c\ubc1c-\ucee8\ubca4\uc158-\uac80\uc99d-\uc790\ub3d9\ud654\ud558\uae30"}},"content":"\uc9c0\uc5f0\ud3c9\uac00\ub294 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0\uc11c \uc790\uc8fc \ub4f1\uc7a5\ud558\ub294 \uac1c\ub150\uc774\uba70 \uc5b4\ub5a4 \ud45c\ud604\uc2dd\uc758 \uac12\uc744 \ud544\uc694\ub85c \ud560 \ub54c\uae4c\uc9c0 \ud3c9\uac00\ub97c \ubbf8\ub8e8\ub294 \ubc29\ubc95\uc774\ub2e4.\\n\ud568\uc218\ud615 \uc5b8\uc5b4\uc5d0\uc11c\ub294 \uae30\ubcf8\uc73c\ub85c \ubaa8\ub4e0 \uacc4\uc0b0\uc774 \uc9c0\uc5f0\ud3c9\uac00\ub85c \ub3d9\uc791\ud558\uae30\uc5d0 \ub530\ub85c \uad6c\ud604\ud560 \ud544\uc694\ub294 \uc5c6\uc9c0\ub9cc \uadf8\ub807\uc9c0 \uc54a\uc740 \uc5b8\uc5b4\uc5d0\uc11c\ub294 \uac01\uc790\uc758 \uc5b8\uc5b4 \uae30\ub2a5\uc744 \ud65c\uc6a9\ud574 \uad6c\ud604\ud55c\ub2e4.\\n\\n\ucf54\ud2c0\ub9b0\uc5d0\uc11c\ub294 \ud45c\uc900 \uc704\uc784 \ud074\ub798\uc2a4 \uc911 \ud558\ub098\uc778 `Lazy` \ub97c \ud1b5\ud574 \uc9c0\uc5f0\ud3c9\uac00\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\ud558\uc9c0\ub9cc \uc774\ub294 \uc644\ubcbd\ud55c \uc9c0\uc5f0\ud3c9\uac00\ub77c\uae30 \ubcf4\ub2e4 \ud504\ub85c\ud37c\ud2f0\uc758 \uc9c0\uc5f0 \ucd08\uae30\ud654\uc5d0 \uac00\uae5d\ub2e4.\\n\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 \uba54\ubaa8\uc774\uc81c\uc774\uc158 \uae30\ub2a5\uc774 \uc788\ub294 \ucee4\uc2a4\ud140 `Lazy` \ud074\ub798\uc2a4\ub97c \ub9cc\ub4dc\ub294 \uacfc\uc815\uc744 \uae30\uc220\ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n> - \ubaa8\ub4e0 \ucf54\ub4dc\ub294 https://github.com/jbl428/study-note/tree/master/kotlin/lazy \uc5d0 \uc788\uc2b5\ub2c8\ub2e4.\\n> - \ubcf8 \uae00\uc740 [\ucf54\ud2c0\ub9b0\uc744 \ub2e4\ub8e8\ub294 \uae30\uc220](https://thebook.io/080208) \uc5d0 \uc788\ub294 \uc9c0\uc5f0\uacc4\uc0b0 \ucc55\ud130\uc758 \ub0b4\uc6a9\uc744 \ucc38\uace0\ud574 \uc791\uc131\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n## Lazy \uc704\uc784 \ud074\ub798\uc2a4\\n\\n\uba3c\uc800 \ucf54\ud2c0\ub9b0\uc758 Lazy \uc704\uc784 \ud074\ub798\uc2a4\ub97c \uc0ac\uc6a9\ud55c \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n```kt\\ninternal class LazyTest {\\n    @Test\\n    fun `\ub0b4\uc7a5 Lazy \ud14c\uc2a4\ud2b8`() {\\n        // given\\n        class Foo {\\n            val bar: String by lazy {\\n                println(\\"lazy\\")\\n                \\"bar\\"\\n            }\\n\\n            init {\\n                println(\\"init\\")\\n                println(bar)\\n            }\\n        }\\n\\n        // when\\n        val foo = Foo()\\n        println(foo.bar)\\n    }\\n}\\n```\\n\\n\uc704 \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud55c \ud6c4 \ub85c\uadf8\ub97c \uc0b4\ud3b4\ubcf4\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \ucd9c\ub825\ub41c\ub2e4.\\n\\n```text\\ninit\\nlazy\\nbar\\nbar\\n```\\n\\n`Foo` \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131 \uc2dc `init` \uc774 \uc2e4\ud589\ub418\uace0 **\\"init\\"** \uc774 \ucd9c\ub825\ub41c\ub2e4.\\n\uc774\ud6c4 `print(bar)` \uc5d0\uc11c \ucc98\uc74c `bar` \ub97c \ucc38\uc870\ud558\uba70 `by lazy` \uc5d0 \uc9c0\uc815\ud55c \uba54\uc18c\ub4dc\uac00 \uc2e4\ud589\ub41c\ub2e4.\\n\ub530\ub77c\uc11c **\\"lazy\\"**, **\\"bar\\"** \uac00 \ucd9c\ub825\ub418\uace0 \uc774\ud6c4 `foo.bar` \ub97c \ucc38\uc870\ud560 \ub54c\uc5d0\ub294 **\\"lazy\\"** \ub294 \ucd9c\ub825\ub418\uc9c0 \uc54a\ub294\uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n## \ucd94\uac00\uae30\ub2a5 \uad6c\ud604\\n\\n\uc774\ucc98\ub7fc `Lazy` \uc704\uc784 \ud074\ub798\uc2a4\ub294 \ud504\ub85c\ud37c\ud2f0\uc758 \ucd08\uae30\ud654\ub97c \uc9c0\uc5f0\uc2dc\ud0ac \uc218 \uc788\ub294 \uae30\ub2a5\uc744 \uc81c\uacf5\ud574\uc8fc\uace0 \uc774\ub97c \ud655\uc7a5\ud574 \ub2e4\uc74c \uae30\ub2a5\uc744 \ucd94\uac00\ub85c \uad6c\ud604\ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n### \uba54\ubaa8\uc774\uc81c\uc774\uc158\\n\\n:::info\\n\uba54\ubaa8\uc774\uc81c\uc774\uc158(memoization)\uc740 \ucef4\ud4e8\ud130 \ud504\ub85c\uadf8\ub7a8\uc774 \ub3d9\uc77c\ud55c \uacc4\uc0b0\uc744 \ubc18\ubcf5\ud574\uc57c \ud560 \ub54c, \uc774\uc804\uc5d0 \uacc4\uc0b0\ud55c \uac12\uc744 \uba54\ubaa8\ub9ac\uc5d0 \uc800\uc7a5\ud568\uc73c\ub85c\uc368 \ub3d9\uc77c\ud55c \uacc4\uc0b0\uc758 \ubc18\ubcf5 \uc218\ud589\uc744 \uc81c\uac70\ud558\uc5ec \ud504\ub85c\uadf8\ub7a8 \uc2e4\ud589 \uc18d\ub3c4\ub97c \ube60\ub974\uac8c \ud558\ub294 \uae30\uc220\uc774\ub2e4. (\ucd9c\ucc98: wikipedia)\\n:::\\n\\n\uc774\uc804 \uc608\uc81c\ucf54\ub4dc\uc5d0\uc11c `by lazy` \uc5d0 \uae30\uc220\ud55c \ucd08\uae30\ud654 \ub85c\uc9c1\uc740 \ud55c \ubc88\ub9cc \uc2e4\ud589\ub418\uace0 \uc774\ud6c4\uc5d0\ub294 `bar` \uc758 \uac12\uc744 \ubc14\ub85c \uc0ac\uc6a9\ud558\ub4ef\uc774 \ud568\uc218\uc758 \ub85c\uc9c1\uc740 \ud55c \ubc88\ub9cc \uc2e4\ud589\ub418\uace0 \uc774\ud6c4\uc5d0\ub294 \uacb0\uacfc\ub97c \ubc14\ub85c \uc81c\uacf5\ud55c\ub2e4.\\n\\n### \ud569\uc131\\n\\n\uc9c0\uc5f0\ud3c9\uac00 \uc778\uc2a4\ud134\uc2a4\uac00 \ubc18\ud658\ud558\ub294 \uacb0\uacfc\uc5d0 \uc0c8\ub85c\uc6b4 \ud568\uc218\ub97c \ud569\uc131\ud574 \uc0c8\ub85c\uc6b4 \uc9c0\uc5f0\ud3c9\uac00 \uc778\uc2a4\ud134\uc2a4\ub97c \ub9cc\ub4e4\uc5b4\uc900\ub2e4.\\n\ud569\uc131\ud558\ub294 \ud568\uc218\ub294 \uc77c\ubc18\uc801\uc778 \uac12\uc744 \ubc18\ud658\ud558\uac70\ub098 \uc0c8\ub85c\uc6b4 \uc9c0\uc5f0 \ud074\ub798\uc2a4\ub97c \ubc18\ud658\ud558\ub294 \ud615\ud0dc\ub97c \uac00\uc9c4\ub2e4.\\n\uc608\ub97c\ub4e4\uba74 \uc544\ub798\uc640 \uac19\uc740 \ud0c0\uc785\uc758 \ud568\uc218\ub97c \ub9d0\ud55c\ub2e4.\\n\\n```kt\\nfun normal(a: Int): String\\nfun newLazy(a: String): Lazy<Boolean>\\n```\\n\\n## \ucee4\uc2a4\ud140 Lazy \ud074\ub798\uc2a4\\n\\n### \uc120\uc5b8\\n\\n\uba3c\uc800 \uc544\ub798\uc640 \uac19\uc740 \ucee4\uc2a4\ud140 Lazy \ud074\ub798\uc2a4\ub97c \uc791\uc131\ud55c\ub2e4.\\n\\n```kt\\nclass Lazy<out A>(fn: () -> A) {\\n    private val value by lazy(fn)\\n    operator fun invoke(): A {\\n        return value\\n    }\\n}\\n```\\n\\n`Lazy` \ub294 generic \ud074\ub798\uc2a4\ub85c \uc0dd\uc131\uc790 \ud30c\ub77c\ubbf8\ud130\ub85c \ud568\uc218\ub97c \ubc1b\uc73c\uba70 \ub0b4\ubd80 value \ubcc0\uc218\uc758 \ucd08\uae30\ud654\ub97c \uc704\ud574 \uc0ac\uc6a9\ub41c\ub2e4.\\n`invoke` \uba54\uc18c\ub4dc\ub294 \ud074\ub798\uc2a4\uc758 \uc778\uc2a4\ud134\uc2a4\ub97c \ub9c8\uce58 \ud568\uc218\ud638\ucd9c \ud558\ub4ef\uc774 \uc791\uc131\ud558\uba74 \uc218\ud589\ub418\ub294 \ub85c\uc9c1\uc73c\ub85c \ub2e8\uc21c\ud788 value \ub97c \ubc18\ud658\ud55c\ub2e4.\\n\uc774 \uba54\uc18c\ub4dc\uac00 \ucc98\uc74c \uc218\ud589\ub418\uba74 \ucd08\uae30\ud654 \ud568\uc218\uac00 \uc2e4\ud589\ub418\uba70 \uc774\ud6c4\uc5d0\ub294 \ud560\ub2f9\uc744 \uc644\ub8cc\ud55c value \ub97c \ubc14\ub85c \ubc18\ud658\ud55c\ub2e4.\\n\uc774\ucc98\ub7fc \ucf54\ud2c0\ub9b0\uc758 \uae30\ubcf8\ubb38\ubc95\ub9cc \uc0ac\uc6a9\ud574\ub3c4 \uc9c0\uc5f0\ud3c9\uac00\uc640 \uba54\ubaa8\uc774\uc81c\uc774\uc158\uc744 \uc190\uc27d\uac8c \uad6c\ud604\ud560 \uc218 \uc788\ub2e4\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4.\\n\\n\ucf54\ud2c0\ub9b0\uc744 \ud1b5\ud574 \uc5bb\uc744 \uc218 \uc788\ub294 \ub610 \ud558\ub098\uc758 \uc7a5\uc810\uc740 `Lazy` \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131\ucf54\ub4dc\uac00 \ub9c8\uce58 \ud568\uc218 \uc120\uc5b8\ubb38\ucc98\ub7fc \ubcf4\uc774\uac8c \ub9cc\ub4e4 \uc218 \uc788\ub2e4\ub294 \uac83\uc774\ub2e4.\\n\uc774\uac70\ub294 \uac1c\uc778\uc801\uc778 \ucde8\ud5a5\uc774\uae34 \ud558\uc9c0\ub9cc \ub9c8\uce58 Lazy \ub85c \ub3d9\uc791\ud558\ub294 block \uc744 \ub9cc\ub4dc\ub294 \uac83\ucc98\ub7fc \ubcf4\uc5ec \ub354 \uae54\ub054\ud574\ubcf4\uc778\ub2e4.\\n\\n```kt\\nval lazy = Lazy {\\n    println(\\"lazy\\")\\n    true\\n}\\nval result = lazy() // prints \\"lazy\\", returns true\\n```\\n\\n### \ub17c\ub9ac\uc5f0\uc0b0\\n\\n\ud504\ub85c\uadf8\ub798\ubc0d \uc5b8\uc5b4\uc5d0\uc11c \ub17c\ub9ac\uc5f0\uc0b0\ub85c \ub4f1\uc7a5\ud558\ub294 `or`, `and` \ub294 \ubcf4\ud1b5 \uccab \ubc88\uc9f8 \ud45c\ud604\uc2dd\uc758 \uacb0\uacfc\uc5d0 \ub530\ub77c \ub2e4\uc74c \ud45c\ud604\uc2dd\uc744 \ud3c9\uac00\ud558\uc9c0 \uc54a\ub3c4\ub85d \ub3d9\uc791\ud55c\ub2e4.\\n\uc608\ub97c\ub4e4\uba74 `or` \ub294 \uccab \ubc88\uc9f8 \ud45c\ud604\uc2dd\uc774 true \uc774\uba74 \ub2e4\uc74c \ud45c\ud604\uc2dd\uc740 \ud3c9\uac00\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n`Lazy` \uc778\uc2a4\ud134\uc2a4\ub85c \uac10\uc2fc \uacbd\uc6b0\uc5d0\ub3c4 \uac19\uc740 \ubc29\uc2dd\uc73c\ub85c \ub3d9\uc791\ud558\uac8c \ub41c\ub2e4.\\n\\n```kt\\n@Test\\nfun `Or \ub3d9\uc791 \ud14c\uc2a4\ud2b8`() {\\n    // given\\n    val lazyA = Lazy {\\n        true\\n    }\\n    val lazyB = Lazy<Boolean> {\\n        throw Error(\\"error\\")\\n    }\\n\\n    // when\\n    val result = lazyA() || lazyB()\\n\\n    // then\\n    assertTrue(result)\\n}\\n```\\n\\n\ub9cc\uc57d `lazyB()` \ud45c\ud604\uc2dd\uc744 \ud3c9\uac00\ud55c\ub2e4\uba74 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc9c0\ub9cc `lazyA()` \uac00 true \ub97c \ubc18\ud658\ud558\uae30 \ub54c\ubb38\uc5d0 \ubb34\uc2dc\ub418\uace0 \ud14c\uc2a4\ud2b8\ub97c \ud1b5\uacfc\ud55c\ub2e4.\\n\\n### map\\n\\n\uc774\uc81c \ud568\uc218\ub97c \ud569\uc131\ud560 \uc218 \uc788\ub294 \uae30\ub2a5\uc744 \ucd94\uac00\ud574\ubcf4\uc790.\\n`map` \uba54\uc18c\ub4dc\ub294 \uc9c0\uc5f0\ud3c9\uac00 \uae30\ub2a5\uc774 \uc5c6\ub294 \uc77c\ubc18\uc801\uc778 \ud568\uc218\ub97c \ubc1b\uc544 \uc0c8\ub85c\uc6b4 `Lazy` \uc778\uc2a4\ud134\uc2a4\ub97c \ub9cc\ub4e0\ub2e4.\\n\ub9c8\uce58 List \uc758 map \uba54\uc18c\ub4dc\uac00 \ubc30\uc5f4\ud615\ud0dc\ub294 \uadf8\ub300\ub85c \uc720\uc9c0\ud55c\ucc44\ub85c \ub0b4\ubd80 \uac12\ub4e4\ub9cc \ubc14\uafb8\ub294\uac83\ucc98\ub7fc \uc9c0\uc5f0\ud3c9\uac00\uc640 \uba54\ubaa8\uc774\uc81c\uc774\uc158 \uae30\ub2a5\uc740 \uadf8\ub300\ub85c \uc720\uc9c0\ud55c\ucc44\ub85c \ucd5c\uc885 \ud3c9\uac00 \uacb0\uacfc\ubb3c\ub9cc \ub2ec\ub77c\uc9c0\uac8c \ud574\uc900\ub2e4.\\n\\n```kt {4}\\nclass Lazy<out A>(fn: () -> A) {\\n    private val value by lazy(fn)\\n\\n    fun <B> map(fn: (A) -> B): Lazy<B> = Lazy { fn(value) }\\n}\\n```\\n\\n\ucf54\ub4dc\ub97c \ubcf4\uba74 \uad6c\ud604\uc774 \ub9e4\uc6b0 \uac04\ub2e8\ud55c \uac83\uc744 \uc54c \uc218 \uc788\ub2e4. \uc8fc\uc5b4\uc9c4 \ud568\uc218\ub97c \ub0b4\ubd80 value \ub97c \uc804\ub2ec\ud574 \ud638\ucd9c\ud558\ub294 \ub85c\uc9c1\uc744 `Lazy` \ub85c \uac10\uc2f8\uba74\ub41c\ub2e4.\\n\ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n```kt\\n@Test\\nfun `Map \ub3d9\uc791 \ud14c\uc2a4\ud2b8`() {\\n    // given\\n    var count = 0\\n    val lazy = Lazy {\\n        count++\\n        10\\n    }\\n\\n    // when\\n    val result = lazy.map { a -> a + 10 }\\n\\n    // then\\n    assertEquals(count, 0)\\n    assertEquals(result(), 20)\\n    assertEquals(count, 1)\\n}\\n```\\n\\n`lazy` \uc778\uc2a4\ud134\uc2a4\ub294 \uc2e4\ud589 \uc2dc `count` \ub97c 1 \uc99d\uac00\uc2dc\ud0a4\uace0 10 \uc744 \ubc18\ud658\ud55c\ub2e4.\\n\uc774\ud6c4 map \uc744 \ud638\ucd9c\ud574 \ub0b4\ubd80\uac12\uc744 10 \uc99d\uac00\uc2dc\ud0a4\ub294 \uc0c8\ub85c\uc6b4 `Lazy` \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud55c\ub2e4.\\n\ub530\ub77c\uc11c `result` \ud638\ucd9c \uc804\uae4c\uc9c0\ub294 `count` \ub294 0 \uc774\uc9c0\ub9cc \ud638\ucd9c\uc774\ud6c4 1 \ub85c \ubcc0\ud558\uac8c\ub41c\ub2e4.\\n\ub610\ud55c `reulst()` \ub294 20 \uc744 \ubc18\ud658\ud558\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4.\\n\\n### flatMap\\n\\n`map` \uc774 \uc77c\ubc18\ud568\uc218\ub97c \ud569\uc131\ud558\ub294 \uc5ed\ud560\uc774\uc5c8\ub2e4\uba74 `flatMap` \uc740 `Lazy` \uc778\uc2a4\ud134\uc2a4\ub97c \ubc18\ud658\ud558\ub294 \ud568\uc218\ub97c \ud569\uc131\ud558\ub294 \uc5ed\ud560\uc744\ud55c\ub2e4.\\n\ub9cc\uc57d \ud574\ub2f9\ud568\uc218\ub97c `map` \uc73c\ub85c \ud569\uc131\ud558\uba74 \uacb0\uacfc\uac00 `Lazy<Lazy<A>>` \ud615\ud0dc\uac00 \ub418\uae30 \ub54c\ubb38\uc5d0 \uc0ac\uc6a9\ud558\uae30 \ub9e4\uc6b0 \ubd88\ud3b8\ud574\uc9c4\ub2e4.\\n\uadf8\ub798\uc11c `flatMap` \uc740 \uc774\ub984 \uadf8\ub300\ub85c `Lazy` \ub97c \ud55c \ub2e8\uacc4 flatten \ud574\uc8fc\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4.\\n\\n```kt {4}\\nclass Lazy<out A>(fn: () -> A) {\\n    private val value by lazy(fn)\\n\\n    fun <B> flatMap(fn: (A) -> Lazy<B>): Lazy<B> = Lazy { fn(value)() }\\n}\\n```\\n\\n\uc774\ubc88\uc5d0\ub3c4 \uad6c\ud604\uc740 \uac04\ub2e8\ud558\ub2e4. `fn(value)` \uac00 `Lazy` \uc778\uc2a4\ud134\uc2a4\ub97c \ubc18\ud658\ud558\ubbc0\ub85c \ubc14\ub85c \ud3c9\uac00\ud55c \ud6c4 \uacb0\uacfc\ub97c `Lazy` \ub85c \ub2e4\uc2dc \uac10\uc2f8\uba74 \ub41c\ub2e4.\\n\\n```kt\\n@Test\\nfun `FlatMap \ub3d9\uc791 \ud14c\uc2a4\ud2b8`() {\\n    // given\\n    var count = 0\\n    val lazy = Lazy {\\n        count++\\n        10\\n    }\\n\\n    // when\\n    val result = lazy.flatMap { a -> Lazy { a + 10 } }\\n\\n    // then\\n    assertEquals(count, 0)\\n    assertEquals(result(), 20)\\n    assertEquals(count, 1)\\n    result()\\n    assertEquals(count, 1)\\n}\\n```\\n\\n\ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub3c4 `map` \uacfc \uac70\uc758 \uc720\uc0ac\ud558\uba70 `result()` \ub97c 2\ubc88 \uc218\ud589\ud574\ub3c4 `count` \uc758 \uac12\uc740 1 \ub85c \uc720\uc9c0\ub418\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4.\\n\\n### sequence\\n\\n\ub9c8\uc9c0\ub9c9\uc73c\ub85c `Lazy` \uc778\uc2a4\ud134\uc2a4\uc758 \ub9ac\uc2a4\ud2b8\ub97c \ub2e4\ub8f0 \ub54c \uc0ac\uc6a9\ud558\ub294 `sequence` \ub97c \uad6c\ud604\ud574\ubcf4\uc790.\\n`sequence` \uba54\uc18c\ub4dc\ub294 `node.js` \uac1c\ubc1c\uc790\uc5d0\uac8c \uce5c\uc219\ud55c `Promise.all` \uacfc \ube44\uc2b7\ud55c \uc5ed\ud560\uc744 \ud55c\ub2e4.\\n\\n`Promise.all` \uc740 promise \uc758 \ubc30\uc5f4\ud0c0\uc785\uc778 `Array<Promise<A>>` \ub97c `Promise<Array<A>>` \ud615\ud0dc\uc758 **\ub2e8\uc77c promise**\ub85c \ub9cc\ub4e4\uc5b4\uc900\ub2e4.\\n\ub9c8\ucc2c\uac00\uc9c0\ub85c `sequence` \ub294 `List<Lazy<A>>` \ud615\ud0dc\ub97c `Lazy<List<A>>` \uc758 **\ub2e8\uc77c Lazy \uc778\uc2a4\ud134\uc2a4**\ub85c \ub9cc\ub4e4\uc5b4\uc900\ub2e4.\\n\\n```kt\\nfun <A> sequence(list: List<Lazy<A>>): Lazy<List<A>> = Lazy { list.map { it() } }\\n```\\n\\n\uc8fc\uc5b4\uc9c4 \ub9ac\uc2a4\ud2b8\ub97c \uc21c\ud68c\ud558\uba74\uc11c \uac01 `Lazy` \uc778\uc2a4\ud134\uc2a4\ub97c \ud3c9\uac00\ud574 `List<A>` \ub97c \uc5bb\ub294 \ub85c\uc9c1\uc744 `Lazy` \ub85c \uac10\uc2fc\ub2e4.\\n\\n```kt\\n@Test\\nfun `Sequence \ub3d9\uc791 \ud14c\uc2a4\ud2b8`() {\\n    // given\\n    var count = 0\\n    val list = (1..10).map {\\n        Lazy {\\n            count++\\n            it\\n        }\\n    }\\n\\n    // when\\n    val result = sequence(list)\\n\\n    // then\\n    assertEquals(count, 0)\\n    assertEquals(result(), (1..10).toList())\\n    assertEquals(count, 10)\\n    result()\\n    assertEquals(count, 10)\\n}\\n```\\n\\n`list` \ubcc0\uc218\ub294 `Lazy` \uc778\uc2a4\ud134\uc2a4\ub4e4\uc758 \ubc30\uc5f4\ub85c \ucd5c\uc885 \ud3c9\uac00\ub418\ub294 \uac12\uc744 \uc5bb\uc73c\ub824\uba74 \uac01 \ubc30\uc5f4\uc744 \uc21c\ud68c\uc5d0 \uc77c\uc77c\ud788 \uac12\uc744 \ud3c9\uac00\ud558\ub294 \ub85c\uc9c1\uc744 \uc791\uc131\ud574\uc57c\ud55c\ub2e4.\\n\ud558\uc9c0\ub9cc `sequence` \ud568\uc218\ub97c \ud65c\uc6a9\ud574 \ub2e8\uc77c `Lazy` \uc778\uc2a4\ud134\uc2a4\ub85c \ub9cc\ub4e4\uc5c8\uace0 \uadf8 \uacb0\uacfc\uc778 `result` \ub97c \uc218\ud589\ud558\uba74 \uc27d\uac8c \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\ub2e4."},{"id":"2022/01/08/ts-morph\ub85c-\uac1c\ubc1c-\ucee8\ubca4\uc158-\uac80\uc99d-\uc790\ub3d9\ud654\ud558\uae30","metadata":{"permalink":"/2022/01/08/ts-morph\ub85c-\uac1c\ubc1c-\ucee8\ubca4\uc158-\uac80\uc99d-\uc790\ub3d9\ud654\ud558\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-01-08-convention-check-with-ts-morph/index.mdx","source":"@site/blog/2022-01-08-convention-check-with-ts-morph/index.mdx","title":"ts-morph\ub85c \uac1c\ubc1c \ucee8\ubca4\uc158 \uac80\uc99d \uc790\ub3d9\ud654\ud558\uae30","description":"\ucd5c\uadfc\uc5d0 typescript \ud658\uacbd\uc5d0\uc11c \uac1c\ubc1c \ucee8\ubca4\uc158\uc744 \ud655\uc778\ud558\ub294 \uc791\uc5c5\uc744 \uc790\ub3d9\ud654\ud558\ub294 \ubc29\ubc95\uc744 \ucc3e\ub2e4\uac00 ts-morph \ub97c \ub3c4\uc785\ud558\uac8c \ub41c \uacfc\uc815\uc744 \uae30\uc220\ud558\ub824\uace0 \ud55c\ub2e4.","date":"2022-01-08T00:00:00.000Z","formattedDate":"2022\ub144 1\uc6d4 8\uc77c","tags":[{"label":"ts-morph","permalink":"/tags/ts-morph"},{"label":"static-analysis","permalink":"/tags/static-analysis"}],"readingTime":13.265,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"ts-morph\ub85c \uac1c\ubc1c \ucee8\ubca4\uc158 \uac80\uc99d \uc790\ub3d9\ud654\ud558\uae30","slug":"2022/01/08/ts-morph\ub85c-\uac1c\ubc1c-\ucee8\ubca4\uc158-\uac80\uc99d-\uc790\ub3d9\ud654\ud558\uae30","authors":"jake","tags":["ts-morph","static-analysis"]},"prevItem":{"title":"Kotlin\uc73c\ub85c \uc9c0\uc5f0\ud3c9\uac00 \uad6c\ud604\ud558\uae30","permalink":"/2022/01/30/Kotlin\uc73c\ub85c-\uc9c0\uc5f0\ud3c9\uac00-\uad6c\ud604\ud558\uae30"},"nextItem":{"title":"kotlin \ud658\uacbd\uc5d0\uc11c Querydsl \uc124\uc815\ud558\uae30","permalink":"/2022/01/05/kotlin-\ud658\uacbd\uc5d0\uc11c-Querydsl-\uc124\uc815\ud558\uae30"}},"content":"\ucd5c\uadfc\uc5d0 typescript \ud658\uacbd\uc5d0\uc11c \uac1c\ubc1c \ucee8\ubca4\uc158\uc744 \ud655\uc778\ud558\ub294 \uc791\uc5c5\uc744 \uc790\ub3d9\ud654\ud558\ub294 \ubc29\ubc95\uc744 \ucc3e\ub2e4\uac00 `ts-morph` \ub97c \ub3c4\uc785\ud558\uac8c \ub41c \uacfc\uc815\uc744 \uae30\uc220\ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n> \uad00\ub828 \ucf54\ub4dc\ub294 \uc544\ub798 \ub9c1\ud06c\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n\\n- https://github.com/jbl428/study-note/tree/master/ts-morph\\n\\n\x3c!--truncate--\x3e\\n\\n## \ucee8\ubca4\uc158\\n\\n\uc544\ub798\uc640 \uac19\uc740 `TypeORM` \uc5d4\ud2f0\ud2f0 \ud30c\uc77c\uc774 \uc788\ub2e4\uace0 \uac00\uc815\ud55c\ub2e4.\\n\\n```ts title=\\"Profile.entity.ts\\"\\nimport { Column, Entity, PrimaryGeneratedColumn } from \\"typeorm\\";\\n\\n@Entity()\\nexport class Profile {\\n  @PrimaryGeneratedColumn()\\n  id: number;\\n\\n  @Column()\\n  name: string;\\n\\n  @Column()\\n  email: string;\\n}\\n```\\n\\n```ts title=\\"Post.entity.ts\\"\\nimport {\\n  Column,\\n  Entity,\\n  Index,\\n  JoinColumn,\\n  ManyToOne,\\n  PrimaryGeneratedColumn,\\n} from \\"typeorm\\";\\nimport { Profile } from \\"./Profile.entity\\";\\n\\n@Entity()\\n// highlight-start\\n@Index(\\"idx_post_1\\", [\\"profile\\"]) // profile_id \uc5d0 \uc778\ub371\uc2a4\ub97c \ucd94\uac00\\n@Index(\\"idx_post_2\\", [\\"status\\"]) // status \ud544\ub4dc\uc5d0 \uc778\ub371\uc2a4\ub97c \ucd94\uac00\\n// highlight-end\\nexport class Post {\\n  @PrimaryGeneratedColumn()\\n  id: number;\\n\\n  @Column()\\n  content: string;\\n\\n  @Column()\\n  status: string;\\n\\n  // highlight-start\\n  // profile \uacfc 1:n \uad00\uacc4\uc774\uc9c0\ub9cc FK \ub97c \uc124\uc815\ud558\uc9c0 \uc54a\uc74c\\n  @ManyToOne(() => Profile, { createForeignKeyConstraints: false })\\n  // profile \uc5f0\uad00\uad00\uacc4 \ud544\ub4dc \ucd94\uac00\\n  @JoinColumn({ name: \\"profile_id\\", referencedColumnName: \\"id\\" })\\n  profile: Profile;\\n  // highlight-end\\n}\\n```\\n\\n`Post` \uc5d4\ud2f0\ud2f0\ub294 `Profile` \uacfc 1:N \uad00\uacc4\uc774\uace0 `profile_id` \ud544\ub4dc\uac00 \uc788\uc9c0\ub9cc \uc678\ub798\ud0a4\ub97c \ucd94\uac00\ud558\uc9c0 \uc54a\uace0 \ub300\uc2e0 class \uc0c1\ub2e8\uc5d0 `@Index` \ub370\ucf54\ub808\uc774\ud130\ub97c \uc774\uc6a9\ud574 \uc778\ub371\uc2a4\ub97c \ucd94\uac00\ud55c\ub2e4.  \\n\uc778\ub371\uc2a4\ub97c \ucd94\uac00\ud558\uc9c0 \uc54a\uc73c\uba74 join \uc131\ub2a5\uc774 \ub5a8\uc5b4\uc9c0\uae30 \ub54c\ubb38\uc5d0 \uac1c\ubc1c\uc790\uac00 \uc778\ub371\uc2a4\ub97c \ucd94\uac00\ud558\uc9c0 \uc54a\ub294 \uc2e4\uc218\ub97c \ud558\uc9c0 \uc54a\ub3c4\ub85d \uac80\uc99d\uacfc\uc815\uc744 \uc790\ub3d9\ud654\ud558\ub824\uace0 \ud588\ub2e4.\\n\\n## Shell script \ub85c \uac80\uc99d\\n\\n\ucc98\uc74c\uc5d0\ub294 bash \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ud65c\uc6a9\ud574\uc11c \uac01 \uc5d4\ud2f0\ud2f0 \ud30c\uc77c\uc744 \uc77d\uc740 \ud6c4 \uc815\uaddc\uc2dd\uc744 \ud65c\uc6a9\ud574 \uac80\uc99d\uc744 \uc2dc\ub3c4\ud558\ub824 \ud588\uc9c0\ub9cc \ub2e4\uc74c\uacfc \uac19\uc740 \uc774\uc720\ub85c \ud558\uc9c0 \uc54a\uc558\ub2e4.\\n\\n### OS\\n\\n\ud604\uc7ac \uac1c\ubc1c\ud300 \ubaa8\ub450 mac \uc744 \uc0ac\uc6a9\ud558\uae30\uc5d0 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud558\ub294\ub370 \uc5b4\ub824\uc6c0\uc774 \uc5c6\uc9c0\ub9cc \ucd94\ud6c4\uc5d0 \uc708\ub3c4\uc6b0\ub97c \uc0ac\uc6a9\ud558\ub294 \uc0ac\ub78c\uc774 \uc62c \uc218\ub3c4 \uc788\ub2e4.  \\n\uc2a4\ud06c\ub9bd\ud2b8\ub97c CI \uc5d0\uc11c \uc2e4\ud589\ud558\uba74 \ud070 \ubb38\uc81c\ub294 \uc5c6\uc9c0\ub9cc OS \uc5d0 \uad00\uacc4\uc5c6\uc774 \ub204\uad6c\ub098 \ub85c\uceec\uc5d0\uc11c \ud3b8\ub9ac\ud558\uac8c \uac80\uc99d\ud560 \uc218 \uc788\ub3c4\ub85d \ud558\uace0 \uc2f6\uc5c8\ub2e4.\\n\\n### \uc720\uc9c0\ubcf4\uc218\\n\\nshell script \uc5d0 \uc775\uc219\ud558\uc9c0 \uc54a\uc740 \uac1c\ubc1c\uc790\ub3c4 \uc788\uc5b4\uc11c \ud574\ub2f9 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc720\uc9c0\ubcf4\uc218 \ud560 \uc218 \uc788\ub294 \uc0ac\ub78c\uc774 \uc801\uc5b4\uc9c4\ub2e4.  \\n\uac1c\ubc1c\ud658\uacbd\uacfc \uac19\uc740 \uc5b8\uc5b4\ub97c \ud65c\uc6a9\ud574 \uac80\uc99d\uc744 \ud55c\ub2e4\uba74 \ucf54\ub4dc\ub97c \uc774\ud574\ud558\uace0 \uac1c\uc120\ud560 \uc218 \uc788\ub294 \uc0ac\ub78c\uc774 \ub9ce\uc544\uc9c8\uac83\uc774\ub2e4.\\n\\n### \uad6c\ud604\\n\\n\uac80\uc99d\uc744 \uc704\ud574\uc11c \ud30c\uc77c \ub0b4\uc6a9 \uc911 `JoinColumn` \ub370\ucf54\ub808\uc774\ud130\ub85c \uc120\uc5b8\ud55c \ud544\ub4dc\uba85 (\uc608\uc81c\uc5d0\uc11c\ub294 `profile`) \uc744 \uc54c\uc544\ub0b4\uc57c \ud558\ub294\ub370 \ucf54\ub4dc \uc0c1\ud669\uc5d0 \ub530\ub77c \uadf8 \uc704\uce58\uac00 \ub2ec\ub77c\uc9c8 \uc218 \uc788\ub2e4.\\n\\n- JoinColumn \ub77c\uc778 \ubc14\ub85c \uc544\ub798\uc5d0 \uceec\ub7fc\uba85\uc774 \uc874\uc7ac\\n\\n```ts\\n@ManyToOne(() => Profile, { createForeignKeyConstraints: false })\\n@JoinColumn({ name: \\"profile_id\\", referencedColumnName: \\"id\\" })\\nprofile: Profile;\\n```\\n\\n- JoinColumn \ub450 \ub77c\uc778 \uc544\ub798\uc5d0 \uceec\ub7fc\uba85\uc774 \uc874\uc7ac\\n\\n```ts\\n@JoinColumn({ name: \\"profile_id\\", referencedColumnName: \\"id\\" })\\n@ManyToOne(() => Profile, { createForeignKeyConstraints: false })\\nprofile: Profile;\\n```\\n\\n- JoinColumn \uc138 \ub77c\uc778 \uc544\ub798\uc5d0 \uceec\ub7fc\uba85\uc774 \uc874\uc7ac\\n\\n```ts\\n@ManyToOne(() => Profile, { createForeignKeyConstraints: false })\\n@JoinColumn({\\n  name: \\"profile_id\\",\\n  referencedColumnName: \\"id\\"\\n})\\nprofile: Profile;\\n```\\n\\n- JoinColumn \uacfc \uac19\uc740 \ub77c\uc778\uc5d0 \uc874\uc7ac\\n\\n```ts\\n@ManyToOne(() => Profile, { createForeignKeyConstraints: false })\\n@JoinColumn({ name: \\"profile_id\\", referencedColumnName: \\"id\\" }) profile: Profile;\\n```\\n\\n`prettier` \ub97c \uc0ac\uc6a9\ud558\uba74 \uba87\uac00\uc9c0 \uc0c1\ud669\uc740 \ubc30\uc81c\ud560 \uc218 \uc788\uc9c0\ub9cc \uceec\ub7fc\uba85\uc744 \uc54c\uc544\ub0b4\uae30 \uc704\ud574 multiline \uc5d0 \ub300\ud55c \uc815\uaddc\uc2dd \ud45c\ud604\uc744 \uc0ac\uc6a9\ud574\uc57c \ud558\ub294 \ubd88\ud3b8\ud568\uc774 \uc788\ub2e4.  \\n\uadf8\ub9ac\uace0 \uceec\ub7fc\uba85\uc744 \uac00\uc838\uc628 \ud6c4 `@Index` \uc5d0 \uc120\uc5b8\ub41c \uceec\ub834\uba85\uacfc \ube44\uad50\ud558\ub294 \ub85c\uc9c1\uc744 shell script \ub85c \uad6c\ud604\ud558\uae30\ub3c4 \ubcf5\uc7a1\ud558\ub2e4.\\n\\n\uc704\uc640 \uac19\uc740 \uc774\uc720\ub85c shell script \ubcf4\ub2e4 \uac1c\ubc1c\ud658\uacbd\uacfc \uac19\uc740 \uc5b8\uc5b4\uc778 typescript \uc744 \ud65c\uc6a9\ud558\uace0 \uc2f6\uc5c8\uace0 \uc774\uc804\ubd80\ud130 \ub208\uc5ec\uaca8\ubcf8 `ts-morph` \ub97c \ub3c4\uc785\ud574\ubcf4\uc558\ub2e4.\\n\\n## ts-morph\\n\\n[ts-morph](https://github.com/dsherret/ts-morph/tree/latest/packages/ts-morph) \ub294 \ub09c\ud574\ud55c `typescript ast` \ub97c \uc0ac\uc6a9\ud558\uae30 \ud3b8\ub9ac\ud558\uac8c \ub9cc\ub4e0 wrapper \ub77c\uc774\ube0c\ub7ec\ub9ac\uc774\ub2e4.  \\n\ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8 \ucf54\ub4dc\ub97c \ud504\ub85c\uadf8\ub798\ubc0d \uc801\uc73c\ub85c \ubd84\uc11d \ubc0f \uc218\uc815\ud560 \uc218 \uc788\uac8c\ud55c\ub2e4.  \\n\uc0ac\uc6a9\ubc95 \uc790\uccb4\ub3c4 \uac04\ub2e8\ud574\uc11c \uc774\ubc88\uc5d0 \ubb38\uc11c\ub97c \ubcf4\uace0 \ucc98\uc74c \uc0ac\uc6a9\ud574\ubcf4\uc558\ub294\ub370 \uc5b4\ub835\uc9c0 \uc54a\uac8c \uc791\uc5c5\ud560 \uc218 \uc788\uc5c8\ub2e4.  \\n\uac01 ast \ub178\ub4dc\ub97c \ud074\ub798\uc2a4 \uc778\uc2a4\ud134\uc2a4\ub85c \ub9cc\ub4e4\uc5b4 \uac01 \ud074\ub798\uc2a4\uc758 \uba54\uc18c\ub4dc\ub97c \ud65c\uc6a9\ud574 \uc790\uc2dd \ub178\ub4dc\ub098 \ubd80\uac00\uc815\ubcf4\ub97c \uc5bb\uc744 \uc218 \uc788\ub294 \ud615\ud0dc\ub85c \uad6c\ud604\ub418\uc5b4\uc788\ub2e4.\\n\\n### Project \uc0dd\uc131\\n\\n\uba3c\uc800 Project \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud574\uc57c \ud55c\ub2e4. \uc0dd\uc131\uc790\uc5d0 \ud30c\uc2f1\uc744 \uc704\ud55c \uc18c\uc2a4\ud30c\uc77c \uc815\ubcf4\ub97c \uc8fc\uac70\ub098 \uc774\ud6c4\uc5d0 \uba54\uc18c\ub4dc\ub97c \ud1b5\ud574 \uc81c\uacf5\ud560 \uc218 \uc788\ub2e4.  \\ntsconfig.json \uacbd\ub85c\ub97c \uc81c\uacf5\ud558\uba74 \ud574\ub2f9 \ud30c\uc77c\uc5d0 \uc801\uc6a9\ub418\ub294 ts \ud30c\uc77c\ub4e4\uc744 \uc790\ub3d9\uc73c\ub85c \uc77d\ub294\ub2e4.\\n\\n```ts\\nimport { Project } from \\"ts-morph\\";\\n\\nconst project = new Project({\\n  tsConfigFilePath: \\"path/to/tsconfig.json\\",\\n});\\n```\\n\\n\uc544\ub2c8\uba74 \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131\uc774\ud6c4 \uba54\uc18c\ub4dc\ub97c \ud638\ucd9c\ud574 \uc18c\uc2a4\ud30c\uc77c\uc744 \ub4f1\ub85d\ud560 \uc218 \uc788\ub2e4.\\n\\n```ts\\nconst project = new Project();\\n\\nproject.addSourceFilesFromTsConfig(\\"dir1/tsconfig.json\\"); // tsconfig.json \ud30c\uc77c \uacbd\ub85c\uc9c0\uc815\\nproject.addSourceFilesAtPaths(\\"dir3/**/*{.d.ts,.ts}\\"); // \uacbd\ub85c\uc5d0 \ud574\ub2f9\ud558\ub294 \ud30c\uc77c\uc77d\uae30\\n```\\n\\n\uc2e4\uc81c \ud30c\uc77c\ub0b4\uc6a9\uc744 \uc81c\uacf5\ud560 \uc218\ub3c4 \uc788\uc5b4\uc11c \ud14c\uc2a4\ud2b8\ucf54\ub4dc \uc791\uc131\ud560 \ub54c \uc720\uc6a9\ud558\uac8c \uc4f8 \uc218 \uc788\ub2e4.\\n\\n```ts\\nconst project = new Project();\\n\\nconst fileText = \\"enum MyEnum {\\\\n}\\\\n\\";\\nconst sourceFile = project.createSourceFile(\\"path/to/myNewFile.ts\\", fileText);\\n```\\n\\n\uc18c\uc2a4\ud30c\uc77c \uacbd\ub85c\ub97c \uc9c0\uc815\ud558\ub294 \ubc29\ubc95\uacfc \ud30c\uc77c\ub0b4\uc6a9\uc744 \uc81c\uacf5\ud558\ub294 \ubc29\ubc95\uc744 \ubaa8\ub450 \uc9c0\uc6d0\ud558\uae30 \uc704\ud574 \uc544\ub798\uc640 \uac19\uc740 \ud074\ub798\uc2a4\ub97c \ub9cc\ub4e4\uc5c8\ub2e4.\\n\\n```ts title=\\"EntityValidator.ts\\"\\nexport class EntityValidator {\\n  #project: Project;\\n\\n  constructor(path: string, content?: string) {\\n    this.#project = new Project();\\n\\n    if (content) {\\n      this.#project.createSourceFile(path, content);\\n      return;\\n    }\\n\\n    this.#project.addSourceFilesAtPaths(path);\\n  }\\n}\\n```\\n\\n### SourceFile \uac00\uc838\uc624\uae30\\n\\n\uc774\uc81c ast \uc758 root \uc778 SourceFile \uc744 \uac00\uc838\uc628\ub2e4.\\n\\n```ts\\nconst sourceFiles = this.#project.getSourceFiles();\\n```\\n\\n### Entity Class \uac00\uc838\uc624\uae30\\n\\n\uc774\uc81c \uac01 SourceFile \ubc30\uc5f4\uc744 \uc21c\ud68c\ud558\uba74\uc11c \uac01 \ud30c\uc77c\uc774 \ucee8\ubca4\uc158\uc744 \ub9cc\uc871\ud558\ub294\uc9c0 \ud655\uc778\ud558\ub294 \uacfc\uc815\uc774 \ud544\uc694\ud558\ub2e4.  \\n\uc6b0\uc120 \ud558\ub098\uc758 SourceFile \uc744 \uac80\uc99d\ud558\ub294 \ub85c\uc9c1\uc744 \uba3c\uc800 \uad6c\ud604\ud574\ubcf4\uc790.  \\n\uba3c\uc800 \ud574\ub2f9 \ud30c\uc77c\uc774 Entity \ub370\ucf54\ub808\uc774\ud130\uac00 \uc788\ub294 \ud074\ub798\uc2a4\uac00 \uc120\uc5b8\ub418\uc5b4 \uc788\ub294\uc9c0 \ud655\uc778\ud574\ubcf8\ub2e4.\\n\\nSourceFile \uc5d0\ub294 `getClass` \uba54\uc18c\ub4dc\uac00 \uc788\ub294\ub370 \ud30c\ub77c\ubbf8\ud130\ub85c \ud544\ud130\ud568\uc218\ub97c \uc8fc\uba74 \uc870\uac74\uc5d0 \ud574\ub2f9\ud558\ub294 \uccab \ubc88\uc9f8 \ud074\ub798\uc2a4\ub97c \ubc18\ud658\ud55c\ub2e4.  \\n\ud574\ub2f9 \ud568\uc218\ub294 \ud074\ub798\uc2a4\uc758 \ub370\ucf54\ub808\uc774\ud130 \uc911 \uc774\ub984\uc774 `Entity` \uac00 \uc788\uc744 \ub54c true \ub97c \ubc18\ud658\ud558\ub3c4\ub85d \ud558\uc600\ub2e4.\\n\\n```ts\\nprivate getClass(sourceFile: SourceFile): ClassDeclaration {\\n  // highlight-start\\n  // Entity \ub370\ucf54\ub808\uc774\ud130\uac00 \uc788\ub294 \ud074\ub798\uc2a4\ub97c \uac00\uc838\uc624\uae30\\n  const entityClass = sourceFile.getClass((declaration) =>\\n    declaration\\n      .getDecorators()\\n      .some((decorator) => decorator.getFullName() === \'Entity\'),\\n  );\\n  // highlight-end\\n\\n  if (!entityClass) {\\n    throw new Error(\'Entity \ub370\ucf54\ub808\uc774\ud130\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4\');\\n  }\\n\\n  return entityClass;\\n}\\n```\\n\\n### JoinColumn \ub370\ucf54\ub808\uc774\ud130\uac00 \uc120\uc5b8\ub41c \ud544\ub4dc\uba85\uc744 \uac00\uc838\uc624\uae30\\n\\n\uc774\uc81c \ud574\ub2f9 \ud074\ub798\uc2a4\uc5d0\uc11c `JoinColumn` \ub370\ucf54\ub808\uc774\ud130\uac00 \uc120\uc5b8\ub41c \ud544\ub4dc\uba85\uc744 \uac00\uc838\uc628\ub2e4.  \\n\ucf54\ub4dc\ub97c \ubcf4\uba74 `getProperties` \uba54\uc18c\ub4dc\ub97c \ud1b5\ud574 \ud544\ub4dc\ub97c \uac00\uc838\uc628 \ud6c4 \ub370\ucf54\ub808\uc774\ud130 \uc774\ub984\uc774 `JoinColumn` \uc778\uac83\ub9cc \ud544\ud130\ub9c1 \ud6c4 `getName` \uc744 \ud1b5\ud574 \ud544\ub4dc\uba85\uc744 \uac00\uc838\uc628\ub2e4.  \\n\uba54\uc18c\ub4dc\uba85\ub9cc \uc77d\uc5b4\ub3c4 \uc5b4\ub5a4 \uc791\uc5c5\uc744 \ud558\ub294\uc9c0 \ud30c\uc545\uc774 \uac00\ub2a5\ud558\uae30\uc5d0 \uc720\uc9c0\ubcf4\uc218\uac00 \uc27d\uace0 \ucf54\ub4dc\ub97c \uc77d\uae30 \uc27d\ub2e4\ub294 \uc7a5\uc810\uc774\uc788\ub2e4.\\n\\n```ts\\nprivate getJoinColumns(entityClass: ClassDeclaration): string[] {\\n  return entityClass\\n    .getProperties()\\n    .filter((property) =>\\n      property\\n        .getDecorators()\\n        .some((decorator) => decorator.getFullName() === \'JoinColumn\'),\\n    )\\n    .map((property) => property.getName());\\n}\\n```\\n\\n### JoinColumn \uc5d0 \ub9e4\uce6d\ub418\ub294 Index \ub370\ucf54\ub808\uc774\ud130\uac00 \uc788\ub294 \ud544\ub4dc \uac00\uc838\uc624\uae30\\n\\n`JoinColumn` \uc5d0 \ud574\ub2f9\ud558\ub294 \ud544\ub4dc\uba85 \uc911\uc5d0 \ud074\ub798\uc2a4\uc5d0 \uc120\uc5b8\ub41c Index \ub370\ucf54\ub808\uc774\ud130\uc758 \ub450 \ubc88\uc9f8 \ud30c\ub77c\ubbf8\ud130\uc640 \uc77c\uce58\ud558\ub294\uac8c \uc874\uc7ac\ud558\ub294 \uac83\ub9cc \ud544\ud130\ub9c1\ud55c\ub2e4.  \\n\ub2e8\uc21c\ud788 \ubaa8\ub4e0 Index \ub370\ucf54\ub808\uc774\ud130 \uc815\ubcf4\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 \ud544\ud130\ub9c1 \ud574\uc57c\ud558\ub294 \uc774\uc720\ub294 JoinColumn \uc774 \uc5c6\ub294 \ud544\ub4dc\uc5d0 \ub300\ud574\uc11c\ub3c4 Index \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\uac00 \uc788\uae30 \ub54c\ubb38\uc774\ub2e4.\\n\\n```ts\\nprivate getIndexColumns(\\n  entityClass: ClassDeclaration,\\n  joinColumns: string[],\\n): string[] {\\n  return entityClass\\n    .getDecorators()\\n    .filter((decorator) => decorator.getFullName() === \'Index\')\\n    // getArguments \ub294 \ub370\ucf54\ub808\uc774\ud130\uc758 \ud30c\ub9ac\ub9c8\ud130\ub97c \ubc18\ud658\ud55c\ub2e4\\n    .map((decorator) => decorator.getArguments())\\n    // Node.getFullText \uba54\uc18c\ub4dc\ub294 \uc2e4\uc81c \ud30c\ub77c\ubbf8\ud130 \ud0c0\uc785\uc774 \uc544\ub2cc \ucf54\ub4dc\uc5d0 \uc788\ub294 \ubb38\uc790\uc5f4 \uadf8\ub300\ub85c \ubc18\ud658\ud55c\ub2e4.\\n    // \ub530\ub77c\uc11c [\'column\'] \uacfc \uac19\uc774 \ubc30\uc5f4\ub85c \uc120\uc5b8\ub418\uc5b4 \uc788\uc5b4\ub3c4 \ubb38\uc790\uc5f4\uc774 \ub418\uba70\\n    // parseArgument \uba54\uc18c\ub4dc\ub294 \ud2b9\uc218\ubb38\uc790\ub97c \ubaa8\ub450 \uc81c\uac70\ud574\uc11c \uceec\ub7fc\uba85\ub9cc \ub0a8\uae34\ub2e4.\\n    .map(([_, indexField]) => this.parseArgument(indexField))\\n    .filter((columnName) => joinColumns.includes(columnName));\\n}\\n\\nprivate parseArgument(node?: Node): string {\\n  if (!node) {\\n    return \'\';\\n  }\\n\\n  // \ud2b9\uc218\ubb38\uc790\ub97c \ubaa8\ub450 \uc81c\uac70\\n  return node.getFullText().replace(/[\\\\W\\\\s]/gi, \'\');\\n}\\n```\\n\\n### \uac80\uc99d\ud558\uae30\\n\\n\uc704 \uba54\uc18c\ub4dc\ub97c \ud65c\uc6a9\ud574\uc11c \uac01 SourceFile \ub97c \uc21c\ud68c\ud574 `JoinColumn` \uc758 \uac1c\uc218\uc640 `Index` \uac1c\uc218\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc73c\uba74 \uc5d0\ub7ec\ub97c \ubc1c\uc0dd\uc2dc\ud0a8\ub2e4.\\n\\n```ts\\nvalidate(): void {\\n  const sourceFiles = this.#project.getSourceFiles();\\n\\n  sourceFiles.forEach((sourceFile) => {\\n    const entityClass = this.getClass(sourceFile);\\n    const joinColumns = this.getJoinColumns(entityClass);\\n    const indexColumns = this.getIndexColumns(entityClass, joinColumns);\\n\\n    if (indexColumns.length !== joinColumns.length) {\\n      throw new Error(\\n        `JoinColumn \uc5d0 \ub9e4\uce6d\ub418\ub294 Index \uc120\uc5b8\uc774 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4: ${JSON.stringify(\\n          {\\n            entity: entityClass.getName(),\\n            joinColumns,\\n            indexColumns,\\n          },\\n          null,\\n          2,\\n        )}`,\\n      );\\n    }\\n  });\\n}\\n```\\n\\n## \ud14c\uc2a4\ud2b8\\n\\n\uc774\uc81c \uc704 \ud074\ub798\uc2a4\uac00 \uc815\uc0c1 \ub3d9\uc791\ud558\ub294\uc9c0 \ud14c\uc2a4\ud2b8\ub97c \uc791\uc131\ud574\ubcf8\ub2e4.  \\n`EntityValidator` \uc0dd\uc131\uc790\uc758 \ub450 \ubc88\uc9f8 \ud30c\ub77c\ubbf8\ud130\uc5d0 \ud30c\uc77c\ub0b4\uc6a9\uc744 \uc9c1\uc811 \ub123\uc5b4\uc11c \ud14c\uc2a4\ud2b8 \ud560 \uc218 \uc788\ub2e4.\\n\\n```ts title=\\"EntityValidator.spec.ts\\"\\nimport { EntityValidator } from \\"./EntityValidator\\";\\n\\ndescribe(\\"EntityValidator\\", () => {\\n  it(\\"JoinColumn \uc5d0 \uc120\uc5b8\ub41c \uceec\ub7fc\uc5d0 \uc778\ub371\uc2a4\uac00 \uc5c6\uc73c\uba74 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud55c\ub2e4\\", () => {\\n    // given\\n    const path = \\"post.ts\\";\\n    const content = `\\n@Entity()\\nexport class Post {\\n  @ManyToOne(() => Profile, { createForeignKeyConstraints: false })\\n  @JoinColumn({ name: \'profile_id\', referencedColumnName: \'id\' })\\n  profile: Profile;\\n}`;\\n    const checker = new EntityValidator(path, content);\\n\\n    // when\\n    const validate = () => checker.validate();\\n\\n    // then\\n    expect(validate).toThrowError();\\n  });\\n\\n  it(\\"JoinColumn \uc5d0 \uc120\uc5b8\ub41c \uceec\ub7fc\uc5d0 \uc778\ub371\uc2a4\uac00 \uc788\uc73c\uba74 \uac80\uc99d\uc5d0 \uc131\uacf5\ud55c\ub2e4\\", () => {\\n    // given\\n    const content = `\\n@Entity()\\n@Index(\'idx_post_1\', [\'profile\'])\\nexport class Post {\\n  @ManyToOne(() => Profile, { createForeignKeyConstraints: false })\\n  @JoinColumn({ name: \'profile_id\', referencedColumnName: \'id\' })\\n  profile: Profile;\\n}`;\\n    const checker = new EntityValidator(content);\\n\\n    // when\\n    const validate = () => checker.validate();\\n\\n    // then\\n    expect(validate).not.toThrowError();\\n  });\\n\\n  it(\\"JoinColumn \uc774 \uc544\ub2cc \uceec\ub7fc\uc5d0 \ub300\ud55c \uc778\ub371\uc2a4\uac00 \uc788\uc5b4\ub3c4 \uac80\uc99d\uc5d0 \uc131\uacf5\ud55c\ub2e4\\", () => {\\n    // given\\n    const content = `\\n@Entity()\\n@Index(\'idx_post_1\', [\'profile\'])\\n@Index(\'idx_post_2\', [\'name\'])\\nexport class Post {\\n  @Column()\\n  name: string\\n\\n  @ManyToOne(() => Profile, { createForeignKeyConstraints: false })\\n  @JoinColumn({ name: \'profile_id\', referencedColumnName: \'id\' })\\n  profile: Profile;\\n}`;\\n    const checker = new EntityValidator(content);\\n\\n    // when\\n    const validate = () => checker.validate();\\n\\n    // then\\n    expect(validate).not.toThrowError();\\n  });\\n});\\n```\\n\\n\ub9c8\uc9c0\ub9c9\uc73c\ub85c \uc2e4\uc81c \uc5d4\ud2f0\ud2f0 \ud30c\uc77c\uc774 \uc788\ub294 \uacbd\ub85c\ub97c \uc9c0\uc815\ud574\uc11c \ucee8\ubca4\uc158\uc744 \ub9cc\uc871\ud558\ub294\uc9c0 \uac80\uc99d\ud55c\ub2e4.  \\n\ud14c\uc2a4\ud2b8\ucf54\ub4dc\ub97c \ud1b5\ud574 \uac80\uc99d\ud558\uae30 \ub54c\ubb38\uc5d0 \ub85c\uceec\uacfc CI \uc5d0\uc11c \uc190\uc27d\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4\ub294 \uc7a5\uc810\uc774\uc788\ub2e4.\\n\\n```ts\\nit(\\"\uc5d4\ud2f0\ud2f0 \ud30c\uc77c\ub4e4\uc740 JoinColumn \uc5d0 \ub300\ud55c \uc778\ub371\uc2a4\uac00 \uc874\uc7ac\ud55c\ub2e4\\", () => {\\n  // given\\n  const path = join(__dirname, \\"../src/**/*.entity.ts\\");\\n  const checker = new EntityValidator(path);\\n\\n  // when\\n  const validate = () => checker.validate();\\n\\n  // then\\n  expect(validate).not.toThrowError();\\n});\\n```\\n\\n## \ub9c8\ubb34\ub9ac\\n\\n`ts-morph` \ub97c \ud65c\uc6a9\ud574 \ucee8\ubca4\uc158 \uac80\uc99d\uacfc\uc815\uc744 \uc0b4\ud3b4\ubcf4\uc558\ub2e4.  \\n\ud574\ub2f9 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc18c\uc2a4\ucf54\ub4dc\ub97c \uc218\uc815\ud558\ub294 \uae30\ub2a5\ub3c4 \uc788\uae30 \ub54c\ubb38\uc5d0 \ucee8\ubca4\uc158\uc5d0 \ub9de\uc9c0 \uc54a\uc73c\uba74 \uc790\ub3d9\uc73c\ub85c \ud574\uacb0\ud558\ub294 \uae30\ub2a5\ub3c4 \ucd94\uac00\ud560 \uc218 \uc788\ub2e4.  \\n\ub610\ud55c \ud074\ub798\uc2a4 \uc678\uc5d0 \ud568\uc218, \uc778\ud130\ud398\uc774\uc2a4, Enum \ub4f1 \ub2e4\ub978 \uc720\ud615\uc758 \ucf54\ub4dc\ub3c4 \ud30c\uc2f1\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \ub2e4\uc591\ud55c \ucee8\ubca4\uc158\uc744 \uac80\uc99d\ud558\ub294 \ub85c\uc9c1\uc744 \ub9cc\ub4e4 \uc218 \uc788\ub2e4.\\n\\n## \ucc38\uace0\ubb38\uc11c\\n\\n- ts-morph documentation: https://ts-morph.com/"},{"id":"2022/01/05/kotlin-\ud658\uacbd\uc5d0\uc11c-Querydsl-\uc124\uc815\ud558\uae30","metadata":{"permalink":"/2022/01/05/kotlin-\ud658\uacbd\uc5d0\uc11c-Querydsl-\uc124\uc815\ud558\uae30","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-01-05-querydsl-in-kotlin/index.mdx","source":"@site/blog/2022-01-05-querydsl-in-kotlin/index.mdx","title":"kotlin \ud658\uacbd\uc5d0\uc11c Querydsl \uc124\uc815\ud558\uae30","description":"\ucd5c\uadfc\uc5d0 \ucf54\ud2c0\ub9b0\uacfc \uc2a4\ud504\ub9c1\uc744 \ud65c\uc6a9\ud574 \uc0ac\uc774\ub4dc \ud504\ub85c\uc81d\ud2b8\ub97c \ud558\uba74\uc11c querydsl \uc0ac\uc6a9\uc744 \uc704\ud574 \uc138\ud305\ud55c \uc791\uc5c5\uc744 \ub0a8\uae30\ub824\uace0 \ud55c\ub2e4.","date":"2022-01-05T00:00:00.000Z","formattedDate":"2022\ub144 1\uc6d4 5\uc77c","tags":[{"label":"kotlin","permalink":"/tags/kotlin"},{"label":"querydsl","permalink":"/tags/querydsl"}],"readingTime":3.18,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"kotlin \ud658\uacbd\uc5d0\uc11c Querydsl \uc124\uc815\ud558\uae30","slug":"2022/01/05/kotlin-\ud658\uacbd\uc5d0\uc11c-Querydsl-\uc124\uc815\ud558\uae30","authors":"jake","tags":["kotlin","querydsl"]},"prevItem":{"title":"ts-morph\ub85c \uac1c\ubc1c \ucee8\ubca4\uc158 \uac80\uc99d \uc790\ub3d9\ud654\ud558\uae30","permalink":"/2022/01/08/ts-morph\ub85c-\uac1c\ubc1c-\ucee8\ubca4\uc158-\uac80\uc99d-\uc790\ub3d9\ud654\ud558\uae30"},"nextItem":{"title":"TypeORM CreateDateColumn \ub370\ucf54\ub808\uc774\ud130\uc640 value transformer \ubb38\uc81c","permalink":"/2021/12/09/TypeORM-CreateDateColumn-\ub370\ucf54\ub808\uc774\ud130\uc640-value-transformer-\ubb38\uc81c"}},"content":"\ucd5c\uadfc\uc5d0 \ucf54\ud2c0\ub9b0\uacfc \uc2a4\ud504\ub9c1\uc744 \ud65c\uc6a9\ud574 \uc0ac\uc774\ub4dc \ud504\ub85c\uc81d\ud2b8\ub97c \ud558\uba74\uc11c querydsl \uc0ac\uc6a9\uc744 \uc704\ud574 \uc138\ud305\ud55c \uc791\uc5c5\uc744 \ub0a8\uae30\ub824\uace0 \ud55c\ub2e4.  \\n\uc790\ubc14\ub85c \ub41c querydsl \uad00\ub828 \ube14\ub85c\uadf8 \uae00\uc740 \ub9ce\uc740\ub370 \uc0dd\uac01\ubcf4\ub2e4 \ucf54\ud2c0\ub9b0\uc740 \uc801\uc5c8\uace0 \uc81c\ub300\ub85c \uc801\uc6a9\uc774 \uc548\ub418\uc5b4 \uace0\uc0dd\uc744 \ud558\uac8c\ub418\uc5c8\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \ucd5c\uc885 \uc124\uc815\\n\\n\uacb0\ub860\ubd80\ud130 \uba3c\uc800 \ub9d0\ud558\uba74 querydsl \ubc84\uc804\uc744 \ud604\uc7ac \uc2dc\uc810 \ucd5c\uc2e0\ubc84\uc804\uc778 `5.0.0` \uc744 \uc0ac\uc6a9\ud558\uba74 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4.  \\n\uadf8\ub9ac\uace0 `kotlinOption \uc758 jvmTarget` \ubc84\uc804\uacfc `java.sourceCompatibility` \uc5d0 \uc9c0\uc815\ud55c \ubc84\uc804\uc774 \uc77c\uce58\ud574\uc57c\ud55c\ub2e4.  \\ngradle \uc124\uc815\uc740 \uc544\ub798\uc640 \uac19\ub2e4.\\n\\n```kotlin title=\\"build.gradle.kts\\"\\nimport org.jetbrains.kotlin.gradle.tasks.KotlinCompile\\n\\nplugins {\\n    id(\\"org.springframework.boot\\") version \\"2.6.2\\"\\n    id(\\"io.spring.dependency-management\\") version \\"1.0.11.RELEASE\\"\\n\\n    kotlin(\\"jvm\\") version \\"1.6.10\\"\\n    kotlin(\\"plugin.spring\\") version \\"1.6.10\\"\\n    kotlin(\\"plugin.jpa\\") version \\"1.6.10\\"\\n    // highlight-next-line\\n    kotlin(\\"kapt\\") version \\"1.6.10\\" // kapt \ucd94\uac00\\n}\\n\\nrepositories {\\n    mavenCentral()\\n}\\n\\n// highlight-next-line\\njava.sourceCompatibility = JavaVersion.VERSION_11 // jvmTarget \uacfc \uac19\uc740 \ubc84\uc804\uc73c\ub85c \uc9c0\uc815\\n\\ndependencies {\\n    // highlight-start\\n    // querydsl \uad00\ub828 \ud328\ud0a4\uc9c0 \ucd94\uac00. \ubc84\uc804\uc740 5.0.0 \uc73c\ub85c \uc9c0\uc815\\n    implementation(\\"org.springframework.boot:spring-boot-starter-data-jpa\\")\\n    implementation(\\"com.querydsl:querydsl-jpa:5.0.0\\")\\n    kapt(\\"com.querydsl:querydsl-apt:5.0.0:jpa\\")\\n    // highlight-end\\n}\\n\\ntasks.withType<KotlinCompile> {\\n    kotlinOptions {\\n        freeCompilerArgs = listOf(\\"-Xjsr305=strict\\")\\n        // highlight-next-line\\n        jvmTarget = \\"11\\" // java.sourceCompatibility \uacfc \uac19\uc740 \ubc84\uc804 \uc9c0\uc815\\n    }\\n}\\n\\ntasks.withType<Test> {\\n    useJUnitPlatform()\\n}\\n```\\n\\n## \ubb38\uc81c \uc0c1\ud669\\n\\nquerydsl \uacf5\uc2dd\ubb38\uc11c\uc5d0\ub294 gradle \uc124\uc815\uc740 \uc5c6\uace0 maven \ub9cc \uc874\uc7ac\ud574\uc11c \uc5ec\ub7ec \ube14\ub85c\uadf8 \uae00\uc744 \ucc38\uc870\ud574\uc11c \uc124\uc815\ud558\ub824\uace0 \ud588\ub2e4.  \\n\ubb38\uc11c\uc5d0\ub3c4 \ubaa8\ub450 4.x.x \ubc84\uc804\uc744 \uc4f0\uace0\uc788\uace0 \uacf5\uc2dd \ud648\ud398\uc774\uc9c0\uc5d0\ub3c4 4.4.0 \uc774 \ucd5c\uc2e0\ubc84\uc804\uc778\uc9c0\ub77c \uadf8\ub300\ub85c \uc0ac\uc6a9\ud588\uc9c0\ub9cc Qclass \uc0dd\uc131 \uc2dc \uc544\ub798 \uba54\uc2dc\uc9c0\uac00 \ucd9c\ub825\ub418\uace0 \uc544\ubb34\ub7f0 \ud30c\uc77c\uc774 \uc0dd\uc131\ub418\uc9c0 \uc54a\uc558\ub2e4.\\n\\n```shell\\ngradle clean compileKotlin\\n> Task :kaptKotlin\\n[WARN] Can\'t find annotation processor class com.querydsl.apt.jpa.JPAAnnotationProcessor: com/mysema/codegen/model/Type\\n```\\n\\n`annotation processor` \uad00\ub828 \ubb38\uc81c\ub85c \ubcf4\uc5ec \uad00\ub828 \ubb38\uc11c\ub97c \uac80\uc0c9\ud574\uace0 \uc81c\uc2dc\ub41c \ud574\uacb0\ubc29\ubc95\uc744 \uc2dc\ub3c4\ud574\ubcf4\uc558\uc9c0\ub9cc \uc5ec\uc804\ud788 \uac19\uc740 \uc5d0\ub7ec\ub97c \ucd9c\ub825\ud588\ub2e4.  \\nkotlin \uc744 \ucd5c\uc2e0\ubc84\uc804\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\uc5b4\uc11c \uc0c8\ub85c\uc6b4 \ud638\ud658\uc131 \ubb38\uc81c\uac00 \uc0dd\uae34\uac74\uc9c0 \uc758\uc2ec\uc774 \ub4e4\uc5c8\uace0 querydsl \ub3c4 \ucd5c\uc2e0\ubc84\uc804\uc73c\ub85c \uc62c\ub824\uc11c \uc2dc\ub3c4\ud574\ubcf4\uc558\ub2e4.  \\n\uc774\ud6c4 \ud574\ub2f9 \uba54\uc2dc\uc9c0\ub294 \uc0ac\ub77c\uc84c\uc9c0\ub9cc \uc0c8\ub85c\uc6b4 \uba54\uc2dc\uc9c0\uac00 \ucd9c\ub825\ub410\ub2e4.\\n\\n```shell\\ngradle clean compileKotlin\\n> Task :kaptKotlin\\n\'compileJava\' task (current target is 17) and \'compileKotlin\' task (current target is 11) jvm target compatibility should be set to the same Java version.\\n```\\n\\n\uc774\ubc88 \uc5d0\ub7ec\ub294 \uba54\uc2dc\uc9c0\ub9cc \ubd10\ub3c4 \uc27d\uac8c \ud574\uacb0\ud560 \uc218 \uc788\ub294 \ub0b4\uc6a9\uc774\uc5c8\uace0 `jvmTarget` \uacfc `java.sourceCompatibility` \ub97c \ub3d9\uc77c\ud558\uac8c \ub9de\ucd94\ub2c8 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud588\ub2e4.  \\nquerydsl 5.0.0 \ub9b4\ub9ac\uc988 \ub178\ud2b8\ub97c \ubcf4\uba74 \uc544\ub798 \ub0b4\uc6a9\uc774 \uc788\ub294\ub370 \uc790\ubc14 11 \uc9c0\uc6d0\uacfc \ucf54\ud2c0\ub9b0 \ucf54\ub4dc \uc0dd\uc131\uacfc \uad00\ub828\ub41c \uc791\uc5c5\uc744 \ud55c\uac83\uc774 \ud574\uacb0\uc774 \ub41c \uc6d0\uc778\uc73c\ub85c \ubcf4\uc778\ub2e4.\\n\\n![querydsl](./querydsl.png)"},{"id":"2021/12/09/TypeORM-CreateDateColumn-\ub370\ucf54\ub808\uc774\ud130\uc640-value-transformer-\ubb38\uc81c","metadata":{"permalink":"/2021/12/09/TypeORM-CreateDateColumn-\ub370\ucf54\ub808\uc774\ud130\uc640-value-transformer-\ubb38\uc81c","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2021-12-09-typeorm-transformer/index.mdx","source":"@site/blog/2021-12-09-typeorm-transformer/index.mdx","title":"TypeORM CreateDateColumn \ub370\ucf54\ub808\uc774\ud130\uc640 value transformer \ubb38\uc81c","description":"\ubb38\uc81c \uc0c1\ud669","date":"2021-12-09T00:00:00.000Z","formattedDate":"2021\ub144 12\uc6d4 9\uc77c","tags":[{"label":"typeorm","permalink":"/tags/typeorm"},{"label":"transformer","permalink":"/tags/transformer"},{"label":"CreateDateColumn","permalink":"/tags/create-date-column"}],"readingTime":4.36,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"TypeORM CreateDateColumn \ub370\ucf54\ub808\uc774\ud130\uc640 value transformer \ubb38\uc81c","slug":"2021/12/09/TypeORM-CreateDateColumn-\ub370\ucf54\ub808\uc774\ud130\uc640-value-transformer-\ubb38\uc81c","authors":"jake","tags":["typeorm","transformer","CreateDateColumn"]},"prevItem":{"title":"kotlin \ud658\uacbd\uc5d0\uc11c Querydsl \uc124\uc815\ud558\uae30","permalink":"/2022/01/05/kotlin-\ud658\uacbd\uc5d0\uc11c-Querydsl-\uc124\uc815\ud558\uae30"},"nextItem":{"title":"Promise\uc640 Monad - 2","permalink":"/2021/11/28/Promise\uc640-Monad-2"}},"content":"### \ubb38\uc81c \uc0c1\ud669\\n\\n\ubcf4\ud1b5 \ud14c\uc774\ube14\uc5d0 \uae30\ubcf8\uc73c\ub85c \ub123\ub294 \uc0dd\uc131\uc2dc\uac04\uacfc, \uc218\uc815\uc2dc\uac04 \ud544\ub4dc\ub97c \ucd94\uac00\ud558\uae30 \uc704\ud574 typeorm \uc0ac\uc6a9\ud558\ub294 \ud658\uacbd\uc5d0\uc11c\ub294 \ub370\ucf54\ub808\uc774\ud130\uc640 \uc0c1\uc18d\uc744 \uc0ac\uc6a9\ud55c\ub2e4.  \\n\uc608\ub97c\ub4e4\uc5b4 \uc544\ub798\uc640 \uac19\uc740 \ud074\ub798\uc2a4\ub97c \ub9cc\ub4e0 \ud6c4 \ub2e4\ub978 \uc5d4\ud2f0\ud2f0 \ud074\ub798\uc2a4\uac00 \uc0c1\uc18d\ubc1b\ub294 \ubc29\ubc95\uc73c\ub85c \uad6c\ud604\ud558\uac8c \ub41c\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n```ts\\nimport { CreateDateColumn, UpdateDateColumn } from \\"typeorm\\";\\n\\nexport abstract class BaseEntity {\\n  @CreateDateColumn({ type: \\"timestamp\\" })\\n  createdAt: Date;\\n\\n  @UpdateDateColumn({ type: \\"timestamp\\" })\\n  updatedAt: Date;\\n}\\n```\\n\\n\ud558\uc9c0\ub9cc \uac01 \ud544\ub4dc\uc758 \ud0c0\uc785\uc744 Date \ub300\uc2e0 \uc11c\ub4dc\ud30c\ud2f0 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \ub0a0\uc9dc \ud0c0\uc785\uc73c\ub85c \ubc14\uafb8\uae30 \uc704\ud574\uc11c\ub294 `value transformer` \ub97c \uc0ac\uc6a9\ud574\uc57c \ud558\uc9c0\ub9cc \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud55c\ub2e4.\\n\\n```ts\\nimport { CreateDateColumn, UpdateDateColumn } from \\"typeorm\\";\\nimport { LocatDateTime } from \\"@js-joda/core\\";\\n\\nexport abstract class BaseEntity {\\n  @CreateDateColumn({\\n    type: \\"timestamp\\",\\n    transformer: new LocalDateTransformer(),\\n  })\\n  createdAt: LocalDateTime;\\n\\n  @UpdateDateColumn({\\n    type: \\"timestamp\\",\\n    transformer: new LocalDateTransformer(),\\n  })\\n  updatedAt: LocalDateTime;\\n}\\n```\\n\\n:::info\\n\uc5ec\uae30\uc11c LocalDateTransformer \ub294 typeorm \uc758 ValueTransformer \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud55c \ud074\ub798\uc2a4\ub85c\\njs \uc758 Date \uc640 LocalDateTime \uac04\uc758 \ubcc0\ud658\ub85c\uc9c1\uc774 \uc788\ub2e4.  \\n:::\\n\\ntypeorm \uacf5\uc2dd \uc800\uc7a5\uc18c\uc5d0 \uc774\uc640\uac19\uc740 \uc774\uc288\uac00 \uc62c\ub77c\uc640 \uc788\uc9c0\ub9cc (2020\ub144 12\uc6d4) \uc544\uc9c1\ub3c4 \ud574\uacb0\ub418\uc9c0 \uc54a\uace0\uc788\ub2e4.\\n\\n- [UpdateDateColumn fails with transformer](https://github.com/typeorm/typeorm/issues/7150)\\n\\n### \ud574\uacb0 \ubc29\uc548\\n\\n\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 `@CreateDateColumn` \ub370\ucf54\ub808\uc774\ud130 \ub300\uc2e0 `@Column`, `@BeforeInsert`, `@BeforeUpdate` \ub97c \ud65c\uc6a9\ud55c\ub2e4.\\n\\n```ts\\nimport { BeforeInsert, BeforeUpdate, Column } from \\"typeorm\\";\\nimport { LocalDateTime } from \\"@js-joda/core\\";\\n\\nexport abstract class BaseEntity {\\n  @Column({\\n    type: \\"timestamptz\\",\\n    transformer: new LocalDateTimeTransformer(),\\n    nullable: false,\\n    update: false,\\n  })\\n  createdAt: LocalDateTime;\\n\\n  @Column({\\n    type: \\"timestamptz\\",\\n    transformer: new LocalDateTimeTransformer(),\\n    nullable: false,\\n  })\\n  updatedAt: LocalDateTime;\\n\\n  @BeforeInsert()\\n  protected beforeInsert() {\\n    this.createdAt = LocalDateTime.now();\\n    this.updatedAt = LocalDateTime.now();\\n  }\\n\\n  @BeforeUpdate()\\n  protected beforeUpdate() {\\n    this.updatedAt = LocalDateTime.now();\\n  }\\n}\\n```\\n\\n`@BeforeInsert` \uc640 `@BeforeUpdate` \ub294 \uc774\ub984 \uadf8\ub300\ub85c \ud14c\uc774\ube14\uc5d0 \uc0c8\ub85c\uc6b4 row \uac00 \ucd94\uac00\ub418\uae30 \uc804\uc774\ub098 \uae30\uc874 row \uc218\uc815\uc791\uc5c5 \uc804\uc5d0 \uc2e4\ud589\ub41c\ub2e4.  \\n\uc815\uc0c1 \ub3d9\uc791\ud558\ub294\uc9c0 \ud14c\uc2a4\ud2b8\ucf54\ub4dc\ub97c \uc791\uc131\ud574\ubcf4\uc790.\\n\\n```ts\\nimport {\\n  Connection,\\n  createConnection,\\n  Entity,\\n  PrimaryGeneratedColumn,\\n  Repository,\\n} from \\"typeorm\\";\\nimport { LocalDateTime } from \\"@js-joda/core\\";\\n\\n@Entity()\\nclass TestEntity extends BaseEntity {\\n  @PrimaryGeneratedColumn(\\"increment\\")\\n  id: number;\\n}\\n\\ndescribe(\\"TestEntityRepository\\", () => {\\n  let testEntityRepository: Repository<TestEntity>;\\n  let connection: Connection;\\n\\n  beforeAll(async () => {\\n    connection = await createConnection({\\n      type: \\"postgres\\",\\n      host: \\"localhost\\",\\n      port: 5432,\\n      username: \\"test\\",\\n      password: \\"test\\",\\n      database: \\"test\\",\\n      entities: [TestEntity],\\n      synchronize: true,\\n    });\\n\\n    testEntityRepository = connection.getRepository(TestEntity);\\n  });\\n\\n  afterAll(() => connection.close());\\n\\n  beforeEach(() => testEntityRepository.clear());\\n\\n  it(\\"save \uba54\uc18c\ub4dc\ub85c insert \uc2dc createdAt, updatedAt \uc774 \ud604\uc7ac\uc2dc\uac04\uc73c\ub85c \ub4e4\uc5b4\uac04\ub2e4\\", async () => {\\n    // given\\n    const nowTime = LocalDateTime.now();\\n    const entity = new TestEntity();\\n\\n    // when\\n    const testEntity = await testEntityRepository.save(entity);\\n\\n    // then\\n    expect(testEntity.createdAt.isAfter(nowTime)).toBeTruthy();\\n    expect(testEntity.updatedAt.isAfter(nowTime)).toBeTruthy();\\n  });\\n\\n  it(\\"insert \uba54\uc18c\ub4dc\ub85c insert \uc2dc createdAt, updatedAt \uc774 \ud604\uc7ac\uc2dc\uac04\uc73c\ub85c \ub4e4\uc5b4\uac04\ub2e4\\", async () => {\\n    // given\\n    const nowTime = LocalDateTime.now();\\n    const entity = new TestEntity();\\n\\n    // when\\n    await testEntityRepository.insert(entity);\\n\\n    // then\\n    const testEntity = await testEntityRepository.findOneOrFail();\\n    expect(testEntity.createdAt.isAfter(nowTime)).toBeTruthy();\\n    expect(testEntity.updatedAt.isAfter(nowTime)).toBeTruthy();\\n  });\\n\\n  it(\\"save \uba54\uc18c\ub4dc\ub85c \uc5d4\ud2f0\ud2f0 \uc5c5\ub370\uc774\ud2b8 \uc2dc updatedAt \uc774 \uac31\uc2e0\ub41c\ub2e4\\", async () => {\\n    // given\\n    const testEntity = await testEntityRepository.save(new TestEntity());\\n    const before = testEntity.updatedAt;\\n\\n    // when\\n    const updatedTestEntity = await testEntityRepository.save(testEntity);\\n\\n    // then\\n    expect(updatedTestEntity.updatedAt.isAfter(before)).toBeTruthy();\\n  });\\n\\n  it(\\"update \uba54\uc18c\ub4dc\ub85c \uc5d4\ud2f0\ud2f0 \uc5c5\ub370\uc774\ud2b8 \uc2dc updatedAt \uc774 \uac31\uc2e0\ub41c\ub2e4\\", async () => {\\n    const testEntity = await testEntityRepository.save(new TestEntity());\\n    const before = testEntity.updatedAt;\\n\\n    // when\\n    await testEntityRepository.update(testEntity.id, testEntity);\\n\\n    // then\\n    const updatedTestEntity = await testEntityRepository.findOneOrFail();\\n    expect(updatedTestEntity.updatedAt.isAfter(before)).toBeTruthy();\\n  });\\n});\\n```\\n\\n\ub300\ubd80\ubd84\uc758 \uc0c1\ud669\uc5d0\uc11c \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud558\uc9c0\ub9cc `queryBuilder` \ub97c \uc0ac\uc6a9\ud574 update \ub97c \uc218\ud589\ud560 \ub54c\uc5d0\ub294 updatedAt \uc774 \uac31\uc2e0\ub418\uc9c0 \uc54a\ub294\ub2e4.\\n\\n```ts\\nit(\\"queryBuilder \ub85c \uc5c5\ub370\uc774\ud2b8 \uc2dc updatedAt \uac31\uc2e0\ub418\uc9c0 \uc54a\ub294\ub2e4\\", async () => {\\n  // given\\n  const testEntity = await testEntityRepository.save(new TestEntity());\\n  const before = testEntity.updatedAt;\\n\\n  // when\\n  await testEntityRepository\\n    .createQueryBuilder(\\"testEntity\\")\\n    .update()\\n    .set({ id: 3 })\\n    .execute();\\n\\n  // then\\n  const updatedTestEntity = await testEntityRepository.findOneOrFail();\\n  expect(updatedTestEntity.updatedAt.isEqual(before)).toBeTruthy();\\n});\\n```\\n\\n\uc704 \uacbd\uc6b0\uc5d0\ub294 \uba85\uc2dc\uc801\uc73c\ub85c \ud604\uc7ac\uc2dc\uac04\uc744 \ub123\uc5b4\uc8fc\uc5b4\uc57c \ud55c\ub2e4.\\n\\n```ts\\nit(\\"queryBuilder \ub85c \uc5c5\ub370\uc774\ud2b8 \uc2dc updatedAt \uac31\uc2e0\ub41c\ub2e4\\", async () => {\\n  // given\\n  const testEntity = await testEntityRepository.save(new TestEntity());\\n  const before = testEntity.updatedAt;\\n\\n  // when\\n  await testEntityRepository\\n    .createQueryBuilder(\\"testEntity\\")\\n    .update()\\n    .set({ id: 100, updatedAt: LocalDateTime.now() })\\n    .execute();\\n\\n  // then\\n  const updatedTestEntity = await testEntityRepository.findOneOrFail();\\n  expect(updatedTestEntity.updatedAt.isAfter(before)).toBeTruthy();\\n});\\n```"},{"id":"2021/11/28/Promise\uc640-Monad-2","metadata":{"permalink":"/2021/11/28/Promise\uc640-Monad-2","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2021-11-28-promise-and-monad-2/index.mdx","source":"@site/blog/2021-11-28-promise-and-monad-2/index.mdx","title":"Promise\uc640 Monad - 2","description":"\uc774\uc804 \uae00\uc5d0\uc11c\ub294 promise \ub97c \ubc18\ud658\ud558\ub294 \ud568\uc218\ub4e4\uc744 then \uc744 \uc774\uc6a9\ud574 \ud569\uc131\ud558\ub294 \uacfc\uc815\uc744 \uc0b4\ud3b4\ubcf4\uc558\ub2e4.","date":"2021-11-28T00:00:00.000Z","formattedDate":"2021\ub144 11\uc6d4 28\uc77c","tags":[{"label":"monad","permalink":"/tags/monad"},{"label":"promise","permalink":"/tags/promise"}],"readingTime":5.79,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Promise\uc640 Monad - 2","slug":"2021/11/28/Promise\uc640-Monad-2","authors":"jake","tags":["monad","promise"]},"prevItem":{"title":"TypeORM CreateDateColumn \ub370\ucf54\ub808\uc774\ud130\uc640 value transformer \ubb38\uc81c","permalink":"/2021/12/09/TypeORM-CreateDateColumn-\ub370\ucf54\ub808\uc774\ud130\uc640-value-transformer-\ubb38\uc81c"},"nextItem":{"title":"Promise\uc640 Monad - 1","permalink":"/2021/11/07/Promise\uc640-Monad-1"}},"content":"\uc774\uc804 \uae00\uc5d0\uc11c\ub294 promise \ub97c \ubc18\ud658\ud558\ub294 \ud568\uc218\ub4e4\uc744 then \uc744 \uc774\uc6a9\ud574 \ud569\uc131\ud558\ub294 \uacfc\uc815\uc744 \uc0b4\ud3b4\ubcf4\uc558\ub2e4.  \\n\uc774\uc81c \ud30c\ub77c\ubbf8\ud130\ub97c 2\uac1c \uc774\uc0c1 \uc694\uad6c\ud558\ub294 \ud568\uc218\uac00 \uc788\ub294 \uacbd\uc6b0\ub97c \uc0b4\ud3b4\ubcf4\uc790.\\n\\n\x3c!--truncate--\x3e\\n\\n## add \ud568\uc218\uc640 \ube44\ub3d9\uae30 \ud568\uc218\\n\\n\uac04\ub2e8\ud558\uac8c add \ud568\uc218\ub97c \uc815\uc758\ud558\uace0 \uac01 \ud30c\ub77c\ubbf8\ud130\ub294 \ube44\ub3d9\uae30 \ud568\uc218\uc758 \ubc18\ud658\uac12\uc744 \ud1b5\ud574 \uac00\uc838\uc628\ub2e4\uace0 \uc0dd\uac01\ud574\ubcf4\uc790.\\n\\n```ts\\ndeclare function getFirstNumber(): Promise<number>;\\ndeclare function getSecondNumber(first: number): Promise<number>;\\ndeclare function add(a: number, b: number): number;\\n```\\n\\n\uc774\uc804 \uae00\uc5d0\uc11c \uc18c\uac1c\ud55c \ubc29\ubc95\ub300\ub85c then \uc744 \uc774\uc6a9\ud574\ubcf4\uba74 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud55c\ub2e4.\\n\\n```ts\\ngetFirstNumber()\\n  .then((a) => getSecondNumber(a))\\n  .then((b) => add(a, b)); // a \ub97c \ucc38\uc870\ud560 \uc218 \uc5c6\ub2e4\\n```\\n\\n`getFirstNumber` \uac00 \ubc18\ud658\ud55c \uac12\uc740 \uc624\uc9c1 \uccab\ubc88\uc9f8 then \ub0b4\ubd80 \ud568\uc218\uc5d0\uc11c\ub9cc \uc811\uadfc \uac00\ub2a5\ud558\uace0 \ub450\ubc88\uc9f8\uc5d0\uc11c\ub294 b \ub9cc \ucc38\uc870\ud560 \uc218 \uc788\ub2e4.  \\n\ubb3c\ub860 `Promise.all` \uc774\ub098 \uc0c1\ub2e8\uc5d0 \uc784\uc2dc\ubcc0\uc218\ub97c \uc120\uc5b8\ud558\ub294 \ubc29\uc2dd\uc73c\ub85c \ud574\uacb0\ud560 \uc218 \uc788\uc9c0\ub9cc \uae54\ub054\ud55c \ubc29\ubc95\uc740 \uc544\ub2c8\ub2e4.\\n\\n```ts\\n// temporary variable\\nlet temp: number;\\ngetFirstNumber()\\n  .then((a) => {\\n    temp = a;\\n    return getSecondNumber(a);\\n  })\\n  .then((b) => add(temp, b));\\n\\n// Promise.all\\ngetFirstNumber()\\n  .then((a) => Promise.all([getSecondNumber(a), a]))\\n  .then(([a, b]) => add(a, b));\\n```\\n\\n\ub0b4\ubd80 \ud568\uc218\uac00 \uc678\ubd80 \ud568\uc218\uc758 \ubcc0\uc218\ub97c \ucc38\uc870\ud560 \uc218 \uc788\ub294 \uc131\uc9c8\uc744 \ud65c\uc6a9\ud574\uc11c \uc544\ub798\uc640 \uac19\uc774 \ud65c\uc6a9\ud560 \uc218\ub3c4 \uc788\ub2e4.\\n\\n```ts {3}\\ngetFirstNumber().then((a) => {\\n  return getSecondNumber(a).then((b) => {\\n    return add(a, b);\\n  });\\n});\\n```\\n\\n\uac00\uc7a5 \uc548\ucabd\uc5d0 \uc788\ub294 `(b) => { return add(a, b) }` \ud568\uc218\ub294 \ubc14\uae65\ucabd \ud568\uc218\uc758 \ud30c\ub77c\ubbf8\ud130\uc778 a\ub97c \ucc38\uc870\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \uc704 \ucf54\ub4dc\ub294 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4.  \\n\ud558\uc9c0\ub9cc \uc774 \ubc29\ubc95\ub3c4 \ud2b9\uc815 \ud568\uc218\uac00 \ud544\uc694\ud55c \ud30c\ub77c\ubbf8\ud130 \uac1c\uc218\uac00 \ub9ce\uc544\uc9c8\uc218\ub85d callback hell \ucc98\ub7fc \ub4e4\uc5ec\uc4f0\uae30\uac00 \ub9ce\uc544\uc9c8 \uc218 \uc788\ub294 \ubb38\uc81c\uac00 \uc788\ub2e4.\\n\\n```ts\\nA().then((a) => {\\n  return B().then((b) => {\\n    return C().then((c) => {\\n      return D().then((d) => {\\n        return a + b + c + d;\\n      });\\n    });\\n  });\\n});\\n```\\n\\n## async / await \uc640 do notation\\n\\n\uc704\uc640 \uac19\uc740 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 `async/await` \uac00 \ub3c4\uc785\ub418\uc5c8\uace0 \uc544\ub798\uc640 \uac19\uc774 \uc791\uc131\ud560 \uc218 \uc788\ub2e4.\\n\\n```ts\\nasync function addNumber() {\\n  const a = await getFirstNumber();\\n  const b = await getSecondNumber(a);\\n\\n  return add(a, b);\\n}\\n```\\n\\n\ub9c8\uce58 2\uac1c\uc758 \ud568\uc218\uc758 \ubc18\ud658\uac12\uc744 \uc9c0\uc5ed\ubcc0\uc218 a \uc640 b \uc5d0 \ud560\ub2f9\ud55c \ud6c4 add \ub97c \ud638\ucd9c\ud558\ub294 \ucf54\ub4dc\ucc98\ub7fc \uc791\uc131\ud560 \uc218 \uc788\ub2e4.  \\n\uc21c\uc218 \ud568\uc218\ud615 \uc5b8\uc5b4\uc778 \ud558\uc2a4\ucf08\ub3c4 \uc774\uc640 \ube44\uc2b7\ud55c `do notation` \uc774 \uc874\uc7ac\ud55c\ub2e4.\\n\\n```hs\\naddNumber :: IO Int\\naddNumber = do\\n    a <- getFirstNumber\\n    b <- getSecondNumber a\\n    return add a b\\n```\\n\\n\ud558\uc2a4\ucf08\uc758 `do natation` \uc774 monad \ub97c \ubc18\ud658\ud558\ub294 \ud568\uc218\ub4e4\uc744 \ud65c\uc6a9\ud55c \ub85c\uc9c1\uc744 \uc808\ucc28\uc801\uc73c\ub85c \ud45c\uc2dc\ud558\ub294 \uc5ed\ud560\uc744 \ud574\uc900\ub2e4.  \\n\ub9c8\ucc2c\uac00\uc9c0\ub85c `async/await` \ub3c4 promise \ub97c \ubc18\ud658\ud558\ub294 \ud568\uc218\ub4e4\uc744 \ud65c\uc6a9\ud55c \ub85c\uc9c1\uc744 \uc808\ucc28\uc801\uc73c\ub85c \ud45c\uc2dc\ud558\ub294 \uc5ed\ud560\uc744 \ud574\uc900\ub2e4.\\n\\n## promise \uc640 monad\\n\\n\uc774\ucbe4\uc5d0\uc11c monad \uc5d0 \ub300\ud55c \uc124\uba85\uc744 \ud558\uc790\uba74 \uc5b4\ub5a4 \ud0c0\uc785\uc5d0 \ud2b9\ubcc4\ud55c \ubb38\ub9e5\uc744 \ub354\ud574\uc8fc\ub294 \ucee8\ud14c\uc774\ub108\ub77c \ub9d0\ud560 \uc218 \uc788\ub2e4.  \\n\uc608\ub97c\ub4e4\uba74 `number` \ub294 \uc77c\ubc18\uc801\uc778 \uc22b\uc790\ud0c0\uc785\uc774\uc9c0\ub9cc \uac70\uae30\uc5d0 promise \ub85c \uac10\uc2f8\uba74 \uc548\uc758 \uc22b\uc790\ub294 \uc77c\uc815\uc2dc\uac04\uc774 \uc9c0\ub09c \ud6c4 \uac12\uc744 \uc54c\uac8c\ub41c\ub2e4\ub294 \ubb38\ub9e5\uc744 \ub354\ud574\uc900\ub2e4.\\n\\n```ts\\nconst a: number = 3; // a \ub294 \ud3c9\uac00\uc2dc\uc810\uc5d0 \uadf8 \uac12\uacfc \ud0c0\uc785\uc744 \ubc14\ub85c \uc54c \uc218 \uc788\ub2e4.\\nconst b: Promise<number> = new Promise((resolve) =>\\n  setTimeout(() => resolve(5), 1000)\\n); // \ucee8\ud14c\uc774\ub108 \uc548\uc758 \uac12\uc740 \ud3c9\uac00\uc2dc\uc810\uc774\ud6c4 \uc77c\uc815 \uc2dc\uac04\uc774 \uc9c0\ub09c \ud6c4\uc5d0 \uc54c \uc218 \uc788\ub294\ub370 \uadf8 \ud0c0\uc785\uc740 number \uc774\ub2e4.\\n```\\n\\n\uc0ac\uc2e4 \ucee8\ud14c\uc774\ub108\uc758 \uc885\ub958\ub294 promise \uc678\uc5d0 \uc5ec\ub7ec\uac00\uc9c0\uac00 \uc788\uc73c\uba70 \uc9c1\uc811 \ucee8\ud14c\uc774\ub108\ub97c \ub9cc\ub4e4\uc218\ub3c4 \uc788\ub2e4.\\n\\n## Monad laws\\n\\n\ub9cc\uc57d \ucee8\ud14c\uc774\ub108\ub97c \uc9c1\uc811 \ub9cc\ub4dc\ub294 \uacbd\uc6b0 \ub9cc\ub4e0 \ucee8\ud14c\uc774\ub108\ub294 \uc5b4\ub5a4 \ubc95\uce59\uc744 \ub9cc\uc871\ud574\uc57c monad \ub77c\uace0 \ubd80\ub97c \uc218 \uc788\uac8c\ub41c\ub2e4.  \\nmonad \ub294 category theory \uc5d0\uc11c \ub098\uc628 \uac1c\ub150\uc774\uae30\uc5d0 \ub2e4\ubd84\ud788 \uc218\ud559\uc801\uc778 \ubc95\uce59\uc774\uba70 \ub2e4\uc74c 3\uac00\uc9c0\uc774\ub2e4.\\n\\n- Left identity\\n- Right identity\\n- Associativity\\n\\n\uc608\uc804\uc5d0 \ubc30\uc6b4 \ub367\uc148\uc758 \ud56d\ub4f1\ubc95\uce59\uacfc \uacb0\ud569\ubc95\uce59\uacfc \ube44\uc2b7\ud55c \uac1c\ub150\uc73c\ub85c \uc0dd\uac01\ud558\uba74 \ub41c\ub2e4.  \\n\uc774 \uae00\uc758 \ubaa9\uc801\uc740 monad \uc5d0 \ub300\ud55c \uc644\ubcbd\ud55c \uc774\ud574\ubcf4\ub2e4 \uadf8 \uc720\uc6a9\uc131\uc744 \uc54c\ub9ac\uae30 \uc704\ud568\uc774\uae30\uc5d0 \uc790\uc138\ud55c \uc124\uba85\uc740 \uc0dd\ub7b5\ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n:::info\\n\uc0ac\uc2e4 promise \ub294 \ud2b9\uc815 \uc870\uac74\uc5d0\uc11c\ub294 \uc704 \ubc95\uce59\uc744 \ub9cc\uc871\ud558\uae30 \uc54a\uae30\uc5d0 monad \ub77c\uace0 \ud560 \uc218 \uc5c6\ub2e4.  \\n\ud558\uc9c0\ub9cc js \uac1c\ubc1c\uc790\uc5d0\uac8c monad \uc758 \uc720\uc6a9\uc131\uc744 \uc124\uba85\ud558\ub294\ub370 promise \ub9cc\ud55c\uac8c \uc5c6\ub2e4\uace0 \uc0dd\uac01\ud558\uae30\uc5d0 \uc57d\uac04\uc758 \uc815\ud655\uc131\uc744 \ud3ec\uae30\ud558\uc600\ub2e4.  \\n\ub9cc\uc57d \uc5b4\ub5a4 \uc774\uc720\ub85c \ubc95\uce59\uc744 \ub9cc\uc871\ud558\uc9c0 \uc54a\ub294\uc9c0 \uc54c\uace0\uc2f6\ub2e4\uba74 \ucc38\uace0\uc790\ub8cc\uc758 \ub9c1\ud06c\ub97c \ucc38\uc870\ud55c\ub2e4.  \\n:::\\n\\n## \ucc38\uace0\uc790\ub8cc\\n\\nNo, Promise is not a monad: https://buzzdecafe.github.io/2018/04/10/no-promises-are-not-monads"},{"id":"2021/11/07/Promise\uc640-Monad-1","metadata":{"permalink":"/2021/11/07/Promise\uc640-Monad-1","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2021-11-07-promise-and-monad-1/index.mdx","source":"@site/blog/2021-11-07-promise-and-monad-1/index.mdx","title":"Promise\uc640 Monad - 1","description":"\uc608\uc804 node.js \uc758 \ub9ce\uc740 \ube44\ub3d9\uae30 \ud568\uc218\ub294 \uacb0\uacfc\ub97c \ud568\uc218\ub85c \ubc1b\ub294 \ucf5c\ubc31\ud615\ud0dc\ub85c \uc774\ub8e8\uc5b4\uc838 \uc788\uc5c8\ub2e4.","date":"2021-11-07T00:00:00.000Z","formattedDate":"2021\ub144 11\uc6d4 7\uc77c","tags":[{"label":"monad","permalink":"/tags/monad"},{"label":"promise","permalink":"/tags/promise"}],"readingTime":9.635,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Promise\uc640 Monad - 1","slug":"2021/11/07/Promise\uc640-Monad-1","authors":"jake","tags":["monad","promise"]},"prevItem":{"title":"Promise\uc640 Monad - 2","permalink":"/2021/11/28/Promise\uc640-Monad-2"},"nextItem":{"title":"Localstack\uc744 \ud65c\uc6a9\ud55c AWS SES \ud1b5\ud569\ud14c\uc2a4\ud2b8","permalink":"/2021/10/31/Localstack\uc744-\ud65c\uc6a9\ud55c-AWS-SES-\ud1b5\ud569\ud14c\uc2a4\ud2b8"}},"content":"\uc608\uc804 `node.js` \uc758 \ub9ce\uc740 \ube44\ub3d9\uae30 \ud568\uc218\ub294 \uacb0\uacfc\ub97c \ud568\uc218\ub85c \ubc1b\ub294 \ucf5c\ubc31\ud615\ud0dc\ub85c \uc774\ub8e8\uc5b4\uc838 \uc788\uc5c8\ub2e4.  \\n\uc774\ub85c\uc778\ud574 \uc5ec\ub7ec \ube44\ub3d9\uae30 \ub85c\uc9c1\uc744 \uc21c\ucc28\uc801\uc73c\ub85c \uc2e4\ud589\ud558\ub294 \ucf54\ub4dc\ub97c \ubcf4\uba74 \uc77c\uba85 `Callback Hell` \uc774\ub77c\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4.\\n\\n```js\\nasyncA((a) => {\\n  asyncB((b) => {\\n    asyncC((c) => {\\n      asyncD((d) => {\\n        return a + b + c + d;\\n      });\\n    });\\n  });\\n});\\n```\\n\\n\uc774\ud6c4 \uc774\ub97c \ud574\uacb0\ud558\ub294 \ubc29\uc548\uc73c\ub85c \uc5ec\ub7ec \ub77c\uc774\ube0c\ub7ec\ub9ac\ub098 \uae30\uc220\ub4e4\uc774 \ub098\uc654\uc73c\ub098 \uc9c0\uae08\uc740 \uc8fc\ub85c `promise` \uc640 `async/await` \ub97c \ud65c\uc6a9\ud55c\ub2e4.\\n\\n\uc0ac\uc2e4 \ub098\ub294 `angular` \ub97c \ud1b5\ud574 js \ub97c \ubcf8\uaca9\uc801\uc73c\ub85c \uc0ac\uc6a9\ud588\uae30\uc5d0 \ube44\ub3d9\uae30 \ucc98\ub9ac\ub97c `rxjs` \uc758 `observable` \uc744 \uc0ac\uc6a9\ud574\uc654\ub2e4.  \\n\ud558\uc9c0\ub9cc \ubc31\uc5d4\ub4dc \uac1c\ubc1c\uc790\uac00 \ub41c \uc774\ud6c4\ub85c api \ub97c \uac1c\ubc1c\ud558\ub294\ub370 \uc0ac\uc6a9\ud558\ub294 \ub300\ubd80\ubd84\uc758 \ud568\uc218\uac00 `promise` \ub97c \ubc18\ud658\ud558\ub2e4\ubcf4\ub2c8 `observable` \uc744 \ud65c\uc6a9\ud558\uc9c0 \uc54a\uac8c\ub418\uc5c8\ub2e4.\\n\\n`promise` \ub97c \ubcf8\uaca9\uc801\uc73c\ub85c \uc0ac\uc6a9\ud588\uc744 \ub54c\uc5d0\ub294 \uc774\ubbf8 `async/await` \uac00 \ub3c4\uc785\ub41c \uc774\ud6c4\uc600\uace0 \ub3d9\uae30\uc801\uc73c\ub85c \ubcf4\uc774\ub294 \ucf54\ub4dc\ub97c \uc791\uc131\ud558\ub294\ub370 \ud070 \uc5b4\ub824\uc6c0 \uc5c6\uc5c8\ub2e4.  \\n\uadf8\ub798\uc11c \uad73\uc774 `then` \uc774\ub098 `catch` \uad6c\ubb38\uc744 \uc0ac\uc6a9\ud560 \ud544\uc694\uac00 \uc5c6\ub2e4\uace0 \uc0dd\uac01\ud588\uc5c8\ub2e4.  \\n\uadf8\ub7ec\ub098 \ud568\uc218\ud615 \ud328\ub7ec\ub2e4\uc784\uc744 \uacf5\ubd80\ud558\uba74\uc11c \ud568\uc218\uc758 \ud569\uc131, \uc120\uc5b8\uc801\uc778 \ucf54\ub4dc, pointfree \uc5d0 \ub300\ud55c \ub9e4\ub825\uc744 \ub290\uaf08\uace0 \uc774\ub97c `then chaining` \uc744 \ud1b5\ud574 \uc774\ub8f0 \uc218 \uc788\ub2e4\ub294 \uac83\uc744 \uae68\ub2ec\uc558\ub2e4.  \\n\ud568\uc218\ud615 \ud328\ub7ec\ub2e4\uc784 \uc911 \ub09c\ud574\ud55c `monad` \ub3c4 `promise` \uc640 \ube44\uad50\ud558\uba74\uc11c \uc0dd\uac01\ud558\ub2c8 \uc774\ud574\ud558\ub294\ub370 \ub9ce\uc740 \ub3c4\uc6c0\uc744 \ubc1b\uc558\ub2e4.  \\n\uadf8\ub798\uc11c \uc774\uc640 \uad00\ub828\ud55c \uae00\uc744 \uc791\uc131\ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \ud568\uc218\ub85c \ub098\ub204\uae30\\n\\n\ub2e4\uc74c\uacfc \uac19\uc740 \uc791\uc5c5\uc744 \ud558\ub294 \ucf54\ub4dc\ub97c \uc791\uc131\ud55c\ub2e4\uace0 \uac00\uc815\ud574\ubcf8\ub2e4.\\n\\n- user \ud14c\uc774\ube14\uc5d0\uc11c \uc8fc\uc5b4\uc9c4 id \uc5d0 \ud574\ub2f9\ud558\ub294 row \ub97c \uac00\uc838\uc628\ub2e4.\\n- \uac00\uc838\uc628 \uc0ac\uc6a9\uc790\uc5d0\uc11c \uc774\ub984 \ud544\ub4dc\ub9cc \ucd94\ucd9c\ud55c\ub2e4.\\n- \ucd94\ucd9c\ud55c \uc774\ub984\uc744 \ub300\ubb38\uc790\ub85c \ubcc0\uacbd\ud55c\ub2e4.\\n- post \ud14c\uc774\ube14\uc5d0\uc11c \uc774\uc804 \ub2e8\uacc4\uc5d0\uc11c \uc5bb\uc740 \uc774\ub984\uacfc \uac19\uc740 row \uc758 \uac1c\uc218\ub97c \ubc18\ud658\ud55c\ub2e4.\\n\\n\uc704 \uc791\uc5c5\uc744 \uac01\uac01 \ud568\uc218\ub85c \ub9cc\ub4e4\uc5c8\uace0 \uc544\ub798 \ud615\ud0dc\uc758 \ud0c0\uc785\uc774\ub77c\uace0 \uc0dd\uac01\ud574\ubcf4\uc790.\\n\\n```typescript\\ninterface User {\\n  id: number;\\n  name: string;\\n  // ...\\n}\\n\\ndeclare function getUser(id: number): Promise<User>;\\ndeclare function getNameField(user: User): string;\\ndeclare function toUppercase(str: string): string;\\ndeclare function getPostCount(name: string): Promise<number>;\\n```\\n\\n`getUser` \ub098 `getPostCount` \ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c \uac00\uc838\uc624\ub294 \uac83\uc774\uae30\uc5d0 \ub300\ubd80\ubd84 ORM \ub77c\uc774\ube0c\ub7ec\ub9ac\ub4e4\uc740 `promise` \ub97c \ubc18\ud658\ud560 \uac83\uc774\ub2e4.  \\n\uac01 \ub2e8\uacc4\ub97c \ud568\uc218\ub85c \ub9cc\ub4e4\uc5c8\uace0 \uc774\uc81c \ud568\uc218\ud615 \ud328\ub7ec\ub2e4\uc784\uc5d0\uc11c \uc8fc\ub85c \uc0ac\uc6a9\ud558\ub294 \ud569\uc131\uc744 \ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n## \ud568\uc218\uc758 \ud569\uc131\\n\\n\uba3c\uc800 \uc218\ud559\uc5d0\uc11c \uc774\uc57c\uae30\ud558\ub294 \ud569\uc131\uc744 \uc18c\uac1c\ud574\ubcf4\uba74\\n\\n> \ud55c \ud568\uc218\uc758 \uacf5\uc5ed\uc774 \ub2e4\ub978 \ud568\uc218\uc758 \uc815\uc758\uc5ed\uacfc \uc77c\uce58\ud558\ub294 \uacbd\uc6b0, \ub450 \ud568\uc218\ub97c \uc774\uc5b4 \ud558\ub098\uc758 \ud568\uc218\ub85c \ub9cc\ub4dc\ub294 \uc5f0\uc0b0\uc774\ub2e4.\\n\\n![compose](./compose.png)\\n\\n\uc218\ud559\uc5d0\uc11c \uc774\uc57c\uae30\ud558\ub294 \uc815\uc758\uc5ed\uacfc \uacf5\uc5ed\uc744 \ud504\ub85c\uadf8\ub798\ubc0d \uc5b8\uc5b4\uc5d0\uc11c \ud568\uc218\uc758 \ud30c\ub77c\ubbf8\ud130\uc640 \ubc18\ud658 \ud0c0\uc785\uc73c\ub85c \uc0dd\uac01\ud574\ubcfc \uc218 \uc788\ub2e4.  \\n\uc989 A \ub77c\ub294 \ud568\uc218\uc758 \ubc18\ud658 \ud0c0\uc785\uc774 B \ub77c\ub294 \ud568\uc218\uc758 \ud30c\ub77c\ubbf8\ud130\uc640 \uc77c\uce58\ud558\uba74 \ub450 \ud568\uc218\ub97c \ud569\uc131\ud55c \uc0c8\ub85c\uc6b4 \ud568\uc218\ub97c \ub9cc\ub4e4 \uc218 \uc788\ub2e4.\\n\\n```typescript\\ndeclare function A(id: number): string;\\ndeclare function B(user: string): boolean;\\n\\nfunction compose(id: number) {\\n  return B(A(id));\\n}\\n```\\n\\n\uc704 \uc131\uc9c8\uc744 \uc774\uc6a9\ud574 \uc774\uc804 \ub2e8\uacc4\uc5d0\uc11c \ub098\ub208 \ud568\uc218\ub4e4\uc744 \ud569\uc131\ud558\ub824\uace0 \ud574\ubcf4\uba74 \ubc14\ub85c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud55c\ub2e4.  \\n`getUser` \ud568\uc218\ub294 `Promise<User>` \ub97c \ubc18\ud658\ud558\uc9c0\ub9cc `getNameField` \uc758 \ud30c\ub77c\ubbf8\ud130\ub294 `User` \uc774\uae30 \ub54c\ubb38\uc774\ub2e4.  \\n`Promise<User>` \ub294 \ub0b4\ubd80\uc5d0 `User` \ub97c \uac16\uace0\uc788\uc744\uc9c0\ub77c\ub3c4 \uc5b4\uca0b\ub4e0 `User` \ud0c0\uc785\uacfc\ub294 \uc77c\uce58\ud558\uc9c0 \uc54a\ub294\ub2e4.\\n\\n## Promise.prototype.then()\\n\\n\ud569\uc131\uc744 \ud558\uae30\uc704\ud574 `getUser` \uc758 \ubc18\ud658\uac12\uc744 `User` \ub85c \ubc14\uafb8\uac70\ub098 `getNameField` \uc758 \ud30c\ub77c\ubbf8\ud130\ub97c `Promise<User>` \ub85c \ubc14\uafb8\ub294 \ubc29\ubc95\uc744 \uc0dd\uac01\ud574\ubcfc \uc218 \uc788\ub2e4.\\n\\n:::info\\n`async/await` \ub97c \uc54c\uace0\uc788\ub2e4\uba74 \uc774 \ubb38\uc81c\ub294 \uc27d\uac8c \ud574\uacb0\ub41c\ub2e4\ub294 \uac83\uc744 \uc54c\uace0\uc788\uc9c0\ub9cc \uc9c0\uae08\uc740 \uc7a0\uae50 \ubb34\uc2dc\ud558\uc790.  \\n:::\\n\\n\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uac00\uc5ec\uc624\ub294 \uc791\uc5c5\uc740 \ube44\ub3d9\uae30 \uc791\uc5c5\uc774\uae30\uc5d0 promise \ub97c \uc81c\uac70\ud558\uae30\uc5d0\ub294 \uc5b4\ub835\uace0\\n`getNameField` \uc758 \ud30c\ub77c\ubbf8\ud130\ub97c `Promise<User>` \ub85c \ubcc0\uacbd\ud558\uba74 \uc548\uc5d0\uc788\ub294 User \ub97c \uac00\uc838\uc640\uc11c name \uc744 \uaebc\ub0b4\ub294 \ub85c\uc9c1\uc744 \uc791\uc131\ud560 \uc218 \uc5c6\uac8c\ub41c\ub2e4.  \\n\uc774\uc640 \uac19\uc740 \ubb38\uc81c\uc758 \ud574\uacb0\ubc29\uc548\uc73c\ub85c promise \uc758 then \uba54\uc18c\ub4dc\uac00 \uc788\ub2e4.\\n\\n```typescript\\nconst userNamePromise = getUser(100).then((user) => getNameField(user)); // Promise<string>;\\n```\\n\\nthen \uba54\uc18c\ub4dc\ub294 \ud568\uc218\ub97c \ud30c\ub77c\ubbf8\ud130\ub85c \ubc1b\uace0 promise \uc758 \ub0b4\ubd80\uac12\uc744 \ud574\ub2f9 \ud568\uc218\uc758 \ud30c\ub77c\ubbf8\ud130\ub85c \uc804\ub2ec\ud558\uace0 \uadf8 \ubc18\ud658\uac12\uc744 \uc0c8\ub85c\uc6b4 promise \ub85c \uac10\uc2fc\ub2e4.  \\n\ub530\ub77c\uc11c \uc704 \ucf54\ub4dc\uc758 \ubc18\ud658\uac12\uc740 `Promise<string>` \uac00 \ub41c\ub2e4.  \\n`string` \uc774 \uc544\ub2cc `Promise<string>` \uac00 \ub418\ub294 \uc774\uc720\ub294 then \uba54\uc18c\ub4dc\ub294 **\uc8fc\uc5b4\uc9c4 \ube44\ub3d9\uae30 \uc791\uc5c5\uc774 \uc131\uacf5\uc801\uc73c\ub85c \ub05d\ub09c\ub2e4\uba74 \uadf8 \uac12\uc744 then \ud30c\ub77c\ubbf8\ud130\ub85c \ubc1b\uc740 \ud568\uc218\ub85c \ub118\uaca8\uc8fc\uaca0\ub2e4\ub294 \uc0c8\ub85c\uc6b4 \uc57d\uc18d**\uc744 \ub9cc\ub4dc\ub294 \uc5ed\ud560\uc744 \ud558\uae30 \ub54c\ubb38\uc774\ub2e4.  \\nthen \uba54\uc18c\ub4dc\uac00 promise \ub97c \uacc4\uc18d \ubc18\ud658\ud558\ub294 \ub355\ubd84\uc5d0 \uacc4\uc18d\ud574\uc11c then \uc744 \uc774\uc6a9\ud574 \ub2e4\uc74c \ud568\uc218\ub97c \ub123\uc5b4\uc904 \uc218 \uc788\ub2e4.\\n\\n```typescript\\nconst postCountPromise = getUser(100)\\n  .then((user) => getNameField(user))\\n  .then((name) => toUppercase(name))\\n  .then((name) => getPostCount(name));\\n```\\n\\n\ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0 \uc775\uc219\ud55c \uc0ac\ub78c\uc774\ub77c\uba74 \uc704 \ucf54\ub4dc\ub97c \uc544\ub798\uc640 \uac19\uc740 `pointfree` \ubc29\uc2dd\uc73c\ub85c \uc791\uc131\ud558\uae30\ub3c4 \ud55c\ub2e4.\\n\\n```typescript\\nconst postCountPromise = getUser(100)\\n  .then(getNameField)\\n  .then(toUppercase)\\n  .then(getPostCount); // Promise<number>;\\n```\\n\\n## Flatten\\n\\n\uc774\uc804 \ucf54\ub4dc\uc758 \ub9c8\uc9c0\ub9c9 \ubd80\ubd84\uc744 \uc0b4\ud3b4\ubcf4\uba74 \uc774\uc0c1\ud55c \uc810\uc774 \uc788\ub2e4.  \\n`getPostCount` \ub294 `Promise<number>` \ub97c \ubc18\ud658\ud558\uace0 then \uba54\uc18c\ub4dc\ub294 \uc8fc\uc5b4\uc9c4 \ud568\uc218\uc758 \ubc18\ud658\uac12\uc744 \ub2e4\uc2dc promise \ub85c \uac10\uc2fc\ub2e4\uace0 \ud588\uc73c\ub2c8 \ucd5c\uc885 \uacb0\uacfc\ub294 `Promise<Promise<number>>` \uac00 \ub420\uac70\ub77c\ub294 \uc0dd\uac01\uc774 \ub4e0\ub2e4.  \\n\ud558\uc9c0\ub9cc \uacb0\uacfc\uac00 `Promise<number>` \uac00 \ub418\ub294 \uc774\uc720\ub294 then \uba54\uc18c\ub4dc\uac00 \uc8fc\uc5b4\uc9c4 \ud568\uc218\uac00 promise \ub97c \ubc18\ud658\ud558\uba74 \ud3c9\ud0c4\ud654 \uacfc\uc815\uc744 \uac70\uce58\uae30 \ub54c\ubb38\uc774\ub2e4.  \\n\ubc30\uc5f4\uc758 \uacbd\uc6b0\uc5d0\ub3c4 \uc774\uc640 \ube44\uc2b7\ud558\uac8c `flatMap` \uc774 \uc788\uc5b4\uc11c \ud30c\ub77c\ubbf8\ud130\ub85c \uc8fc\uc5b4\uc9c4 \ud568\uc218\uac00 \ubc30\uc5f4\uc744 \ubc18\ud658\ud574\ub3c4 \uae30\uc874 \ucc28\uc6d0\uc774 \uadf8\ub300\ub85c \uc720\uc9c0\ub41c\ub2e4.\\n\\n```typescript\\nconst arrA = [1, 2, 3, 4, 5];\\narrA.map((v) => [v + 1]); // [[2], [3], [4], [5], [6]]\\narrA.flatMap((v) => [v + 1]); // [2, 3, 4, 5, 6]\\n```\\n\\n## \ub9c8\ubb34\ub9ac\\n\\n\uc9c0\uae08\uae4c\uc9c0 `Promise<User>` \ub97c \ubc18\ud658\ud558\ub294 \ud568\uc218\ub85c \uc2dc\uc791\ud574\uc11c \uc5ec\ub7ec \ub2e4\ub978 \ud568\uc218\ub97c \uac70\uccd0 \ucd5c\uc885 `Promise<number>` \ub97c \ub9cc\ub4dc\ub294 \uacfc\uc815\uc744 \uc0b4\ud3b4\ubcf4\uc558\ub2e4.  \\n\ubcf4\ud1b5 nodejs \ud658\uacbd\uc5d0\uc11c \ud558\ub098\uc758 \ud30c\ub77c\ubbf8\ud130\uc640 \ud558\ub098\uc758 \uac12\uc744 \ubc18\ud658\ud558\ub294 \ud568\uc218\ub97c \ub9cc\ub4e0\ub2e4\uba74 \ub0b4\ubd80 \ub85c\uc9c1\uc5d0 \ube44\ub3d9\uae30 \uc791\uc5c5\uc758 \uc5ec\ubd80\uc5d0 \ub530\ub77c \uc544\ub798 \ud615\ud0dc \uc911 \ud558\ub098\uac00 \ub420\uac83\uc774\ub2e4.\\n\\n```typescript\\ndeclare function syncFunc<A, B>(a: A): B;\\ndeclare function asyncFunc<A, B>(a: A): Promise<B>;\\n```\\n\\n\ubaa8\ub4e0 \ud568\uc218\uac00 `syncFunc` \ud615\ud0dc\ub77c\uba74 \uc27d\uac8c \ud569\uc131\uc774 \uac00\ub2a5\ud558\uc9c0\ub9cc \ud558\ub098\ub77c\ub3c4 `asyncFunc` \uc774 \uc788\ub2e4\uba74 promise \uc758 then \uacfc \uac19\uc740 \uba54\uc18c\ub4dc\ub97c \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4.  \\n\uc989 then \uc740 \uc704 \ub450\uac00\uc9c0 \ud615\ud0dc\ub97c \uac00\uc9c4 \ud568\uc218\uc758 \ud569\uc131\uc744 \uc6d0\ud65c\ud558\uac8c \ud574\uc8fc\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4.  \\n\uc774\ub294 promise \uac00 monad \uc758 \uc131\uc9c8\uc744 \ub9cc\uc871\ud558\uae30\uc5d0 \uc5bb\uc744 \uc218 \uc788\ub294 \uc7a5\uc810\uc774\ub2e4.\\n\\n\uc9c0\uae08\uae4c\uc9c0 monad \uc758 \uc815\uc758\ubcf4\ub2e4 monad \ub97c \ud1b5\ud574 \uc5bb\uc744 \uc218 \uc788\ub294 \uc7a5\uc810\uc5d0 \ub300\ud574 \uba3c\uc800 \uc124\uba85\ud558\uc600\ub2e4.  \\n\uadf8 \uc774\uc720\ub294 [\ubaa8\ub098\ub4dc \uad34\ub2f4](https://xtendo.org/ko/monad#143) \uc774\ub77c\uace0 \ubd88\ub9b4 \uc815\ub3c4\ub85c monad \ub97c \uc774\ud574\ud558\uae30 \uc5b4\ub835\ub2e4\ub294 \uc778\uc2dd\uc774 \uc788\uace0,\\nnodejs \uac1c\ubc1c\uc790\uc5d0\uac8c \uce5c\uc219\ud55c promise \ub97c \ud65c\uc6a9\ud574 monad \ub97c \uc5b4\ub5bb\uac8c \ud65c\uc6a9\ud558\ub294\uc9c0\uc5d0 \ub300\ud55c \uc774\ud574\ub97c \uba3c\uc800 \ud55c\ub2e4\uba74 \ucd94\ud6c4\uc5d0 monad \ub97c \uc774\ud574\ud558\uae30 \uc26c\uc6b8\uac70\ub77c\ub294 \uc0dd\uac01\uc774 \ub4e4\uc5c8\uae30 \ub54c\ubb38\uc774\ub2e4.\\n\\n\ub2e4\uc74c \uae00\uc5d0\uc11c\ub294 `async/await` \ub97c \ud65c\uc6a9\ud574 \ud30c\ub77c\ubbf8\ud130 \uac1c\uc218\uac00 2\uac1c \uc774\uc0c1\uc778 \ud568\uc218\uc5d0 \ub300\ud55c \ucc98\ub9ac\uc640 monad \uc5d0 \ub300\ud55c \uc870\uae08 \ub354 \uc790\uc138\ud55c \uc124\uba85\uc744 \ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n## \ucc38\uace0\uc790\ub8cc\\n\\n- Promise.prototype.then(): https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise/then"},{"id":"2021/10/31/Localstack\uc744-\ud65c\uc6a9\ud55c-AWS-SES-\ud1b5\ud569\ud14c\uc2a4\ud2b8","metadata":{"permalink":"/2021/10/31/Localstack\uc744-\ud65c\uc6a9\ud55c-AWS-SES-\ud1b5\ud569\ud14c\uc2a4\ud2b8","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2021-10-31-local-stack/index.mdx","source":"@site/blog/2021-10-31-local-stack/index.mdx","title":"Localstack\uc744 \ud65c\uc6a9\ud55c AWS SES \ud1b5\ud569\ud14c\uc2a4\ud2b8","description":"localstack \uc740 AWS \uc778\ud504\ub77c \uc2dc\ubbac\ub808\uc774\ud130\ub85c Lambda, S3, Dynamodb, Kinesis, SQS, SNS \uac19\uc740 \uc11c\ube44\uc2a4\ub97c \ub85c\uceec \ud658\uacbd\uc5d0 \uc62c\ub9b4 \uc218 \uc788\ub2e4.","date":"2021-10-31T00:00:00.000Z","formattedDate":"2021\ub144 10\uc6d4 31\uc77c","tags":[{"label":"localstack","permalink":"/tags/localstack"},{"label":"testing","permalink":"/tags/testing"},{"label":"aws","permalink":"/tags/aws"}],"readingTime":5.705,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Localstack\uc744 \ud65c\uc6a9\ud55c AWS SES \ud1b5\ud569\ud14c\uc2a4\ud2b8","slug":"2021/10/31/Localstack\uc744-\ud65c\uc6a9\ud55c-AWS-SES-\ud1b5\ud569\ud14c\uc2a4\ud2b8","authors":"jake","tags":["localstack","testing","aws"]},"prevItem":{"title":"Promise\uc640 Monad - 1","permalink":"/2021/11/07/Promise\uc640-Monad-1"},"nextItem":{"title":"\ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uad00\ub828 \uc790\ub8cc","permalink":"/2021/10/21/\ud568\uc218\ud615-\ud504\ub85c\uadf8\ub798\ubc0d-\uad00\ub828-\uc790\ub8cc"}},"content":"`localstack` \uc740 AWS \uc778\ud504\ub77c \uc2dc\ubbac\ub808\uc774\ud130\ub85c Lambda, S3, Dynamodb, Kinesis, SQS, SNS \uac19\uc740 \uc11c\ube44\uc2a4\ub97c \ub85c\uceec \ud658\uacbd\uc5d0 \uc62c\ub9b4 \uc218 \uc788\ub2e4.  \\n\uc774\ubc88 \uae00\uc740 \uc774\uba54\uc77c \ubc1c\uc1a1 \uc11c\ube44\uc2a4\uc778 `SES` \ub97c \ud14c\uc2a4\ud2b8 \ud574\ubcf4\uae30 \uc704\ud55c \uc124\uc815\uacfc\uc815\uc744 \uae30\uc220\ud558\uace0\uc790 \ud55c\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n> \uacfc\uc815\uc5d0 \ub300\ud55c \ubaa8\ub4e0 \ucf54\ub4dc\ub294 \ub2e4\uc74c URL\uc744 \ucc38\uc870\ud55c\ub2e4.  \\n> https://github.com/jbl428/study-note/tree/master/localstack\\n\\n## \ud658\uacbd\\n\\n`node.js` \ud658\uacbd\uc5d0\uc11c `jest` \ub97c \ud65c\uc6a9\ud574 \ud14c\uc2a4\ud2b8 \ud558\uc600\uc73c\uba70 `testcontainers` \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ud65c\uc6a9\ud558\uc600\ub2e4.\\n\\n> \ubcf8 \uae00\uc744 \uc791\uc131\ud558\ub294 \uc2dc\uc810\uc5d0\uc11c\ub294 `SES API` \ubc84\uc804\uc774 v2 \uac00 \ub098\uc654\uc9c0\ub9cc `localstack` \uc774 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc544 v1 \uc744 \uc774\uc6a9\ud558\uc600\ub2e4.\\n\\n`localstack` \uc758 \uacbd\uc6b0 \uc608\uc804 \ubc84\uc804\uc740 \uac01 \uc11c\ube44\uc2a4 \ubcc4\ub85c \uc811\uc18d endpoint \uac00 \ub2ec\ub790\uc9c0\ub9cc \uc9c0\uae08\uc740 \ud558\ub098\ub85c \ud1b5\ud569\ub418\uc5c8\ub2e4.  \\n\uc720\ub8cc\ubc84\uc804\uc774 \ub530\ub85c \uc788\uc73c\uba70 \ub354 \ub9ce\uc740 \uae30\ub2a5\uc744 \uc9c0\uc6d0\ud55c\ub2e4\uace0 \ud55c\ub2e4. `SES` \uc11c\ube44\uc2a4\ub294 \ubb34\ub8cc\ubc84\uc804\ub3c4 \uc9c0\uc6d0\ud55c\ub2e4.\\n\\n## testcontainers\\n\\n`testcontainers` \ub294 \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108\ub97c \ud65c\uc6a9\ud574 \ud14c\uc2a4\ud2b8\ub97c \uc704\ud55c \ud658\uacbd\uc744 \ub9cc\ub4e4\uc5b4\uc8fc\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub85c \ucf54\ub4dc\ub85c \ucee8\ud14c\uc774\ub108\ub97c \uc2e4\ud589 \ubc0f \uc885\ub8cc \ud560 \uc218 \uc788\ub294\uac70\ub77c \ubcf4\uba74\ub41c\ub2e4.  \\n\uc5ec\ub7ec \ud504\ub85c\uadf8\ub798\ubc0d \uc5b8\uc5b4\ub97c \uc9c0\uc6d0\ud558\uba70 \uac00\uc7a5 \ub9ce\uc740 star \ub97c \ubcf4\uc720\ud55c \uc5b8\uc5b4\ub294 \uc790\ubc14\uc774\ub2e4.  \\n\uadf8\ub798\uc11c localstack \uc6a9 \ubaa8\ub4c8\uc744 \ub530\ub85c \uc9c0\uc6d0\ud574 \ud3b8\ud558\uac8c \uc4f8 \uc218 \uc788\uc9c0\ub9cc node.js \uc6a9\uc740 \uc5c6\uae30\uc5d0 \ubc88\uac70\ub85c\uc6b4 \uacfc\uc815\uc744 \uac70\uccd0\uc57c\ud55c\ub2e4.\\n\\n```sh\\nyarn add -D testcontainers\\n```\\n\\n\ubcf4\ud1b5 \ud14c\uc2a4\ud2b8 \ud30c\uc77c\uc758 beforeAll \uc5d0 \ucee8\ud14c\uc774\ub108 \uc2e4\ud589 \ub85c\uc9c1\uc744 \ub123\uc5b4\uc900\ub2e4.\\n\\n```ts\\nimport { GenericContainer, StartedTestContainer, Wait } from \'testcontainers\';\\n\\ndescribe(\'localstack test\', () => {\\n  let localstackPort: number;\\n  let container: StartedTestContainer;\\n\\n  beforeAll(async () => {\\n    container = await new GenericContainer(\'localstack/localstack\')\\n      .withExposedPorts(4566)\\n      .withEnv(\'SERVICES\', \'ses\')\\n      .withWaitStrategy(Wait.forLogMessage(\'Execution of \\"preload_services\\"\'))\\n      .start();\\n\\n    localstackPort = container.getMappedPort(4566);\\n  });\\n\\n  afterAll(() => container.stop());\\n\\n  // ...\ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4\\n\\n};\\n```\\n\\n```ts\\ncontainer = await new GenericContainer(\\"localstack/localstack\\");\\n```\\n\\nGenericContainer \ud074\ub798\uc2a4\uc758 \uc0dd\uc131\uc790 \ud30c\ub77c\ubbf8\ud130\ub85c \uc2e4\ud589\uc744 \uc6d0\ud558\ub294 \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0 \uc774\ub984\uc744 \ub123\uc5b4\uc900\ub2e4.\\n\\n```ts\\n    .withExposedPorts(4566)\\n```\\n\\n\ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc758 \ud2b9\uc815 \ud3ec\ud2b8\ub97c \uc678\ubd80\uc758 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uc784\uc758\uc758 \ud3ec\ud2b8\ub85c expose \ud574\uc8fc\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4.  \\n\uc704\uc758 \uacbd\uc6b0 \ucee8\ud14c\uc774\ub108\uc758 4566 \ud3ec\ud2b8\ub97c \uc678\ubd80\ub85c \ub178\ucd9c\uc2dc\ud0a4\uba70 \ub85c\uceec\uc758 \ubbf8\uc0ac\uc6a9 \ud3ec\ud2b8\ubc88\ud638 \uc911\uc5d0 \uc784\uc758\ub85c \uc124\uc815\ud574\uc900\ub2e4.  \\n\uc774\ub97c \ud1b5\ud574 \uc5ec\ub7ec \ucee8\ud14c\uc774\ub108\ub97c \ub3d9\uc2dc\uc5d0 \uc2e4\ud589\uc2dc\ucf1c\ub3c4 \uac01\uac01 \ub2e4\ub978 \ud3ec\ud2b8\ub85c \ub178\ucd9c\ub418\uae30\uc5d0 \ud14c\uc2a4\ud2b8\ub97c \ubcd1\ub82c\ub85c \uc2e4\ud589\ud558\uba74\uc11c \uac01 \ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4\uac04\uc758 \ub3c5\ub9bd\uc131\uc744 \uc9c0\ucf1c\uc900\ub2e4.\\n\\n```ts\\n    .withWaitStrategy(Wait.forLogMessage(\'Execution of \\"preload_services\\"\'))\\n```\\n\\n\ud2b9\uc815 \ucee8\ud14c\uc774\ub108\ub294 \uc2e4\ud589\uc774 \uc644\ub8cc\ub418\ub3c4 \uc774\ud6c4\uc5d0 \ucd08\uae30 \uc138\ud305\uacfc\uc815\uc774 \uc788\uae30 \ub54c\ubb38\uc5d0 \ud574\ub2f9 \ucee8\ud14c\uc774\ub108\ub97c \uc628\uc804\ud788 \uc0ac\uc6a9\ud558\uae30 \uae4c\uc9c0 \uae30\ub2e4\ub824\uc57c \ud558\ub294 \uacbd\uc6b0\uac00 \ubc1c\uc0dd\ud55c\ub2e4.  \\n\ub530\ub77c\uc11c withWaitStrategy \ub97c \ud1b5\ud574 \uc5b4\ub5a4 \uc870\uac74\uc5d0 \ud574\ub2f9\ud560 \ub54c\uae4c\uc9c0 \uae30\ub2e4\ub9b4 \uac83\uc778\uc9c0 \uc124\uc815\ud560 \uc218 \uc788\ub2e4.  \\n\uc704\uc758 \uacbd\uc6b0\ub294 \ucee8\ud14c\uc774\ub108 \ub85c\uadf8 \uba54\uc138\uc9c0 \uc911\uc5d0 Execution of \\"preload_services\\" \ubb38\uad6c\uac00 \ud3ec\ucc29\ub420 \ub54c\uae4c\uc9c0 \uae30\ub2e4\ub9b0\ub2e4\ub294 \uc124\uc815\uc774\ub2e4.  \\nwait strategy \ub294 \uc5ec\ub7ec\uac00\uc9c0\uac00 \uc788\uc73c\uba70 \uac01 \ud56d\ubaa9\uc740 \uc544\ub798 \ubb38\uc11c\ub97c \ucc38\uc870\ud55c\ub2e4.\\n\\nhttps://www.testcontainers.org/features/startup_and_waits/\\n\\n```ts\\nlocalstackPort = container.getMappedPort(4566);\\n```\\n\\nwithExposedPorts \ub97c \ud1b5\ud574 \ub178\ucd9c\ud55c \ud3ec\ud2b8\ub97c \uc54c\uc544\ub0b8 \ud6c4 localstackPort \ubcc0\uc218\uc5d0 \ud560\ub2f9\ud558\uba70 \uc774\ub97c \ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4\uc5d0\uc11c \ud65c\uc6a9\ud55c\ub2e4.\\n\\n```ts\\nafterAll(() => container.stop());\\n```\\n\\n\ud14c\uc2a4\ud2b8\uac00 \uc885\ub8cc\ub418\uba74 \ucee8\ud14c\uc774\ub108\ub97c \uc885\ub8cc\ud558\ub294 \ucf54\ub4dc\uc774\uba70 \uc0ac\uc2e4 testcontainer \ub294 \uc885\ub8cc\ub85c\uc9c1\uc744 \ub123\uc9c0 \uc54a\uc544\ub3c4 \uc77c\uc815 \uc2dc\uac04\ub3d9\uc548 \ud65c\ub3d9\uc774 \uc5c6\uc73c\uba74 \uc790\ub3d9\uc73c\ub85c \ucee8\ud14c\uc774\ub108\ub97c \uc885\ub8cc\uc2dc\ucf1c\uc8fc\ub294 \uae30\ub2a5\uc774 \uc788\ub2e4.  \\nryuk container \ub77c\uace0 \ubd88\ub9ac\ub294 \ucee8\ud14c\uc774\ub108\uac00 \uadf8 \uc5ed\ud560\uc744 \ud55c\ub2e4.\\n\\nhttps://hub.docker.com/r/testcontainers/ryuk\\n\\n```ts\\nconst client = new SESClient({\\n  region: \\"local\\",\\n  endpoint: `http://localhost:${localstackPort}`, // localstackPort \uc73c\ub85c \ud3ec\ud2b8\uc124\uc815\\n  credentials: {\\n    accessKeyId: \\"test\\",\\n    secretAccessKey: \\"test\\",\\n  },\\n});\\n```\\n\\n\uc6b4\uc601 aws \uc744 \uc0ac\uc6a9\ud558\ub824\uba74 `accessKeyId` \ub098 `secretAccessKey` \uac19\uc740 \uc811\uc18d\uc815\ubcf4\ub97c \uc81c\uacf5\ud574\uc57c \ud558\ub294\ub370 localstack \uc5d0\uc11c\ub294 \ube48 \ubb38\uc790\uc5f4\uc774 \uc544\ub2cc \uc784\uc758\uc758 \ubb38\uc790\uc5f4\uc744 \uc9c0\uc815\ud574\ub3c4 \uc815\uc0c1\ub3d9\uc791\ud568\uc744 \ud655\uc778\ud588\ub2e4.  \\n\ud558\uc9c0\ub9cc \ubb38\uc11c\ub97c \ubcf4\ub2c8 S3\ub97c \uc774\uc6a9\ud558\ub294 \uacbd\uc6b0 test \ub85c \uc124\uc815\ud558\ub294 \uac83\uc744 \uad8c\uc7a5\ud558\uae30\uc5d0 \ub530\ub77c\uc11c \uc9c0\uc815\ud55c\ub2e4.\\n\\nSES \uacbd\uc6b0 \uc778\uc99d\ub41c \uba54\uc77c \uc8fc\uc18c\ub85c\ub9cc \ubc1c\uc1a1\uc8fc\uc18c\ub97c \uc124\uc815\ud560 \uc218 \uc788\uace0 localstack \ub3c4 \ub611\uac19\uc774 \uba54\uc77c\ubc1c\uc1a1 api \ud638\ucd9c \uc804\uc5d0 \uc778\uc99d api \ub97c \uc0ac\uc6a9\ud574 \uba54\uc77c\uc8fc\uc18c\ub97c \ub4f1\ub85d\ud574\uc57c \ud55c\ub2e4.\\n\\n```ts\\nconst command = new VerifyEmailAddressCommand({\\n  EmailAddress: \\"from@inflab.com\\",\\n});\\nawait client.send(command);\\n```\\n\\n\uc774\ud6c4\uc5d0 sdk \uc5d0 \uc694\uad6c\ud558\ub294 \uc2a4\ud329\uc5d0 \ub9de\uac8c \ubc1c\uc1a1\ub85c\uc9c1\uc744 \ucd94\uac00\ud55c\ub2e4.\\n\\n```ts\\nconst sendCommand = new SendEmailCommand({\\n  // \uba54\uc77c \uc804\uc1a1 \uc635\uc158\ub4e4...\\n});\\nawait client.send(sendCommand);\\n```\\n\\n## \ucc38\uace0\uc790\ub8cc\\n\\n- testcontainers: https://www.testcontainers.org\\n- localstack: https://github.com/localstack/localstack"},{"id":"2021/10/21/\ud568\uc218\ud615-\ud504\ub85c\uadf8\ub798\ubc0d-\uad00\ub828-\uc790\ub8cc","metadata":{"permalink":"/2021/10/21/\ud568\uc218\ud615-\ud504\ub85c\uadf8\ub798\ubc0d-\uad00\ub828-\uc790\ub8cc","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2021-10-21-functional-programming-material/index.mdx","source":"@site/blog/2021-10-21-functional-programming-material/index.mdx","title":"\ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uad00\ub828 \uc790\ub8cc","description":"\uadf8\ub3d9\uc548 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0 \ub300\ud55c \uacf5\ubd80\ub97c \ud558\uba74\uc11c \ubcf4\uc558\ub358 \uc790\ub8cc\ub4e4\uc744 \uc774\uacf3\uc5d0 \uae30\ub85d\ud558\ub824\uace0 \ud55c\ub2e4.","date":"2021-10-21T00:00:00.000Z","formattedDate":"2021\ub144 10\uc6d4 21\uc77c","tags":[{"label":"functional programming","permalink":"/tags/functional-programming"}],"readingTime":5.415,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"\ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uad00\ub828 \uc790\ub8cc","slug":"2021/10/21/\ud568\uc218\ud615-\ud504\ub85c\uadf8\ub798\ubc0d-\uad00\ub828-\uc790\ub8cc","authors":"jake","tags":["functional programming"]},"prevItem":{"title":"Localstack\uc744 \ud65c\uc6a9\ud55c AWS SES \ud1b5\ud569\ud14c\uc2a4\ud2b8","permalink":"/2021/10/31/Localstack\uc744-\ud65c\uc6a9\ud55c-AWS-SES-\ud1b5\ud569\ud14c\uc2a4\ud2b8"},"nextItem":{"title":"Docusaurus\uc5d0 utterances \uc5f0\ub3d9","permalink":"/2021/10/19/Docusaurus\uc5d0-utterances-\uc5f0\ub3d9"}},"content":"\uadf8\ub3d9\uc548 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0 \ub300\ud55c \uacf5\ubd80\ub97c \ud558\uba74\uc11c \ubcf4\uc558\ub358 \uc790\ub8cc\ub4e4\uc744 \uc774\uacf3\uc5d0 \uae30\ub85d\ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \uc11c\uc801\\n\\n### \ud568\uc218\ud615 \uc0ac\uace0 (Neal Ford)\\n\\n\uba54\ubaa8\uc774\uc81c\uc774\uc158 \uac1c\ub150\uc5d0 \ub300\ud574 \ucc98\uc74c \uc54c\uac8c\ub41c \ucc45\uc774\ub2e4.\\n\\n### \ud568\uc218\ud615 \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 (Luis Atencio)\\n\\n\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\ub85c \ud558\ub294 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \ucc45\uc73c\ub85c \uc77d\uc740\uac83\uc740 \uae30\uc5b5\ub098\ub294\ub370 \ub531\ud788 \uae30\uc5b5\uc5d0 \ub0a8\ub294 \ub0b4\uc6a9\uc740 \uc5c6\uc5c8\ub2e4.\\n\\n### Grokking Simplicity Taming complex software with functional thinking (Eric Normand)\\n\\n\ud504\ub85c\uadf8\ub7a8\uc744 Action, Calculation, Data \ub85c \ub098\ub204\uc5b4 \uc0dd\uac01\ud558\uace0 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc744 \uc804\uc5fc\uc131\uc774 \uac15\ud558\uace0 \ud14c\uc2a4\ud2b8 \ud558\uae30 \ud798\ub4e0 Action \uc744 Calculation \uc73c\ub85c \ub9cc\ub4dc\ub294 \ud328\ub7ec\ub2e4\uc784\uc73c\ub85c \uc124\uba85\ud558\uace0 \uc788\ub2e4.\\n\ucd08\ubc18\ubd80\ub294 \ud765\ubbf8\ub86d\uac8c \uc77d\uc5c8\uc9c0\ub9cc \uc774\ud6c4\uc5d0\ub294 \uc774\ubbf8 \uc775\uc219\ud55c \ub0b4\uc6a9\uc774 \ub9ce\uc544\uc11c \ub05d\uae4c\uc9c0 \uc77d\uc9c0\ub294 \uc54a\uc558\ub2e4.\\n\\n> \ucd94\uac00: \ubc88\uc5ed\uc11c\uac00 \ub098\uc640\uc11c \uc774\uac83\uc744 \uc77d\uc5b4\ub3c4 \uc88b\uc744\uac70 \uac19\ub2e4. [\uc3d9\uc3d9 \ub4e4\uc5b4\uc624\ub294 \ud568\uc218\ud615 \ucf54\ub529](http://www.yes24.com/Product/Goods/108748841)\\n\\n### Learning Functional Programming in Go (Lex Sheehan)\\n\\n\uace0\uc5b8\uc5b4\ub85c \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uc744 \uc5b4\ub5bb\uac8c \ud560 \uc218 \uc788\ub294\uc9c0 \uc54c \uc218 \uc788\ub294 \ucc45.\\n\uace0\uc5b8\uc5b4\ub294 \ud568\uc218\ub97c `type` \uba85\ub839\uc5b4\ub85c \uc0c8\ub85c\uc6b4 \ud0c0\uc785\uc73c\ub85c \ub9cc\ub4e4\uba74 \ud568\uc218\uc758 \uba54\uc18c\ub4dc\ub77c\ub294 \ub3c5\ud2b9\ud55c \uc131\uc9c8\uc744 \ub9cc\ub4e4 \uc218 \uc788\ub294\ub370 \uc774\ub97c \ud65c\uc6a9\ud574\uc11c \ud568\uc218 \uccb4\uc774\ub2dd\uc744 \uad6c\ud604\ud55c\uac8c \ucc38\uc2e0\ud588\ub2e4.\\n\ucc44\ub110\uc744 \ud65c\uc6a9\ud574 pipeline\uc744 \ub9cc\ub4dc\ub294 \ucf54\ub4dc\ub3c4 \ub180\ub77c\uc6cc \uc9c1\uc811 \uad6c\ud604\ud574\ubcf4\uae30\ub3c4 \ud558\uc600\ub2e4.\\n\\n> https://github.com/jbl428/study-note/tree/master/go-pipeline\\n\\n### \uc2a4\uce7c\ub77c\ub85c \ubc30\uc6b0\ub294 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d (Paul Chiusano and Runar Bjarnason)\\n\\n\ubaa8\ub098\ub4dc\ub97c \uc774\uc6a9\ud574 side effect \uc788\ub294 \ud504\ub85c\uadf8\ub7a8\uc744 \uc21c\uc218\ud55c \ud568\uc218\ub4e4\uc758 \ud569\uc131\uc73c\ub85c \ub9cc\ub4e4 \uc218 \uc788\ub294\uc9c0 \uac10\uc744 \uc7a1\uac8c \ud574\uc900 \ucc45\uc774\ub2e4.\\n\uc5f0\uc2b5\ubb38\uc81c \uc911\uc5d0 \uc0c1\ud0dc\ubaa8\ub098\ub4dc\ub97c \ud65c\uc6a9\ud574\uc57c \ud558\ub294\uac8c \uc788\uc5c8\ub294\ub370 \ud480\uba74\uc11c \uc5b4\ub824\uc6e0\ub358 \uc0c1\ud0dc\ubaa8\ub098\ub4dc\ub97c \uc774\ud574\ud560 \uc218 \uc788\uac8c\ub418\uc5c8\ub2e4.\\n\ud480\uc5c8\ub358 \ubb38\uc81c\uc640 \ub2f5\uc740 \uc544\ub798 \ub9c1\ud06c\uc5d0 \uc788\ub2e4.\\n\\n> https://github.com/jbl428/study-note/tree/master/haskell/candy-machine\\n\\n## \uc601\uc0c1\\n\\n### Monad\ub780 \ubb34\uc5c7\uc778\uac00?\\n\\nhttps://www.youtube.com/watch?v=jI4aMyqvpfQ\\n\\n\uac1c\uc778\uc801\uc73c\ub85c \ubaa8\ub098\ub4dc\uc5d0 \ub300\ud574 \uc27d\uac8c \uc124\uba85\ud588\ub2e4\uace0 \ub290\ub080 \uc601\uc0c1\uc774\uc5c8\ub2e4. `flatMap` \uc5d0 \ub300\ud55c \uac1c\ub150\uc744 \uc775\ud788\ub294\ub370 \ub3c4\uc6c0\uc774 \ub418\uc5c8\ub2e4.\\n\\n### haskell rank\\n\\nhttps://www.youtube.com/watch?v=h_D4P-KRNKs&list=PLguYJK7ydFE4aS8fq4D6DqjF6qsysxTnx\\n\\nhttps://www.hackerrank.com/ \uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ud504\ub85c\uadf8\ub798\ubc0d \ubb38\uc81c\ub97c \ud558\uc2a4\ucf08\uc744 \uc774\uc6a9\ud574 \ud480\uc774\ud558\ub294 \uc601\uc0c1\uc774 \uc788\ub2e4.\\n\uba85\ub839\ud615 \uc5b8\uc5b4\ub85c \uad6c\ud604\ud558\uba74 \uae38\uc5b4\uc9c8 \uc218 \uc788\ub294 \ucf54\ub4dc\ub97c \ud558\uc2a4\ucf08\ub85c \uac04\uacb0\ud558\uac8c \ub9cc\ub4dc\ub294 \uacfc\uc815\uc774 \uc2e0\uae30\ud588\ub2e4.\\n\uadf8\ub9ac\uace0 \uc720\ud22c\ubc84\uac00 `emacs` \ub97c \uc815\ub9d0 \uc798 \uc0ac\uc6a9\ud558\ub294\ub370 \ud55c \ubc88 \uc2dc\uccad\ud558\uae38 \uad8c\ud574\ubcf8\ub2e4.\\n\\n### JSON Parser 100% From Scratch in Haskell (only 111 lines)\\n\\nhttps://www.youtube.com/watch?v=N9RUqGYuGfw\\n\\n\uc704 \uc601\uc0c1\uc744 \ub9cc\ub4e0 \uc720\ud29c\ubc84\uc758 \ub610 \ub2e4\ub978 \uc601\uc0c1\uc73c\ub85c \ud558\uc2a4\ucf08\ub85c `JSON` \ud30c\uc11c\ub97c \ub9cc\ub4dc\ub294 \uacfc\uc815\uc744 \ub2f4\uace0\uc788\ub2e4.\\n\ubaa8\ub098\ub4dc\ub97c \uc2e4\uc81c\ub85c \uc5b4\ub5bb\uac8c \ud65c\uc6a9\ud558\ub294\uc9c0 \uc54c \uc218 \uc788\uc5c8\ub358 \uc88b\uc740 \uc601\uc0c1\uc774\uc5c8\uace0 \ud558\uc2a4\ucf08\uc744 \uaf2d \ub9c8\uc2a4\ud130 \ud574\ubcf4\uace0 \uc2f6\uc5b4\uc9c4 \uacc4\uae30\uac00 \ub418\uc5c8\ub2e4.\\n\\n## \uac15\uc758\\n\\n### \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d\uacfc JavaScript ES6+\\n\\nhttps://www.inflearn.com/course/functional-es6/dashboard\\n\\n\uc720\uc778\ub3d9\ub2d8\uc758 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uac15\uc758\ub85c ES6 \uc774\ud130\ub808\uc774\ud130\ub97c \ud65c\uc6a9\ud574 `fxjs` \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \ud575\uc2ec \ud568\uc218\ub97c \uad6c\ud604\ud558\ub294 \uacfc\uc815\uc744 \ub2f4\uace0\uc788\ub2e4.\\n\uac1c\uc778\uc801\uc73c\ub85c \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\ub85c \uc9c0\uc5f0\ud3c9\uac00\ub97c \uad6c\ud604\ud588\ub2e4\ub294\uac8c \uac00\uc7a5 \ub180\ub77c\uc6e0\ub2e4.\\n\uadf8\ub9ac\uace0 `go` \ud568\uc218\uc5d0 \ud30c\ub77c\ubbf8\ud130\ub85c \ub4e4\uc5b4\uac00\ub294 \ud568\uc218\uac00 promise \ub97c \ubc18\ud658\ud558\uba74 \uc801\uc808\ud788 \ub2e4\uc74c \ud568\uc218\uc5d0 promise \uc548\uc758 \uac12\uc744 \uc804\ub2ec\ud574 \uc8fc\ub3c4\ub85d \uad6c\ud604\ud55c \uc544\uc774\ub514\uc5b4\uac00 \ub9e4\uc6b0 \uc88b\uc558\ub2e4.\\n\\n## \ubb38\uc11c\\n\\n### fp-ts Learning Resources \ubc88\uc5ed\ubb38\uc11c\\n\\nhttps://github.com/alstn2468/getting-started-fp-ts\\n\\nfp-ts \uacf5\uc2dd\ubb38\uc11c\uc758 Learning Resources\uc5d0\uc11c \uc18c\uac1c\ud558\ub294 \ubb38\uc11c\ub4e4\uc744 \ubc88\uc5ed\ud55c \uc800\uc7a5\uc18c\ub85c \uc601\uc5b4\uc5d0 \uc775\uc219\ud558\uc9c0 \uc54a\ub2e4\uba74 \uc774\uacf3\uc744 \ucc38\uace0\ud558\ub294\uac83\ub3c4 \uc88b\uc744\uac70 \uac19\ub2e4.\\n\\n### TypeScript \uc640 fp-ts \ub97c \ud65c\uc6a9\ud55c \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uc18c\uac1c\\n\\nhttps://jbl428.github.io/functional-programming\\n\\nfp-ts \uba54\uc778\ud14c\uc774\ub108\uac00 \ub9cc\ub4e0 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uac15\uc758\uc790\ub8cc, \uc6d0\ubb38\uc740 \uc774\ud0c8\ub9ac\uc544\uc5b4\ub85c \uc791\uc131\ub418\uc5c8\uace0 \uc601\uc5b4\ub85c \ubc88\uc5ed\ud55c \ub2e4\ub978 \uc800\uc7a5\uc18c\ub97c \ud65c\uc6a9\ud574 \ub2e4\uc2dc \ud55c\uad6d\uc5b4\ub85c \ubc88\uc5ed\ud558\uc600\ub2e4.\\n\\n### \ube14\ub85c\uadf8 \uc0dd\uc131\uae30\ub97c \ub9cc\ub4e4\uba74\uc11c \ubc30\uc6b0\ub294 \ud558\uc2a4\ucf08\\n\\nhttps://jbl428.github.io/learn-haskell-blog-generator\\n\\n\ud558\uc2a4\ucf08 \ud29c\ud1a0\ub9ac\uc5bc \ud398\uc774\uc9c0\uc5d0 \uc788\ub294 \uc628\ub77c\uc778 \uc11c\uc801\uc778 https://lhbg-book.link/ \ub97c \ubc88\uc5ed\ud55c \uc800\uc7a5\uc18c\uc774\ub2e4."},{"id":"2021/10/19/Docusaurus\uc5d0-utterances-\uc5f0\ub3d9","metadata":{"permalink":"/2021/10/19/Docusaurus\uc5d0-utterances-\uc5f0\ub3d9","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2021-10-19-utterances/index.mdx","source":"@site/blog/2021-10-19-utterances/index.mdx","title":"Docusaurus\uc5d0 utterances \uc5f0\ub3d9","description":"utterances \ub294 GitHub \uc774\uc288 \ub97c \uc774\uc6a9\ud574\uc11c \uc6d0\ud558\ub294 \uc0ac\uc774\ud2b8\uc758 \ub313\uae00 \uae30\ub2a5\uc744 \ub9cc\ub4e4\uc5b4\uc8fc\ub294 \uc11c\ube44\uc2a4\uc774\ub2e4.","date":"2021-10-19T00:00:00.000Z","formattedDate":"2021\ub144 10\uc6d4 19\uc77c","tags":[{"label":"blog","permalink":"/tags/blog"},{"label":"docusaurus","permalink":"/tags/docusaurus"},{"label":"utterances","permalink":"/tags/utterances"}],"readingTime":4.62,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Docusaurus\uc5d0 utterances \uc5f0\ub3d9","slug":"2021/10/19/Docusaurus\uc5d0-utterances-\uc5f0\ub3d9","authors":"jake","tags":["blog","docusaurus","utterances"]},"prevItem":{"title":"\ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uad00\ub828 \uc790\ub8cc","permalink":"/2021/10/21/\ud568\uc218\ud615-\ud504\ub85c\uadf8\ub798\ubc0d-\uad00\ub828-\uc790\ub8cc"},"nextItem":{"title":"Docusaurus\ub97c \uc774\uc6a9\ud55c \ube14\ub85c\uadf8 \uad6c\ucd95","permalink":"/2021/10/17/Docusaurus\ub97c-\uc774\uc6a9\ud55c-\ube14\ub85c\uadf8-\uad6c\ucd95"}},"content":"[utterances](https://utteranc.es/) \ub294 `GitHub \uc774\uc288` \ub97c \uc774\uc6a9\ud574\uc11c \uc6d0\ud558\ub294 \uc0ac\uc774\ud2b8\uc758 \ub313\uae00 \uae30\ub2a5\uc744 \ub9cc\ub4e4\uc5b4\uc8fc\ub294 \uc11c\ube44\uc2a4\uc774\ub2e4.  \\n\ub530\ub77c\uc11c github \uacc4\uc815\uc774 \uc874\uc7ac\ud574\uc57c \ub313\uae00 \uc791\uc131\uc774 \uac00\ub2a5\ud558\uc9c0\ub9cc \uac1c\ubc1c\uc5d0 \uad00\ub828 \uae00\uc744 \uc791\uc131\ud560 \uc608\uc815\uc774\ub77c \ud070 \ubb38\uc81c\ub294 \uc544\ub2c8\uc5c8\ub2e4.  \\n\ub9cc\uc57d \ub2e4\ub978 \uc18c\uc15c \ub85c\uadf8\uc778\ub3c4 \uc9c0\uc6d0\ud558\uace0 \uc2f6\ub2e4\uba74 [disqus](https://disqus.com/) \uac19\uc740 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n`docusaurus` \uc5d0 `utterances` \ub97c \uc5f0\ub3d9\ud558\ub294 \ubc29\ubc95\uc5d0 \uad00\ud55c \ubb38\uc11c\ub97c \uac80\uc0c9\ud574\ubcf4\uc558\ub294\ub370 \ub531 \ud558\ub098 \uc874\uc7ac\ud588\ub2e4.\\n\\n- https://younho9.dev/docusaurus-manage-docs-2\\n\\n\ud574\ub2f9 \uae00\uc744 \ucc38\uc870\ud574\uc11c \uc5f0\ub3d9\ud558\uc600\uc9c0\ub9cc \ubaa8\ub4e0 \ubd80\ubd84\uc744 \uadf8\ub300\ub85c \ub530\ub77c\ud558\uc9c0\ub294 \uc54a\uc558\ub2e4.  \\n\ud14c\ub9c8\uc5d0 \ub530\ub77c `utterances` \uc758 \ud14c\ub9c8\ub3c4 \ub611\uac19\uc774 \uc218\uc815\ud558\ub294 \ucf54\ub4dc\ub294 \ub9ce\uc740 \ub3c4\uc6c0\uc774 \ub418\uc5c8\ub2e4.\\n\\n## utterances \uc0ac\uc804 \uc124\uc815\\n\\nutterances \uc5f0\ub3d9\ud558\ub824\uba74 github \uc800\uc7a5\uc18c\uac00 public \uc774\uc5b4\uc57c \ud55c\ub2e4.  \\n\uc800\uc7a5\uc18c\uac00 [utterances app](https://github.com/apps/utterances) \uc744 \uc0ac\uc6a9\ud558\ub3c4\ub85d \uc124\uc815\ud574\uc57c \ud55c\ub2e4.  \\n\ub9c1\ud06c\ub97c \ub204\ub978 \ud6c4 `Configure` \ub97c \ub204\ub978 \ud6c4 github \ub85c\uadf8\uc778 \ud6c4 \uc544\ub798 \ud654\uba74\ucc98\ub7fc \uc800\uc7a5\uc18c\ub97c \uc120\ud0dd\ud55c\uace0 `Save` \ub97c \ub204\ub978\ub2e4.\\n\\n![utterances-app](./utterances-app.png)\\n\\n## docusaurus \ud14c\ub9c8 \ucef4\ud3ec\ub10c\ud2b8 \uc218\uc815\\n\\n\uac80\uc0c9\ud55c \uae00\uc5d0\uc11c\ub294 `swizzle` \uba85\ub839\uc5b4\ub97c \ud1b5\ud574\uc11c `docusaurus` \uac00 \ub0b4\ubd80\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub294 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc9c1\uc811 \uc218\uc815\ud574\uc11c \uc0ac\uc6a9\ud588\ub2e4.  \\n\ud558\uc9c0\ub9cc [\uacf5\uc2dd\ubb38\uc11c](https://docusaurus.io/ko/docs/using-themes#swizzling-theme-components) \ub97c \ubcf4\uba74 \uad8c\uc7a5\ud558\ub294 \ubc29\ubc95\uc740 \uc544\ub2c8\ub2e4.  \\n\ud574\ub2f9 \ucef4\ud3ec\ub10c\ud2b8\uac00 \ubc84\uc804\uc774 \uc62c\ub77c\uac00\uba74 \ubcc0\uacbd\ub420 \uac00\ub2a5\uc131\uc774 \uc788\uae30 \ub54c\ubb38\uc774\ub2e4.  \\n\ub530\ub77c\uc11c \ud574\ub2f9 \uae00\uc758 \uc544\ub798 \ubd80\ubd84\uc5d0 \uc788\ub294 [\ud14c\ub9c8 \ucef4\ud3ec\ub10c\ud2b8 \uac10\uc2f8\uae30](https://docusaurus.io/ko/docs/using-themes#wrapping-theme-components) \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud588\ub2e4.  \\n\uadf8\ub7ec\uba74 \uae30\uc874 \ucef4\ud3ec\ub10c\ud2b8\uc758 \uc18c\uc2a4\ub294 \uac74\ub4e4\uc9c0 \uc54a\uace0 utterances \ub97c \uc704\ud55c \ub85c\uc9c1\ub9cc \ucd94\uac00\ud558\uba74 \ub418\uae30\uc5d0 \ub354 \uc548\uc804\ud558\ub2e4.  \\n\ud14c\ub9c8\uc5d0 \ub530\ub77c utterances \uc758 \ud14c\ub9c8\ub3c4 \ubc14\ub00c\ub294 \ub85c\uc9c1\uc744 \ud3ec\ud568\ud55c \uc804\uccb4 \ucf54\ub4dc\ub294 \uc544\ub798\uc640 \uac19\ub2e4.\\n\\n:::info\\n`<\uc0ac\uc6a9\uc790\uc774\ub984>` \ubd80\ubd84\uc744 \uc801\uc808\ud788 \uc218\uc815\ud55c\ub2e4.  \\n:::\\n\\n```jsx title=\\"src/theme/BlogPostItem.tsx\\"\\nimport React, { useEffect, useRef } from \\"react\\";\\nimport OriginalBlogPostItem from \\"@theme-original/BlogPostItem\\";\\nimport { useColorMode } from \\"@docusaurus/theme-common\\";\\n\\nconst utterancesSelector = \\"iframe.utterances-frame\\";\\n\\nfunction BlogPostItem(props) {\\n  const { isDarkTheme } = useColorMode();\\n  const utterancesTheme = isDarkTheme ? \\"github-dark\\" : \\"github-light\\";\\n  const containerRef = useRef(null);\\n\\n  useEffect(() => {\\n    if (!props.isBlogPostPage) return;\\n\\n    const utterancesEl = containerRef.current.querySelector(utterancesSelector);\\n\\n    const createUtterancesEl = () => {\\n      const script = document.createElement(\\"script\\");\\n\\n      script.src = \\"https://utteranc.es/client.js\\";\\n      script.setAttribute(\\"repo\\", \\"<\uc0ac\uc6a9\uc790\uc774\ub984>/<\uc0ac\uc6a9\uc790\uc774\ub984>.github.io\\");\\n      script.setAttribute(\\"issue-term\\", \\"pathname\\");\\n      script.setAttribute(\\"label\\", \\"comment\\");\\n      script.setAttribute(\\"theme\\", utterancesTheme);\\n      script.crossOrigin = \\"anonymous\\";\\n      script.async = true;\\n\\n      containerRef.current.appendChild(script);\\n    };\\n\\n    const postThemeMessage = () => {\\n      const message = {\\n        type: \\"set-theme\\",\\n        theme: utterancesTheme,\\n      };\\n\\n      utterancesEl.contentWindow.postMessage(message, \\"https://utteranc.es\\");\\n    };\\n\\n    utterancesEl ? postThemeMessage() : createUtterancesEl();\\n  }, [utterancesTheme]);\\n\\n  return (\\n    <>\\n      <OriginalBlogPostItem {...props} />\\n      {props.isBlogPostPage && <div ref={containerRef} />}\\n    </>\\n  );\\n}\\n\\nexport default BlogPostItem;\\n```\\n\\n`src/theme/` \uacbd\ub85c \ubc11\uc5d0 `<\ucef4\ud3ec\ub10c\ud2b8 \uc774\ub984>.tsx` \ud30c\uc77c\uc744 \uc0dd\uc131\ud558\uba74 \ud574\ub2f9 \ucef4\ud3ec\ub10c\ud2b8\ub97c \ucee4\uc2a4\ud140 \ud560 \uc218 \uc788\ub2e4.  \\n`@theme-original/<\ucef4\ud3ec\ub10c\ud2b8>` \ub97c import \ud558\uba74 \uc6d0\ubcf8 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uac00\uc838\uc62c \uc218 \uc788\uace0 \ud574\ub2f9 \ucef4\ud3ec\ub10c\ud2b8\uc5d0 utterances \uad00\ub828 \ub0b4\uc6a9\ub9cc \ucd94\uac00\ud558\uba74 \ub41c\ub2e4.\\n\\n```jsx {2,7-11} title=\\"src/theme/BlogPostItem.tsx\\"\\nimport React, { useEffect, useRef } from \\"react\\";\\nimport OriginalBlogPostItem from \\"@theme-original/BlogPostItem\\"; // \uc6d0\ubcf8 \ucef4\ud3ec\ub10c\ud2b8 \uac00\uc838\uc624\uae30\\nimport useThemeContext from \\"@theme/hooks/useThemeContext\\";\\n\\n  ...\\n\\n  return (\\n    <>\\n      <OriginalBlogPostItem {...props} />\\n      {props.isBlogPostPage && <div ref={containerRef} />} // \ub313\uae00 \ud654\uba74 \ucd94\uac00\\n    </>\\n```\\n\\n\uc774\uc81c \ub313\uae00 \uae30\ub2a5\uc774 \uc81c\ub300\ub85c \ub418\ub294\uc9c0 \ud655\uc778\ud574\ubcf8\ub2e4.\\n\\n## \uacf5\uc2dd\ubb38\uc11c\ub97c \uc77d\uc790\\n\\n\uc774\uc804 \uae00\uc5d0\uc11c \ub9d0\ud55c \ub0b4\uc6a9\uc774\uc9c0\ub9cc \ube14\ub85c\uadf8 \uae00\uc740 \ucc38\uc870\uc6a9\uc73c\ub85c\ub9cc \uc0ac\uc6a9\ud558\uace0 \uacf5\uc2dd\ubb38\uc11c\ub97c \uba54\uc778\uc73c\ub85c \ud65c\uc6a9\ud558\ub294\uac8c \uc911\uc694\ud558\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4.  \\n\ub9cc\uc57d \ube14\ub85c\uadf8 \uae00\ub9cc \ucc38\uc870\ud588\ub2e4\uba74 `\ud14c\ub9c8 \ucef4\ud3ec\ub10c\ud2b8 \uac10\uc2f8\uae30` \ub77c\ub294 \uae30\ub2a5\uc744 \ubab0\ub790\uc744\ud14c\uace0 \ub354 \uc88b\uc740 \uc5f0\ub3d9\ubc29\ubc95\uc744 \uc801\uc6a9\ud558\uc9c0 \ubabb\ud588\uc744\uac83\uc774\ub2e4.  \\n\uc774 \uae00\ub3c4 \ub204\uad70\uac00\uc5d0\uac8c \ucc38\uace0\uc6a9\uc73c\ub85c\ub9cc \uc0ac\uc6a9\ub418\uae30\ub97c \ubc14\ub77c\uba70 \ub354 \uc88b\uc740 \ubc29\ubc95\uc744 \ucc3e\uc544\ubcf4\uace0 \uc801\uc6a9\ud558\uc168\uc73c\uba74 \uc88b\uaca0\ub2e4.\\n\\n## \ucc38\uace0\uc790\ub8cc\\n\\n- Docusaurus\ub85c \ubb38\uc11c \uad00\ub9ac\ud558\uae30 - 2: https://younho9.dev/docusaurus-manage-docs-2"},{"id":"2021/10/17/Docusaurus\ub97c-\uc774\uc6a9\ud55c-\ube14\ub85c\uadf8-\uad6c\ucd95","metadata":{"permalink":"/2021/10/17/Docusaurus\ub97c-\uc774\uc6a9\ud55c-\ube14\ub85c\uadf8-\uad6c\ucd95","editUrl":"https://github.com/jbl428/jbl428.github.io/edit/main/blog/2021-10-17-docusaurus-for-blog/index.mdx","source":"@site/blog/2021-10-17-docusaurus-for-blog/index.mdx","title":"Docusaurus\ub97c \uc774\uc6a9\ud55c \ube14\ub85c\uadf8 \uad6c\ucd95","description":"\uae30\uc220 \ube14\ub85c\uadf8\ub97c \uc704\ud574 \uc5b4\ub5a4 \ud50c\ub7ab\ud3fc\uc744 \uc0ac\uc6a9\ud560\uc9c0 \uace0\ubbfc\ud558\ub2e4\uac00 \uc9c1\uc7a5 \ub3d9\ub8cc\uac00 Docusaurus \ub97c \ucd94\ucc9c\ud574\uc8fc\uc5c8\ub2e4.","date":"2021-10-17T00:00:00.000Z","formattedDate":"2021\ub144 10\uc6d4 17\uc77c","tags":[{"label":"blog","permalink":"/tags/blog"},{"label":"docusaurus","permalink":"/tags/docusaurus"}],"readingTime":6.32,"hasTruncateMarker":true,"authors":[{"name":"Jake Son","title":"Backend Developer","url":"https://github.com/jbl428","imageURL":"https://avatars.githubusercontent.com/u/22140938?v=4","key":"jake"}],"frontMatter":{"title":"Docusaurus\ub97c \uc774\uc6a9\ud55c \ube14\ub85c\uadf8 \uad6c\ucd95","slug":"2021/10/17/Docusaurus\ub97c-\uc774\uc6a9\ud55c-\ube14\ub85c\uadf8-\uad6c\ucd95","authors":"jake","tags":["blog","docusaurus"]},"prevItem":{"title":"Docusaurus\uc5d0 utterances \uc5f0\ub3d9","permalink":"/2021/10/19/Docusaurus\uc5d0-utterances-\uc5f0\ub3d9"}},"content":"\uae30\uc220 \ube14\ub85c\uadf8\ub97c \uc704\ud574 \uc5b4\ub5a4 \ud50c\ub7ab\ud3fc\uc744 \uc0ac\uc6a9\ud560\uc9c0 \uace0\ubbfc\ud558\ub2e4\uac00 \uc9c1\uc7a5 \ub3d9\ub8cc\uac00 `Docusaurus` \ub97c \ucd94\ucc9c\ud574\uc8fc\uc5c8\ub2e4.  \\n\ub2e4\ud06c\ubaa8\ub4dc\ub97c \uc9c0\uc6d0\ud558\uace0 \ud06c\uac8c \ucee4\uc2a4\ud140\ud558\uc9c0 \uc54a\uc544\ub3c4 \uc4f8\ub9cc\ud55c \ube14\ub85c\uadf8\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc744\uac70\uac19\uc558\ub2e4.  \\n\uadf8\ub798\uc11c \uccab \ube14\ub85c\uadf8 \uae00\ub85c \uad6c\ucd95\ud55c \ub0b4\uc6a9\uc744 \uacf5\uc720\ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n\uac1c\uc778\uc801\uc73c\ub85c \uae30\uc220\uad00\ub828 \ud658\uacbd\uc744 \uc138\ud305\ud560 \ub54c\uc5d0\ub294 \ube14\ub85c\uadf8 \ubcf4\ub2e4\ub294 \uacf5\uc2dd\ubb38\uc11c\ub97c \ud65c\uc6a9\ud55c\ub2e4.  \\n\ube14\ub85c\uadf8 \uae00\uc740 \uc791\uc131 \ub2f9\uc2dc\uc5d0\ub294 \ub9de\ub294 \uc124\uce58\ubc29\ubc95\uc774\uc5c8\uc9c0\ub9cc \uc2dc\uac04\uc774 \uc9c0\ub098 \ubc84\uc804\uc774 \uc62c\ub77c\uac00\ub294 \uacbd\uc6b0 \uadf8\ub300\ub85c \ub530\ub77c\ud558\uba74 \uc81c\ub300\ub85c \ub3d9\uc791\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0\uac00 \ub9ce\uae30 \ub54c\ubb38\uc774\ub2e4.  \\n\uadf8\ub807\uae30\uc5d0 \uc774 \uae00\uc744 \uadf8\ub300\ub85c \ub530\ub77c\ud558\uc5ec \uad6c\ucd95\ud558\uae30 \ubcf4\ub2e4 \ucc38\uace0\uc6a9\uc73c\ub85c \ud65c\uc6a9\ud558\uace0 \uacf5\uc2dd\ubb38\uc11c\ub97c \uc8fc\ub85c \uc774\uc6a9\ud558\uae30\ub97c \uad8c\uc7a5\ud55c\ub2e4.\\n\\n## \ud658\uacbd\\n\\n\ube14\ub85c\uadf8\ub97c \uc704\ud574 \uc0ac\uc6a9\ud55c \uae30\uc220\uacfc \uac01 \ubc84\uc804\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.\\n\\n- Docusaurus (with typescript): 2.0.0-beta.15\\n- GitHub Page\\n- GitHub Action\\n\\n\uad00\ub828 \uc800\uc7a5\uc18c\ub294 \uc544\ub798 \ub9c1\ud06c\ub97c \ucc38\uc870\ud55c\ub2e4.\\n\\nhttps://github.com/jbl428/jbl428.github.io\\n\\n## GitHub \uc800\uc7a5\uc18c \uc0dd\uc131\\n\\n`GitHub Page` \ub294 \uae43\ud5c8\ube0c\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ubb34\ub8cc \ud638\uc2a4\ud305 \uc11c\ube44\uc2a4\uc774\ub2e4. \ube14\ub85c\uadf8\ub098 \ud3ec\ud2b8\ud3f4\ub9ac\uc624 \uac19\uc740 \uc815\uc801 \uc0ac\uc774\ud2b8\ub85c \uc8fc\ub85c \uc0ac\uc6a9\ub41c\ub2e4.  \\n\uae43\ud5c8\ube0c\uc5d0 \ub4e4\uc5b4\uac00\uc11c \uc800\uc7a5\uc18c\ub97c \uc0dd\uc131\ud558\ub294\ub370 \uc774\ub984\uc740 `<\uc0ac\uc6a9\uc790\uc774\ub984>.github.io` \ud615\ud0dc\ub85c \uc124\uc815\ud574\uc8fc\uace0 \ub098\uba38\uc9c0 \uc635\uc158\uc740 \uc0c1\ud669\uc5d0 \ub530\ub77c \uc801\uc808\ud788 \uc124\uc815\ud55c\ub2e4.  \\n\uc774\ud6c4 \ud574\ub2f9 \uc800\uc7a5\uc18c\ub97c clone \ud55c\ub2e4.\\n\\n```shell\\ngit clone https://github.com/<\uc0ac\uc6a9\uc790\uc774\ub984>/<\uc0ac\uc6a9\uc790\uc774\ub984>.github.io.git\\n```\\n\\n## Docusaurus \uc124\uce58\\n\\n\uc800\uc7a5\uc18c \ub8e8\ud2b8 \ub514\ub809\ud1a0\ub9ac\ub85c \uc774\ub3d9\ud55c \ub2e4\uc74c \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud55c\ub2e4.\\n\\n```shell\\nnpm init docusaurus@latest temp classic --typescript\\n```\\n\\n`temp` \ub514\ub809\ud1a0\ub9ac\uc5d0 docusaurus \uad00\ub828 \ud30c\uc77c\uc774 \ub4e4\uc5b4\uac00\ub294\ub370 \uc800\uc7a5\uc18c \ub8e8\ud2b8\ub85c \ubaa8\ub450 \uc774\ub3d9\ud55c\ub2e4.\\n\\n```shell\\nmv temp/* .\\nmv temp/.* .\\n```\\n\\n## \uae30\ubcf8\uc124\uc815\\n\\n`docusaurus.config.js` \ud30c\uc77c\uc5d0\ub294 `Docusaurus` \uc5d0 \ub300\ud55c \uc124\uc815\uc774 \ub4e4\uc5b4\uc788\ub2e4.  \\n\uac01 \ud56d\ubaa9\uc5d0 \ub300\ud55c \uc124\uba85\uc740 [\ubb38\uc11c](https://docusaurus.io/ko/docs/docusaurus.config.js) \ub97c \ucc38\uc870\ud55c\ub2e4.\\n\\n```jsx {3-11} title=\\"docusaurus.config.js\\"\\nmodule.exports = {\\n  // ...\\n  title: \\"\uc0ac\uc774\ud2b8 \uc81c\ubaa9\\",\\n  tagline: \\"\uc0ac\uc774\ud2b8 \uc124\uba85\\",\\n  url: \\"https://<\uc0ac\uc6a9\uc790\uc774\ub984>.github.io\\",\\n  baseUrl: \\"/\\",\\n  onBrokenLinks: \\"throw\\",\\n  onBrokenMarkdownLinks: \\"warn\\",\\n  favicon: \\"img/favicon.ico\\",\\n  organizationName: \\"<\uc0ac\uc6a9\uc790\uc774\ub984>\\",\\n  projectName: \\"<\uc0ac\uc6a9\uc790\uc774\ub984>.github.io\\",\\n  // ...\\n};\\n```\\n\\n## \ubc30\ud3ec \uc124\uc815\\n\\n`GitHub Action` \uc744 \ud65c\uc6a9\ud574\uc11c `main` \ube0c\ub79c\uce58\uc5d0 \ud478\uc2dc\uac00 \uc77c\uc5b4\ub098\uba74 \ube4c\ub4dc\ub97c \uc218\ud589\ud558\uace0 `gh-pages` \ube0c\ub79c\uce58\ub85c \uacb0\uacfc\ub97c \ud478\uc2dc\ud558\ub294 \uc124\uc815\uc744 \ud574\uc900\ub2e4.  \\n[\ub9c1\ud06c](https://docusaurus.io/ko/docs/deployment#triggering-deployment-with-github-actions) \ub97c \ucc38\uc870\ud574\uc11c 5\ubc88 \ub2e8\uacc4\uae4c\uc9c0 \uc791\uc5c5\uc744 \ud574\uc900\ub2e4.  \\n\ub9c8\uc9c0\ub9c9 6\ubc88 \ub2e8\uacc4\uc778 `workflow` \ud30c\uc77c\uc744 \ub9cc\ub4dc\ub294 \ubd80\ubd84\ub9cc \uc544\ub798\ucc98\ub7fc \ud574\uc900\ub2e4.\\n\\n:::info\\n`<\uc774\uba54\uc77c>` \uacfc `<\uc774\ub984>` \ubd80\ubd84\uc744 \uc801\uc808\ud788 \uc218\uc815\ud558\ub3c4\ub85d \ud55c\ub2e4.  \\n:::\\n\\n```yaml title=\\".github/workflows/blog.yml\\"\\nname: blog\\n\\non:\\n  push:\\n    branches: [main]\\n\\njobs:\\n  gh-release:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - uses: actions/checkout@v1\\n      - uses: actions/setup-node@v1\\n        with:\\n          node-version: \\"12.x\\"\\n      - uses: webfactory/ssh-agent@v0.5.0\\n        with:\\n          ssh-private-key: ${{ secrets.GH_PAGES_DEPLOY }}\\n      - name: Release to GitHub Pages\\n        env:\\n          USE_SSH: true\\n          GIT_USER: git\\n          DEPLOYMENT_BRANCH: gh-pages\\n          CURRENT_BRANCH: main\\n        run: |\\n          git config --global user.email \\"<\uc774\uba54\uc77c>\\"\\n          git config --global user.name \\"<\uc774\ub984>\\"\\n          if [ -e yarn.lock ]; then\\n            yarn install --frozen-lockfile\\n          elif [ -e package-lock.json ]; then\\n            npm ci\\n          else\\n            npm i\\n          fi\\n          npm run deploy\\n```\\n\\n## \ubcf4\uad00\uc18c \ud398\uc774\uc9c0 \ucd94\uac00\\n\\n\ucc98\uc74c\uc5d0\ub294 [John Reilly archive](https://blog.johnnyreilly.com/blog-archive) \ucc98\ub7fc \ubaa8\ub4e0 \uac8c\uc2dc\uae00\uc744 \uc5f0\ub3c4\ubcc4\ub85c \uc815\ub9ac\ud55c \ud398\uc774\uc9c0\ub97c \ucd94\uac00\ud558\uace0\uc790 \uc774\ubd84\uc758 \uc800\uc7a5\uc18c \ucf54\ub4dc\ub97c \ubcf5\uc0ac\ud574\uc11c \uc0ac\uc6a9\ud588\ub2e4.  \\n\ud558\uc9c0\ub9cc \uacf5\uc2dd\ubb38\uc11c\ub97c \ubcf4\ub2c8 \uc774\ubbf8 \uc704\uc640 \uac19\uc740 \uae30\ub2a5\uc774 `Docusaurus` \uc5d0 \ubc18\uc601\ub41c \uac83\uc744 \ud655\uc778\ud558\uc600\ub2e4.  \\n\uc544\ub798\ucc98\ub7fc \uc801\uc808\ud55c \uacbd\ub85c\uc5d0 \uac12\uc744 \ucd94\uac00\ud558\uba74\ub41c\ub2e4.\\n\\n```jsx {7,15} title=\\"docusaurus.config.js\\"\\nmodule.exports = {\\n  // ...\\n  presets: [\\n    [\\n      {\\n        blog: {\\n          archiveBasePath: \\"archive\\",\\n        },\\n      },\\n    ],\\n  ],\\n  // ...\\n  themeConfig: {\\n    navbar: {\\n      items: [{ to: \\"/archive\\", label: \\"Archive\\", position: \\"left\\" }],\\n    },\\n  },\\n  // ...\\n};\\n```\\n\\n## i18n \uc124\uc815\\n\\n\uae30\ubcf8 \uc5b8\uc5b4 \uc124\uc815\uc744 \ud55c\uae00\ub85c \ud558\uae30\uc704\ud574 \ub85c\ucf00\uc77c \uc124\uc815\uc744 \ud574\uc900\ub2e4.\\n\\n```jsx {3-6} title=\\"docusaurus.config.js\\"\\nmodule.exports = {\\n  // ...\\n  i18n: {\\n    defaultLocale: \\"ko\\",\\n    locales: [\\"ko\\"],\\n  },\\n  // ...\\n};\\n```\\n\\n\uadf8\ub9ac\uace0 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud558\uba74 `i18n` \ub514\ub809\ud1a0\ub9ac \ubc11\uc5d0 \uac01\uc885 \ub808\uc774\ube14\uc5d0 \ub300\ud55c json \ud30c\uc77c\uc774 \uc0dd\uc131\ub41c\ub2e4.\\n\\n```shell\\nyarn docusaurus write-translations\\n```\\n\\n\ub0b4\uc6a9\uc744 \uc0b4\ud3b4\ubcf4\uba74 \ud55c\uae00\ub85c \ubc88\uc5ed\uc774 \uc548\ub41c \ubd80\ubd84\uc774 \uc788\ub294\ub370 \uc801\uc808\ud788 \uc218\uc815\ud574\uc900\ub2e4.\\n\\n```json title=\\"i18n/ko/code.json\\"\\n  \\"theme.blog.archive.title\\": {\\n    \\"message\\": \\"\ubcf4\uad00\uc18c\\",\\n    \\"description\\": \\"The page & hero title of the blog archive page\\"\\n  },\\n  \\"theme.blog.archive.description\\": {\\n    \\"message\\": \\"\ubaa8\ub4e0 \uac8c\uc2dc\ubb3c\\",\\n    \\"description\\": \\"The page & hero description of the blog archive page\\"\\n  }\\n```\\n\\n```json title=\\"i18n/ko/docusaurus-plugin-content-blog/options.json\\"\\n  \\"sidebar.title\\": {\\n    \\"message\\": \\"\ucd5c\uadfc \uac8c\uc2dc\ubb3c\\",\\n    \\"description\\": \\"The label for the left sidebar\\"\\n  }\\n```\\n\\n## GitHub Page \ub85c \uc0ac\uc6a9\ud560 \ube0c\ub79c\uce58 \uc124\uc815\\n\\n\uc800\uc7a5\uc18c\uc758 \uc5b4\ub5a4 \ube0c\ub79c\uce58\uc758 \ud2b9\uc815 \uacbd\ub85c\ub97c \uc6f9\ud398\uc774\uc9c0\ub85c \uc0ac\uc6a9\ud560 \uac83\uc778\uc9c0 \uc124\uc815\ud574\uc57c\ud55c\ub2e4.  \\n\ubc30\ud3ec\uc124\uc815\uc744 \ud1b5\ud574 `gh-pages` \ube0c\ub79c\uce58\uc758 \ub8e8\ud2b8\uc5d0 \uc815\uc801\ud30c\uc77c\uc774 \uc0dd\uc131\ub418\ubbc0\ub85c \uc544\ub798 \ud654\uba74\ucc98\ub7fc \uc124\uc815\ud55c\ub2e4.\\n\\n![github-setting](./github-setting.png)\\n\\n![github-page-setting](./github-page-setting.png)\\n\\n## \ub9c8\uc9c0\ub9c9\\n\\n\uc774\uc81c `https://<\uc0ac\uc6a9\uc790\uc774\ub984>.github.io` \ud398\uc774\uc9c0\uc5d0 \uc811\uc18d\ud558\uba74 \ub9cc\ub4e0 \ube14\ub85c\uadf8\ub97c \ud655\uc778\ud560 \uc218 \uc788\ub2e4.  \\n\ud558\uc9c0\ub9cc \ub313\uae00\uc744 \uc791\uc131\ud560 \uc218 \uc788\ub294 \uae30\ub2a5\uc740 \uc5c6\ub294\ub370 \ucd94\ud6c4 \uac8c\uc2dc\uae00\ub85c \uc791\uc131\ud558\ub824\uace0 \ud55c\ub2e4.\\n\\n## \ucc38\uace0\uc790\ub8cc\\n\\n- Docusaurus \uacf5\uc2dd\ubb38\uc11c: https://docusaurus.io/ko/docs"}]}')}}]);