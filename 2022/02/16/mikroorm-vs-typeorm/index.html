<!doctype html>
<html lang="ko" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.16">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Jake Son Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Jake Son Blog Atom Feed"><title data-rh="true">MikroORM ê³¼ TypeORM ë¹„êµ | Jake Son Blog</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jbl428.github.io/2022/02/16/mikroorm-vs-typeorm/"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="MikroORM ê³¼ TypeORM ë¹„êµ | Jake Son Blog"><meta data-rh="true" name="description" content="ì´ë²ˆ ê¸€ì€ ts í™˜ê²½ì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ORM ì¸ TypeORM ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë°œìƒí•œ ë¬¸ì œì ì„ ì†Œê°œí•˜ê³  ë˜ ë‹¤ë¥¸ ORM ì¸ MikroORM ì—ì„œ ì–´ë–»ê²Œ í•´ê²°í•˜ê³  ìˆëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹´ê³ ìˆë‹¤."><meta data-rh="true" property="og:description" content="ì´ë²ˆ ê¸€ì€ ts í™˜ê²½ì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ORM ì¸ TypeORM ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë°œìƒí•œ ë¬¸ì œì ì„ ì†Œê°œí•˜ê³  ë˜ ë‹¤ë¥¸ ORM ì¸ MikroORM ì—ì„œ ì–´ë–»ê²Œ í•´ê²°í•˜ê³  ìˆëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹´ê³ ìˆë‹¤."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-02-16T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/jbl428"><meta data-rh="true" property="article:tag" content="mikroorm,typeorm"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jbl428.github.io/2022/02/16/mikroorm-vs-typeorm/"><link data-rh="true" rel="alternate" href="https://jbl428.github.io/2022/02/16/mikroorm-vs-typeorm/" hreflang="ko"><link data-rh="true" rel="alternate" href="https://jbl428.github.io/2022/02/16/mikroorm-vs-typeorm/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6965ad67.css">
<link rel="preload" href="/assets/js/runtime~main.0d4b7e61.js" as="script">
<link rel="preload" href="/assets/js/main.05ff2abd.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">ë³¸ë¬¸ìœ¼ë¡œ ê±´ë„ˆë›°ê¸°</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/gopher.svg" alt="Jake Son Blog" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/gopher.svg" alt="Jake Son Blog" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Jake Son Blog</b></a><a class="navbar__item navbar__link" href="/archive/">Archive</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jbl428" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ğŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ğŸŒ</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="ì–´ë‘ìš´ ëª¨ë“œì™€ ë°ì€ ëª¨ë“œ ì „í™˜í•˜ê¸° (í˜„ì¬ ë°ì€ ëª¨ë“œ)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">ìµœê·¼ ê²Œì‹œë¬¼</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a aria-current="page" class="sidebarItemLink_miNk sidebarItemLinkActive_RRTD" href="/2022/02/16/mikroorm-vs-typeorm/">MikroORM ê³¼ TypeORM ë¹„êµ</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/01/30/lazy-eval-in-kotlin/">Kotlin ìœ¼ë¡œ ì§€ì—°í‰ê°€ êµ¬í˜„í•˜ê¸°</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/01/08/convention-check-with-ts-morph/">ts-morph ë¡œ ê°œë°œ ì»¨ë²¤ì…˜ ê²€ì¦ ìë™í™”í•˜ê¸°</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2022/01/05/querydsl-in-kotlin/">kotlin í™˜ê²½ì—ì„œ Querydsl ì„¤ì •í•˜ê¸°</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/2021/12/09/typeorm-transformer/">TypeORM CreateDateColumn ë°ì½”ë ˆì´í„°ì™€ value transformer ë¬¸ì œ</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">MikroORM ê³¼ TypeORM ë¹„êµ</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-02-16T00:00:00.000Z" itemprop="datePublished">2022ë…„ 2ì›” 16ì¼</time> Â· <!-- -->ì•½ 26ë¶„</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/jbl428" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://avatars.githubusercontent.com/u/22140938?v=4" alt="Jake Son"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/jbl428" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jake Son</span></a></div><small class="avatar__subtitle" itemprop="description">Backend Developer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>ì´ë²ˆ ê¸€ì€ ts í™˜ê²½ì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ORM ì¸ <code>TypeORM</code> ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë°œìƒí•œ ë¬¸ì œì ì„ ì†Œê°œí•˜ê³  ë˜ ë‹¤ë¥¸ ORM ì¸ <code>MikroORM</code> ì—ì„œ ì–´ë–»ê²Œ í•´ê²°í•˜ê³  ìˆëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹´ê³ ìˆë‹¤.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="typeorm">TypeORM<a class="hash-link" href="#typeorm" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>TypeORM ì€ <code>JavaScript</code> ì™€ <code>TypeScript</code> í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ORM (Objectâ€“relational mapping) ì´ë‹¤.<br>
<!-- -->ì£¼ë¡œ ts ì§„ì˜ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ë©° <code>Active Record</code> ì™€ <code>Data Mapper</code> íŒ¨í„´ì„ ì§€ì›í•œë‹¤.</p><p>ì²˜ìŒ ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë°œê²¬í–ˆì„ ë•Œì—ëŠ” êµ‰ì¥íˆ ë§ˆìŒì— ë“¤ì—ˆì§€ë§Œ ì‹¤ë¬´ì—ì„œ ê³„ì† ì‚¬ìš©í•´ë³´ë‹ˆ ì´ë¦„ì— ë¹„í•´ ìƒê°ë§Œí¼ typesafe í•˜ì§€ ì•Šë‹¤ê³  ëŠê¼ˆìœ¼ë©° ì—¬ëŸ¬ ì´ìŠˆë¥¼ ìì£¼ ê²ªì—ˆë‹¤.<br>
<!-- -->íŠ¹íˆ ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì•„ì§ë„ ì²« major ë²„ì „ì´ ë‚˜ì˜¤ì§€ ì•Šì•˜ì„ ì •ë„ë¡œ ì—…ë°ì´íŠ¸ê°€ ë”ë”˜ ìƒí™©ì´ë‹¤.<br>
<!-- -->í•˜ì§€ë§Œ <code>TypeORM</code> ì™¸ì— ë” ë‚˜ì€ ëŒ€ì•ˆì´ ì—†ëŠ” ìƒí™©ì´ë¼ ê³„ì† ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="mikroorm">MikroORM<a class="hash-link" href="#mikroorm" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p><code>MikroORM</code> ì€ ì˜¤ëœê¸°ê°„ PHP ê°œë°œìì˜€ë˜ <a href="https://github.com/B4nan" target="_blank" rel="noopener noreferrer">Martin AdÃ¡mek</a> ê°€ Node.js ë¡œ ë„˜ì–´ì˜¤ë©´ì„œ ë§Œë“  ORM ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.<br>
<!-- -->ë„˜ì–´ì˜¤ë©´ì„œ <code>TypeORM</code> ì„ ì¨ë´¤ëŠ”ë° ì‹¤ë§ì„ ëŠê»´ ì§ì ‘ ë§Œë“¤ì—ˆë‹¤ê³  í•œë‹¤.</p><blockquote><p>ì´ì™€ ê´€ë ¨ëœ ê¸€ì€ <a href="https://medium.com/dailyjs/introducing-mikro-orm-typescript-data-mapper-orm-with-identity-map-9ba58d049e02" target="_blank" rel="noopener noreferrer">ë§í¬</a> ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p></blockquote><p><code>MikroOMR</code> ì€ <code>Data Mapper</code>, <code>Unit of Work</code> ì™€ <code>Identity Map</code> íŒ¨í„´ì„ ì§€ì›í•œë‹¤.<br>
<!-- -->ê³µì‹ë¬¸ì„œë¥¼ ì‚´í´ë³´ê³  ì§ì ‘ ì˜ˆì œë¥¼ ë§Œë“¤ì–´ ë³´ë©´ì„œ ëŠë‚€ì ì€ <code>TypeORM</code> ì—ì„œ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šì•˜ë˜ <strong>ë¬¸ì œê°€ ê¹”ë”í•˜ê²Œ í•´ê²°ë˜ë©° í›¨ì”¬ typesafe</strong> í•˜ë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤.</p><p>ì´ì œ ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê¸°ëŠ¥ê³¼ íƒ€ì…ì•ˆì •ì„± ì¸¡ë©´ì—ì„œ ë¹„êµí•´ë³´ì.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>ì´í›„ ë‚˜ì˜¤ëŠ” ì½”ë“œ <code>Nest.js</code> í™˜ê²½ì—ì„œ <code>Data Mapper</code> íŒ¨í„´ì„ ì‚¬ìš©í•œ ì˜ˆì œì´ë©° ì „ì²´ ì½”ë“œëŠ” <a href="https://github.com/jbl428/study-note/tree/master/nodejs/orm" target="_blank" rel="noopener noreferrer">ë§í¬</a> ë¥¼ ì°¸ì¡°í•œë‹¤.  </p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="entity-ì •ì˜-ë°©ì‹">Entity ì •ì˜ ë°©ì‹<a class="hash-link" href="#entity-ì •ì˜-ë°©ì‹" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ í´ë˜ìŠ¤ì™€ í”„ë¡œí¼í‹°ì— ë°ì½”ë ˆì´í„°ë¥¼ ì¶”ê°€í•´ ì—”í‹°í‹°ë¥¼ ì •ì˜í•œë‹¤.<br>
<code>MikroORM</code> ëŠ” ì¶”ê°€ë¡œ <code>EntitySchema</code> ë¼ëŠ” ë°©ì‹ì„ ì§€ì›í•˜ë©° ìŠ¤í‚¤ë§ˆë¥¼ í”„ë¡œê·¸ë˜ë° í•˜ë“¯ì´ ìƒì„±í•  ìˆ˜ ìˆë‹¤.<br>
<!-- -->ì´ë²ˆ ê¸€ì—ì„œëŠ” ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°ì½”ë ˆì´í„° ë°©ì‹ì„ ì‚¬ìš©í•  ê²ƒì´ë‹¤.</p><p>ì»¬ëŸ¼ì˜ íƒ€ì…ì •ë³´ì™€ ë°ì½”ë ˆì´í„°ì˜ ë©”íƒ€ë°ì´í„° ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•´ ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ <code>reflect-metadata</code> ë¥¼ ì‚¬ìš©í•œë‹¤.<br>
<!-- -->í•˜ì§€ë§Œ <code>MikroORM</code> ì€ <code>ts-morph</code> ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì„ ì¶”ê°€ë¡œ ì§€ì›í•˜ë©° ì´ë¥¼ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹° ì„ ì–¸ì´ ë” ê°„ê²°í•´ì§„ë‹¤.</p><p>ì˜ˆì œë¡œ ë§Œë“¤ ì—”í‹°í‹°ëŠ” <code>Post</code> ì™€ <code>Comment</code> ë¡œ í•˜ë‚˜ì˜ í¬ìŠ¤íŠ¸ì— ì—¬ëŸ¬ ëŒ“ê¸€ì´ ì¡´ì¬í•˜ëŠ” 1:N ê´€ê³„ì´ë‹¤.<br>
<!-- -->ë¨¼ì € <code>TypeORM</code> ì˜ ê²½ìš° ì•„ë˜ì™€ ê°™ì´ ì„ ì–¸í•œë‹¤.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">post.entity.ts</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">comment.entity.ts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Post</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">BaseEntity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Column</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Column</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Column</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;varchar&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> transformer</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PostStatusType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">PostStatus</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ì»¤ìŠ¤í…€ íƒ€ì…</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Column</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> nullable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  memo</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">OneToMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">Comment</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">comment</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> comment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cascade</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;insert&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;update&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  comments</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Comment</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Comment</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">BaseEntity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Column</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Column</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  like</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Column</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> nullable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  memo</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">ManyToOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">Post</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">comments</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    createForeignKeyConstraints</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    nullable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Index</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;idx_post_id&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">JoinColumn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;post_id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> referencedColumnName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  post</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Post</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div></div></div></div><p><code>MikroORM</code> ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„ ì–¸í•œë‹¤.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">post.entity.ts</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">comment.entity.ts</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Post</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">BaseEntity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">PostStatusType</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  status</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">PostStatus</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ì»¤ìŠ¤í…€ íƒ€ì…</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  memo</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">OneToMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">Comment</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">comment</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> comment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  comments </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Collection</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name maybe-class-name">Comment</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Comment</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">BaseEntity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  like</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">Property</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  memo</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @</span><span class="token function maybe-class-name" style="color:#d73a49">ManyToOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> index</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  post</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">IdentifiedReference</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">Post</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div></div></div></div><p>ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°„ì˜ ì°¨ì´ì ì„ ì‚´í´ë³´ì</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="í•„ë“œì˜-null-ì„ ì–¸">í•„ë“œì˜ NULL ì„ ì–¸<a class="hash-link" href="#í•„ë“œì˜-null-ì„ ì–¸" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>ì›í•˜ëŠ” í•„ë“œë¥¼ <code>NULL</code> ë¡œ ì„¤ì •í•˜ë ¤ë©´ <code>TypeORM</code> ì—ì„œëŠ” ë°ì½”ë ˆì´í„°ì— ì§ì ‘ <code>nullable</code> ê°’ì„ true ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.<br>
<!-- -->í•˜ì§€ë§Œ <code>MikroOMR</code> ì—ì„œëŠ” í”„ë¡œí„°í‹° íƒ€ì…ì„ nullable ë¡œ ì„ ì–¸í•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤.<br>
<!-- -->ì´ëŠ” ë” ê°„ê²°í•  ë¿ë§Œì•„ë‹ˆë¼ <strong>ts íƒ€ì…ê³¼ ì‹¤ì œ ì»¬ëŸ¼ì˜ íƒ€ì…ì˜ ë™ì¼í•¨</strong>ì„ ë³´ì¥í•´ì¤€ë‹¤.</p><p>ì‹¤ì œë¡œ ì‹¤ë¬´ì—ì„œ ë°ì½”ë ˆì´í„°ì—ëŠ” <code>nullable</code> ë¡œ ì„ ì–¸í–ˆì§€ë§Œ ts íƒ€ì…ì„ required ë¡œ ì„ ì–¸í•˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ë‹¤.<br>
<!-- -->ì´ë¡œì¸í•´ <code>Optional Chaining</code> ì‚¬ìš©í•˜ì§€ ì•Šê³  í”„ë¡œí„°í”¼ë¥¼ ì°¸ì¡°í•˜ë‹¤ê°€ ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ë§ì•˜ë‹¤.<br>
<!-- -->ts ì˜ <code>strictNullCheck</code> ì˜µì…˜ì„ í™œì„±í™”í•˜ë©´ nullable íƒ€ì…ì„ ì°¸ì¡°í•˜ê¸° ì „ì— null ì²´í¬ë¥¼ í•„ìˆ˜ë¡œ í•´ì•¼í•˜ê¸°ì— ë” ì•ˆì „í•œ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="foreign-key-ì œì•½ì¡°ê±´-í•´ì œ">Foreign Key ì œì•½ì¡°ê±´ í•´ì œ<a class="hash-link" href="#foreign-key-ì œì•½ì¡°ê±´-í•´ì œ" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>í…Œì´ë¸” ì—°ê´€ê´€ê³„ ì„¤ì • ì‹œ <code>foreign key</code> ì¶”ê°€ë¥¼ ì›í•˜ì§€ ì•Šì„ ë•Œ <code>TypeORM</code> ì—ì„œëŠ” ë§¤ë²ˆ ë°ì½”ë ˆì´í„°ì— <code>createForeignKeyConstraints</code> ì˜µì…˜ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤.<br>
<!-- -->í•˜ì§€ë§Œ <code>MikroOMR</code> ì—ì„œëŠ” ë””ë¹„ ê´€ë ¨ ì„¤ì •ì—ì„œ FK ìƒì„±ì—¬ë¶€ ê¸°ë³¸ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.<br>
<!-- -->ë‹¤ë§Œ ìŠ¤í‚¤ë§ˆ ë™ê¸°í™” ë°©ë²•ì„ ë‘ ê°€ì§€ë¥¼ ì§€ì›í•˜ëŠ”ë° <code>schemaGenerator</code> ë°©ì‹ì€ í•´ë‹¹ ì˜µì…˜ì´ ì¡´ì¬í•˜ì§€ë§Œ <code>migration</code> ë°©ì‹ì€ ì§ì ‘ generator ë¥¼ êµ¬í˜„í•´ì•¼ í•œë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// migration ë°©ì‹ì—ì„œëŠ” ì§ì ‘ foreign key ìƒì„±ì€ ê±´ë„ˆë›°ë„ë¡ ë¡œì§ì„ êµ¬í˜„í•´ì•¼ í•œë‹¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">CustomMigrationGenerator</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">TSMigrationGenerator</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">createStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sql</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> padLeft</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">includes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot; add constraint &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> sql</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">includes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot; drop constraint &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sql</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> padLeft</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">MikroOrmModuleOptions</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ... ìƒëµ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  schemaGenerator</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    createForeignKeyConstraints</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// FK ìƒì„±í•˜ì§€ ì•Šë„ë¡ ì„¤ì •</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  migrations</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    generator</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">CustomMigrationGenerator</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ì»¤ìŠ¤í…€ generator ì„¤ì •</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="index-ëª…">Index ëª…<a class="hash-link" href="#index-ëª…" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>FK ì œì•½ì¡°ê±´ì„ í•´ì œí•˜ë©´ ì°¸ì¡° ì»¬ëŸ¼ì— index ë˜í•œ ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤.<br>
<!-- -->í•˜ì§€ë§Œ join ì„±ëŠ¥ì„ ìœ„í•´ index ëŠ” í•„ìš”í•˜ë¯€ë¡œ ì§ì ‘ ì¶”ê°€í•´ì•¼ í•œë‹¤.<br>
<code>TypeORM</code> ì—ì„œëŠ” <code>@Index</code> ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ <code>MikroOMR</code> ì—ì„œëŠ” <code>@ManyToOne</code> ë°ì½”ë ˆì´í„°ì˜ index ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ëœë‹¤.</p><p>ë”°ë¡œ ì¸ë±ìŠ¤ëª…ì„ ì§€ì •í•˜ì§€ ì•Šì€ê²½ìš° <code>TypeORM</code> ì•„ë˜ ì‚¬ì§„ì²˜ëŸ¼ ì•Œì•„ë³´ê¸° í˜ë“  ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸°ì— (PK ë„ ë™ì¼) ì—ëŸ¬ ë°œìƒì‹œ ë¡œê·¸ë¥¼ í•´ì„í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤.<br>
<!-- -->ë”°ë¼ì„œ ì§ì ‘ ì¸ë±ìŠ¤ëª…ì„ ì§€ì •í•´ì•¼ í•œë‹¤.</p><p><img loading="lazy" alt="typeorm-index-name" src="/assets/images/typeorm-index-name-81211f55c212665457e9f0d54e39e8ef.png" width="970" height="342"></p><p>ë°˜ë©´ <code>MikroOMR</code> ì€ ì½ê¸° ì‰¬ìš´ ì´ë¦„ìœ¼ë¡œ ìƒì„±í•˜ê¸°ì— ì§ì ‘ ì´ë¦„ì„ ì§€ì •í•  í•„ìš”ê°€ ì—†ë‹¤.</p><p><img loading="lazy" alt="mikroorm-index-name" src="/assets/images/mikroorm-index-name-510d57177757882a01be7d7f00fef2b7.png" width="850" height="356"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ì»¬ëŸ¼ëª…-ê·œì¹™">ì»¬ëŸ¼ëª… ê·œì¹™<a class="hash-link" href="#ì»¬ëŸ¼ëª…-ê·œì¹™" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p><code>TypeORM</code> ì€ ì»¬ëŸ¼ëª…ì˜ ë„¤ì´ë° ê·œì¹™ì´ <code>camelCase</code> ì¸ ê´€ê³„ë¡œ <code>snake-case</code> ì„ ì›í•˜ëŠ” ê²½ìš° ì§ì ‘ ì´ë¦„ì„ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.<br>
<!-- -->ë¬¼ë¡  <code>namingStrategy</code> ì„¤ì •ê³¼ <code>typeorm-naming-strategies</code> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•  ìˆ˜ ìˆì§€ë§Œ ì—°ê´€ê´€ê³„ ì»¬ëŸ¼ëª…ì—ëŠ” ì ìš©ì´ ì•ˆë˜ê¸°ì— ê²°êµ­ <code>JoinColumn</code> ë°ì½”ë ˆì´í„°ì— ì§ì ‘ ì§€ì •í•´ì•¼ í•œë‹¤.<br>
<!-- -->ë°˜ë©´ <code>MikroOMR</code> ì€ ê¸°ë³¸ê°’ì´ <code>snake-case</code> ì´ê¸°ì— ë”°ë¡œ ì§€ì •í•  í•„ìš”ê°€ ì—†ë‹¤.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="custom-type">Custom Type<a class="hash-link" href="#custom-type" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¦¬ ëª¨ë‘ í•„ë“œì— ê¸°ë³¸ ts íƒ€ì…ëŒ€ì‹  ì»¤ìŠ¤í…€ íƒ€ì…ìœ¼ë¡œ ì„ ì–¸í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.<br>
<code>TypeORM</code> ì—ì„œëŠ” ë°ì½”ë ˆì´í„°ì˜ transformer ì„¤ì •ì´ë©° <code>MikroOMR</code> ì€ type ì´ë‹¤.<br>
<!-- -->ì»¤ìŠ¤í…€ íƒ€ì…ì„ ì„ ì–¸í•˜ëŠ” ë°©ë²•ì€ ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ ë¹„ìŠ·í•˜ê²Œ íŠ¹ì • interface ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ë©´ ëœë‹¤.</p><p>ë‚ ì§œ ê´€ë ¨ í•„ë“œì— js date ëŒ€ì‹  <code>js-joda</code> ì˜ <code>LocalDateTime</code> ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ íƒ€ì… êµ¬í˜„ë¶€ë¥¼ ì‚´í´ë³´ì.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">TypeORM</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">MikroOMR</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">LocalDateTimeType</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ValueTransformer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">to</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entityValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">convert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entityValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">databaseValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">nativeJs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">databaseValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">LocalDateTimeType</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Type</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name maybe-class-name">LocalDateTime</span><span class="token class-name punctuation" style="color:#393A34">,</span><span class="token class-name"> </span><span class="token class-name known-class-name class-name">Date</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">convertToDatabaseValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    platform</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Platform</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">convert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">convertToJSValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    platform</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Platform</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value </span><span class="token keyword" style="color:#00009f">instanceof</span><span class="token plain"> </span><span class="token class-name maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> value</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;number&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">nativeJs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">nativeJs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">getColumnType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prop</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">EntityProperty</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> platform</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Platform</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">timestamptz</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div></div></div></div><p>ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ database ì™€ Node.js ê°„ì˜ ë°ì´í„° ì²˜ë¦¬ë¡œì§ì„ ë©”ì†Œë“œì— ì‘ì„±í•œë‹¤.<br>
<code>TypeORM</code> ì˜ ê²½ìš° ë‹¨ìˆœíˆ from, to ë©”ì†Œë“œë§Œ ì œê³µí•˜ì§€ë§Œ <code>MikroOMR</code> ì€ ì¶”ê°€ë¡œ ì—¬ëŸ¬ ìƒí™©ì— ì‚¬ìš©ë˜ëŠ” ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤.</p><blockquote><p>ì–´ë–¤ ë©”ì†Œë“œë¥¼ ì œê³µí•˜ëŠ” ì§€ì— ëŒ€í•œ ë‚´ìš©ì€ <a href="https://mikro-orm.io/docs/custom-types" target="_blank" rel="noopener noreferrer">ë¬¸ì„œ</a> ë¥¼ ì°¸ì¡°í•œë‹¤.<br>
<!-- -->ì¶”ê°€ë¡œ <code>MikroOMR</code> ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” íƒ€ì…ë„ ìˆë‹¤.</p></blockquote><h4 class="anchor anchorWithStickyNavbar_mojV" id="ì´ìŠˆ">ì´ìŠˆ<a class="hash-link" href="#ì´ìŠˆ" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h4><p>ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ <code>query builder</code> ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì»¤ìŠ¤í…€ íƒ€ì…ì˜ ë³€í™˜ë¡œì§ì´ ë™ì‘í•˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ìˆë‹¤.<br>
<!-- -->ë‹¤ìŒ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‚´í´ë³´ì.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LplD tabs__item--active">TypeORM</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LplD">MikroOMR</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">it</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;queryBuilder where ì— string í˜•íƒœë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì¡°íšŒì— ì‹¤íŒ¨í•œë‹¤&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// given</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createdAt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2022</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> post </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">PostFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createdAt </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    updatedAt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// when</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createQueryBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;post.createdAt = :createdAt&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createdAt </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toHaveLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">it</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;queryBuilder where ì— string í˜•íƒœë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì¡°íšŒì— ì‹¤íŒ¨í•œë‹¤&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// given</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createdAt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2022</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> post </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> postFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">makeOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createdAt </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postEntityRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">persistAndFlush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// when</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postEntityRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createQueryBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;post.created_at = ?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">createdAt</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toHaveLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div></div></div></div><p>í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë³´ë©´ ë¨¼ì € given ì ˆì—ì„œ ì„ì˜ì˜ post í•˜ë‚˜ë¥¼ insert í•˜ì˜€ë‹¤.<br>
<!-- -->when ì—ì„œ <code>query builder</code> ë¥¼ ì‚¬ìš©í•´ post ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° where ì ˆì„ ì‚´í´ë³´ë©´ ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì— ì»¬ëŸ¼ëª…ì„ ë¬¸ìì—´ë¡œ ì§€ì •í•˜ì˜€ë‹¤.<br>
<!-- -->ì´ë ‡ê²Œ ì§€ì •í•˜ë©´ ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì œê³µí•œ <code>createdAt</code> ë³€ìˆ˜ì˜ íƒ€ì…ì¸ <code>LocalDateTime</code> ì˜ ë³€í™˜ë¡œì§ì´ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.</p><p>ì‹¤ì œ where ì ˆì— ì–´ë–¤ ê°’ì´ ë“¤ì–´ê°”ëŠ”ì§€ ì‚´í´ë³´ë©´</p><p><img loading="lazy" alt="custom-type-issue" src="/assets/images/custom-type-issue-27a81062b547d6b580127db57001d6d4.png" width="1774" height="84"></p><p><code>createdAt</code> í•„ë“œì˜ íƒ€ì…ì€ <code>timestamptz</code> ì¸ë° ìœ„ì™€ ê°™ì´ íƒ€ì„ì¡´ ê°’ì´ ì—†ëŠ” ë°ì´í„°ë¡œ ì¡°íšŒí•˜ë©´ database ì˜ íƒ€ì„ì¡´ ì„¤ì •ì— ë”°ë¼ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.<br>
<!-- -->ìœ„ì™€ ê°™ì€ ìƒí™©ì—ì„œëŠ” ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ ë³€í™˜ë¡œì§ ëŒ€ì‹  <code>LocalDateTime</code> ì˜ <code>toJSON</code> ë©”ì†Œë“œê°€ ì‹¤í–‰ë˜ë©° í•´ë‹¹ ë©”ì†Œë“œëŠ” íƒ€ì„ì¡´ ê°’ì„ ì œê±°í•œ ê²°ê³¼ë¥¼ ì œê³µí•œë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> date </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2022</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">date</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toJSON</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2022-02-01T00:00</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì§ì ‘ <code>toJSON</code> ë©”ì†Œë“œë¥¼ override í•˜ë©´ëœë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// toJSON override</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">toJSON</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">convert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toDate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toISOString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> ìƒëµ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// when</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createQueryBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;post&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;post.createdAt = :createdAt&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createdAt </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toHaveLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ì¡°íšŒ ì„±ê³µ</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p><img loading="lazy" alt="custom-type-issue-solve" src="/assets/images/custom-type-issue-solve-699d12b7516951741c5d905981295f96.png" width="2216" height="112"></p><p>ì•„ë‹ˆë©´ ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ where ì ˆì— ë¬¸ìì—´ ëŒ€ì‹  json ì„ í™œìš©í•´ ì»¬ëŸ¼ì„ ì§€ì •í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ë³€í™˜ë¡œì§ì´ ì‹¤í–‰ëœë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createQueryBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> createdAt </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>ì¶”ê°€ë¡œ <code>MikroOMR</code> ì€ where ì ˆì—ì„œ ì—”í‹°í‹° í•„ë“œëª…ì— ëŒ€í•œ intellisense ë¥¼ ì§€ì›í•œë‹¤.<br>
<!-- -->ì˜ëª»ëœ í•„ë“œëª…ì„ ì§€ì •í•œ ê²½ìš° íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ì ì€ ì•„ì‰½ì§€ë§Œ ì˜¤íƒ€ë¥¼ ì‘ì„±í•  í™•ë¥ ì„ ë‚®ì¶°ì£¼ê¸° ë•Œë¬¸ì— ìœ ìš©í•˜ë‹¤.</p><p><img loading="lazy" alt="where-hint" src="/assets/images/where-hint-0a4a0b702e657d4f86cca8d7883122fb.png" width="1804" height="508"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="querybuilder-ë¡œ-íŠ¹ì •-í•„ë“œ-select">QueryBuilder ë¡œ íŠ¹ì • í•„ë“œ select<a class="hash-link" href="#querybuilder-ë¡œ-íŠ¹ì •-í•„ë“œ-select" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ <code>select</code> ë©”ì†Œë“œë¥¼ í†µí•´ ì›í•˜ëŠ” í•„ë“œë§Œ ì§€ì •í•´ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.<br>
<!-- -->í•˜ì§€ë§Œ <code>TypeORM</code> ì—ì„œëŠ” ì—°ê´€ê´€ê³„ í•„ë“œ select ì— ëŒ€í•œ ì´ìŠˆê°€ ìˆë‹¤.</p><p>ë‹¤ìŒ ì½”ë“œë¥¼ ì‚´í´ë³´ì.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> commentRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createQueryBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;comment.id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comment.post.id&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> post</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getOneOrFail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Comment { id: 1n }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// undefined</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>Comment ì—”í‹°í‹°ì˜ id í•„ë“œì™€ post_id í•„ë“œë§Œ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ select ì ˆì— ì§ì ‘ ì§€ì •í•˜ì˜€ë‹¤.<br>
<!-- -->í•˜ì§€ë§Œ ê²°ê³¼ë¥¼ ë³´ë©´ id ëŠ” ë‹´ê¸°ì§€ë§Œ post ëŠ” undefined ê°€ ëœë‹¤.</p><p>ì¿¼ë¦¬ ë¡œê·¸ë¥¼ í™•ì¸í•˜ë©´ ì˜¬ë°”ë¥´ê²Œ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì§€ë§Œ ê·¸ ê²°ê³¼ë¥¼ ì¸ìŠ¤í„´ìŠ¤ì— ë‹´ì„ ë•Œ ì—°ê´€ê´€ê³„ í•„ë“œëŠ” ì œëŒ€ë¡œ ë„£ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ìˆë‹¤.</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comment_id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;post_id&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comment_post_id&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;post_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> $</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>ì´ë¥¼ í•´ê²°í•˜ë ¤ë©´ <code>getOneOrFail</code> ëŒ€ì‹  <code>getRawOne</code> ì„ ì‚¬ìš©í•´ json í˜•íƒœë¡œ ê°€ì ¸ì˜¤ê±°ë‚˜ join ë¬¸ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•œë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> commentRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createQueryBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;comment.id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;post.id&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">innerJoin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;comment.post&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// join ì§€ì •</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getOneOrFail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>ì—”í‹°í‹° íŒŒì¼ì— ì—°ê´€ê´€ê³„ ì»¬ëŸ¼ì— ëŒ€í•œ í•„ë“œë¥¼ ì¶”ê°€ë¡œ ì„ ì–¸í•˜ëŠ” ë°©ë²•(<code>RelationId</code> ë°ì½”ë ˆì´í„°)ë„ ìˆì§€ë§Œ transformer ê°€ ë™ì‘í•˜ì§€ ì•ŠëŠ” ë¬¸ì œì™€ í•„ë“œë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ì´ ë‘ ê°€ì§€ë¡œ ë‚˜ëˆ ì§€ëŠ” ë¬¸ì œê°€ ìˆë‹¤.</p><p>ë°˜ë©´ <code>MikroOMR</code> ì—ì„œëŠ” ìœ„ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> commentEntityRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createQueryBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> post</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getSingleResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ê°’ì´ ì¡´ì¬</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>í•˜ì§€ë§Œ join í…Œì´ë¸”ì˜ id ì»¬ëŸ¼ ì™¸ ë‹¤ë¥¸ í•„ë“œë¥¼ select í•˜ë ¤ëŠ” ê²½ìš°ì— ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ìˆë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> commentEntityRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createQueryBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;c&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;c.id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c.like&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;p.name&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;c.post&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;p&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getSingleResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">unwrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// undefined</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>select êµ¬ë¬¸ì— <code>p.name</code> ì„ ì„ ì–¸í•´ ì´ë¦„í•„ë“œë¥¼ ê°€ì ¸ì˜¤ë„ë¡ ì„¤ì •í–ˆì§€ë§Œ ê²°ê³¼ì—ëŠ” ë‹´ê¸°ì§€ ì•ŠëŠ”ë‹¤.<br>
<!-- -->ê·¸ë˜ì„œ join ëŒ€ì‹  joinAndSelect ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ë° ì´ëŠ” ëª¨ë“  ì—”í‹°í‹°ì˜ í•„ë“œë¥¼ select í•˜ê¸°ì— ë¹„íš¨ìœ¨ì ì´ë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> commentEntityRepository</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createQueryBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;c&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;c.id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c.like&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;p.name&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">joinAndSelect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;c.post&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;p&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// post ì˜ ëª¨ë“  í•„ë“œ ê°€ì ¸ì˜´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getSingleResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="smart-query-conditions">Smart Query Conditions<a class="hash-link" href="#smart-query-conditions" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ë‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë‘ <code>query builder</code> ê´€ë ¨ ì´ìŠˆê°€ ì¡´ì¬í•˜ì§€ë§Œ <code>MikroOMR</code> ì˜ ê²½ìš° <code>Smart Query Conditions</code> ë¥¼ í™œìš©í•˜ë©´ ëŒ€ë¶€ë¶„ì˜ ë³µì¡í•œ ì¡°íšŒì¡°ê±´ì„ typesafe í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.<br>
<!-- -->ì˜ˆë¥¼ë“¤ë©´ ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” comment ë“¤ì„ ì¡°íšŒí•˜ëŠ” ìƒí™©ì„ ê°€ì •í•´ë³´ì.</p><ul><li>post id ê°€ 100</li><li>ëŒ“ê¸€ ë‚´ìš©ì— &quot;text&quot; ë¥¼ í¬í•¨í•˜ê±°ë‚˜ like ìˆ˜ê°€ 10 ì´ìƒ</li></ul><p>ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ ëœë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> commentEntityRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  $and</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> post</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100n</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> $or</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> $like</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;%text%&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> like</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> $gte</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>ì‹¤ì œ ìˆ˜í–‰í•˜ëŠ” ì¿¼ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;post_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;100&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;c0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;content&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">LIKE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;%text%&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">OR</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;like&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>find ë©”ì†Œë“œ íŒŒë¼ë¯¸í„°ì˜ í‚¤ ì¤‘ì— <code>$</code> ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì€ <code>MikroOMR</code> ì—ì„œ ì§€ì›í•˜ëŠ” ì—°ì‚°ìë¡œ <code>$and</code>, <code>$or</code> ì™€ ê°™ì€ ë…¼ë¦¬ì—°ì‚°ìì™€ <code>like</code>, <code>&gt;=</code> ê°™ì€ ë¹„êµì—°ì‚°ìê°€ ìˆë‹¤.<br>
<!-- -->ë§Œì•½ ì¡°ê±´ì ˆì— ì§€ì›í•˜ì§€ ì•ŠëŠ” ì—°ì‚°ìë‚˜ ì˜ëª»ëœ í•„ë“œëª…, íƒ€ì…ì— ë§ì§€ì•ŠëŠ” ê°’ì„ ì „ë‹¬í•˜ëŠ” ê²½ìš° íƒ€ì…ì—ëŸ¬ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— typesafe í•œ ì¥ì ì´ ìˆë‹¤.</p><blockquote><p>ì§€ì›í•˜ëŠ” ëª¨ë“  ì—°ì‚°ìë¥¼ ë³´ë ¤ë©´ <a href="https://mikro-orm.io/docs/query-conditions" target="_blank" rel="noopener noreferrer">ë§í¬</a> ë¥¼ ì°¸ì¡°í•œë‹¤.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="repository-ê¸°ë³¸-ì¡°íšŒ-ë©”ì†Œë“œ">Repository ê¸°ë³¸ ì¡°íšŒ ë©”ì†Œë“œ<a class="hash-link" href="#repository-ê¸°ë³¸-ì¡°íšŒ-ë©”ì†Œë“œ" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p><code>find</code>, <code>findOne</code> ì™€ ê°™ì€ ì¡°íšŒ ë©”ì†Œë“œì˜ ê²½ìš° <code>TypeORM</code> ì€ ë‹¤ìŒê³¼ ê°™ì€ ë‹¨ì ì´ ì¡´ì¬í•œë‹¤.</p><ul><li>select ì ˆì— join í•˜ëŠ” í…Œì´ë¸”ì˜ í•„ë“œëŠ” ì§€ì •í•  ìˆ˜ ì—†ìŒ</li><li>í…Œì´ë¸” join ë°©ì‹ì´ left join ìœ¼ë¡œ ê³ ì •</li><li>join í…Œì´ë¸” ì§€ì • ì˜µì…˜(relations) ì˜ íƒ€ì…ì´ ë‹¨ìˆœ string ì´ë¼ intellisense ì§€ì›ì´ ì•ˆë˜ê³  ì˜ëª» ì…ë ¥í•˜ë©´ ëŸ°íƒ€ì„ ì—ëŸ¬ ë°œìƒ</li><li>where ì ˆì— ìœ íš¨í•˜ì§€ ì•ŠëŠ” í•„ë“œëª…ì„ ë„£ìœ¼ë©´ ëŸ°íƒ€ì„ ì—ëŸ¬ ë°œìƒ</li></ul><p>ì´ì œ <code>MikroOMR</code> ë¥¼ ì‚¬ìš©í•˜ë©´ ì–´ë–»ê²Œ í•´ê²°ë˜ëŠ”ì§€ ì‚´í´ë³´ì.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="join-í…Œì´ë¸”-ì»¬ëŸ¼-select">join í…Œì´ë¸” ì»¬ëŸ¼ select<a class="hash-link" href="#join-í…Œì´ë¸”-ì»¬ëŸ¼-select" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>intellisense ë¥¼ ì§€ì›í•˜ë©° join í•„ë“œì˜ ê²½ìš°ì—ë„ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•œë‹¤.</p><p><img loading="lazy" alt="select-hint" src="/assets/images/select-hint-9e2f3f5c821b4ba48aba4b228f8e3201.png" width="2182" height="1058"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="join-ë°©ì‹">join ë°©ì‹<a class="hash-link" href="#join-ë°©ì‹" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>ì—°ê´€ê´€ê³„ í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ì‹œ <code>TypeORM</code> ì²˜ëŸ¼ left join ìœ¼ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ë„ ìˆê³  select in ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.<br>
<!-- -->strategy ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©° ë”°ë¡œ ì„¤ì •í•˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ê°’ì€ select in ì´ë‹¤.</p><p>select in ë°©ì‹ì€ ê¸°ë³¸ ì—”í‹°í‹°ë§Œ ë¨¼ì € ì¡°íšŒ í›„ ê° join í…Œì´ë¸”ì— ëŒ€í•´ì„œ ê°ê° ì¶”ê°€ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œë‹¤.<br>
<!-- -->ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ì‹¤í–‰í•œ ê²½ìš°</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> commentEntityRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findOneOrFail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> post</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> $lte</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    populate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    strategy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">LoadStrategy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SELECT_IN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fields</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;like&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;post.name&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>ì•„ë˜ì™€ ê°™ì€ ë‘ ê°œì˜ ì¿¼ë¦¬ê°€ ìˆ˜í–‰ë˜ë©° ê·¸ ê²°ê³¼ë¥¼ ë³‘í•©í•´ Comment ì¸ìŠ¤í„´ìŠ¤ì— ë‹´ëŠ”ë‹¤.</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;p0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;p0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;p0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;p0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">order</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;p0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">asc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;like&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;post_id&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;comment&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c0&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">&quot;post_id&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">limit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="join-í…Œì´ë¸”-ì§€ì •">join í…Œì´ë¸” ì§€ì •<a class="hash-link" href="#join-í…Œì´ë¸”-ì§€ì •" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>ì¡°íšŒí•  ì—°ê´€ê´€ê³„ í…Œì´ë¸” ì§€ì • ì‹œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í•„ë“œëª…ì„ ë„£ìœ¼ë©´ íƒ€ì…ì—ëŸ¬ê°€ ë°œìƒí•˜ë©° nested í•˜ê²Œ ì§€ì •í•  ìˆ˜ë„ ìˆë‹¤.<br>
<!-- -->ë§Œì•½ í…Œì´ë¸”ê³¼ ê´€ë ¨ì—†ëŠ” í•„ë“œëª…ì„ ë„£ì€ê²½ìš°ëŠ” ë¬´ì‹œëœë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> commentEntityRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findOneOrFail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100n</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  populate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;post&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;post.comments&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;like&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// like ëŠ” ë¬´ì‹œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="where-ì ˆ-í•„ë“œ-ì§€ì •">where ì ˆ í•„ë“œ ì§€ì •<a class="hash-link" href="#where-ì ˆ-í•„ë“œ-ì§€ì •" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h3><p>ì´ì „ <code>Smart Query Conditions</code> ì—ì„œ ì–¸ê¸‰í•œ ê²ƒì²˜ëŸ¼ ìœ íš¨í•˜ì§€ ì•ŠëŠ” í•„ë“œëª…ì„ ë„£ìœ¼ë©´ íƒ€ì…ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="cascade-ë°-transaction">Cascade ë° Transaction<a class="hash-link" href="#cascade-ë°-transaction" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p><code>TypeORM</code> post ì—”í‹°í‹°ì˜ comment í•„ë“œì„ ì–¸ì„ ë³´ë©´ <code>cascade</code> ì˜µì…˜ì´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">OneToMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">Comment</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">comment</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> comment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cascade</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;insert&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;update&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">comments</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Comment</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>ìœ„ ì˜µì…˜ì€ post ì—”í‹°í‹°ì— save ì•¡ì…˜ì´ ì¼ì–´ë‚œ ê²½ìš° comment ë„ ê°™ì´ ìˆ˜ì •í•˜ë ¤ëŠ” ëª©ì ìœ¼ë¡œ ì“´ë‹¤.<br>
<!-- -->insert ì—ì„œëŠ” í° ë¬¸ì œëŠ” ì—†ìœ¼ë‚˜ update ì‹œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.<br>
<!-- -->ë‹¤ìŒ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‚´í´ë³´ì.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">it</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;transaction í…ŒìŠ¤íŠ¸&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// given</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> post </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">PostFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">comments</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">CommentFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">CommentFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// when</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">update</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">getManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">manager</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">content</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;new content&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> manager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// post.comment ë„ ê°™ì´ update ìˆ˜í–‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">update</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">rejects</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toThrowError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;violates not-null constraint&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>post ì—ëŠ” ë‘ ê°œì˜ comment ê°€ ì¡´ì¬í•˜ê³  íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ post ì˜ content í•„ë“œ ìˆ˜ì • í›„ save ë¥¼ ìˆ˜í–‰í–ˆë‹¤.<br>
<!-- -->comment ì˜ ë‚´ìš©ì€ ì „í˜€ ìˆ˜ì •í•˜ì§€ ì•Šì•˜ê¸°ì— post ë§Œ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í• ê²ƒìœ¼ë¡œ ê¸°ëŒ€í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p><p>ì¿¼ë¦¬ë¡œê·¸ë¥¼ ë³´ë©´ comment ì— ëŒ€í•´ì„œ 4 ë²ˆì˜ update ê°€ ë°œìƒí•˜ê³  post_id í•„ë“œë¥¼ <code>null</code> ë¡œ ì„¤ì •í•˜ë ¤ëŠ” ì‹œë„ë¥¼ í•˜ë©° <code>not null</code> ì¡°ê±´ì— ì˜í•´ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤.</p><p><img loading="lazy" alt="update-null" src="/assets/images/update-null-d4c78006fdfb1e187b526ce8fe6d9161.png" width="2016" height="1052"></p><p>ì´ì™€ê°™ì´ ë¹„ì •ìƒì ì¸ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆê¸°ì— cascade ì˜µì…˜ ì‚¬ìš©ì€ ì§€ì–‘í•˜ëŠ”ê²Œ ì¢‹ë‹¤.</p><p>ë°˜ë©´ <code>MikroOMR</code> ì—ì„œëŠ” <code>Unit of Work</code> ì™€ <code>Identity Map</code> íŒ¨í„´ìœ¼ë¡œ ì¸í•´ ìœ„ì™€ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.<br>
<!-- -->ë‹¤ìŒ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‚´í´ë³´ì.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> post </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postEntityRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findOneOrFail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100n</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  populate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;comments&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ persist ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ì•Šì•„ë„ update ìˆ˜í–‰ëœë‹¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> orm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">transactional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">content</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;new content&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">comments</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">like</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12345</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ë˜ëŠ” ì•„ë˜ì²˜ëŸ¼ ìˆ˜í–‰í•´ë„ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postEntityRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">persistAndFlush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p><code>MikroOMR</code> ì€ JPA ì˜ ë³€ê²½ê°ì§€ì™€ ê°™ì€ ê¸°ëŠ¥ì´ ìˆì–´ ì¡°íšŒ ë©”ì†Œë“œ ê²°ê³¼ë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ìºì‹œí•œ í›„ íŠ¸ëœì­ì…˜ì´ ëë‚˜ë©´ ë‘ ê°’ì„ ë¹„êµí•´ ë³€ê²½í•œ í•­ëª©ì— ëŒ€í•´ì„œë§Œ update ë¥¼ ìˆ˜í–‰í•œë‹¤.<br>
<!-- -->ë˜í•œ <code>TypeORM</code> ì˜ save ì™€ ê°™ì€ persist ë©”ì†Œë“œë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì§€ ì•Šì•„ë„ íŠ¸ëœì­ì…˜ì´ ëë‚˜ë©´ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.</p><p><code>MikroOMR</code> ì€ JPA ì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ê°™ì€ ê°œë…ì´ ì ìš©ë˜ì–´ ìˆê¸°ì— ì´ë¯¸ ìºì‹œì— ì¡´ì¬í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ëŠ” ê²½ìš°ì—ëŠ” ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•Šê³  ìºì‹œì— ìˆëŠ” ê²ƒì„ ë°”ë¡œ ì „ë‹¬í•œë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> post </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> postFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">makeOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">comments</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">commentFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// post ìƒì„±</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postEntityRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">persistAndFlush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ë™ì¼í•œ post ì¡°íšŒ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newPost </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> postEntityRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findOneOrFail</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  populate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;comments&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ë‘ ë³€ìˆ˜ëŠ” ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newPost </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// true</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="sqlite-ì§€ì›">Sqlite ì§€ì›<a class="hash-link" href="#sqlite-ì§€ì›" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„±ì‹œ JVM ì§„ì˜ì—ì„œëŠ” ë³´í†µ h2 ì™€ ê°™ì€ ê²½ëŸ‰ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•œë‹¤.<br>
<!-- -->Node.js ì—ì„œëŠ” <code>sqlite</code> ë¥¼ í™œìš©í•´ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆì§€ë§Œ <code>TypeORM</code> ì—ì„œëŠ” ì»¤ìŠ¤í…€ íƒ€ì… ê´€ë ¨ ì´ìŠˆê°€ ë°œìƒí•œë‹¤.</p><p>ê¸°ë³¸ ì—”í‹°í‹° íŒŒì¼ì„ ì‚´í´ë³´ë©´ <code>createdAt</code> í•„ë“œë¥¼ js ë‚´ì¥ <code>Date</code> ëŒ€ì‹  <code>LocalDateTime</code> ì„ ì‚¬ìš©í–ˆë‹¤.</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:#d73a49">Column</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;timestamptz&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  transformer</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">LocalDateTimeType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nullable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  update</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">createdAt</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>sqlite ê´€ë ¨ ì„¤ì •ì„ í•œ í›„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx text"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">DataTypeNotSupportedError: Data type &quot;timestamptz&quot; in &quot;Comment.createdAt&quot; is not supported by &quot;better-sqlite3&quot; database.</span><br></span></code></pre><button type="button" aria-label="í´ë¦½ë³´ë“œì— ì½”ë“œ ë³µì‚¬" class="copyButton_wuS7 clean-btn">ë³µì‚¬</button></div></div><p>ê¸°ë³¸ <code>Date</code> íƒ€ì… ì‚¬ìš©í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì»¤ìŠ¤í…€ íƒ€ì…ì„ í¬ê¸°í•´ì•¼ í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.<br>
<!-- -->ë°˜ë©´ <code>MikroOMR</code> ì€ í•´ë‹¹ ì´ìŠˆê°€ ë°œìƒí•˜ì§€ ì•Šìœ¼ë©° ì»¤ìŠ¤í…€ ë‚ ì§œ íƒ€ì…ì€ unix time ìœ¼ë¡œ ë³€í™˜ë˜ì–´ ë“¤ì–´ê°„ë‹¤.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬<a class="hash-link" href="#ë§ˆë¬´ë¦¬" title="ì œëª©ìœ¼ë¡œ ë°”ë¡œ ê°€ê¸°">â€‹</a></h2><p>TypeScript ì™€ ê°™ì€ ì •ì  ì–¸ì–´ë¥¼ ì‚¬ìš©í•  ë•Œì˜ í° ì¥ì ì€ ì»´íŒŒì¼ ë‹¨ê³„ ì´ì „ì— ê°œë°œìì˜ ì‹¤ìˆ˜ë¥¼ ì‚¬ì „ì— ì¡ì•„ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.<br>
<code>TypeORM</code> ì„ ì‚¬ìš©í•˜ë©´ì„œ ìœ„ì™€ ê°™ì€ ì¥ì ì„ ì–»ê¸°ë¥¼ ë°”ëì§€ë§Œ ê·¸ë™ì•ˆ ì‚¬ìš©í•˜ë©´ì„œ ëŠë‚€ì ì€ ì´ë¦„ì— ë¹„í•´ ìƒê°ë³´ë‹¤ typesafe í•˜ì§€ ì•Šë‹¤ëŠ” ê²ƒì´ì—ˆë‹¤.</p><p>ë˜í•œ ì—¬ëŸ¬ ì´ìŠˆê°€ ë°œìƒí•´ í•´ê²°ë°©ë²•ì„ ì°¾ëŠ”ë° ë§ì€ì‹œê°„ì„ ë“¤ì˜€ê³  ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë°œì „ì†ë„ê°€ ëŠë ¤ ì•„ì‰¬ì›€ì´ ë§ì•˜ë‹¤.<br>
<!-- -->ì´ë²ˆì— <code>MikroOMR</code> ì„ ì‚´í´ë³´ë©´ì„œ ì•„ì§ ì‚¬ìš©ìê°€ ë§ì§€ ì•Šì•„ ë¬¸ì„œê°€ ì ë‹¤ëŠ” ë‹¨ì ì„ ì œì™¸í•˜ë©´ ìƒë‹¹íˆ ì˜ ë§Œë“¤ì–´ì§„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¼ê³  ëŠê¼ˆë‹¤.<br>
<!-- -->í˜„ì¬ ê¾¸ì¤€íˆ ì—…ë°ì´íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ìˆê³  <a href="https://docs.nestjs.com/recipes/mikroorm" target="_blank" rel="noopener noreferrer">nest.js ê³µì‹ë¬¸ì„œ</a> ì—ë„ í¬í•¨ë˜ì—ˆê¸° ë•Œë¬¸ì— ì‚¬ìš©ìê°€ ëŠ˜ì–´ë‚  ê°€ëŠ¥ì„±ì´ ìˆë‹¤ê³  ìƒê°í•œë‹¤.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>íƒœê·¸:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/mikroorm/">mikroorm</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/typeorm/">typeorm</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/jbl428/jbl428.github.io/edit/main/blog/2022-02-16-mikroorm-vs-typeorm/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>í˜ì´ì§€ í¸ì§‘</a></div></footer></article><div></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ íƒìƒ‰"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/2022/01/30/lazy-eval-in-kotlin/"><div class="pagination-nav__sublabel">ë‹¤ìŒ ê²Œì‹œë¬¼</div><div class="pagination-nav__label">Kotlin ìœ¼ë¡œ ì§€ì—°í‰ê°€ êµ¬í˜„í•˜ê¸°</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#typeorm" class="table-of-contents__link toc-highlight">TypeORM</a></li><li><a href="#mikroorm" class="table-of-contents__link toc-highlight">MikroORM</a></li><li><a href="#entity-ì •ì˜-ë°©ì‹" class="table-of-contents__link toc-highlight">Entity ì •ì˜ ë°©ì‹</a><ul><li><a href="#í•„ë“œì˜-null-ì„ ì–¸" class="table-of-contents__link toc-highlight">í•„ë“œì˜ NULL ì„ ì–¸</a></li><li><a href="#foreign-key-ì œì•½ì¡°ê±´-í•´ì œ" class="table-of-contents__link toc-highlight">Foreign Key ì œì•½ì¡°ê±´ í•´ì œ</a></li><li><a href="#index-ëª…" class="table-of-contents__link toc-highlight">Index ëª…</a></li><li><a href="#ì»¬ëŸ¼ëª…-ê·œì¹™" class="table-of-contents__link toc-highlight">ì»¬ëŸ¼ëª… ê·œì¹™</a></li></ul></li><li><a href="#custom-type" class="table-of-contents__link toc-highlight">Custom Type</a></li><li><a href="#querybuilder-ë¡œ-íŠ¹ì •-í•„ë“œ-select" class="table-of-contents__link toc-highlight">QueryBuilder ë¡œ íŠ¹ì • í•„ë“œ select</a></li><li><a href="#smart-query-conditions" class="table-of-contents__link toc-highlight">Smart Query Conditions</a></li><li><a href="#repository-ê¸°ë³¸-ì¡°íšŒ-ë©”ì†Œë“œ" class="table-of-contents__link toc-highlight">Repository ê¸°ë³¸ ì¡°íšŒ ë©”ì†Œë“œ</a><ul><li><a href="#join-í…Œì´ë¸”-ì»¬ëŸ¼-select" class="table-of-contents__link toc-highlight">join í…Œì´ë¸” ì»¬ëŸ¼ select</a></li><li><a href="#join-ë°©ì‹" class="table-of-contents__link toc-highlight">join ë°©ì‹</a></li><li><a href="#join-í…Œì´ë¸”-ì§€ì •" class="table-of-contents__link toc-highlight">join í…Œì´ë¸” ì§€ì •</a></li><li><a href="#where-ì ˆ-í•„ë“œ-ì§€ì •" class="table-of-contents__link toc-highlight">where ì ˆ í•„ë“œ ì§€ì •</a></li></ul></li><li><a href="#cascade-ë°-transaction" class="table-of-contents__link toc-highlight">Cascade ë° Transaction</a></li><li><a href="#sqlite-ì§€ì›" class="table-of-contents__link toc-highlight">Sqlite ì§€ì›</a></li><li><a href="#ë§ˆë¬´ë¦¬" class="table-of-contents__link toc-highlight">ë§ˆë¬´ë¦¬</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Jake Son, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0d4b7e61.js"></script>
<script src="/assets/js/main.05ff2abd.js"></script>
</body>
</html>